(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();function yE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var yh={exports:{}},dl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_;function yC(){if(I_)return dl;I_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var m in r)m!=="key"&&(l[m]=r[m])}else l=r;return r=l.ref,{$$typeof:n,type:s,key:c,ref:r!==void 0?r:null,props:l}}return dl.Fragment=e,dl.jsx=t,dl.jsxs=t,dl}var R_;function _C(){return R_||(R_=1,yh.exports=yC()),yh.exports}var b=_C(),_h={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_;function TC(){if(w_)return Ie;w_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function w(x){return x===null||typeof x!="object"?null:(x=S&&x[S]||x["@@iterator"],typeof x=="function"?x:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,J={};function j(x,X,oe){this.props=x,this.context=X,this.refs=J,this.updater=oe||G}j.prototype.isReactComponent={},j.prototype.setState=function(x,X){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,X,"setState")},j.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function se(){}se.prototype=j.prototype;function ee(x,X,oe){this.props=x,this.context=X,this.refs=J,this.updater=oe||G}var le=ee.prototype=new se;le.constructor=ee,B(le,j.prototype),le.isPureReactComponent=!0;var fe=Array.isArray;function ue(){}var D={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function N(x,X,oe){var ce=oe.ref;return{$$typeof:n,type:x,key:X,ref:ce!==void 0?ce:null,props:oe}}function L(x,X){return N(x.type,X,x.props)}function U(x){return typeof x=="object"&&x!==null&&x.$$typeof===n}function q(x){var X={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(oe){return X[oe]})}var V=/\/+/g;function ze(x,X){return typeof x=="object"&&x!==null&&x.key!=null?q(""+x.key):X.toString(36)}function st(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(ue,ue):(x.status="pending",x.then(function(X){x.status==="pending"&&(x.status="fulfilled",x.value=X)},function(X){x.status==="pending"&&(x.status="rejected",x.reason=X)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function $(x,X,oe,ce,Se){var we=typeof x;(we==="undefined"||we==="boolean")&&(x=null);var Ue=!1;if(x===null)Ue=!0;else switch(we){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(x.$$typeof){case n:case e:Ue=!0;break;case T:return Ue=x._init,$(Ue(x._payload),X,oe,ce,Se)}}if(Ue)return Se=Se(x),Ue=ce===""?"."+ze(x,0):ce,fe(Se)?(oe="",Ue!=null&&(oe=Ue.replace(V,"$&/")+"/"),$(Se,X,oe,"",function(nn){return nn})):Se!=null&&(U(Se)&&(Se=L(Se,oe+(Se.key==null||x&&x.key===Se.key?"":(""+Se.key).replace(V,"$&/")+"/")+Ue)),X.push(Se)),1;Ue=0;var mt=ce===""?".":ce+":";if(fe(x))for(var ye=0;ye<x.length;ye++)ce=x[ye],we=mt+ze(ce,ye),Ue+=$(ce,X,oe,we,Se);else if(ye=w(x),typeof ye=="function")for(x=ye.call(x),ye=0;!(ce=x.next()).done;)ce=ce.value,we=mt+ze(ce,ye++),Ue+=$(ce,X,oe,we,Se);else if(we==="object"){if(typeof x.then=="function")return $(st(x),X,oe,ce,Se);throw X=String(x),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function re(x,X,oe){if(x==null)return x;var ce=[],Se=0;return $(x,ce,"","",function(we){return X.call(oe,we,Se++)}),ce}function pe(x){if(x._status===-1){var X=x._result;X=X(),X.then(function(oe){(x._status===0||x._status===-1)&&(x._status=1,x._result=oe)},function(oe){(x._status===0||x._status===-1)&&(x._status=2,x._result=oe)}),x._status===-1&&(x._status=0,x._result=X)}if(x._status===1)return x._result.default;throw x._result}var De=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)},Be={map:re,forEach:function(x,X,oe){re(x,function(){X.apply(this,arguments)},oe)},count:function(x){var X=0;return re(x,function(){X++}),X},toArray:function(x){return re(x,function(X){return X})||[]},only:function(x){if(!U(x))throw Error("React.Children.only expected to receive a single React element child.");return x}};return Ie.Activity=E,Ie.Children=Be,Ie.Component=j,Ie.Fragment=t,Ie.Profiler=r,Ie.PureComponent=ee,Ie.StrictMode=s,Ie.Suspense=y,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(x){return D.H.useMemoCache(x)}},Ie.cache=function(x){return function(){return x.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(x,X,oe){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var ce=B({},x.props),Se=x.key;if(X!=null)for(we in X.key!==void 0&&(Se=""+X.key),X)!M.call(X,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&X.ref===void 0||(ce[we]=X[we]);var we=arguments.length-2;if(we===1)ce.children=oe;else if(1<we){for(var Ue=Array(we),mt=0;mt<we;mt++)Ue[mt]=arguments[mt+2];ce.children=Ue}return N(x.type,Se,ce)},Ie.createContext=function(x){return x={$$typeof:c,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:l,_context:x},x},Ie.createElement=function(x,X,oe){var ce,Se={},we=null;if(X!=null)for(ce in X.key!==void 0&&(we=""+X.key),X)M.call(X,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(Se[ce]=X[ce]);var Ue=arguments.length-2;if(Ue===1)Se.children=oe;else if(1<Ue){for(var mt=Array(Ue),ye=0;ye<Ue;ye++)mt[ye]=arguments[ye+2];Se.children=mt}if(x&&x.defaultProps)for(ce in Ue=x.defaultProps,Ue)Se[ce]===void 0&&(Se[ce]=Ue[ce]);return N(x,we,Se)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(x){return{$$typeof:m,render:x}},Ie.isValidElement=U,Ie.lazy=function(x){return{$$typeof:T,_payload:{_status:-1,_result:x},_init:pe}},Ie.memo=function(x,X){return{$$typeof:p,type:x,compare:X===void 0?null:X}},Ie.startTransition=function(x){var X=D.T,oe={};D.T=oe;try{var ce=x(),Se=D.S;Se!==null&&Se(oe,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(ue,De)}catch(we){De(we)}finally{X!==null&&oe.types!==null&&(X.types=oe.types),D.T=X}},Ie.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ie.use=function(x){return D.H.use(x)},Ie.useActionState=function(x,X,oe){return D.H.useActionState(x,X,oe)},Ie.useCallback=function(x,X){return D.H.useCallback(x,X)},Ie.useContext=function(x){return D.H.useContext(x)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(x,X){return D.H.useDeferredValue(x,X)},Ie.useEffect=function(x,X){return D.H.useEffect(x,X)},Ie.useEffectEvent=function(x){return D.H.useEffectEvent(x)},Ie.useId=function(){return D.H.useId()},Ie.useImperativeHandle=function(x,X,oe){return D.H.useImperativeHandle(x,X,oe)},Ie.useInsertionEffect=function(x,X){return D.H.useInsertionEffect(x,X)},Ie.useLayoutEffect=function(x,X){return D.H.useLayoutEffect(x,X)},Ie.useMemo=function(x,X){return D.H.useMemo(x,X)},Ie.useOptimistic=function(x,X){return D.H.useOptimistic(x,X)},Ie.useReducer=function(x,X,oe){return D.H.useReducer(x,X,oe)},Ie.useRef=function(x){return D.H.useRef(x)},Ie.useState=function(x){return D.H.useState(x)},Ie.useSyncExternalStore=function(x,X,oe){return D.H.useSyncExternalStore(x,X,oe)},Ie.useTransition=function(){return D.H.useTransition()},Ie.version="19.2.0",Ie}var N_;function cm(){return N_||(N_=1,_h.exports=TC()),_h.exports}var be=cm();const vC=yE(be);var Th={exports:{}},hl={},vh={exports:{}},Eh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M_;function EC(){return M_||(M_=1,(function(n){function e($,re){var pe=$.length;$.push(re);e:for(;0<pe;){var De=pe-1>>>1,Be=$[De];if(0<r(Be,re))$[De]=re,$[pe]=Be,pe=De;else break e}}function t($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var re=$[0],pe=$.pop();if(pe!==re){$[0]=pe;e:for(var De=0,Be=$.length,x=Be>>>1;De<x;){var X=2*(De+1)-1,oe=$[X],ce=X+1,Se=$[ce];if(0>r(oe,pe))ce<Be&&0>r(Se,oe)?($[De]=Se,$[ce]=pe,De=ce):($[De]=oe,$[X]=pe,De=X);else if(ce<Be&&0>r(Se,pe))$[De]=Se,$[ce]=pe,De=ce;else break e}}return re}function r($,re){var pe=$.sortIndex-re.sortIndex;return pe!==0?pe:$.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,m=c.now();n.unstable_now=function(){return c.now()-m}}var y=[],p=[],T=1,E=null,S=3,w=!1,G=!1,B=!1,J=!1,j=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function le($){for(var re=t(p);re!==null;){if(re.callback===null)s(p);else if(re.startTime<=$)s(p),re.sortIndex=re.expirationTime,e(y,re);else break;re=t(p)}}function fe($){if(B=!1,le($),!G)if(t(y)!==null)G=!0,ue||(ue=!0,q());else{var re=t(p);re!==null&&st(fe,re.startTime-$)}}var ue=!1,D=-1,M=5,N=-1;function L(){return J?!0:!(n.unstable_now()-N<M)}function U(){if(J=!1,ue){var $=n.unstable_now();N=$;var re=!0;try{e:{G=!1,B&&(B=!1,se(D),D=-1),w=!0;var pe=S;try{t:{for(le($),E=t(y);E!==null&&!(E.expirationTime>$&&L());){var De=E.callback;if(typeof De=="function"){E.callback=null,S=E.priorityLevel;var Be=De(E.expirationTime<=$);if($=n.unstable_now(),typeof Be=="function"){E.callback=Be,le($),re=!0;break t}E===t(y)&&s(y),le($)}else s(y);E=t(y)}if(E!==null)re=!0;else{var x=t(p);x!==null&&st(fe,x.startTime-$),re=!1}}break e}finally{E=null,S=pe,w=!1}re=void 0}}finally{re?q():ue=!1}}}var q;if(typeof ee=="function")q=function(){ee(U)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ze=V.port2;V.port1.onmessage=U,q=function(){ze.postMessage(null)}}else q=function(){j(U,0)};function st($,re){D=j(function(){$(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function($){switch(S){case 1:case 2:case 3:var re=3;break;default:re=S}var pe=S;S=re;try{return $()}finally{S=pe}},n.unstable_requestPaint=function(){J=!0},n.unstable_runWithPriority=function($,re){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var pe=S;S=$;try{return re()}finally{S=pe}},n.unstable_scheduleCallback=function($,re,pe){var De=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?De+pe:De):pe=De,$){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=pe+Be,$={id:T++,callback:re,priorityLevel:$,startTime:pe,expirationTime:Be,sortIndex:-1},pe>De?($.sortIndex=pe,e(p,$),t(y)===null&&$===t(p)&&(B?(se(D),D=-1):B=!0,st(fe,pe-De))):($.sortIndex=Be,e(y,$),G||w||(G=!0,ue||(ue=!0,q()))),$},n.unstable_shouldYield=L,n.unstable_wrapCallback=function($){var re=S;return function(){var pe=S;S=re;try{return $.apply(this,arguments)}finally{S=pe}}}})(Eh)),Eh}var x_;function SC(){return x_||(x_=1,vh.exports=EC()),vh.exports}var Sh={exports:{}},Zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_;function AC(){if(D_)return Zt;D_=1;var n=cm();function e(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)p+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(y,p,T){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:y,containerInfo:p,implementation:T}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Zt.createPortal=function(y,p){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(y,p,null,T)},Zt.flushSync=function(y){var p=c.T,T=s.p;try{if(c.T=null,s.p=2,y)return y()}finally{c.T=p,s.p=T,s.d.f()}},Zt.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(y,p))},Zt.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},Zt.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var T=p.as,E=m(T,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;T==="style"?s.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:w}):T==="script"&&s.d.X(y,{crossOrigin:E,integrity:S,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Zt.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var T=m(p.as,p.crossOrigin);s.d.M(y,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(y)},Zt.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var T=p.as,E=m(T,p.crossOrigin);s.d.L(y,T,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Zt.preloadModule=function(y,p){if(typeof y=="string")if(p){var T=m(p.as,p.crossOrigin);s.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(y)},Zt.requestFormReset=function(y){s.d.r(y)},Zt.unstable_batchedUpdates=function(y,p){return y(p)},Zt.useFormState=function(y,p,T){return c.H.useFormState(y,p,T)},Zt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Zt.version="19.2.0",Zt}var b_;function CC(){if(b_)return Sh.exports;b_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Sh.exports=AC(),Sh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_;function IC(){if(V_)return hl;V_=1;var n=SC(),e=cm(),t=CC();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var o=i,a=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(a=o.return),i=o.return;while(i)}return o.tag===3?a:null}function c(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function m(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function y(i){if(l(i)!==i)throw Error(s(188))}function p(i){var o=i.alternate;if(!o){if(o=l(i),o===null)throw Error(s(188));return o!==i?null:i}for(var a=i,u=o;;){var g=a.return;if(g===null)break;var _=g.alternate;if(_===null){if(u=g.return,u!==null){a=u;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===a)return y(g),i;if(_===u)return y(g),o;_=_.sibling}throw Error(s(188))}if(a.return!==u.return)a=g,u=_;else{for(var A=!1,I=g.child;I;){if(I===a){A=!0,a=g,u=_;break}if(I===u){A=!0,u=g,a=_;break}I=I.sibling}if(!A){for(I=_.child;I;){if(I===a){A=!0,a=_,u=g;break}if(I===u){A=!0,u=_,a=g;break}I=I.sibling}if(!A)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:o}function T(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=T(i),o!==null)return o;i=i.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),se=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function q(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var V=Symbol.for("react.client.reference");function ze(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===V?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case B:return"Fragment";case j:return"Profiler";case J:return"StrictMode";case fe:return"Suspense";case ue:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case G:return"Portal";case ee:return i.displayName||"Context";case se:return(i._context.displayName||"Context")+".Consumer";case le:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return o=i.displayName||null,o!==null?o:ze(i.type)||"Memo";case M:o=i._payload,i=i._init;try{return ze(i(o))}catch{}}return null}var st=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},De=[],Be=-1;function x(i){return{current:i}}function X(i){0>Be||(i.current=De[Be],De[Be]=null,Be--)}function oe(i,o){Be++,De[Be]=i.current,i.current=o}var ce=x(null),Se=x(null),we=x(null),Ue=x(null);function mt(i,o){switch(oe(we,o),oe(Se,i),oe(ce,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?Qy(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=Qy(o),i=Xy(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}X(ce),oe(ce,i)}function ye(){X(ce),X(Se),X(we)}function nn(i){i.memoizedState!==null&&oe(Ue,i);var o=ce.current,a=Xy(o,i.type);o!==a&&(oe(Se,i),oe(ce,a))}function zo(i){Se.current===i&&(X(ce),X(Se)),Ue.current===i&&(X(Ue),ll._currentValue=pe)}var Yo,Jo;function oi(i){if(Yo===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);Yo=o&&o[1]||"",Jo=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yo+i+Jo}var la=!1;function oo(i,o){if(!i||la)return"";la=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(Q){var Y=Q}Reflect.construct(i,[],te)}else{try{te.call()}catch(Q){Y=Q}i.call(te.prototype)}}else{try{throw Error()}catch(Q){Y=Q}(te=i())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(Q){if(Q&&Y&&typeof Q.stack=="string")return[Q.stack,Y.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),A=_[0],I=_[1];if(A&&I){var P=A.split(`
`),z=I.split(`
`);for(g=u=0;u<P.length&&!P[u].includes("DetermineComponentFrameRoot");)u++;for(;g<z.length&&!z[g].includes("DetermineComponentFrameRoot");)g++;if(u===P.length||g===z.length)for(u=P.length-1,g=z.length-1;1<=u&&0<=g&&P[u]!==z[g];)g--;for(;1<=u&&0<=g;u--,g--)if(P[u]!==z[g]){if(u!==1||g!==1)do if(u--,g--,0>g||P[u]!==z[g]){var Z=`
`+P[u].replace(" at new "," at ");return i.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",i.displayName)),Z}while(1<=u&&0<=g);break}}}finally{la=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?oi(a):""}function ua(i,o){switch(i.tag){case 26:case 27:case 5:return oi(i.type);case 16:return oi("Lazy");case 13:return i.child!==o&&o!==null?oi("Suspense Fallback"):oi("Suspense");case 19:return oi("SuspenseList");case 0:case 15:return oo(i.type,!1);case 11:return oo(i.type.render,!1);case 1:return oo(i.type,!0);case 31:return oi("Activity");default:return""}}function ca(i){try{var o="",a=null;do o+=ua(i,a),a=i,i=i.return;while(i);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var At=Object.prototype.hasOwnProperty,Ut=n.unstable_scheduleCallback,us=n.unstable_cancelCallback,Tf=n.unstable_shouldYield,Hl=n.unstable_requestPaint,sn=n.unstable_now,ro=n.unstable_getCurrentPriorityLevel,fa=n.unstable_ImmediatePriority,da=n.unstable_UserBlockingPriority,cs=n.unstable_NormalPriority,vf=n.unstable_LowPriority,zl=n.unstable_IdlePriority,Yl=n.log,Jl=n.unstable_setDisableYieldValue,Yn=null,Ft=null;function Nn(i){if(typeof Yl=="function"&&Jl(i),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(Yn,i)}catch{}}var yt=Math.clz32?Math.clz32:Ql,Kl=Math.log,Ko=Math.LN2;function Ql(i){return i>>>=0,i===0?32:31-(Kl(i)/Ko|0)|0}var ri=256,ao=262144,Ct=4194304;function ai(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function li(i,o,a){var u=i.pendingLanes;if(u===0)return 0;var g=0,_=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var I=u&134217727;return I!==0?(u=I&~_,u!==0?g=ai(u):(A&=I,A!==0?g=ai(A):a||(a=I&~i,a!==0&&(g=ai(a))))):(I=u&~_,I!==0?g=ai(I):A!==0?g=ai(A):a||(a=u&~i,a!==0&&(g=ai(a)))),g===0?0:o!==0&&o!==g&&(o&_)===0&&(_=g&-g,a=o&-o,_>=a||_===32&&(a&4194048)!==0)?o:g}function Jn(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Ef(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xl(){var i=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),i}function ui(i){for(var o=[],a=0;31>a;a++)o.push(i);return o}function lo(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Sf(i,o,a,u,g,_){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var I=i.entanglements,P=i.expirationTimes,z=i.hiddenUpdates;for(a=A&~a;0<a;){var Z=31-yt(a),te=1<<Z;I[Z]=0,P[Z]=-1;var Y=z[Z];if(Y!==null)for(z[Z]=null,Z=0;Z<Y.length;Z++){var Q=Y[Z];Q!==null&&(Q.lane&=-536870913)}a&=~te}u!==0&&uo(i,u,0),_!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=_&~(A&~o))}function uo(i,o,a){i.pendingLanes|=o,i.suspendedLanes&=~o;var u=31-yt(o);i.entangledLanes|=o,i.entanglements[u]=i.entanglements[u]|1073741824|a&261930}function ha(i,o){var a=i.entangledLanes|=o;for(i=i.entanglements;a;){var u=31-yt(a),g=1<<u;g&o|i[u]&o&&(i[u]|=o),a&=~g}}function ma(i,o){var a=o&-o;return a=(a&42)!==0?1:co(a),(a&(i.suspendedLanes|o))!==0?0:a}function co(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Pi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function $l(){var i=re.p;return i!==0?i:(i=window.event,i===void 0?32:__(i.type))}function Kn(i,o){var a=re.p;try{return re.p=i,o()}finally{re.p=a}}var Qn=Math.random().toString(36).slice(2),It="__reactFiber$"+Qn,qt="__reactProps$"+Qn,ci="__reactContainer$"+Qn,Qo="__reactEvents$"+Qn,Af="__reactListeners$"+Qn,Zl="__reactHandles$"+Qn,Wl="__reactResources$"+Qn,fi="__reactMarker$"+Qn;function Xo(i){delete i[It],delete i[qt],delete i[Qo],delete i[Af],delete i[Zl]}function di(i){var o=i[It];if(o)return o;for(var a=i.parentNode;a;){if(o=a[ci]||a[It]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(i=n_(i);i!==null;){if(a=i[It])return a;i=n_(i)}return o}i=a,a=i.parentNode}return null}function Mn(i){if(i=i[It]||i[ci]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function yn(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function hi(i){var o=i[Wl];return o||(o=i[Wl]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Rt(i){i[fi]=!0}var pa=new Set,ga={};function mi(i,o){pi(i,o),pi(i+"Capture",o)}function pi(i,o){for(ga[i]=o,i=0;i<o.length;i++)pa.add(o[i])}var ya=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_a={},Ta={};function jl(i){return At.call(Ta,i)?!0:At.call(_a,i)?!1:ya.test(i)?Ta[i]=!0:(_a[i]=!0,!1)}function $o(i,o,a){if(jl(o))if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+a)}}function _n(i,o,a){if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+a)}}function wt(i,o,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(o,a,""+u)}}function Ot(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function fs(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function va(i,o,a){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,_=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(A){a=""+A,_.call(this,A)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ze(i){if(!i._valueTracker){var o=fs(i)?"checked":"value";i._valueTracker=va(i,o,""+i[o])}}function fo(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var a=o.getValue(),u="";return i&&(u=fs(i)?i.checked?"true":"false":i.value),i=u,i!==a?(o.setValue(i),!0):!1}function gi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var ho=/[\n"\\]/g;function ln(i){return i.replace(ho,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Zo(i,o,a,u,g,_,A,I){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),o!=null?A==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Ot(o)):i.value!==""+Ot(o)&&(i.value=""+Ot(o)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),o!=null?Ea(i,A,Ot(o)):a!=null?Ea(i,A,Ot(a)):u!=null&&i.removeAttribute("value"),g==null&&_!=null&&(i.defaultChecked=!!_),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.name=""+Ot(I):i.removeAttribute("name")}function eu(i,o,a,u,g,_,A,I){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),o!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){Ze(i);return}a=a!=null?""+Ot(a):"",o=o!=null?""+Ot(o):a,I||o===i.value||(i.value=o),i.defaultValue=o}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=I?i.checked:!!u,i.defaultChecked=!!u,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),Ze(i)}function Ea(i,o,a){o==="number"&&gi(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function ds(i,o,a,u){if(i=i.options,o){o={};for(var g=0;g<a.length;g++)o["$"+a[g]]=!0;for(a=0;a<i.length;a++)g=o.hasOwnProperty("$"+i[a].value),i[a].selected!==g&&(i[a].selected=g),g&&u&&(i[a].defaultSelected=!0)}else{for(a=""+Ot(a),o=null,g=0;g<i.length;g++){if(i[g].value===a){i[g].selected=!0,u&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function tu(i,o,a){if(o!=null&&(o=""+Ot(o),o!==i.value&&(i.value=o),a==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=a!=null?""+Ot(a):""}function hs(i,o,a,u){if(o==null){if(u!=null){if(a!=null)throw Error(s(92));if(st(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),o=a}a=Ot(o),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u),Ze(i)}function un(i,o){if(o){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=o;return}}i.textContent=o}var nu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sa(i,o,a){var u=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":u?i.setProperty(o,a):typeof a!="number"||a===0||nu.has(o)?o==="float"?i.cssFloat=a:i[o]=(""+a).trim():i[o]=a+"px"}function Aa(i,o,a){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var g in o)u=o[g],o.hasOwnProperty(g)&&a[g]!==u&&Sa(i,g,u)}else for(var _ in o)o.hasOwnProperty(_)&&Sa(i,_,o[_])}function Wo(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ms=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jo(i){return ms.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Xn(){}var Ca=null;function xn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ps=null,yi=null;function mo(i){var o=Mn(i);if(o&&(i=o.stateNode)){var a=i[qt]||null;e:switch(i=o.stateNode,o.type){case"input":if(Zo(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ln(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var u=a[o];if(u!==i&&u.form===i.form){var g=u[qt]||null;if(!g)throw Error(s(90));Zo(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<a.length;o++)u=a[o],u.form===i.form&&fo(u)}break e;case"textarea":tu(i,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&ds(i,!!a.multiple,o,!1)}}}var er=!1;function gs(i,o,a){if(er)return i(o,a);er=!0;try{var u=i(o);return u}finally{if(er=!1,(ps!==null||yi!==null)&&($u(),ps&&(o=ps,i=yi,yi=ps=null,mo(o),i)))for(o=0;o<i.length;o++)mo(i[o])}}function $n(i,o){var a=i.stateNode;if(a===null)return null;var u=a[qt]||null;if(u===null)return null;a=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,o,typeof a));return a}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),po=!1;if(Dn)try{var et={};Object.defineProperty(et,"passive",{get:function(){po=!0}}),window.addEventListener("test",et,et),window.removeEventListener("test",et,et)}catch{po=!1}var _i=null,Ia=null,go=null;function Ra(){if(go)return go;var i,o=Ia,a=o.length,u,g="value"in _i?_i.value:_i.textContent,_=g.length;for(i=0;i<a&&o[i]===g[i];i++);var A=a-i;for(u=1;u<=A&&o[a-u]===g[_-u];u++);return go=g.slice(i,1<u?1-u:void 0)}function yo(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Ui(){return!0}function Zn(){return!1}function Ht(i){function o(a,u,g,_,A){this._reactName=a,this._targetInst=g,this.type=u,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(a=i[I],this[I]=a?a(_):_[I]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ui:Zn,this.isPropagationStopped=Zn,this}return E(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),o}var Li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ti=Ht(Li),ys=E({},Li,{view:0,detail:0}),wa=Ht(ys),_s,tr,vi,nr=E({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ts,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==vi&&(vi&&i.type==="mousemove"?(_s=i.screenX-vi.screenX,tr=i.screenY-vi.screenY):tr=_s=0,vi=i),_s)},movementY:function(i){return"movementY"in i?i.movementY:tr}}),Na=Ht(nr),_o=E({},nr,{dataTransfer:0}),su=Ht(_o),ou=E({},ys,{relatedTarget:0}),To=Ht(ou),Ma=E({},Li,{animationName:0,elapsedTime:0,pseudoElement:0}),ru=Ht(Ma),ir=E({},Li,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),au=Ht(ir),lu=E({},Li,{data:0}),Ei=Ht(lu),uu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function du(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=fu[i])?!!o[i]:!1}function Ts(){return du}var on=E({},ys,{key:function(i){if(i.key){var o=uu[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=yo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?cu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ts,charCode:function(i){return i.type==="keypress"?yo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?yo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),hu=Ht(on),mu=E({},nr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ki=Ht(mu),h=E({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ts}),v=Ht(h),C=E({},Li,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=Ht(C),F=E({},nr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),K=Ht(F),ae=E({},Li,{newState:0,oldState:0}),Ne=Ht(ae),_t=[9,13,27,32],Qe=Dn&&"CompositionEvent"in window,ft=null;Dn&&"documentMode"in document&&(ft=document.documentMode);var bn=Dn&&"TextEvent"in window&&!ft,Si=Dn&&(!Qe||ft&&8<ft&&11>=ft),Wn=" ",jn=!1;function vo(i,o){switch(i){case"keyup":return _t.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sr(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var or=!1;function BS(i,o){switch(i){case"compositionend":return sr(o);case"keypress":return o.which!==32?null:(jn=!0,Wn);case"textInput":return i=o.data,i===Wn&&jn?null:i;default:return null}}function FS(i,o){if(or)return i==="compositionend"||!Qe&&vo(i,o)?(i=Ra(),go=Ia=_i=null,or=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Si&&o.locale!=="ko"?null:o.data;default:return null}}var HS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function op(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!HS[i.type]:o==="textarea"}function rp(i,o,a,u){ps?yi?yi.push(u):yi=[u]:ps=u,o=ic(o,"onChange"),0<o.length&&(a=new Ti("onChange","change",null,a,u),i.push({event:a,listeners:o}))}var xa=null,Da=null;function zS(i){Fy(i,0)}function pu(i){var o=yn(i);if(fo(o))return i}function ap(i,o){if(i==="change")return o}var lp=!1;if(Dn){var Cf;if(Dn){var If="oninput"in document;if(!If){var up=document.createElement("div");up.setAttribute("oninput","return;"),If=typeof up.oninput=="function"}Cf=If}else Cf=!1;lp=Cf&&(!document.documentMode||9<document.documentMode)}function cp(){xa&&(xa.detachEvent("onpropertychange",fp),Da=xa=null)}function fp(i){if(i.propertyName==="value"&&pu(Da)){var o=[];rp(o,Da,i,xn(i)),gs(zS,o)}}function YS(i,o,a){i==="focusin"?(cp(),xa=o,Da=a,xa.attachEvent("onpropertychange",fp)):i==="focusout"&&cp()}function JS(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return pu(Da)}function KS(i,o){if(i==="click")return pu(o)}function QS(i,o){if(i==="input"||i==="change")return pu(o)}function XS(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Tn=typeof Object.is=="function"?Object.is:XS;function ba(i,o){if(Tn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var a=Object.keys(i),u=Object.keys(o);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var g=a[u];if(!At.call(o,g)||!Tn(i[g],o[g]))return!1}return!0}function dp(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function hp(i,o){var a=dp(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=o&&u>=o)return{node:a,offset:o-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=dp(a)}}function mp(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?mp(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function pp(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=gi(i.document);o instanceof i.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)i=o.contentWindow;else break;o=gi(i.document)}return o}function Rf(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var $S=Dn&&"documentMode"in document&&11>=document.documentMode,rr=null,wf=null,Va=null,Nf=!1;function gp(i,o,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Nf||rr==null||rr!==gi(u)||(u=rr,"selectionStart"in u&&Rf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Va&&ba(Va,u)||(Va=u,u=ic(wf,"onSelect"),0<u.length&&(o=new Ti("onSelect","select",null,o,a),i.push({event:o,listeners:u}),o.target=rr)))}function Eo(i,o){var a={};return a[i.toLowerCase()]=o.toLowerCase(),a["Webkit"+i]="webkit"+o,a["Moz"+i]="moz"+o,a}var ar={animationend:Eo("Animation","AnimationEnd"),animationiteration:Eo("Animation","AnimationIteration"),animationstart:Eo("Animation","AnimationStart"),transitionrun:Eo("Transition","TransitionRun"),transitionstart:Eo("Transition","TransitionStart"),transitioncancel:Eo("Transition","TransitionCancel"),transitionend:Eo("Transition","TransitionEnd")},Mf={},yp={};Dn&&(yp=document.createElement("div").style,"AnimationEvent"in window||(delete ar.animationend.animation,delete ar.animationiteration.animation,delete ar.animationstart.animation),"TransitionEvent"in window||delete ar.transitionend.transition);function So(i){if(Mf[i])return Mf[i];if(!ar[i])return i;var o=ar[i],a;for(a in o)if(o.hasOwnProperty(a)&&a in yp)return Mf[i]=o[a];return i}var _p=So("animationend"),Tp=So("animationiteration"),vp=So("animationstart"),ZS=So("transitionrun"),WS=So("transitionstart"),jS=So("transitioncancel"),Ep=So("transitionend"),Sp=new Map,xf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xf.push("scrollEnd");function ei(i,o){Sp.set(i,o),mi(o,[i])}var gu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Vn=[],lr=0,Df=0;function yu(){for(var i=lr,o=Df=lr=0;o<i;){var a=Vn[o];Vn[o++]=null;var u=Vn[o];Vn[o++]=null;var g=Vn[o];Vn[o++]=null;var _=Vn[o];if(Vn[o++]=null,u!==null&&g!==null){var A=u.pending;A===null?g.next=g:(g.next=A.next,A.next=g),u.pending=g}_!==0&&Ap(a,g,_)}}function _u(i,o,a,u){Vn[lr++]=i,Vn[lr++]=o,Vn[lr++]=a,Vn[lr++]=u,Df|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function bf(i,o,a,u){return _u(i,o,a,u),Tu(i)}function Ao(i,o){return _u(i,null,null,o),Tu(i)}function Ap(i,o,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var g=!1,_=i.return;_!==null;)_.childLanes|=a,u=_.alternate,u!==null&&(u.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(g=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,g&&o!==null&&(g=31-yt(a),i=_.hiddenUpdates,u=i[g],u===null?i[g]=[o]:u.push(o),o.lane=a|536870912),_):null}function Tu(i){if(50<tl)throw tl=0,Bd=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var ur={};function eA(i,o,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(i,o,a,u){return new eA(i,o,a,u)}function Vf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function qi(i,o){var a=i.alternate;return a===null?(a=vn(i.tag,o,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=o,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,o=i.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Cp(i,o){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,o=a.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function vu(i,o,a,u,g,_){var A=0;if(u=i,typeof i=="function")Vf(i)&&(A=1);else if(typeof i=="string")A=oC(i,a,ce.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=vn(31,a,o,g),i.elementType=N,i.lanes=_,i;case B:return Co(a.children,g,_,o);case J:A=8,g|=24;break;case j:return i=vn(12,a,o,g|2),i.elementType=j,i.lanes=_,i;case fe:return i=vn(13,a,o,g),i.elementType=fe,i.lanes=_,i;case ue:return i=vn(19,a,o,g),i.elementType=ue,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case ee:A=10;break e;case se:A=9;break e;case le:A=11;break e;case D:A=14;break e;case M:A=16,u=null;break e}A=29,a=Error(s(130,i===null?"null":typeof i,"")),u=null}return o=vn(A,a,o,g),o.elementType=i,o.type=u,o.lanes=_,o}function Co(i,o,a,u){return i=vn(7,i,u,o),i.lanes=a,i}function Pf(i,o,a){return i=vn(6,i,null,o),i.lanes=a,i}function Ip(i){var o=vn(18,null,null,0);return o.stateNode=i,o}function Uf(i,o,a){return o=vn(4,i.children!==null?i.children:[],i.key,o),o.lanes=a,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Rp=new WeakMap;function Pn(i,o){if(typeof i=="object"&&i!==null){var a=Rp.get(i);return a!==void 0?a:(o={value:i,source:o,stack:ca(o)},Rp.set(i,o),o)}return{value:i,source:o,stack:ca(o)}}var cr=[],fr=0,Eu=null,Pa=0,Un=[],Ln=0,vs=null,Ai=1,Ci="";function Oi(i,o){cr[fr++]=Pa,cr[fr++]=Eu,Eu=i,Pa=o}function wp(i,o,a){Un[Ln++]=Ai,Un[Ln++]=Ci,Un[Ln++]=vs,vs=i;var u=Ai;i=Ci;var g=32-yt(u)-1;u&=~(1<<g),a+=1;var _=32-yt(o)+g;if(30<_){var A=g-g%5;_=(u&(1<<A)-1).toString(32),u>>=A,g-=A,Ai=1<<32-yt(o)+g|a<<g|u,Ci=_+i}else Ai=1<<_|a<<g|u,Ci=i}function Lf(i){i.return!==null&&(Oi(i,1),wp(i,1,0))}function kf(i){for(;i===Eu;)Eu=cr[--fr],cr[fr]=null,Pa=cr[--fr],cr[fr]=null;for(;i===vs;)vs=Un[--Ln],Un[Ln]=null,Ci=Un[--Ln],Un[Ln]=null,Ai=Un[--Ln],Un[Ln]=null}function Np(i,o){Un[Ln++]=Ai,Un[Ln++]=Ci,Un[Ln++]=vs,Ai=o.id,Ci=o.overflow,vs=i}var zt=null,at=null,Ge=!1,Es=null,kn=!1,qf=Error(s(519));function Ss(i){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ua(Pn(o,i)),qf}function Mp(i){var o=i.stateNode,a=i.type,u=i.memoizedProps;switch(o[It]=i,o[qt]=u,a){case"dialog":Pe("cancel",o),Pe("close",o);break;case"iframe":case"object":case"embed":Pe("load",o);break;case"video":case"audio":for(a=0;a<il.length;a++)Pe(il[a],o);break;case"source":Pe("error",o);break;case"img":case"image":case"link":Pe("error",o),Pe("load",o);break;case"details":Pe("toggle",o);break;case"input":Pe("invalid",o),eu(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Pe("invalid",o);break;case"textarea":Pe("invalid",o),hs(o,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||u.suppressHydrationWarning===!0||Jy(o.textContent,a)?(u.popover!=null&&(Pe("beforetoggle",o),Pe("toggle",o)),u.onScroll!=null&&Pe("scroll",o),u.onScrollEnd!=null&&Pe("scrollend",o),u.onClick!=null&&(o.onclick=Xn),o=!0):o=!1,o||Ss(i,!0)}function xp(i){for(zt=i.return;zt;)switch(zt.tag){case 5:case 31:case 13:kn=!1;return;case 27:case 3:kn=!0;return;default:zt=zt.return}}function dr(i){if(i!==zt)return!1;if(!Ge)return xp(i),Ge=!0,!1;var o=i.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||nh(i.type,i.memoizedProps)),a=!a),a&&at&&Ss(i),xp(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));at=t_(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));at=t_(i)}else o===27?(o=at,Ls(i.type)?(i=ah,ah=null,at=i):at=o):at=zt?On(i.stateNode.nextSibling):null;return!0}function Io(){at=zt=null,Ge=!1}function Of(){var i=Es;return i!==null&&(hn===null?hn=i:hn.push.apply(hn,i),Es=null),i}function Ua(i){Es===null?Es=[i]:Es.push(i)}var Gf=x(null),Ro=null,Gi=null;function As(i,o,a){oe(Gf,o._currentValue),o._currentValue=a}function Bi(i){i._currentValue=Gf.current,X(Gf)}function Bf(i,o,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),i===a)break;i=i.return}}function Ff(i,o,a,u){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var _=g.dependencies;if(_!==null){var A=g.child;_=_.firstContext;e:for(;_!==null;){var I=_;_=g;for(var P=0;P<o.length;P++)if(I.context===o[P]){_.lanes|=a,I=_.alternate,I!==null&&(I.lanes|=a),Bf(_.return,a,i),u||(A=null);break e}_=I.next}}else if(g.tag===18){if(A=g.return,A===null)throw Error(s(341));A.lanes|=a,_=A.alternate,_!==null&&(_.lanes|=a),Bf(A,a,i),A=null}else A=g.child;if(A!==null)A.return=g;else for(A=g;A!==null;){if(A===i){A=null;break}if(g=A.sibling,g!==null){g.return=A.return,A=g;break}A=A.return}g=A}}function hr(i,o,a,u){i=null;for(var g=o,_=!1;g!==null;){if(!_){if((g.flags&524288)!==0)_=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var A=g.alternate;if(A===null)throw Error(s(387));if(A=A.memoizedProps,A!==null){var I=g.type;Tn(g.pendingProps.value,A.value)||(i!==null?i.push(I):i=[I])}}else if(g===Ue.current){if(A=g.alternate,A===null)throw Error(s(387));A.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(ll):i=[ll])}g=g.return}i!==null&&Ff(o,i,a,u),o.flags|=262144}function Su(i){for(i=i.firstContext;i!==null;){if(!Tn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function wo(i){Ro=i,Gi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Yt(i){return Dp(Ro,i)}function Au(i,o){return Ro===null&&wo(i),Dp(i,o)}function Dp(i,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},Gi===null){if(i===null)throw Error(s(308));Gi=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Gi=Gi.next=o;return a}var tA=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){o.aborted=!0,i.forEach(function(a){return a()})}},nA=n.unstable_scheduleCallback,iA=n.unstable_NormalPriority,Nt={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hf(){return{controller:new tA,data:new Map,refCount:0}}function La(i){i.refCount--,i.refCount===0&&nA(iA,function(){i.controller.abort()})}var ka=null,zf=0,mr=0,pr=null;function sA(i,o){if(ka===null){var a=ka=[];zf=0,mr=Kd(),pr={status:"pending",value:void 0,then:function(u){a.push(u)}}}return zf++,o.then(bp,bp),o}function bp(){if(--zf===0&&ka!==null){pr!==null&&(pr.status="fulfilled");var i=ka;ka=null,mr=0,pr=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function oA(i,o){var a=[],u={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return i.then(function(){u.status="fulfilled",u.value=o;for(var g=0;g<a.length;g++)(0,a[g])(o)},function(g){for(u.status="rejected",u.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),u}var Vp=$.S;$.S=function(i,o){gy=sn(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&sA(i,o),Vp!==null&&Vp(i,o)};var No=x(null);function Yf(){var i=No.current;return i!==null?i:ot.pooledCache}function Cu(i,o){o===null?oe(No,No.current):oe(No,o.pool)}function Pp(){var i=Yf();return i===null?null:{parent:Nt._currentValue,pool:i}}var gr=Error(s(460)),Jf=Error(s(474)),Iu=Error(s(542)),Ru={then:function(){}};function Up(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Lp(i,o,a){switch(a=i[a],a===void 0?i.push(o):a!==o&&(o.then(Xn,Xn),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,qp(i),i;default:if(typeof o.status=="string")o.then(Xn,Xn);else{if(i=ot,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(u){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=u}},function(u){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,qp(i),i}throw xo=o,gr}}function Mo(i){try{var o=i._init;return o(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(xo=a,gr):a}}var xo=null;function kp(){if(xo===null)throw Error(s(459));var i=xo;return xo=null,i}function qp(i){if(i===gr||i===Iu)throw Error(s(483))}var yr=null,qa=0;function wu(i){var o=qa;return qa+=1,yr===null&&(yr=[]),Lp(yr,i,o)}function Oa(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Nu(i,o){throw o.$$typeof===S?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Op(i){function o(O,k){if(i){var H=O.deletions;H===null?(O.deletions=[k],O.flags|=16):H.push(k)}}function a(O,k){if(!i)return null;for(;k!==null;)o(O,k),k=k.sibling;return null}function u(O){for(var k=new Map;O!==null;)O.key!==null?k.set(O.key,O):k.set(O.index,O),O=O.sibling;return k}function g(O,k){return O=qi(O,k),O.index=0,O.sibling=null,O}function _(O,k,H){return O.index=H,i?(H=O.alternate,H!==null?(H=H.index,H<k?(O.flags|=67108866,k):H):(O.flags|=67108866,k)):(O.flags|=1048576,k)}function A(O){return i&&O.alternate===null&&(O.flags|=67108866),O}function I(O,k,H,W){return k===null||k.tag!==6?(k=Pf(H,O.mode,W),k.return=O,k):(k=g(k,H),k.return=O,k)}function P(O,k,H,W){var Te=H.type;return Te===B?Z(O,k,H.props.children,W,H.key):k!==null&&(k.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===M&&Mo(Te)===k.type)?(k=g(k,H.props),Oa(k,H),k.return=O,k):(k=vu(H.type,H.key,H.props,null,O.mode,W),Oa(k,H),k.return=O,k)}function z(O,k,H,W){return k===null||k.tag!==4||k.stateNode.containerInfo!==H.containerInfo||k.stateNode.implementation!==H.implementation?(k=Uf(H,O.mode,W),k.return=O,k):(k=g(k,H.children||[]),k.return=O,k)}function Z(O,k,H,W,Te){return k===null||k.tag!==7?(k=Co(H,O.mode,W,Te),k.return=O,k):(k=g(k,H),k.return=O,k)}function te(O,k,H){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Pf(""+k,O.mode,H),k.return=O,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case w:return H=vu(k.type,k.key,k.props,null,O.mode,H),Oa(H,k),H.return=O,H;case G:return k=Uf(k,O.mode,H),k.return=O,k;case M:return k=Mo(k),te(O,k,H)}if(st(k)||q(k))return k=Co(k,O.mode,H,null),k.return=O,k;if(typeof k.then=="function")return te(O,wu(k),H);if(k.$$typeof===ee)return te(O,Au(O,k),H);Nu(O,k)}return null}function Y(O,k,H,W){var Te=k!==null?k.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Te!==null?null:I(O,k,""+H,W);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case w:return H.key===Te?P(O,k,H,W):null;case G:return H.key===Te?z(O,k,H,W):null;case M:return H=Mo(H),Y(O,k,H,W)}if(st(H)||q(H))return Te!==null?null:Z(O,k,H,W,null);if(typeof H.then=="function")return Y(O,k,wu(H),W);if(H.$$typeof===ee)return Y(O,k,Au(O,H),W);Nu(O,H)}return null}function Q(O,k,H,W,Te){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return O=O.get(H)||null,I(k,O,""+W,Te);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case w:return O=O.get(W.key===null?H:W.key)||null,P(k,O,W,Te);case G:return O=O.get(W.key===null?H:W.key)||null,z(k,O,W,Te);case M:return W=Mo(W),Q(O,k,H,W,Te)}if(st(W)||q(W))return O=O.get(H)||null,Z(k,O,W,Te,null);if(typeof W.then=="function")return Q(O,k,H,wu(W),Te);if(W.$$typeof===ee)return Q(O,k,H,Au(k,W),Te);Nu(k,W)}return null}function ge(O,k,H,W){for(var Te=null,Ye=null,_e=k,xe=k=0,ke=null;_e!==null&&xe<H.length;xe++){_e.index>xe?(ke=_e,_e=null):ke=_e.sibling;var Je=Y(O,_e,H[xe],W);if(Je===null){_e===null&&(_e=ke);break}i&&_e&&Je.alternate===null&&o(O,_e),k=_(Je,k,xe),Ye===null?Te=Je:Ye.sibling=Je,Ye=Je,_e=ke}if(xe===H.length)return a(O,_e),Ge&&Oi(O,xe),Te;if(_e===null){for(;xe<H.length;xe++)_e=te(O,H[xe],W),_e!==null&&(k=_(_e,k,xe),Ye===null?Te=_e:Ye.sibling=_e,Ye=_e);return Ge&&Oi(O,xe),Te}for(_e=u(_e);xe<H.length;xe++)ke=Q(_e,O,xe,H[xe],W),ke!==null&&(i&&ke.alternate!==null&&_e.delete(ke.key===null?xe:ke.key),k=_(ke,k,xe),Ye===null?Te=ke:Ye.sibling=ke,Ye=ke);return i&&_e.forEach(function(Bs){return o(O,Bs)}),Ge&&Oi(O,xe),Te}function Ee(O,k,H,W){if(H==null)throw Error(s(151));for(var Te=null,Ye=null,_e=k,xe=k=0,ke=null,Je=H.next();_e!==null&&!Je.done;xe++,Je=H.next()){_e.index>xe?(ke=_e,_e=null):ke=_e.sibling;var Bs=Y(O,_e,Je.value,W);if(Bs===null){_e===null&&(_e=ke);break}i&&_e&&Bs.alternate===null&&o(O,_e),k=_(Bs,k,xe),Ye===null?Te=Bs:Ye.sibling=Bs,Ye=Bs,_e=ke}if(Je.done)return a(O,_e),Ge&&Oi(O,xe),Te;if(_e===null){for(;!Je.done;xe++,Je=H.next())Je=te(O,Je.value,W),Je!==null&&(k=_(Je,k,xe),Ye===null?Te=Je:Ye.sibling=Je,Ye=Je);return Ge&&Oi(O,xe),Te}for(_e=u(_e);!Je.done;xe++,Je=H.next())Je=Q(_e,O,xe,Je.value,W),Je!==null&&(i&&Je.alternate!==null&&_e.delete(Je.key===null?xe:Je.key),k=_(Je,k,xe),Ye===null?Te=Je:Ye.sibling=Je,Ye=Je);return i&&_e.forEach(function(gC){return o(O,gC)}),Ge&&Oi(O,xe),Te}function it(O,k,H,W){if(typeof H=="object"&&H!==null&&H.type===B&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case w:e:{for(var Te=H.key;k!==null;){if(k.key===Te){if(Te=H.type,Te===B){if(k.tag===7){a(O,k.sibling),W=g(k,H.props.children),W.return=O,O=W;break e}}else if(k.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===M&&Mo(Te)===k.type){a(O,k.sibling),W=g(k,H.props),Oa(W,H),W.return=O,O=W;break e}a(O,k);break}else o(O,k);k=k.sibling}H.type===B?(W=Co(H.props.children,O.mode,W,H.key),W.return=O,O=W):(W=vu(H.type,H.key,H.props,null,O.mode,W),Oa(W,H),W.return=O,O=W)}return A(O);case G:e:{for(Te=H.key;k!==null;){if(k.key===Te)if(k.tag===4&&k.stateNode.containerInfo===H.containerInfo&&k.stateNode.implementation===H.implementation){a(O,k.sibling),W=g(k,H.children||[]),W.return=O,O=W;break e}else{a(O,k);break}else o(O,k);k=k.sibling}W=Uf(H,O.mode,W),W.return=O,O=W}return A(O);case M:return H=Mo(H),it(O,k,H,W)}if(st(H))return ge(O,k,H,W);if(q(H)){if(Te=q(H),typeof Te!="function")throw Error(s(150));return H=Te.call(H),Ee(O,k,H,W)}if(typeof H.then=="function")return it(O,k,wu(H),W);if(H.$$typeof===ee)return it(O,k,Au(O,H),W);Nu(O,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,k!==null&&k.tag===6?(a(O,k.sibling),W=g(k,H),W.return=O,O=W):(a(O,k),W=Pf(H,O.mode,W),W.return=O,O=W),A(O)):a(O,k)}return function(O,k,H,W){try{qa=0;var Te=it(O,k,H,W);return yr=null,Te}catch(_e){if(_e===gr||_e===Iu)throw _e;var Ye=vn(29,_e,null,O.mode);return Ye.lanes=W,Ye.return=O,Ye}finally{}}}var Do=Op(!0),Gp=Op(!1),Cs=!1;function Kf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qf(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Is(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Rs(i,o,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Xe&2)!==0){var g=u.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),u.pending=o,o=Tu(i),Ap(i,null,a),o}return _u(i,u,o,a),Tu(i)}function Ga(i,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var u=o.lanes;u&=i.pendingLanes,a|=u,o.lanes=a,ha(i,a)}}function Xf(i,o){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var g=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?g=_=A:_=_.next=A,a=a.next}while(a!==null);_===null?g=_=o:_=_.next=o}else g=_=o;a={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=o:i.next=o,a.lastBaseUpdate=o}var $f=!1;function Ba(){if($f){var i=pr;if(i!==null)throw i}}function Fa(i,o,a,u){$f=!1;var g=i.updateQueue;Cs=!1;var _=g.firstBaseUpdate,A=g.lastBaseUpdate,I=g.shared.pending;if(I!==null){g.shared.pending=null;var P=I,z=P.next;P.next=null,A===null?_=z:A.next=z,A=P;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,I=Z.lastBaseUpdate,I!==A&&(I===null?Z.firstBaseUpdate=z:I.next=z,Z.lastBaseUpdate=P))}if(_!==null){var te=g.baseState;A=0,Z=z=P=null,I=_;do{var Y=I.lane&-536870913,Q=Y!==I.lane;if(Q?(Le&Y)===Y:(u&Y)===Y){Y!==0&&Y===mr&&($f=!0),Z!==null&&(Z=Z.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var ge=i,Ee=I;Y=o;var it=a;switch(Ee.tag){case 1:if(ge=Ee.payload,typeof ge=="function"){te=ge.call(it,te,Y);break e}te=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ee.payload,Y=typeof ge=="function"?ge.call(it,te,Y):ge,Y==null)break e;te=E({},te,Y);break e;case 2:Cs=!0}}Y=I.callback,Y!==null&&(i.flags|=64,Q&&(i.flags|=8192),Q=g.callbacks,Q===null?g.callbacks=[Y]:Q.push(Y))}else Q={lane:Y,tag:I.tag,payload:I.payload,callback:I.callback,next:null},Z===null?(z=Z=Q,P=te):Z=Z.next=Q,A|=Y;if(I=I.next,I===null){if(I=g.shared.pending,I===null)break;Q=I,I=Q.next,Q.next=null,g.lastBaseUpdate=Q,g.shared.pending=null}}while(!0);Z===null&&(P=te),g.baseState=P,g.firstBaseUpdate=z,g.lastBaseUpdate=Z,_===null&&(g.shared.lanes=0),Ds|=A,i.lanes=A,i.memoizedState=te}}function Bp(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function Fp(i,o){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Bp(a[i],o)}var _r=x(null),Mu=x(0);function Hp(i,o){i=$i,oe(Mu,i),oe(_r,o),$i=i|o.baseLanes}function Zf(){oe(Mu,$i),oe(_r,_r.current)}function Wf(){$i=Mu.current,X(_r),X(Mu)}var En=x(null),qn=null;function ws(i){var o=i.alternate;oe(Tt,Tt.current&1),oe(En,i),qn===null&&(o===null||_r.current!==null||o.memoizedState!==null)&&(qn=i)}function jf(i){oe(Tt,Tt.current),oe(En,i),qn===null&&(qn=i)}function zp(i){i.tag===22?(oe(Tt,Tt.current),oe(En,i),qn===null&&(qn=i)):Ns()}function Ns(){oe(Tt,Tt.current),oe(En,En.current)}function Sn(i){X(En),qn===i&&(qn=null),X(Tt)}var Tt=x(0);function xu(i){for(var o=i;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||oh(a)||rh(a)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Fi=0,Me=null,tt=null,Mt=null,Du=!1,Tr=!1,bo=!1,bu=0,Ha=0,vr=null,rA=0;function pt(){throw Error(s(321))}function ed(i,o){if(o===null)return!1;for(var a=0;a<o.length&&a<i.length;a++)if(!Tn(i[a],o[a]))return!1;return!0}function td(i,o,a,u,g,_){return Fi=_,Me=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,$.H=i===null||i.memoizedState===null?wg:gd,bo=!1,_=a(u,g),bo=!1,Tr&&(_=Jp(o,a,u,g)),Yp(i),_}function Yp(i){$.H=Ja;var o=tt!==null&&tt.next!==null;if(Fi=0,Mt=tt=Me=null,Du=!1,Ha=0,vr=null,o)throw Error(s(300));i===null||xt||(i=i.dependencies,i!==null&&Su(i)&&(xt=!0))}function Jp(i,o,a,u){Me=i;var g=0;do{if(Tr&&(vr=null),Ha=0,Tr=!1,25<=g)throw Error(s(301));if(g+=1,Mt=tt=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}$.H=Ng,_=o(a,u)}while(Tr);return _}function aA(){var i=$.H,o=i.useState()[0];return o=typeof o.then=="function"?za(o):o,i=i.useState()[0],(tt!==null?tt.memoizedState:null)!==i&&(Me.flags|=1024),o}function nd(){var i=bu!==0;return bu=0,i}function id(i,o,a){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~a}function sd(i){if(Du){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Du=!1}Fi=0,Mt=tt=Me=null,Tr=!1,Ha=bu=0,vr=null}function rn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?Me.memoizedState=Mt=i:Mt=Mt.next=i,Mt}function vt(){if(tt===null){var i=Me.alternate;i=i!==null?i.memoizedState:null}else i=tt.next;var o=Mt===null?Me.memoizedState:Mt.next;if(o!==null)Mt=o,tt=i;else{if(i===null)throw Me.alternate===null?Error(s(467)):Error(s(310));tt=i,i={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Mt===null?Me.memoizedState=Mt=i:Mt=Mt.next=i}return Mt}function Vu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function za(i){var o=Ha;return Ha+=1,vr===null&&(vr=[]),i=Lp(vr,i,o),o=Me,(Mt===null?o.memoizedState:Mt.next)===null&&(o=o.alternate,$.H=o===null||o.memoizedState===null?wg:gd),i}function Pu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return za(i);if(i.$$typeof===ee)return Yt(i)}throw Error(s(438,String(i)))}function od(i){var o=null,a=Me.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var u=Me.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=Vu(),Me.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(i),u=0;u<i;u++)a[u]=L;return o.index++,a}function Hi(i,o){return typeof o=="function"?o(i):o}function Uu(i){var o=vt();return rd(o,tt,i)}function rd(i,o,a){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var g=i.baseQueue,_=u.pending;if(_!==null){if(g!==null){var A=g.next;g.next=_.next,_.next=A}o.baseQueue=g=_,u.pending=null}if(_=i.baseState,g===null)i.memoizedState=_;else{o=g.next;var I=A=null,P=null,z=o,Z=!1;do{var te=z.lane&-536870913;if(te!==z.lane?(Le&te)===te:(Fi&te)===te){var Y=z.revertLane;if(Y===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),te===mr&&(Z=!0);else if((Fi&Y)===Y){z=z.next,Y===mr&&(Z=!0);continue}else te={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},P===null?(I=P=te,A=_):P=P.next=te,Me.lanes|=Y,Ds|=Y;te=z.action,bo&&a(_,te),_=z.hasEagerState?z.eagerState:a(_,te)}else Y={lane:te,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},P===null?(I=P=Y,A=_):P=P.next=Y,Me.lanes|=te,Ds|=te;z=z.next}while(z!==null&&z!==o);if(P===null?A=_:P.next=I,!Tn(_,i.memoizedState)&&(xt=!0,Z&&(a=pr,a!==null)))throw a;i.memoizedState=_,i.baseState=A,i.baseQueue=P,u.lastRenderedState=_}return g===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function ad(i){var o=vt(),a=o.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var u=a.dispatch,g=a.pending,_=o.memoizedState;if(g!==null){a.pending=null;var A=g=g.next;do _=i(_,A.action),A=A.next;while(A!==g);Tn(_,o.memoizedState)||(xt=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),a.lastRenderedState=_}return[_,u]}function Kp(i,o,a){var u=Me,g=vt(),_=Ge;if(_){if(a===void 0)throw Error(s(407));a=a()}else a=o();var A=!Tn((tt||g).memoizedState,a);if(A&&(g.memoizedState=a,xt=!0),g=g.queue,cd($p.bind(null,u,g,i),[i]),g.getSnapshot!==o||A||Mt!==null&&Mt.memoizedState.tag&1){if(u.flags|=2048,Er(9,{destroy:void 0},Xp.bind(null,u,g,a,o),null),ot===null)throw Error(s(349));_||(Fi&127)!==0||Qp(u,o,a)}return a}function Qp(i,o,a){i.flags|=16384,i={getSnapshot:o,value:a},o=Me.updateQueue,o===null?(o=Vu(),Me.updateQueue=o,o.stores=[i]):(a=o.stores,a===null?o.stores=[i]:a.push(i))}function Xp(i,o,a,u){o.value=a,o.getSnapshot=u,Zp(o)&&Wp(i)}function $p(i,o,a){return a(function(){Zp(o)&&Wp(i)})}function Zp(i){var o=i.getSnapshot;i=i.value;try{var a=o();return!Tn(i,a)}catch{return!0}}function Wp(i){var o=Ao(i,2);o!==null&&mn(o,i,2)}function ld(i){var o=rn();if(typeof i=="function"){var a=i;if(i=a(),bo){Nn(!0);try{a()}finally{Nn(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:i},o}function jp(i,o,a,u){return i.baseState=a,rd(i,tt,typeof u=="function"?u:Hi)}function lA(i,o,a,u,g){if(qu(i))throw Error(s(485));if(i=o.action,i!==null){var _={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};$.T!==null?a(!0):_.isTransition=!1,u(_),a=o.pending,a===null?(_.next=o.pending=_,eg(o,_)):(_.next=a.next,o.pending=a.next=_)}}function eg(i,o){var a=o.action,u=o.payload,g=i.state;if(o.isTransition){var _=$.T,A={};$.T=A;try{var I=a(g,u),P=$.S;P!==null&&P(A,I),tg(i,o,I)}catch(z){ud(i,o,z)}finally{_!==null&&A.types!==null&&(_.types=A.types),$.T=_}}else try{_=a(g,u),tg(i,o,_)}catch(z){ud(i,o,z)}}function tg(i,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){ng(i,o,u)},function(u){return ud(i,o,u)}):ng(i,o,a)}function ng(i,o,a){o.status="fulfilled",o.value=a,ig(o),i.state=a,o=i.pending,o!==null&&(a=o.next,a===o?i.pending=null:(a=a.next,o.next=a,eg(i,a)))}function ud(i,o,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=a,ig(o),o=o.next;while(o!==u)}i.action=null}function ig(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function sg(i,o){return o}function og(i,o){if(Ge){var a=ot.formState;if(a!==null){e:{var u=Me;if(Ge){if(at){t:{for(var g=at,_=kn;g.nodeType!==8;){if(!_){g=null;break t}if(g=On(g.nextSibling),g===null){g=null;break t}}_=g.data,g=_==="F!"||_==="F"?g:null}if(g){at=On(g.nextSibling),u=g.data==="F!";break e}}Ss(u)}u=!1}u&&(o=a[0])}}return a=rn(),a.memoizedState=a.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sg,lastRenderedState:o},a.queue=u,a=Cg.bind(null,Me,u),u.dispatch=a,u=ld(!1),_=pd.bind(null,Me,!1,u.queue),u=rn(),g={state:o,dispatch:null,action:i,pending:null},u.queue=g,a=lA.bind(null,Me,g,_,a),g.dispatch=a,u.memoizedState=i,[o,a,!1]}function rg(i){var o=vt();return ag(o,tt,i)}function ag(i,o,a){if(o=rd(i,o,sg)[0],i=Uu(Hi)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=za(o)}catch(A){throw A===gr?Iu:A}else u=o;o=vt();var g=o.queue,_=g.dispatch;return a!==o.memoizedState&&(Me.flags|=2048,Er(9,{destroy:void 0},uA.bind(null,g,a),null)),[u,_,i]}function uA(i,o){i.action=o}function lg(i){var o=vt(),a=tt;if(a!==null)return ag(o,a,i);vt(),o=o.memoizedState,a=vt();var u=a.queue.dispatch;return a.memoizedState=i,[o,u,!1]}function Er(i,o,a,u){return i={tag:i,create:a,deps:u,inst:o,next:null},o=Me.updateQueue,o===null&&(o=Vu(),Me.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,o.lastEffect=i),i}function ug(){return vt().memoizedState}function Lu(i,o,a,u){var g=rn();Me.flags|=i,g.memoizedState=Er(1|o,{destroy:void 0},a,u===void 0?null:u)}function ku(i,o,a,u){var g=vt();u=u===void 0?null:u;var _=g.memoizedState.inst;tt!==null&&u!==null&&ed(u,tt.memoizedState.deps)?g.memoizedState=Er(o,_,a,u):(Me.flags|=i,g.memoizedState=Er(1|o,_,a,u))}function cg(i,o){Lu(8390656,8,i,o)}function cd(i,o){ku(2048,8,i,o)}function cA(i){Me.flags|=4;var o=Me.updateQueue;if(o===null)o=Vu(),Me.updateQueue=o,o.events=[i];else{var a=o.events;a===null?o.events=[i]:a.push(i)}}function fg(i){var o=vt().memoizedState;return cA({ref:o,nextImpl:i}),function(){if((Xe&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function dg(i,o){return ku(4,2,i,o)}function hg(i,o){return ku(4,4,i,o)}function mg(i,o){if(typeof o=="function"){i=i();var a=o(i);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function pg(i,o,a){a=a!=null?a.concat([i]):null,ku(4,4,mg.bind(null,o,i),a)}function fd(){}function gg(i,o){var a=vt();o=o===void 0?null:o;var u=a.memoizedState;return o!==null&&ed(o,u[1])?u[0]:(a.memoizedState=[i,o],i)}function yg(i,o){var a=vt();o=o===void 0?null:o;var u=a.memoizedState;if(o!==null&&ed(o,u[1]))return u[0];if(u=i(),bo){Nn(!0);try{i()}finally{Nn(!1)}}return a.memoizedState=[u,o],u}function dd(i,o,a){return a===void 0||(Fi&1073741824)!==0&&(Le&261930)===0?i.memoizedState=o:(i.memoizedState=a,i=_y(),Me.lanes|=i,Ds|=i,a)}function _g(i,o,a,u){return Tn(a,o)?a:_r.current!==null?(i=dd(i,a,u),Tn(i,o)||(xt=!0),i):(Fi&42)===0||(Fi&1073741824)!==0&&(Le&261930)===0?(xt=!0,i.memoizedState=a):(i=_y(),Me.lanes|=i,Ds|=i,o)}function Tg(i,o,a,u,g){var _=re.p;re.p=_!==0&&8>_?_:8;var A=$.T,I={};$.T=I,pd(i,!1,o,a);try{var P=g(),z=$.S;if(z!==null&&z(I,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var Z=oA(P,u);Ya(i,o,Z,In(i))}else Ya(i,o,u,In(i))}catch(te){Ya(i,o,{then:function(){},status:"rejected",reason:te},In())}finally{re.p=_,A!==null&&I.types!==null&&(A.types=I.types),$.T=A}}function fA(){}function hd(i,o,a,u){if(i.tag!==5)throw Error(s(476));var g=vg(i).queue;Tg(i,g,o,pe,a===null?fA:function(){return Eg(i),a(u)})}function vg(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:pe},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:a},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function Eg(i){var o=vg(i);o.next===null&&(o=i.alternate.memoizedState),Ya(i,o.next.queue,{},In())}function md(){return Yt(ll)}function Sg(){return vt().memoizedState}function Ag(){return vt().memoizedState}function dA(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var a=In();i=Is(a);var u=Rs(o,i,a);u!==null&&(mn(u,o,a),Ga(u,o,a)),o={cache:Hf()},i.payload=o;return}o=o.return}}function hA(i,o,a){var u=In();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},qu(i)?Ig(o,a):(a=bf(i,o,a,u),a!==null&&(mn(a,i,u),Rg(a,o,u)))}function Cg(i,o,a){var u=In();Ya(i,o,a,u)}function Ya(i,o,a,u){var g={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(qu(i))Ig(o,g);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var A=o.lastRenderedState,I=_(A,a);if(g.hasEagerState=!0,g.eagerState=I,Tn(I,A))return _u(i,o,g,0),ot===null&&yu(),!1}catch{}finally{}if(a=bf(i,o,g,u),a!==null)return mn(a,i,u),Rg(a,o,u),!0}return!1}function pd(i,o,a,u){if(u={lane:2,revertLane:Kd(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},qu(i)){if(o)throw Error(s(479))}else o=bf(i,a,u,2),o!==null&&mn(o,i,2)}function qu(i){var o=i.alternate;return i===Me||o!==null&&o===Me}function Ig(i,o){Tr=Du=!0;var a=i.pending;a===null?o.next=o:(o.next=a.next,a.next=o),i.pending=o}function Rg(i,o,a){if((a&4194048)!==0){var u=o.lanes;u&=i.pendingLanes,a|=u,o.lanes=a,ha(i,a)}}var Ja={readContext:Yt,use:Pu,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt};Ja.useEffectEvent=pt;var wg={readContext:Yt,use:Pu,useCallback:function(i,o){return rn().memoizedState=[i,o===void 0?null:o],i},useContext:Yt,useEffect:cg,useImperativeHandle:function(i,o,a){a=a!=null?a.concat([i]):null,Lu(4194308,4,mg.bind(null,o,i),a)},useLayoutEffect:function(i,o){return Lu(4194308,4,i,o)},useInsertionEffect:function(i,o){Lu(4,2,i,o)},useMemo:function(i,o){var a=rn();o=o===void 0?null:o;var u=i();if(bo){Nn(!0);try{i()}finally{Nn(!1)}}return a.memoizedState=[u,o],u},useReducer:function(i,o,a){var u=rn();if(a!==void 0){var g=a(o);if(bo){Nn(!0);try{a(o)}finally{Nn(!1)}}}else g=o;return u.memoizedState=u.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},u.queue=i,i=i.dispatch=hA.bind(null,Me,i),[u.memoizedState,i]},useRef:function(i){var o=rn();return i={current:i},o.memoizedState=i},useState:function(i){i=ld(i);var o=i.queue,a=Cg.bind(null,Me,o);return o.dispatch=a,[i.memoizedState,a]},useDebugValue:fd,useDeferredValue:function(i,o){var a=rn();return dd(a,i,o)},useTransition:function(){var i=ld(!1);return i=Tg.bind(null,Me,i.queue,!0,!1),rn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,a){var u=Me,g=rn();if(Ge){if(a===void 0)throw Error(s(407));a=a()}else{if(a=o(),ot===null)throw Error(s(349));(Le&127)!==0||Qp(u,o,a)}g.memoizedState=a;var _={value:a,getSnapshot:o};return g.queue=_,cg($p.bind(null,u,_,i),[i]),u.flags|=2048,Er(9,{destroy:void 0},Xp.bind(null,u,_,a,o),null),a},useId:function(){var i=rn(),o=ot.identifierPrefix;if(Ge){var a=Ci,u=Ai;a=(u&~(1<<32-yt(u)-1)).toString(32)+a,o="_"+o+"R_"+a,a=bu++,0<a&&(o+="H"+a.toString(32)),o+="_"}else a=rA++,o="_"+o+"r_"+a.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:md,useFormState:og,useActionState:og,useOptimistic:function(i){var o=rn();o.memoizedState=o.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=pd.bind(null,Me,!0,a),a.dispatch=o,[i,o]},useMemoCache:od,useCacheRefresh:function(){return rn().memoizedState=dA.bind(null,Me)},useEffectEvent:function(i){var o=rn(),a={impl:i};return o.memoizedState=a,function(){if((Xe&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},gd={readContext:Yt,use:Pu,useCallback:gg,useContext:Yt,useEffect:cd,useImperativeHandle:pg,useInsertionEffect:dg,useLayoutEffect:hg,useMemo:yg,useReducer:Uu,useRef:ug,useState:function(){return Uu(Hi)},useDebugValue:fd,useDeferredValue:function(i,o){var a=vt();return _g(a,tt.memoizedState,i,o)},useTransition:function(){var i=Uu(Hi)[0],o=vt().memoizedState;return[typeof i=="boolean"?i:za(i),o]},useSyncExternalStore:Kp,useId:Sg,useHostTransitionStatus:md,useFormState:rg,useActionState:rg,useOptimistic:function(i,o){var a=vt();return jp(a,tt,i,o)},useMemoCache:od,useCacheRefresh:Ag};gd.useEffectEvent=fg;var Ng={readContext:Yt,use:Pu,useCallback:gg,useContext:Yt,useEffect:cd,useImperativeHandle:pg,useInsertionEffect:dg,useLayoutEffect:hg,useMemo:yg,useReducer:ad,useRef:ug,useState:function(){return ad(Hi)},useDebugValue:fd,useDeferredValue:function(i,o){var a=vt();return tt===null?dd(a,i,o):_g(a,tt.memoizedState,i,o)},useTransition:function(){var i=ad(Hi)[0],o=vt().memoizedState;return[typeof i=="boolean"?i:za(i),o]},useSyncExternalStore:Kp,useId:Sg,useHostTransitionStatus:md,useFormState:lg,useActionState:lg,useOptimistic:function(i,o){var a=vt();return tt!==null?jp(a,tt,i,o):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:od,useCacheRefresh:Ag};Ng.useEffectEvent=fg;function yd(i,o,a,u){o=i.memoizedState,a=a(u,o),a=a==null?o:E({},o,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var _d={enqueueSetState:function(i,o,a){i=i._reactInternals;var u=In(),g=Is(u);g.payload=o,a!=null&&(g.callback=a),o=Rs(i,g,u),o!==null&&(mn(o,i,u),Ga(o,i,u))},enqueueReplaceState:function(i,o,a){i=i._reactInternals;var u=In(),g=Is(u);g.tag=1,g.payload=o,a!=null&&(g.callback=a),o=Rs(i,g,u),o!==null&&(mn(o,i,u),Ga(o,i,u))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var a=In(),u=Is(a);u.tag=2,o!=null&&(u.callback=o),o=Rs(i,u,a),o!==null&&(mn(o,i,a),Ga(o,i,a))}};function Mg(i,o,a,u,g,_,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,_,A):o.prototype&&o.prototype.isPureReactComponent?!ba(a,u)||!ba(g,_):!0}function xg(i,o,a,u){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,u),o.state!==i&&_d.enqueueReplaceState(o,o.state,null)}function Vo(i,o){var a=o;if("ref"in o){a={};for(var u in o)u!=="ref"&&(a[u]=o[u])}if(i=i.defaultProps){a===o&&(a=E({},a));for(var g in i)a[g]===void 0&&(a[g]=i[g])}return a}function Dg(i){gu(i)}function bg(i){console.error(i)}function Vg(i){gu(i)}function Ou(i,o){try{var a=i.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function Pg(i,o,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Td(i,o,a){return a=Is(a),a.tag=3,a.payload={element:null},a.callback=function(){Ou(i,o)},a}function Ug(i){return i=Is(i),i.tag=3,i}function Lg(i,o,a,u){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var _=u.value;i.payload=function(){return g(_)},i.callback=function(){Pg(o,a,u)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){Pg(o,a,u),typeof g!="function"&&(bs===null?bs=new Set([this]):bs.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function mA(i,o,a,u,g){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=a.alternate,o!==null&&hr(o,a,g,!0),a=En.current,a!==null){switch(a.tag){case 31:case 13:return qn===null?Zu():a.alternate===null&&gt===0&&(gt=3),a.flags&=-257,a.flags|=65536,a.lanes=g,u===Ru?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([u]):o.add(u),zd(i,u,g)),!1;case 22:return a.flags|=65536,u===Ru?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([u]):a.add(u)),zd(i,u,g)),!1}throw Error(s(435,a.tag))}return zd(i,u,g),Zu(),!1}if(Ge)return o=En.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,u!==qf&&(i=Error(s(422),{cause:u}),Ua(Pn(i,a)))):(u!==qf&&(o=Error(s(423),{cause:u}),Ua(Pn(o,a))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,u=Pn(u,a),g=Td(i.stateNode,u,g),Xf(i,g),gt!==4&&(gt=2)),!1;var _=Error(s(520),{cause:u});if(_=Pn(_,a),el===null?el=[_]:el.push(_),gt!==4&&(gt=2),o===null)return!0;u=Pn(u,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,i=g&-g,a.lanes|=i,i=Td(a.stateNode,u,i),Xf(a,i),!1;case 1:if(o=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(bs===null||!bs.has(_))))return a.flags|=65536,g&=-g,a.lanes|=g,g=Ug(g),Lg(g,i,a,u),Xf(a,g),!1}a=a.return}while(a!==null);return!1}var vd=Error(s(461)),xt=!1;function Jt(i,o,a,u){o.child=i===null?Gp(o,null,a,u):Do(o,i.child,a,u)}function kg(i,o,a,u,g){a=a.render;var _=o.ref;if("ref"in u){var A={};for(var I in u)I!=="ref"&&(A[I]=u[I])}else A=u;return wo(o),u=td(i,o,a,A,_,g),I=nd(),i!==null&&!xt?(id(i,o,g),zi(i,o,g)):(Ge&&I&&Lf(o),o.flags|=1,Jt(i,o,u,g),o.child)}function qg(i,o,a,u,g){if(i===null){var _=a.type;return typeof _=="function"&&!Vf(_)&&_.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=_,Og(i,o,_,u,g)):(i=vu(a.type,null,u,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(_=i.child,!Nd(i,g)){var A=_.memoizedProps;if(a=a.compare,a=a!==null?a:ba,a(A,u)&&i.ref===o.ref)return zi(i,o,g)}return o.flags|=1,i=qi(_,u),i.ref=o.ref,i.return=o,o.child=i}function Og(i,o,a,u,g){if(i!==null){var _=i.memoizedProps;if(ba(_,u)&&i.ref===o.ref)if(xt=!1,o.pendingProps=u=_,Nd(i,g))(i.flags&131072)!==0&&(xt=!0);else return o.lanes=i.lanes,zi(i,o,g)}return Ed(i,o,a,u,g)}function Gg(i,o,a,u){var g=u.children,_=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(u=o.child=i.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~_}else u=0,o.child=null;return Bg(i,o,_,a,u)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Cu(o,_!==null?_.cachePool:null),_!==null?Hp(o,_):Zf(),zp(o);else return u=o.lanes=536870912,Bg(i,o,_!==null?_.baseLanes|a:a,a,u)}else _!==null?(Cu(o,_.cachePool),Hp(o,_),Ns(),o.memoizedState=null):(i!==null&&Cu(o,null),Zf(),Ns());return Jt(i,o,g,a),o.child}function Ka(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Bg(i,o,a,u,g){var _=Yf();return _=_===null?null:{parent:Nt._currentValue,pool:_},o.memoizedState={baseLanes:a,cachePool:_},i!==null&&Cu(o,null),Zf(),zp(o),i!==null&&hr(i,o,u,!0),o.childLanes=g,null}function Gu(i,o){return o=Fu({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function Fg(i,o,a){return Do(o,i.child,null,a),i=Gu(o,o.pendingProps),i.flags|=2,Sn(o),o.memoizedState=null,i}function pA(i,o,a){var u=o.pendingProps,g=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(Ge){if(u.mode==="hidden")return i=Gu(o,u),o.lanes=536870912,Ka(null,i);if(jf(o),(i=at)?(i=e_(i,kn),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:vs!==null?{id:Ai,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},a=Ip(i),a.return=o,o.child=a,zt=o,at=null)):i=null,i===null)throw Ss(o);return o.lanes=536870912,null}return Gu(o,u)}var _=i.memoizedState;if(_!==null){var A=_.dehydrated;if(jf(o),g)if(o.flags&256)o.flags&=-257,o=Fg(i,o,a);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(s(558));else if(xt||hr(i,o,a,!1),g=(a&i.childLanes)!==0,xt||g){if(u=ot,u!==null&&(A=ma(u,a),A!==0&&A!==_.retryLane))throw _.retryLane=A,Ao(i,A),mn(u,i,A),vd;Zu(),o=Fg(i,o,a)}else i=_.treeContext,at=On(A.nextSibling),zt=o,Ge=!0,Es=null,kn=!1,i!==null&&Np(o,i),o=Gu(o,u),o.flags|=4096;return o}return i=qi(i.child,{mode:u.mode,children:u.children}),i.ref=o.ref,o.child=i,i.return=o,i}function Bu(i,o){var a=o.ref;if(a===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(o.flags|=4194816)}}function Ed(i,o,a,u,g){return wo(o),a=td(i,o,a,u,void 0,g),u=nd(),i!==null&&!xt?(id(i,o,g),zi(i,o,g)):(Ge&&u&&Lf(o),o.flags|=1,Jt(i,o,a,g),o.child)}function Hg(i,o,a,u,g,_){return wo(o),o.updateQueue=null,a=Jp(o,u,a,g),Yp(i),u=nd(),i!==null&&!xt?(id(i,o,_),zi(i,o,_)):(Ge&&u&&Lf(o),o.flags|=1,Jt(i,o,a,_),o.child)}function zg(i,o,a,u,g){if(wo(o),o.stateNode===null){var _=ur,A=a.contextType;typeof A=="object"&&A!==null&&(_=Yt(A)),_=new a(u,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=_d,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=u,_.state=o.memoizedState,_.refs={},Kf(o),A=a.contextType,_.context=typeof A=="object"&&A!==null?Yt(A):ur,_.state=o.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(yd(o,a,A,u),_.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&_d.enqueueReplaceState(_,_.state,null),Fa(o,u,_,g),Ba(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(i===null){_=o.stateNode;var I=o.memoizedProps,P=Vo(a,I);_.props=P;var z=_.context,Z=a.contextType;A=ur,typeof Z=="object"&&Z!==null&&(A=Yt(Z));var te=a.getDerivedStateFromProps;Z=typeof te=="function"||typeof _.getSnapshotBeforeUpdate=="function",I=o.pendingProps!==I,Z||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I||z!==A)&&xg(o,_,u,A),Cs=!1;var Y=o.memoizedState;_.state=Y,Fa(o,u,_,g),Ba(),z=o.memoizedState,I||Y!==z||Cs?(typeof te=="function"&&(yd(o,a,te,u),z=o.memoizedState),(P=Cs||Mg(o,a,P,u,Y,z,A))?(Z||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=z),_.props=u,_.state=z,_.context=A,u=P):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{_=o.stateNode,Qf(i,o),A=o.memoizedProps,Z=Vo(a,A),_.props=Z,te=o.pendingProps,Y=_.context,z=a.contextType,P=ur,typeof z=="object"&&z!==null&&(P=Yt(z)),I=a.getDerivedStateFromProps,(z=typeof I=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==te||Y!==P)&&xg(o,_,u,P),Cs=!1,Y=o.memoizedState,_.state=Y,Fa(o,u,_,g),Ba();var Q=o.memoizedState;A!==te||Y!==Q||Cs||i!==null&&i.dependencies!==null&&Su(i.dependencies)?(typeof I=="function"&&(yd(o,a,I,u),Q=o.memoizedState),(Z=Cs||Mg(o,a,Z,u,Y,Q,P)||i!==null&&i.dependencies!==null&&Su(i.dependencies))?(z||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,Q,P),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,Q,P)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=Q),_.props=u,_.state=Q,_.context=P,u=Z):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(o.flags|=1024),u=!1)}return _=u,Bu(i,o),u=(o.flags&128)!==0,_||u?(_=o.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,i!==null&&u?(o.child=Do(o,i.child,null,g),o.child=Do(o,null,a,g)):Jt(i,o,a,g),o.memoizedState=_.state,i=o.child):i=zi(i,o,g),i}function Yg(i,o,a,u){return Io(),o.flags|=256,Jt(i,o,a,u),o.child}var Sd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ad(i){return{baseLanes:i,cachePool:Pp()}}function Cd(i,o,a){return i=i!==null?i.childLanes&~a:0,o&&(i|=Cn),i}function Jg(i,o,a){var u=o.pendingProps,g=!1,_=(o.flags&128)!==0,A;if((A=_)||(A=i!==null&&i.memoizedState===null?!1:(Tt.current&2)!==0),A&&(g=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,i===null){if(Ge){if(g?ws(o):Ns(),(i=at)?(i=e_(i,kn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:vs!==null?{id:Ai,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},a=Ip(i),a.return=o,o.child=a,zt=o,at=null)):i=null,i===null)throw Ss(o);return rh(i)?o.lanes=32:o.lanes=536870912,null}var I=u.children;return u=u.fallback,g?(Ns(),g=o.mode,I=Fu({mode:"hidden",children:I},g),u=Co(u,g,a,null),I.return=o,u.return=o,I.sibling=u,o.child=I,u=o.child,u.memoizedState=Ad(a),u.childLanes=Cd(i,A,a),o.memoizedState=Sd,Ka(null,u)):(ws(o),Id(o,I))}var P=i.memoizedState;if(P!==null&&(I=P.dehydrated,I!==null)){if(_)o.flags&256?(ws(o),o.flags&=-257,o=Rd(i,o,a)):o.memoizedState!==null?(Ns(),o.child=i.child,o.flags|=128,o=null):(Ns(),I=u.fallback,g=o.mode,u=Fu({mode:"visible",children:u.children},g),I=Co(I,g,a,null),I.flags|=2,u.return=o,I.return=o,u.sibling=I,o.child=u,Do(o,i.child,null,a),u=o.child,u.memoizedState=Ad(a),u.childLanes=Cd(i,A,a),o.memoizedState=Sd,o=Ka(null,u));else if(ws(o),rh(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var z=A.dgst;A=z,u=Error(s(419)),u.stack="",u.digest=A,Ua({value:u,source:null,stack:null}),o=Rd(i,o,a)}else if(xt||hr(i,o,a,!1),A=(a&i.childLanes)!==0,xt||A){if(A=ot,A!==null&&(u=ma(A,a),u!==0&&u!==P.retryLane))throw P.retryLane=u,Ao(i,u),mn(A,i,u),vd;oh(I)||Zu(),o=Rd(i,o,a)}else oh(I)?(o.flags|=192,o.child=i.child,o=null):(i=P.treeContext,at=On(I.nextSibling),zt=o,Ge=!0,Es=null,kn=!1,i!==null&&Np(o,i),o=Id(o,u.children),o.flags|=4096);return o}return g?(Ns(),I=u.fallback,g=o.mode,P=i.child,z=P.sibling,u=qi(P,{mode:"hidden",children:u.children}),u.subtreeFlags=P.subtreeFlags&65011712,z!==null?I=qi(z,I):(I=Co(I,g,a,null),I.flags|=2),I.return=o,u.return=o,u.sibling=I,o.child=u,Ka(null,u),u=o.child,I=i.child.memoizedState,I===null?I=Ad(a):(g=I.cachePool,g!==null?(P=Nt._currentValue,g=g.parent!==P?{parent:P,pool:P}:g):g=Pp(),I={baseLanes:I.baseLanes|a,cachePool:g}),u.memoizedState=I,u.childLanes=Cd(i,A,a),o.memoizedState=Sd,Ka(i.child,u)):(ws(o),a=i.child,i=a.sibling,a=qi(a,{mode:"visible",children:u.children}),a.return=o,a.sibling=null,i!==null&&(A=o.deletions,A===null?(o.deletions=[i],o.flags|=16):A.push(i)),o.child=a,o.memoizedState=null,a)}function Id(i,o){return o=Fu({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Fu(i,o){return i=vn(22,i,null,o),i.lanes=0,i}function Rd(i,o,a){return Do(o,i.child,null,a),i=Id(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Kg(i,o,a){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o),Bf(i.return,o,a)}function wd(i,o,a,u,g,_){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:g,treeForkCount:_}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=u,A.tail=a,A.tailMode=g,A.treeForkCount=_)}function Qg(i,o,a){var u=o.pendingProps,g=u.revealOrder,_=u.tail;u=u.children;var A=Tt.current,I=(A&2)!==0;if(I?(A=A&1|2,o.flags|=128):A&=1,oe(Tt,A),Jt(i,o,u,a),u=Ge?Pa:0,!I&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Kg(i,a,o);else if(i.tag===19)Kg(i,a,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(a=o.child,g=null;a!==null;)i=a.alternate,i!==null&&xu(i)===null&&(g=a),a=a.sibling;a=g,a===null?(g=o.child,o.child=null):(g=a.sibling,a.sibling=null),wd(o,!1,g,a,_,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&xu(i)===null){o.child=g;break}i=g.sibling,g.sibling=a,a=g,g=i}wd(o,!0,a,null,_,u);break;case"together":wd(o,!1,null,null,void 0,u);break;default:o.memoizedState=null}return o.child}function zi(i,o,a){if(i!==null&&(o.dependencies=i.dependencies),Ds|=o.lanes,(a&o.childLanes)===0)if(i!==null){if(hr(i,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,a=qi(i,i.pendingProps),o.child=a,a.return=o;i.sibling!==null;)i=i.sibling,a=a.sibling=qi(i,i.pendingProps),a.return=o;a.sibling=null}return o.child}function Nd(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Su(i)))}function gA(i,o,a){switch(o.tag){case 3:mt(o,o.stateNode.containerInfo),As(o,Nt,i.memoizedState.cache),Io();break;case 27:case 5:nn(o);break;case 4:mt(o,o.stateNode.containerInfo);break;case 10:As(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,jf(o),null;break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(ws(o),o.flags|=128,null):(a&o.child.childLanes)!==0?Jg(i,o,a):(ws(o),i=zi(i,o,a),i!==null?i.sibling:null);ws(o);break;case 19:var g=(i.flags&128)!==0;if(u=(a&o.childLanes)!==0,u||(hr(i,o,a,!1),u=(a&o.childLanes)!==0),g){if(u)return Qg(i,o,a);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),oe(Tt,Tt.current),u)break;return null;case 22:return o.lanes=0,Gg(i,o,a,o.pendingProps);case 24:As(o,Nt,i.memoizedState.cache)}return zi(i,o,a)}function Xg(i,o,a){if(i!==null)if(i.memoizedProps!==o.pendingProps)xt=!0;else{if(!Nd(i,a)&&(o.flags&128)===0)return xt=!1,gA(i,o,a);xt=(i.flags&131072)!==0}else xt=!1,Ge&&(o.flags&1048576)!==0&&wp(o,Pa,o.index);switch(o.lanes=0,o.tag){case 16:e:{var u=o.pendingProps;if(i=Mo(o.elementType),o.type=i,typeof i=="function")Vf(i)?(u=Vo(i,u),o.tag=1,o=zg(null,o,i,u,a)):(o.tag=0,o=Ed(null,o,i,u,a));else{if(i!=null){var g=i.$$typeof;if(g===le){o.tag=11,o=kg(null,o,i,u,a);break e}else if(g===D){o.tag=14,o=qg(null,o,i,u,a);break e}}throw o=ze(i)||i,Error(s(306,o,""))}}return o;case 0:return Ed(i,o,o.type,o.pendingProps,a);case 1:return u=o.type,g=Vo(u,o.pendingProps),zg(i,o,u,g,a);case 3:e:{if(mt(o,o.stateNode.containerInfo),i===null)throw Error(s(387));u=o.pendingProps;var _=o.memoizedState;g=_.element,Qf(i,o),Fa(o,u,null,a);var A=o.memoizedState;if(u=A.cache,As(o,Nt,u),u!==_.cache&&Ff(o,[Nt],a,!0),Ba(),u=A.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=Yg(i,o,u,a);break e}else if(u!==g){g=Pn(Error(s(424)),o),Ua(g),o=Yg(i,o,u,a);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(at=On(i.firstChild),zt=o,Ge=!0,Es=null,kn=!0,a=Gp(o,null,u,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Io(),u===g){o=zi(i,o,a);break e}Jt(i,o,u,a)}o=o.child}return o;case 26:return Bu(i,o),i===null?(a=r_(o.type,null,o.pendingProps,null))?o.memoizedState=a:Ge||(a=o.type,i=o.pendingProps,u=sc(we.current).createElement(a),u[It]=o,u[qt]=i,Kt(u,a,i),Rt(u),o.stateNode=u):o.memoizedState=r_(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return nn(o),i===null&&Ge&&(u=o.stateNode=i_(o.type,o.pendingProps,we.current),zt=o,kn=!0,g=at,Ls(o.type)?(ah=g,at=On(u.firstChild)):at=g),Jt(i,o,o.pendingProps.children,a),Bu(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&Ge&&((g=u=at)&&(u=JA(u,o.type,o.pendingProps,kn),u!==null?(o.stateNode=u,zt=o,at=On(u.firstChild),kn=!1,g=!0):g=!1),g||Ss(o)),nn(o),g=o.type,_=o.pendingProps,A=i!==null?i.memoizedProps:null,u=_.children,nh(g,_)?u=null:A!==null&&nh(g,A)&&(o.flags|=32),o.memoizedState!==null&&(g=td(i,o,aA,null,null,a),ll._currentValue=g),Bu(i,o),Jt(i,o,u,a),o.child;case 6:return i===null&&Ge&&((i=a=at)&&(a=KA(a,o.pendingProps,kn),a!==null?(o.stateNode=a,zt=o,at=null,i=!0):i=!1),i||Ss(o)),null;case 13:return Jg(i,o,a);case 4:return mt(o,o.stateNode.containerInfo),u=o.pendingProps,i===null?o.child=Do(o,null,u,a):Jt(i,o,u,a),o.child;case 11:return kg(i,o,o.type,o.pendingProps,a);case 7:return Jt(i,o,o.pendingProps,a),o.child;case 8:return Jt(i,o,o.pendingProps.children,a),o.child;case 12:return Jt(i,o,o.pendingProps.children,a),o.child;case 10:return u=o.pendingProps,As(o,o.type,u.value),Jt(i,o,u.children,a),o.child;case 9:return g=o.type._context,u=o.pendingProps.children,wo(o),g=Yt(g),u=u(g),o.flags|=1,Jt(i,o,u,a),o.child;case 14:return qg(i,o,o.type,o.pendingProps,a);case 15:return Og(i,o,o.type,o.pendingProps,a);case 19:return Qg(i,o,a);case 31:return pA(i,o,a);case 22:return Gg(i,o,a,o.pendingProps);case 24:return wo(o),u=Yt(Nt),i===null?(g=Yf(),g===null&&(g=ot,_=Hf(),g.pooledCache=_,_.refCount++,_!==null&&(g.pooledCacheLanes|=a),g=_),o.memoizedState={parent:u,cache:g},Kf(o),As(o,Nt,g)):((i.lanes&a)!==0&&(Qf(i,o),Fa(o,null,null,a),Ba()),g=i.memoizedState,_=o.memoizedState,g.parent!==u?(g={parent:u,cache:u},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),As(o,Nt,u)):(u=_.cache,As(o,Nt,u),u!==g.cache&&Ff(o,[Nt],a,!0))),Jt(i,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function Yi(i){i.flags|=4}function Md(i,o,a,u,g){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(Sy())i.flags|=8192;else throw xo=Ru,Jf}else i.flags&=-16777217}function $g(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!f_(o))if(Sy())i.flags|=8192;else throw xo=Ru,Jf}function Hu(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Xl():536870912,i.lanes|=o,Ir|=o)}function Qa(i,o){if(!Ge)switch(i.tailMode){case"hidden":o=i.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function lt(i){var o=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(o)for(var g=i.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=u,i.childLanes=a,o}function yA(i,o,a){var u=o.pendingProps;switch(kf(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(o),null;case 1:return lt(o),null;case 3:return a=o.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Bi(Nt),ye(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(dr(o)?Yi(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Of())),lt(o),null;case 26:var g=o.type,_=o.memoizedState;return i===null?(Yi(o),_!==null?(lt(o),$g(o,_)):(lt(o),Md(o,g,null,u,a))):_?_!==i.memoizedState?(Yi(o),lt(o),$g(o,_)):(lt(o),o.flags&=-16777217):(i=i.memoizedProps,i!==u&&Yi(o),lt(o),Md(o,g,i,u,a)),null;case 27:if(zo(o),a=we.current,g=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==u&&Yi(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return lt(o),null}i=ce.current,dr(o)?Mp(o):(i=i_(g,u,a),o.stateNode=i,Yi(o))}return lt(o),null;case 5:if(zo(o),g=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==u&&Yi(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return lt(o),null}if(_=ce.current,dr(o))Mp(o);else{var A=sc(we.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?A.createElement("select",{is:u.is}):A.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?A.createElement(g,{is:u.is}):A.createElement(g)}}_[It]=o,_[qt]=u;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=_;e:switch(Kt(_,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Yi(o)}}return lt(o),Md(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,a),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==u&&Yi(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(s(166));if(i=we.current,dr(o)){if(i=o.stateNode,a=o.memoizedProps,u=null,g=zt,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}i[It]=o,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||Jy(i.nodeValue,a)),i||Ss(o,!0)}else i=sc(i).createTextNode(u),i[It]=o,o.stateNode=i}return lt(o),null;case 31:if(a=o.memoizedState,i===null||i.memoizedState!==null){if(u=dr(o),a!==null){if(i===null){if(!u)throw Error(s(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[It]=o}else Io(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;lt(o),i=!1}else a=Of(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return o.flags&256?(Sn(o),o):(Sn(o),null);if((o.flags&128)!==0)throw Error(s(558))}return lt(o),null;case 13:if(u=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=dr(o),u!==null&&u.dehydrated!==null){if(i===null){if(!g)throw Error(s(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[It]=o}else Io(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;lt(o),g=!1}else g=Of(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(Sn(o),o):(Sn(o),null)}return Sn(o),(o.flags&128)!==0?(o.lanes=a,o):(a=u!==null,i=i!==null&&i.memoizedState!==null,a&&(u=o.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==g&&(u.flags|=2048)),a!==i&&a&&(o.child.flags|=8192),Hu(o,o.updateQueue),lt(o),null);case 4:return ye(),i===null&&Zd(o.stateNode.containerInfo),lt(o),null;case 10:return Bi(o.type),lt(o),null;case 19:if(X(Tt),u=o.memoizedState,u===null)return lt(o),null;if(g=(o.flags&128)!==0,_=u.rendering,_===null)if(g)Qa(u,!1);else{if(gt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(_=xu(i),_!==null){for(o.flags|=128,Qa(u,!1),i=_.updateQueue,o.updateQueue=i,Hu(o,i),o.subtreeFlags=0,i=a,a=o.child;a!==null;)Cp(a,i),a=a.sibling;return oe(Tt,Tt.current&1|2),Ge&&Oi(o,u.treeForkCount),o.child}i=i.sibling}u.tail!==null&&sn()>Qu&&(o.flags|=128,g=!0,Qa(u,!1),o.lanes=4194304)}else{if(!g)if(i=xu(_),i!==null){if(o.flags|=128,g=!0,i=i.updateQueue,o.updateQueue=i,Hu(o,i),Qa(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!Ge)return lt(o),null}else 2*sn()-u.renderingStartTime>Qu&&a!==536870912&&(o.flags|=128,g=!0,Qa(u,!1),o.lanes=4194304);u.isBackwards?(_.sibling=o.child,o.child=_):(i=u.last,i!==null?i.sibling=_:o.child=_,u.last=_)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=sn(),i.sibling=null,a=Tt.current,oe(Tt,g?a&1|2:a&1),Ge&&Oi(o,u.treeForkCount),i):(lt(o),null);case 22:case 23:return Sn(o),Wf(),u=o.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(a&536870912)!==0&&(o.flags&128)===0&&(lt(o),o.subtreeFlags&6&&(o.flags|=8192)):lt(o),a=o.updateQueue,a!==null&&Hu(o,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==a&&(o.flags|=2048),i!==null&&X(No),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),Bi(Nt),lt(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function _A(i,o){switch(kf(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Bi(Nt),ye(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return zo(o),null;case 31:if(o.memoizedState!==null){if(Sn(o),o.alternate===null)throw Error(s(340));Io()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(Sn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Io()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return X(Tt),null;case 4:return ye(),null;case 10:return Bi(o.type),null;case 22:case 23:return Sn(o),Wf(),i!==null&&X(No),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Bi(Nt),null;case 25:return null;default:return null}}function Zg(i,o){switch(kf(o),o.tag){case 3:Bi(Nt),ye();break;case 26:case 27:case 5:zo(o);break;case 4:ye();break;case 31:o.memoizedState!==null&&Sn(o);break;case 13:Sn(o);break;case 19:X(Tt);break;case 10:Bi(o.type);break;case 22:case 23:Sn(o),Wf(),i!==null&&X(No);break;case 24:Bi(Nt)}}function Xa(i,o){try{var a=o.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var g=u.next;a=g;do{if((a.tag&i)===i){u=void 0;var _=a.create,A=a.inst;u=_(),A.destroy=u}a=a.next}while(a!==g)}}catch(I){je(o,o.return,I)}}function Ms(i,o,a){try{var u=o.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var _=g.next;u=_;do{if((u.tag&i)===i){var A=u.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,g=o;var P=a,z=I;try{z()}catch(Z){je(g,P,Z)}}}u=u.next}while(u!==_)}}catch(Z){je(o,o.return,Z)}}function Wg(i){var o=i.updateQueue;if(o!==null){var a=i.stateNode;try{Fp(o,a)}catch(u){je(i,i.return,u)}}}function jg(i,o,a){a.props=Vo(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){je(i,o,u)}}function $a(i,o){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(g){je(i,o,g)}}function Ii(i,o){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(g){je(i,o,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){je(i,o,g)}else a.current=null}function ey(i){var o=i.type,a=i.memoizedProps,u=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(g){je(i,i.return,g)}}function xd(i,o,a){try{var u=i.stateNode;GA(u,i.type,a,o),u[qt]=o}catch(g){je(i,i.return,g)}}function ty(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ls(i.type)||i.tag===4}function Dd(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||ty(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ls(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function bd(i,o,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(i),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=Xn));else if(u!==4&&(u===27&&Ls(i.type)&&(a=i.stateNode,o=null),i=i.child,i!==null))for(bd(i,o,a),i=i.sibling;i!==null;)bd(i,o,a),i=i.sibling}function zu(i,o,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,o?a.insertBefore(i,o):a.appendChild(i);else if(u!==4&&(u===27&&Ls(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(zu(i,o,a),i=i.sibling;i!==null;)zu(i,o,a),i=i.sibling}function ny(i){var o=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);Kt(o,u,a),o[It]=i,o[qt]=a}catch(_){je(i,i.return,_)}}var Ji=!1,Dt=!1,Vd=!1,iy=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function TA(i,o){if(i=i.containerInfo,eh=fc,i=pp(i),Rf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var g=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var A=0,I=-1,P=-1,z=0,Z=0,te=i,Y=null;t:for(;;){for(var Q;te!==a||g!==0&&te.nodeType!==3||(I=A+g),te!==_||u!==0&&te.nodeType!==3||(P=A+u),te.nodeType===3&&(A+=te.nodeValue.length),(Q=te.firstChild)!==null;)Y=te,te=Q;for(;;){if(te===i)break t;if(Y===a&&++z===g&&(I=A),Y===_&&++Z===u&&(P=A),(Q=te.nextSibling)!==null)break;te=Y,Y=te.parentNode}te=Q}a=I===-1||P===-1?null:{start:I,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(th={focusedElem:i,selectionRange:a},fc=!1,Gt=o;Gt!==null;)if(o=Gt,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Gt=i;else for(;Gt!==null;){switch(o=Gt,_=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)g=i[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=o,g=_.memoizedProps,_=_.memoizedState,u=a.stateNode;try{var ge=Vo(a.type,g);i=u.getSnapshotBeforeUpdate(ge,_),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ee){je(a,a.return,Ee)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,a=i.nodeType,a===9)sh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":sh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,Gt=i;break}Gt=o.return}}function sy(i,o,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Qi(i,a),u&4&&Xa(5,a);break;case 1:if(Qi(i,a),u&4)if(i=a.stateNode,o===null)try{i.componentDidMount()}catch(A){je(a,a.return,A)}else{var g=Vo(a.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(g,o,i.__reactInternalSnapshotBeforeUpdate)}catch(A){je(a,a.return,A)}}u&64&&Wg(a),u&512&&$a(a,a.return);break;case 3:if(Qi(i,a),u&64&&(i=a.updateQueue,i!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{Fp(i,o)}catch(A){je(a,a.return,A)}}break;case 27:o===null&&u&4&&ny(a);case 26:case 5:Qi(i,a),o===null&&u&4&&ey(a),u&512&&$a(a,a.return);break;case 12:Qi(i,a);break;case 31:Qi(i,a),u&4&&ay(i,a);break;case 13:Qi(i,a),u&4&&ly(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=NA.bind(null,a),QA(i,a))));break;case 22:if(u=a.memoizedState!==null||Ji,!u){o=o!==null&&o.memoizedState!==null||Dt,g=Ji;var _=Dt;Ji=u,(Dt=o)&&!_?Xi(i,a,(a.subtreeFlags&8772)!==0):Qi(i,a),Ji=g,Dt=_}break;case 30:break;default:Qi(i,a)}}function oy(i){var o=i.alternate;o!==null&&(i.alternate=null,oy(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Xo(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var dt=null,cn=!1;function Ki(i,o,a){for(a=a.child;a!==null;)ry(i,o,a),a=a.sibling}function ry(i,o,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Yn,a)}catch{}switch(a.tag){case 26:Dt||Ii(a,o),Ki(i,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Dt||Ii(a,o);var u=dt,g=cn;Ls(a.type)&&(dt=a.stateNode,cn=!1),Ki(i,o,a),ol(a.stateNode),dt=u,cn=g;break;case 5:Dt||Ii(a,o);case 6:if(u=dt,g=cn,dt=null,Ki(i,o,a),dt=u,cn=g,dt!==null)if(cn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(a.stateNode)}catch(_){je(a,o,_)}else try{dt.removeChild(a.stateNode)}catch(_){je(a,o,_)}break;case 18:dt!==null&&(cn?(i=dt,Wy(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Vr(i)):Wy(dt,a.stateNode));break;case 4:u=dt,g=cn,dt=a.stateNode.containerInfo,cn=!0,Ki(i,o,a),dt=u,cn=g;break;case 0:case 11:case 14:case 15:Ms(2,a,o),Dt||Ms(4,a,o),Ki(i,o,a);break;case 1:Dt||(Ii(a,o),u=a.stateNode,typeof u.componentWillUnmount=="function"&&jg(a,o,u)),Ki(i,o,a);break;case 21:Ki(i,o,a);break;case 22:Dt=(u=Dt)||a.memoizedState!==null,Ki(i,o,a),Dt=u;break;default:Ki(i,o,a)}}function ay(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Vr(i)}catch(a){je(o,o.return,a)}}}function ly(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Vr(i)}catch(a){je(o,o.return,a)}}function vA(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new iy),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new iy),o;default:throw Error(s(435,i.tag))}}function Yu(i,o){var a=vA(i);o.forEach(function(u){if(!a.has(u)){a.add(u);var g=MA.bind(null,i,u);u.then(g,g)}})}function fn(i,o){var a=o.deletions;if(a!==null)for(var u=0;u<a.length;u++){var g=a[u],_=i,A=o,I=A;e:for(;I!==null;){switch(I.tag){case 27:if(Ls(I.type)){dt=I.stateNode,cn=!1;break e}break;case 5:dt=I.stateNode,cn=!1;break e;case 3:case 4:dt=I.stateNode.containerInfo,cn=!0;break e}I=I.return}if(dt===null)throw Error(s(160));ry(_,A,g),dt=null,cn=!1,_=g.alternate,_!==null&&(_.return=null),g.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)uy(o,i),o=o.sibling}var ti=null;function uy(i,o){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:fn(o,i),dn(i),u&4&&(Ms(3,i,i.return),Xa(3,i),Ms(5,i,i.return));break;case 1:fn(o,i),dn(i),u&512&&(Dt||a===null||Ii(a,a.return)),u&64&&Ji&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var g=ti;if(fn(o,i),dn(i),u&512&&(Dt||a===null||Ii(a,a.return)),u&4){var _=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){e:{u=i.type,a=i.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":_=g.getElementsByTagName("title")[0],(!_||_[fi]||_[It]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=g.createElement(u),g.head.insertBefore(_,g.querySelector("head > title"))),Kt(_,u,a),_[It]=i,Rt(_),u=_;break e;case"link":var A=u_("link","href",g).get(u+(a.href||""));if(A){for(var I=0;I<A.length;I++)if(_=A[I],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(I,1);break t}}_=g.createElement(u),Kt(_,u,a),g.head.appendChild(_);break;case"meta":if(A=u_("meta","content",g).get(u+(a.content||""))){for(I=0;I<A.length;I++)if(_=A[I],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(I,1);break t}}_=g.createElement(u),Kt(_,u,a),g.head.appendChild(_);break;default:throw Error(s(468,u))}_[It]=i,Rt(_),u=_}i.stateNode=u}else c_(g,i.type,i.stateNode);else i.stateNode=l_(g,u,i.memoizedProps);else _!==u?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,u===null?c_(g,i.type,i.stateNode):l_(g,u,i.memoizedProps)):u===null&&i.stateNode!==null&&xd(i,i.memoizedProps,a.memoizedProps)}break;case 27:fn(o,i),dn(i),u&512&&(Dt||a===null||Ii(a,a.return)),a!==null&&u&4&&xd(i,i.memoizedProps,a.memoizedProps);break;case 5:if(fn(o,i),dn(i),u&512&&(Dt||a===null||Ii(a,a.return)),i.flags&32){g=i.stateNode;try{un(g,"")}catch(ge){je(i,i.return,ge)}}u&4&&i.stateNode!=null&&(g=i.memoizedProps,xd(i,g,a!==null?a.memoizedProps:g)),u&1024&&(Vd=!0);break;case 6:if(fn(o,i),dn(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(ge){je(i,i.return,ge)}}break;case 3:if(ac=null,g=ti,ti=oc(o.containerInfo),fn(o,i),ti=g,dn(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Vr(o.containerInfo)}catch(ge){je(i,i.return,ge)}Vd&&(Vd=!1,cy(i));break;case 4:u=ti,ti=oc(i.stateNode.containerInfo),fn(o,i),dn(i),ti=u;break;case 12:fn(o,i),dn(i);break;case 31:fn(o,i),dn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Yu(i,u)));break;case 13:fn(o,i),dn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ku=sn()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Yu(i,u)));break;case 22:g=i.memoizedState!==null;var P=a!==null&&a.memoizedState!==null,z=Ji,Z=Dt;if(Ji=z||g,Dt=Z||P,fn(o,i),Dt=Z,Ji=z,dn(i),u&8192)e:for(o=i.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(a===null||P||Ji||Dt||Po(i)),a=null,o=i;;){if(o.tag===5||o.tag===26){if(a===null){P=a=o;try{if(_=P.stateNode,g)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=P.stateNode;var te=P.memoizedProps.style,Y=te!=null&&te.hasOwnProperty("display")?te.display:null;I.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(ge){je(P,P.return,ge)}}}else if(o.tag===6){if(a===null){P=o;try{P.stateNode.nodeValue=g?"":P.memoizedProps}catch(ge){je(P,P.return,ge)}}}else if(o.tag===18){if(a===null){P=o;try{var Q=P.stateNode;g?jy(Q,!0):jy(P.stateNode,!1)}catch(ge){je(P,P.return,ge)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Yu(i,a))));break;case 19:fn(o,i),dn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Yu(i,u)));break;case 30:break;case 21:break;default:fn(o,i),dn(i)}}function dn(i){var o=i.flags;if(o&2){try{for(var a,u=i.return;u!==null;){if(ty(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var g=a.stateNode,_=Dd(i);zu(i,_,g);break;case 5:var A=a.stateNode;a.flags&32&&(un(A,""),a.flags&=-33);var I=Dd(i);zu(i,I,A);break;case 3:case 4:var P=a.stateNode.containerInfo,z=Dd(i);bd(i,z,P);break;default:throw Error(s(161))}}catch(Z){je(i,i.return,Z)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function cy(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;cy(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function Qi(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)sy(i,o.alternate,o),o=o.sibling}function Po(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Ms(4,o,o.return),Po(o);break;case 1:Ii(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&jg(o,o.return,a),Po(o);break;case 27:ol(o.stateNode);case 26:case 5:Ii(o,o.return),Po(o);break;case 22:o.memoizedState===null&&Po(o);break;case 30:Po(o);break;default:Po(o)}i=i.sibling}}function Xi(i,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,g=i,_=o,A=_.flags;switch(_.tag){case 0:case 11:case 15:Xi(g,_,a),Xa(4,_);break;case 1:if(Xi(g,_,a),u=_,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(z){je(u,u.return,z)}if(u=_,g=u.updateQueue,g!==null){var I=u.stateNode;try{var P=g.shared.hiddenCallbacks;if(P!==null)for(g.shared.hiddenCallbacks=null,g=0;g<P.length;g++)Bp(P[g],I)}catch(z){je(u,u.return,z)}}a&&A&64&&Wg(_),$a(_,_.return);break;case 27:ny(_);case 26:case 5:Xi(g,_,a),a&&u===null&&A&4&&ey(_),$a(_,_.return);break;case 12:Xi(g,_,a);break;case 31:Xi(g,_,a),a&&A&4&&ay(g,_);break;case 13:Xi(g,_,a),a&&A&4&&ly(g,_);break;case 22:_.memoizedState===null&&Xi(g,_,a),$a(_,_.return);break;case 30:break;default:Xi(g,_,a)}o=o.sibling}}function Pd(i,o){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&La(a))}function Ud(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&La(i))}function ni(i,o,a,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)fy(i,o,a,u),o=o.sibling}function fy(i,o,a,u){var g=o.flags;switch(o.tag){case 0:case 11:case 15:ni(i,o,a,u),g&2048&&Xa(9,o);break;case 1:ni(i,o,a,u);break;case 3:ni(i,o,a,u),g&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&La(i)));break;case 12:if(g&2048){ni(i,o,a,u),i=o.stateNode;try{var _=o.memoizedProps,A=_.id,I=_.onPostCommit;typeof I=="function"&&I(A,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(P){je(o,o.return,P)}}else ni(i,o,a,u);break;case 31:ni(i,o,a,u);break;case 13:ni(i,o,a,u);break;case 23:break;case 22:_=o.stateNode,A=o.alternate,o.memoizedState!==null?_._visibility&2?ni(i,o,a,u):Za(i,o):_._visibility&2?ni(i,o,a,u):(_._visibility|=2,Sr(i,o,a,u,(o.subtreeFlags&10256)!==0||!1)),g&2048&&Pd(A,o);break;case 24:ni(i,o,a,u),g&2048&&Ud(o.alternate,o);break;default:ni(i,o,a,u)}}function Sr(i,o,a,u,g){for(g=g&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=i,A=o,I=a,P=u,z=A.flags;switch(A.tag){case 0:case 11:case 15:Sr(_,A,I,P,g),Xa(8,A);break;case 23:break;case 22:var Z=A.stateNode;A.memoizedState!==null?Z._visibility&2?Sr(_,A,I,P,g):Za(_,A):(Z._visibility|=2,Sr(_,A,I,P,g)),g&&z&2048&&Pd(A.alternate,A);break;case 24:Sr(_,A,I,P,g),g&&z&2048&&Ud(A.alternate,A);break;default:Sr(_,A,I,P,g)}o=o.sibling}}function Za(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=i,u=o,g=u.flags;switch(u.tag){case 22:Za(a,u),g&2048&&Pd(u.alternate,u);break;case 24:Za(a,u),g&2048&&Ud(u.alternate,u);break;default:Za(a,u)}o=o.sibling}}var Wa=8192;function Ar(i,o,a){if(i.subtreeFlags&Wa)for(i=i.child;i!==null;)dy(i,o,a),i=i.sibling}function dy(i,o,a){switch(i.tag){case 26:Ar(i,o,a),i.flags&Wa&&i.memoizedState!==null&&rC(a,ti,i.memoizedState,i.memoizedProps);break;case 5:Ar(i,o,a);break;case 3:case 4:var u=ti;ti=oc(i.stateNode.containerInfo),Ar(i,o,a),ti=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Wa,Wa=16777216,Ar(i,o,a),Wa=u):Ar(i,o,a));break;default:Ar(i,o,a)}}function hy(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function ja(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];Gt=u,py(u,i)}hy(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)my(i),i=i.sibling}function my(i){switch(i.tag){case 0:case 11:case 15:ja(i),i.flags&2048&&Ms(9,i,i.return);break;case 3:ja(i);break;case 12:ja(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Ju(i)):ja(i);break;default:ja(i)}}function Ju(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];Gt=u,py(u,i)}hy(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Ms(8,o,o.return),Ju(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,Ju(o));break;default:Ju(o)}i=i.sibling}}function py(i,o){for(;Gt!==null;){var a=Gt;switch(a.tag){case 0:case 11:case 15:Ms(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:La(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Gt=u;else e:for(a=i;Gt!==null;){u=Gt;var g=u.sibling,_=u.return;if(oy(u),u===a){Gt=null;break e}if(g!==null){g.return=_,Gt=g;break e}Gt=_}}}var EA={getCacheForType:function(i){var o=Yt(Nt),a=o.data.get(i);return a===void 0&&(a=i(),o.data.set(i,a)),a},cacheSignal:function(){return Yt(Nt).controller.signal}},SA=typeof WeakMap=="function"?WeakMap:Map,Xe=0,ot=null,Ve=null,Le=0,We=0,An=null,xs=!1,Cr=!1,Ld=!1,$i=0,gt=0,Ds=0,Uo=0,kd=0,Cn=0,Ir=0,el=null,hn=null,qd=!1,Ku=0,gy=0,Qu=1/0,Xu=null,bs=null,Lt=0,Vs=null,Rr=null,Zi=0,Od=0,Gd=null,yy=null,tl=0,Bd=null;function In(){return(Xe&2)!==0&&Le!==0?Le&-Le:$.T!==null?Kd():$l()}function _y(){if(Cn===0)if((Le&536870912)===0||Ge){var i=ao;ao<<=1,(ao&3932160)===0&&(ao=262144),Cn=i}else Cn=536870912;return i=En.current,i!==null&&(i.flags|=32),Cn}function mn(i,o,a){(i===ot&&(We===2||We===9)||i.cancelPendingCommit!==null)&&(wr(i,0),Ps(i,Le,Cn,!1)),lo(i,a),((Xe&2)===0||i!==ot)&&(i===ot&&((Xe&2)===0&&(Uo|=a),gt===4&&Ps(i,Le,Cn,!1)),Ri(i))}function Ty(i,o,a){if((Xe&6)!==0)throw Error(s(327));var u=!a&&(o&127)===0&&(o&i.expiredLanes)===0||Jn(i,o),g=u?IA(i,o):Hd(i,o,!0),_=u;do{if(g===0){Cr&&!u&&Ps(i,o,0,!1);break}else{if(a=i.current.alternate,_&&!AA(a)){g=Hd(i,o,!1),_=!1;continue}if(g===2){if(_=o,i.errorRecoveryDisabledLanes&_)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var I=i;g=el;var P=I.current.memoizedState.isDehydrated;if(P&&(wr(I,A).flags|=256),A=Hd(I,A,!1),A!==2){if(Ld&&!P){I.errorRecoveryDisabledLanes|=_,Uo|=_,g=4;break e}_=hn,hn=g,_!==null&&(hn===null?hn=_:hn.push.apply(hn,_))}g=A}if(_=!1,g!==2)continue}}if(g===1){wr(i,0),Ps(i,o,0,!0);break}e:{switch(u=i,_=g,_){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:Ps(u,o,Cn,!xs);break e;case 2:hn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(g=Ku+300-sn(),10<g)){if(Ps(u,o,Cn,!xs),li(u,0,!0)!==0)break e;Zi=o,u.timeoutHandle=$y(vy.bind(null,u,a,hn,Xu,qd,o,Cn,Uo,Ir,xs,_,"Throttled",-0,0),g);break e}vy(u,a,hn,Xu,qd,o,Cn,Uo,Ir,xs,_,null,-0,0)}}break}while(!0);Ri(i)}function vy(i,o,a,u,g,_,A,I,P,z,Z,te,Y,Q){if(i.timeoutHandle=-1,te=o.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xn},dy(o,_,te);var ge=(_&62914560)===_?Ku-sn():(_&4194048)===_?gy-sn():0;if(ge=aC(te,ge),ge!==null){Zi=_,i.cancelPendingCommit=ge(Ny.bind(null,i,o,_,a,u,g,A,I,P,Z,te,null,Y,Q)),Ps(i,_,A,!z);return}}Ny(i,o,_,a,u,g,A,I,P)}function AA(i){for(var o=i;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var g=a[u],_=g.getSnapshot;g=g.value;try{if(!Tn(_(),g))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ps(i,o,a,u){o&=~kd,o&=~Uo,i.suspendedLanes|=o,i.pingedLanes&=~o,u&&(i.warmLanes|=o),u=i.expirationTimes;for(var g=o;0<g;){var _=31-yt(g),A=1<<_;u[_]=-1,g&=~A}a!==0&&uo(i,a,o)}function $u(){return(Xe&6)===0?(nl(0),!1):!0}function Fd(){if(Ve!==null){if(We===0)var i=Ve.return;else i=Ve,Gi=Ro=null,sd(i),yr=null,qa=0,i=Ve;for(;i!==null;)Zg(i.alternate,i),i=i.return;Ve=null}}function wr(i,o){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,HA(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),Zi=0,Fd(),ot=i,Ve=a=qi(i.current,null),Le=o,We=0,An=null,xs=!1,Cr=Jn(i,o),Ld=!1,Ir=Cn=kd=Uo=Ds=gt=0,hn=el=null,qd=!1,(o&8)!==0&&(o|=o&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=o;0<u;){var g=31-yt(u),_=1<<g;o|=i[g],u&=~_}return $i=o,yu(),a}function Ey(i,o){Me=null,$.H=Ja,o===gr||o===Iu?(o=kp(),We=3):o===Jf?(o=kp(),We=4):We=o===vd?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,An=o,Ve===null&&(gt=1,Ou(i,Pn(o,i.current)))}function Sy(){var i=En.current;return i===null?!0:(Le&4194048)===Le?qn===null:(Le&62914560)===Le||(Le&536870912)!==0?i===qn:!1}function Ay(){var i=$.H;return $.H=Ja,i===null?Ja:i}function Cy(){var i=$.A;return $.A=EA,i}function Zu(){gt=4,xs||(Le&4194048)!==Le&&En.current!==null||(Cr=!0),(Ds&134217727)===0&&(Uo&134217727)===0||ot===null||Ps(ot,Le,Cn,!1)}function Hd(i,o,a){var u=Xe;Xe|=2;var g=Ay(),_=Cy();(ot!==i||Le!==o)&&(Xu=null,wr(i,o)),o=!1;var A=gt;e:do try{if(We!==0&&Ve!==null){var I=Ve,P=An;switch(We){case 8:Fd(),A=6;break e;case 3:case 2:case 9:case 6:En.current===null&&(o=!0);var z=We;if(We=0,An=null,Nr(i,I,P,z),a&&Cr){A=0;break e}break;default:z=We,We=0,An=null,Nr(i,I,P,z)}}CA(),A=gt;break}catch(Z){Ey(i,Z)}while(!0);return o&&i.shellSuspendCounter++,Gi=Ro=null,Xe=u,$.H=g,$.A=_,Ve===null&&(ot=null,Le=0,yu()),A}function CA(){for(;Ve!==null;)Iy(Ve)}function IA(i,o){var a=Xe;Xe|=2;var u=Ay(),g=Cy();ot!==i||Le!==o?(Xu=null,Qu=sn()+500,wr(i,o)):Cr=Jn(i,o);e:do try{if(We!==0&&Ve!==null){o=Ve;var _=An;t:switch(We){case 1:We=0,An=null,Nr(i,o,_,1);break;case 2:case 9:if(Up(_)){We=0,An=null,Ry(o);break}o=function(){We!==2&&We!==9||ot!==i||(We=7),Ri(i)},_.then(o,o);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:Up(_)?(We=0,An=null,Ry(o)):(We=0,An=null,Nr(i,o,_,7));break;case 5:var A=null;switch(Ve.tag){case 26:A=Ve.memoizedState;case 5:case 27:var I=Ve;if(A?f_(A):I.stateNode.complete){We=0,An=null;var P=I.sibling;if(P!==null)Ve=P;else{var z=I.return;z!==null?(Ve=z,Wu(z)):Ve=null}break t}}We=0,An=null,Nr(i,o,_,5);break;case 6:We=0,An=null,Nr(i,o,_,6);break;case 8:Fd(),gt=6;break e;default:throw Error(s(462))}}RA();break}catch(Z){Ey(i,Z)}while(!0);return Gi=Ro=null,$.H=u,$.A=g,Xe=a,Ve!==null?0:(ot=null,Le=0,yu(),gt)}function RA(){for(;Ve!==null&&!Tf();)Iy(Ve)}function Iy(i){var o=Xg(i.alternate,i,$i);i.memoizedProps=i.pendingProps,o===null?Wu(i):Ve=o}function Ry(i){var o=i,a=o.alternate;switch(o.tag){case 15:case 0:o=Hg(a,o,o.pendingProps,o.type,void 0,Le);break;case 11:o=Hg(a,o,o.pendingProps,o.type.render,o.ref,Le);break;case 5:sd(o);default:Zg(a,o),o=Ve=Cp(o,$i),o=Xg(a,o,$i)}i.memoizedProps=i.pendingProps,o===null?Wu(i):Ve=o}function Nr(i,o,a,u){Gi=Ro=null,sd(o),yr=null,qa=0;var g=o.return;try{if(mA(i,g,o,a,Le)){gt=1,Ou(i,Pn(a,i.current)),Ve=null;return}}catch(_){if(g!==null)throw Ve=g,_;gt=1,Ou(i,Pn(a,i.current)),Ve=null;return}o.flags&32768?(Ge||u===1?i=!0:Cr||(Le&536870912)!==0?i=!1:(xs=i=!0,(u===2||u===9||u===3||u===6)&&(u=En.current,u!==null&&u.tag===13&&(u.flags|=16384))),wy(o,i)):Wu(o)}function Wu(i){var o=i;do{if((o.flags&32768)!==0){wy(o,xs);return}i=o.return;var a=yA(o.alternate,o,$i);if(a!==null){Ve=a;return}if(o=o.sibling,o!==null){Ve=o;return}Ve=o=i}while(o!==null);gt===0&&(gt=5)}function wy(i,o){do{var a=_A(i.alternate,i);if(a!==null){a.flags&=32767,Ve=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(i=i.sibling,i!==null)){Ve=i;return}Ve=i=a}while(i!==null);gt=6,Ve=null}function Ny(i,o,a,u,g,_,A,I,P){i.cancelPendingCommit=null;do ju();while(Lt!==0);if((Xe&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(_=o.lanes|o.childLanes,_|=Df,Sf(i,a,_,A,I,P),i===ot&&(Ve=ot=null,Le=0),Rr=o,Vs=i,Zi=a,Od=_,Gd=g,yy=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,xA(cs,function(){return Vy(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=$.T,$.T=null,g=re.p,re.p=2,A=Xe,Xe|=4;try{TA(i,o,a)}finally{Xe=A,re.p=g,$.T=u}}Lt=1,My(),xy(),Dy()}}function My(){if(Lt===1){Lt=0;var i=Vs,o=Rr,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=$.T,$.T=null;var u=re.p;re.p=2;var g=Xe;Xe|=4;try{uy(o,i);var _=th,A=pp(i.containerInfo),I=_.focusedElem,P=_.selectionRange;if(A!==I&&I&&I.ownerDocument&&mp(I.ownerDocument.documentElement,I)){if(P!==null&&Rf(I)){var z=P.start,Z=P.end;if(Z===void 0&&(Z=z),"selectionStart"in I)I.selectionStart=z,I.selectionEnd=Math.min(Z,I.value.length);else{var te=I.ownerDocument||document,Y=te&&te.defaultView||window;if(Y.getSelection){var Q=Y.getSelection(),ge=I.textContent.length,Ee=Math.min(P.start,ge),it=P.end===void 0?Ee:Math.min(P.end,ge);!Q.extend&&Ee>it&&(A=it,it=Ee,Ee=A);var O=hp(I,Ee),k=hp(I,it);if(O&&k&&(Q.rangeCount!==1||Q.anchorNode!==O.node||Q.anchorOffset!==O.offset||Q.focusNode!==k.node||Q.focusOffset!==k.offset)){var H=te.createRange();H.setStart(O.node,O.offset),Q.removeAllRanges(),Ee>it?(Q.addRange(H),Q.extend(k.node,k.offset)):(H.setEnd(k.node,k.offset),Q.addRange(H))}}}}for(te=[],Q=I;Q=Q.parentNode;)Q.nodeType===1&&te.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<te.length;I++){var W=te[I];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}fc=!!eh,th=eh=null}finally{Xe=g,re.p=u,$.T=a}}i.current=o,Lt=2}}function xy(){if(Lt===2){Lt=0;var i=Vs,o=Rr,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=$.T,$.T=null;var u=re.p;re.p=2;var g=Xe;Xe|=4;try{sy(i,o.alternate,o)}finally{Xe=g,re.p=u,$.T=a}}Lt=3}}function Dy(){if(Lt===4||Lt===3){Lt=0,Hl();var i=Vs,o=Rr,a=Zi,u=yy;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Lt=5:(Lt=0,Rr=Vs=null,by(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(bs=null),Pi(a),o=o.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Yn,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=$.T,g=re.p,re.p=2,$.T=null;try{for(var _=i.onRecoverableError,A=0;A<u.length;A++){var I=u[A];_(I.value,{componentStack:I.stack})}}finally{$.T=o,re.p=g}}(Zi&3)!==0&&ju(),Ri(i),g=i.pendingLanes,(a&261930)!==0&&(g&42)!==0?i===Bd?tl++:(tl=0,Bd=i):tl=0,nl(0)}}function by(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,La(o)))}function ju(){return My(),xy(),Dy(),Vy()}function Vy(){if(Lt!==5)return!1;var i=Vs,o=Od;Od=0;var a=Pi(Zi),u=$.T,g=re.p;try{re.p=32>a?32:a,$.T=null,a=Gd,Gd=null;var _=Vs,A=Zi;if(Lt=0,Rr=Vs=null,Zi=0,(Xe&6)!==0)throw Error(s(331));var I=Xe;if(Xe|=4,my(_.current),fy(_,_.current,A,a),Xe=I,nl(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Yn,_)}catch{}return!0}finally{re.p=g,$.T=u,by(i,o)}}function Py(i,o,a){o=Pn(a,o),o=Td(i.stateNode,o,2),i=Rs(i,o,2),i!==null&&(lo(i,2),Ri(i))}function je(i,o,a){if(i.tag===3)Py(i,i,a);else for(;o!==null;){if(o.tag===3){Py(o,i,a);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(bs===null||!bs.has(u))){i=Pn(a,i),a=Ug(2),u=Rs(o,a,2),u!==null&&(Lg(a,u,o,i),lo(u,2),Ri(u));break}}o=o.return}}function zd(i,o,a){var u=i.pingCache;if(u===null){u=i.pingCache=new SA;var g=new Set;u.set(o,g)}else g=u.get(o),g===void 0&&(g=new Set,u.set(o,g));g.has(a)||(Ld=!0,g.add(a),i=wA.bind(null,i,o,a),o.then(i,i))}function wA(i,o,a){var u=i.pingCache;u!==null&&u.delete(o),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,ot===i&&(Le&a)===a&&(gt===4||gt===3&&(Le&62914560)===Le&&300>sn()-Ku?(Xe&2)===0&&wr(i,0):kd|=a,Ir===Le&&(Ir=0)),Ri(i)}function Uy(i,o){o===0&&(o=Xl()),i=Ao(i,o),i!==null&&(lo(i,o),Ri(i))}function NA(i){var o=i.memoizedState,a=0;o!==null&&(a=o.retryLane),Uy(i,a)}function MA(i,o){var a=0;switch(i.tag){case 31:case 13:var u=i.stateNode,g=i.memoizedState;g!==null&&(a=g.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(o),Uy(i,a)}function xA(i,o){return Ut(i,o)}var ec=null,Mr=null,Yd=!1,tc=!1,Jd=!1,Us=0;function Ri(i){i!==Mr&&i.next===null&&(Mr===null?ec=Mr=i:Mr=Mr.next=i),tc=!0,Yd||(Yd=!0,bA())}function nl(i,o){if(!Jd&&tc){Jd=!0;do for(var a=!1,u=ec;u!==null;){if(i!==0){var g=u.pendingLanes;if(g===0)var _=0;else{var A=u.suspendedLanes,I=u.pingedLanes;_=(1<<31-yt(42|i)+1)-1,_&=g&~(A&~I),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,Oy(u,_))}else _=Le,_=li(u,u===ot?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||Jn(u,_)||(a=!0,Oy(u,_));u=u.next}while(a);Jd=!1}}function DA(){Ly()}function Ly(){tc=Yd=!1;var i=0;Us!==0&&FA()&&(i=Us);for(var o=sn(),a=null,u=ec;u!==null;){var g=u.next,_=ky(u,o);_===0?(u.next=null,a===null?ec=g:a.next=g,g===null&&(Mr=a)):(a=u,(i!==0||(_&3)!==0)&&(tc=!0)),u=g}Lt!==0&&Lt!==5||nl(i),Us!==0&&(Us=0)}function ky(i,o){for(var a=i.suspendedLanes,u=i.pingedLanes,g=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var A=31-yt(_),I=1<<A,P=g[A];P===-1?((I&a)===0||(I&u)!==0)&&(g[A]=Ef(I,o)):P<=o&&(i.expiredLanes|=I),_&=~I}if(o=ot,a=Le,a=li(i,i===o?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===o&&(We===2||We===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&us(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Jn(i,a)){if(o=a&-a,o===i.callbackPriority)return o;switch(u!==null&&us(u),Pi(a)){case 2:case 8:a=da;break;case 32:a=cs;break;case 268435456:a=zl;break;default:a=cs}return u=qy.bind(null,i),a=Ut(a,u),i.callbackPriority=o,i.callbackNode=a,o}return u!==null&&u!==null&&us(u),i.callbackPriority=2,i.callbackNode=null,2}function qy(i,o){if(Lt!==0&&Lt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(ju()&&i.callbackNode!==a)return null;var u=Le;return u=li(i,i===ot?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(Ty(i,u,o),ky(i,sn()),i.callbackNode!=null&&i.callbackNode===a?qy.bind(null,i):null)}function Oy(i,o){if(ju())return null;Ty(i,o,!0)}function bA(){zA(function(){(Xe&6)!==0?Ut(fa,DA):Ly()})}function Kd(){if(Us===0){var i=mr;i===0&&(i=ri,ri<<=1,(ri&261888)===0&&(ri=256)),Us=i}return Us}function Gy(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:jo(""+i)}function By(i,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,i.id&&a.setAttribute("form",i.id),o.parentNode.insertBefore(a,o),i=new FormData(i),a.parentNode.removeChild(a),i}function VA(i,o,a,u,g){if(o==="submit"&&a&&a.stateNode===g){var _=Gy((g[qt]||null).action),A=u.submitter;A&&(o=(o=A[qt]||null)?Gy(o.formAction):A.getAttribute("formAction"),o!==null&&(_=o,A=null));var I=new Ti("action","action",null,u,g);i.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Us!==0){var P=A?By(g,A):new FormData(g);hd(a,{pending:!0,data:P,method:g.method,action:_},null,P)}}else typeof _=="function"&&(I.preventDefault(),P=A?By(g,A):new FormData(g),hd(a,{pending:!0,data:P,method:g.method,action:_},_,P))},currentTarget:g}]})}}for(var Qd=0;Qd<xf.length;Qd++){var Xd=xf[Qd],PA=Xd.toLowerCase(),UA=Xd[0].toUpperCase()+Xd.slice(1);ei(PA,"on"+UA)}ei(_p,"onAnimationEnd"),ei(Tp,"onAnimationIteration"),ei(vp,"onAnimationStart"),ei("dblclick","onDoubleClick"),ei("focusin","onFocus"),ei("focusout","onBlur"),ei(ZS,"onTransitionRun"),ei(WS,"onTransitionStart"),ei(jS,"onTransitionCancel"),ei(Ep,"onTransitionEnd"),pi("onMouseEnter",["mouseout","mouseover"]),pi("onMouseLeave",["mouseout","mouseover"]),pi("onPointerEnter",["pointerout","pointerover"]),pi("onPointerLeave",["pointerout","pointerover"]),mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(il));function Fy(i,o){o=(o&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],g=u.event;u=u.listeners;e:{var _=void 0;if(o)for(var A=u.length-1;0<=A;A--){var I=u[A],P=I.instance,z=I.currentTarget;if(I=I.listener,P!==_&&g.isPropagationStopped())break e;_=I,g.currentTarget=z;try{_(g)}catch(Z){gu(Z)}g.currentTarget=null,_=P}else for(A=0;A<u.length;A++){if(I=u[A],P=I.instance,z=I.currentTarget,I=I.listener,P!==_&&g.isPropagationStopped())break e;_=I,g.currentTarget=z;try{_(g)}catch(Z){gu(Z)}g.currentTarget=null,_=P}}}}function Pe(i,o){var a=o[Qo];a===void 0&&(a=o[Qo]=new Set);var u=i+"__bubble";a.has(u)||(Hy(o,i,2,!1),a.add(u))}function $d(i,o,a){var u=0;o&&(u|=4),Hy(a,i,u,o)}var nc="_reactListening"+Math.random().toString(36).slice(2);function Zd(i){if(!i[nc]){i[nc]=!0,pa.forEach(function(a){a!=="selectionchange"&&(LA.has(a)||$d(a,!1,i),$d(a,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[nc]||(o[nc]=!0,$d("selectionchange",!1,o))}}function Hy(i,o,a,u){switch(__(o)){case 2:var g=cC;break;case 8:g=fC;break;default:g=dh}a=g.bind(null,o,a,i),g=void 0,!po||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),u?g!==void 0?i.addEventListener(o,a,{capture:!0,passive:g}):i.addEventListener(o,a,!0):g!==void 0?i.addEventListener(o,a,{passive:g}):i.addEventListener(o,a,!1)}function Wd(i,o,a,u,g){var _=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var A=u.tag;if(A===3||A===4){var I=u.stateNode.containerInfo;if(I===g)break;if(A===4)for(A=u.return;A!==null;){var P=A.tag;if((P===3||P===4)&&A.stateNode.containerInfo===g)return;A=A.return}for(;I!==null;){if(A=di(I),A===null)return;if(P=A.tag,P===5||P===6||P===26||P===27){u=_=A;continue e}I=I.parentNode}}u=u.return}gs(function(){var z=_,Z=xn(a),te=[];e:{var Y=Sp.get(i);if(Y!==void 0){var Q=Ti,ge=i;switch(i){case"keypress":if(yo(a)===0)break e;case"keydown":case"keyup":Q=hu;break;case"focusin":ge="focus",Q=To;break;case"focusout":ge="blur",Q=To;break;case"beforeblur":case"afterblur":Q=To;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Na;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=su;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=v;break;case _p:case Tp:case vp:Q=ru;break;case Ep:Q=R;break;case"scroll":case"scrollend":Q=wa;break;case"wheel":Q=K;break;case"copy":case"cut":case"paste":Q=au;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=ki;break;case"toggle":case"beforetoggle":Q=Ne}var Ee=(o&4)!==0,it=!Ee&&(i==="scroll"||i==="scrollend"),O=Ee?Y!==null?Y+"Capture":null:Y;Ee=[];for(var k=z,H;k!==null;){var W=k;if(H=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||H===null||O===null||(W=$n(k,O),W!=null&&Ee.push(sl(k,W,H))),it)break;k=k.return}0<Ee.length&&(Y=new Q(Y,ge,null,a,Z),te.push({event:Y,listeners:Ee}))}}if((o&7)===0){e:{if(Y=i==="mouseover"||i==="pointerover",Q=i==="mouseout"||i==="pointerout",Y&&a!==Ca&&(ge=a.relatedTarget||a.fromElement)&&(di(ge)||ge[ci]))break e;if((Q||Y)&&(Y=Z.window===Z?Z:(Y=Z.ownerDocument)?Y.defaultView||Y.parentWindow:window,Q?(ge=a.relatedTarget||a.toElement,Q=z,ge=ge?di(ge):null,ge!==null&&(it=l(ge),Ee=ge.tag,ge!==it||Ee!==5&&Ee!==27&&Ee!==6)&&(ge=null)):(Q=null,ge=z),Q!==ge)){if(Ee=Na,W="onMouseLeave",O="onMouseEnter",k="mouse",(i==="pointerout"||i==="pointerover")&&(Ee=ki,W="onPointerLeave",O="onPointerEnter",k="pointer"),it=Q==null?Y:yn(Q),H=ge==null?Y:yn(ge),Y=new Ee(W,k+"leave",Q,a,Z),Y.target=it,Y.relatedTarget=H,W=null,di(Z)===z&&(Ee=new Ee(O,k+"enter",ge,a,Z),Ee.target=H,Ee.relatedTarget=it,W=Ee),it=W,Q&&ge)t:{for(Ee=kA,O=Q,k=ge,H=0,W=O;W;W=Ee(W))H++;W=0;for(var Te=k;Te;Te=Ee(Te))W++;for(;0<H-W;)O=Ee(O),H--;for(;0<W-H;)k=Ee(k),W--;for(;H--;){if(O===k||k!==null&&O===k.alternate){Ee=O;break t}O=Ee(O),k=Ee(k)}Ee=null}else Ee=null;Q!==null&&zy(te,Y,Q,Ee,!1),ge!==null&&it!==null&&zy(te,it,ge,Ee,!0)}}e:{if(Y=z?yn(z):window,Q=Y.nodeName&&Y.nodeName.toLowerCase(),Q==="select"||Q==="input"&&Y.type==="file")var Ye=ap;else if(op(Y))if(lp)Ye=QS;else{Ye=JS;var _e=YS}else Q=Y.nodeName,!Q||Q.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?z&&Wo(z.elementType)&&(Ye=ap):Ye=KS;if(Ye&&(Ye=Ye(i,z))){rp(te,Ye,a,Z);break e}_e&&_e(i,Y,z),i==="focusout"&&z&&Y.type==="number"&&z.memoizedProps.value!=null&&Ea(Y,"number",Y.value)}switch(_e=z?yn(z):window,i){case"focusin":(op(_e)||_e.contentEditable==="true")&&(rr=_e,wf=z,Va=null);break;case"focusout":Va=wf=rr=null;break;case"mousedown":Nf=!0;break;case"contextmenu":case"mouseup":case"dragend":Nf=!1,gp(te,a,Z);break;case"selectionchange":if($S)break;case"keydown":case"keyup":gp(te,a,Z)}var xe;if(Qe)e:{switch(i){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else or?vo(i,a)&&(ke="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(ke="onCompositionStart");ke&&(Si&&a.locale!=="ko"&&(or||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&or&&(xe=Ra()):(_i=Z,Ia="value"in _i?_i.value:_i.textContent,or=!0)),_e=ic(z,ke),0<_e.length&&(ke=new Ei(ke,i,null,a,Z),te.push({event:ke,listeners:_e}),xe?ke.data=xe:(xe=sr(a),xe!==null&&(ke.data=xe)))),(xe=bn?BS(i,a):FS(i,a))&&(ke=ic(z,"onBeforeInput"),0<ke.length&&(_e=new Ei("onBeforeInput","beforeinput",null,a,Z),te.push({event:_e,listeners:ke}),_e.data=xe)),VA(te,i,z,a,Z)}Fy(te,o)})}function sl(i,o,a){return{instance:i,listener:o,currentTarget:a}}function ic(i,o){for(var a=o+"Capture",u=[];i!==null;){var g=i,_=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||_===null||(g=$n(i,a),g!=null&&u.unshift(sl(i,g,_)),g=$n(i,o),g!=null&&u.push(sl(i,g,_))),i.tag===3)return u;i=i.return}return[]}function kA(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function zy(i,o,a,u,g){for(var _=o._reactName,A=[];a!==null&&a!==u;){var I=a,P=I.alternate,z=I.stateNode;if(I=I.tag,P!==null&&P===u)break;I!==5&&I!==26&&I!==27||z===null||(P=z,g?(z=$n(a,_),z!=null&&A.unshift(sl(a,z,P))):g||(z=$n(a,_),z!=null&&A.push(sl(a,z,P)))),a=a.return}A.length!==0&&i.push({event:o,listeners:A})}var qA=/\r\n?/g,OA=/\u0000|\uFFFD/g;function Yy(i){return(typeof i=="string"?i:""+i).replace(qA,`
`).replace(OA,"")}function Jy(i,o){return o=Yy(o),Yy(i)===o}function nt(i,o,a,u,g,_){switch(a){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||un(i,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&un(i,""+u);break;case"className":_n(i,"class",u);break;case"tabIndex":_n(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":_n(i,a,u);break;case"style":Aa(i,u,_);break;case"data":if(o!=="object"){_n(i,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=jo(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(o!=="input"&&nt(i,o,"name",g.name,g,null),nt(i,o,"formEncType",g.formEncType,g,null),nt(i,o,"formMethod",g.formMethod,g,null),nt(i,o,"formTarget",g.formTarget,g,null)):(nt(i,o,"encType",g.encType,g,null),nt(i,o,"method",g.method,g,null),nt(i,o,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=jo(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=Xn);break;case"onScroll":u!=null&&Pe("scroll",i);break;case"onScrollEnd":u!=null&&Pe("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=jo(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":Pe("beforetoggle",i),Pe("toggle",i),$o(i,"popover",u);break;case"xlinkActuate":wt(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":wt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":wt(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":wt(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":wt(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":wt(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":wt(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":wt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":wt(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":$o(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=iu.get(a)||a,$o(i,a,u))}}function jd(i,o,a,u,g,_){switch(a){case"style":Aa(i,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof u=="string"?un(i,u):(typeof u=="number"||typeof u=="bigint")&&un(i,""+u);break;case"onScroll":u!=null&&Pe("scroll",i);break;case"onScrollEnd":u!=null&&Pe("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Xn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ga.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),o=a.slice(2,g?a.length-7:void 0),_=i[qt]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(o,_,g),typeof u=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(o,u,g);break e}a in i?i[a]=u:u===!0?i.setAttribute(a,""):$o(i,a,u)}}}function Kt(i,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",i),Pe("load",i);var u=!1,g=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var A=a[_];if(A!=null)switch(_){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:nt(i,o,_,A,a,null)}}g&&nt(i,o,"srcSet",a.srcSet,a,null),u&&nt(i,o,"src",a.src,a,null);return;case"input":Pe("invalid",i);var I=_=A=g=null,P=null,z=null;for(u in a)if(a.hasOwnProperty(u)){var Z=a[u];if(Z!=null)switch(u){case"name":g=Z;break;case"type":A=Z;break;case"checked":P=Z;break;case"defaultChecked":z=Z;break;case"value":_=Z;break;case"defaultValue":I=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,o));break;default:nt(i,o,u,Z,a,null)}}eu(i,_,I,P,z,A,g,!1);return;case"select":Pe("invalid",i),u=A=_=null;for(g in a)if(a.hasOwnProperty(g)&&(I=a[g],I!=null))switch(g){case"value":_=I;break;case"defaultValue":A=I;break;case"multiple":u=I;default:nt(i,o,g,I,a,null)}o=_,a=A,i.multiple=!!u,o!=null?ds(i,!!u,o,!1):a!=null&&ds(i,!!u,a,!0);return;case"textarea":Pe("invalid",i),_=g=u=null;for(A in a)if(a.hasOwnProperty(A)&&(I=a[A],I!=null))switch(A){case"value":u=I;break;case"defaultValue":g=I;break;case"children":_=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(91));break;default:nt(i,o,A,I,a,null)}hs(i,u,g,_);return;case"option":for(P in a)if(a.hasOwnProperty(P)&&(u=a[P],u!=null))switch(P){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:nt(i,o,P,u,a,null)}return;case"dialog":Pe("beforetoggle",i),Pe("toggle",i),Pe("cancel",i),Pe("close",i);break;case"iframe":case"object":Pe("load",i);break;case"video":case"audio":for(u=0;u<il.length;u++)Pe(il[u],i);break;case"image":Pe("error",i),Pe("load",i);break;case"details":Pe("toggle",i);break;case"embed":case"source":case"link":Pe("error",i),Pe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(u=a[z],u!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:nt(i,o,z,u,a,null)}return;default:if(Wo(o)){for(Z in a)a.hasOwnProperty(Z)&&(u=a[Z],u!==void 0&&jd(i,o,Z,u,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(u=a[I],u!=null&&nt(i,o,I,u,a,null))}function GA(i,o,a,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,_=null,A=null,I=null,P=null,z=null,Z=null;for(Q in a){var te=a[Q];if(a.hasOwnProperty(Q)&&te!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":P=te;default:u.hasOwnProperty(Q)||nt(i,o,Q,null,u,te)}}for(var Y in u){var Q=u[Y];if(te=a[Y],u.hasOwnProperty(Y)&&(Q!=null||te!=null))switch(Y){case"type":_=Q;break;case"name":g=Q;break;case"checked":z=Q;break;case"defaultChecked":Z=Q;break;case"value":A=Q;break;case"defaultValue":I=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,o));break;default:Q!==te&&nt(i,o,Y,Q,u,te)}}Zo(i,A,I,P,z,Z,_,g);return;case"select":Q=A=I=Y=null;for(_ in a)if(P=a[_],a.hasOwnProperty(_)&&P!=null)switch(_){case"value":break;case"multiple":Q=P;default:u.hasOwnProperty(_)||nt(i,o,_,null,u,P)}for(g in u)if(_=u[g],P=a[g],u.hasOwnProperty(g)&&(_!=null||P!=null))switch(g){case"value":Y=_;break;case"defaultValue":I=_;break;case"multiple":A=_;default:_!==P&&nt(i,o,g,_,u,P)}o=I,a=A,u=Q,Y!=null?ds(i,!!a,Y,!1):!!u!=!!a&&(o!=null?ds(i,!!a,o,!0):ds(i,!!a,a?[]:"",!1));return;case"textarea":Q=Y=null;for(I in a)if(g=a[I],a.hasOwnProperty(I)&&g!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:nt(i,o,I,null,u,g)}for(A in u)if(g=u[A],_=a[A],u.hasOwnProperty(A)&&(g!=null||_!=null))switch(A){case"value":Y=g;break;case"defaultValue":Q=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==_&&nt(i,o,A,g,u,_)}tu(i,Y,Q);return;case"option":for(var ge in a)if(Y=a[ge],a.hasOwnProperty(ge)&&Y!=null&&!u.hasOwnProperty(ge))switch(ge){case"selected":i.selected=!1;break;default:nt(i,o,ge,null,u,Y)}for(P in u)if(Y=u[P],Q=a[P],u.hasOwnProperty(P)&&Y!==Q&&(Y!=null||Q!=null))switch(P){case"selected":i.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:nt(i,o,P,Y,u,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in a)Y=a[Ee],a.hasOwnProperty(Ee)&&Y!=null&&!u.hasOwnProperty(Ee)&&nt(i,o,Ee,null,u,Y);for(z in u)if(Y=u[z],Q=a[z],u.hasOwnProperty(z)&&Y!==Q&&(Y!=null||Q!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,o));break;default:nt(i,o,z,Y,u,Q)}return;default:if(Wo(o)){for(var it in a)Y=a[it],a.hasOwnProperty(it)&&Y!==void 0&&!u.hasOwnProperty(it)&&jd(i,o,it,void 0,u,Y);for(Z in u)Y=u[Z],Q=a[Z],!u.hasOwnProperty(Z)||Y===Q||Y===void 0&&Q===void 0||jd(i,o,Z,Y,u,Q);return}}for(var O in a)Y=a[O],a.hasOwnProperty(O)&&Y!=null&&!u.hasOwnProperty(O)&&nt(i,o,O,null,u,Y);for(te in u)Y=u[te],Q=a[te],!u.hasOwnProperty(te)||Y===Q||Y==null&&Q==null||nt(i,o,te,Y,u,Q)}function Ky(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function BA(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var g=a[u],_=g.transferSize,A=g.initiatorType,I=g.duration;if(_&&I&&Ky(A)){for(A=0,I=g.responseEnd,u+=1;u<a.length;u++){var P=a[u],z=P.startTime;if(z>I)break;var Z=P.transferSize,te=P.initiatorType;Z&&Ky(te)&&(P=P.responseEnd,A+=Z*(P<I?1:(I-z)/(P-z)))}if(--u,o+=8*(_+A)/(g.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var eh=null,th=null;function sc(i){return i.nodeType===9?i:i.ownerDocument}function Qy(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xy(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function nh(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ih=null;function FA(){var i=window.event;return i&&i.type==="popstate"?i===ih?!1:(ih=i,!0):(ih=null,!1)}var $y=typeof setTimeout=="function"?setTimeout:void 0,HA=typeof clearTimeout=="function"?clearTimeout:void 0,Zy=typeof Promise=="function"?Promise:void 0,zA=typeof queueMicrotask=="function"?queueMicrotask:typeof Zy<"u"?function(i){return Zy.resolve(null).then(i).catch(YA)}:$y;function YA(i){setTimeout(function(){throw i})}function Ls(i){return i==="head"}function Wy(i,o){var a=o,u=0;do{var g=a.nextSibling;if(i.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(u===0){i.removeChild(g),Vr(o);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")ol(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,ol(a);for(var _=a.firstChild;_;){var A=_.nextSibling,I=_.nodeName;_[fi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=A}}else a==="body"&&ol(i.ownerDocument.body);a=g}while(a);Vr(o)}function jy(i,o){var a=i;i=0;do{var u=a.nextSibling;if(a.nodeType===1?o?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(o?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=u}while(a)}function sh(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":sh(a),Xo(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function JA(i,o,a,u){for(;i.nodeType===1;){var g=a;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[fi])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var _=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=On(i.nextSibling),i===null)break}return null}function KA(i,o,a){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=On(i.nextSibling),i===null))return null;return i}function e_(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=On(i.nextSibling),i===null))return null;return i}function oh(i){return i.data==="$?"||i.data==="$~"}function rh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function QA(i,o){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||a.readyState!=="loading")o();else{var u=function(){o(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function On(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var ah=null;function t_(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(o===0)return On(i.nextSibling);o--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||o++}i=i.nextSibling}return null}function n_(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(o===0)return i;o--}else a!=="/$"&&a!=="/&"||o++}i=i.previousSibling}return null}function i_(i,o,a){switch(o=sc(a),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function ol(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Xo(i)}var Gn=new Map,s_=new Set;function oc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Wi=re.d;re.d={f:XA,r:$A,D:ZA,C:WA,L:jA,m:eC,X:nC,S:tC,M:iC};function XA(){var i=Wi.f(),o=$u();return i||o}function $A(i){var o=Mn(i);o!==null&&o.tag===5&&o.type==="form"?Eg(o):Wi.r(i)}var xr=typeof document>"u"?null:document;function o_(i,o,a){var u=xr;if(u&&typeof o=="string"&&o){var g=ln(o);g='link[rel="'+i+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),s_.has(g)||(s_.add(g),i={rel:i,crossOrigin:a,href:o},u.querySelector(g)===null&&(o=u.createElement("link"),Kt(o,"link",i),Rt(o),u.head.appendChild(o)))}}function ZA(i){Wi.D(i),o_("dns-prefetch",i,null)}function WA(i,o){Wi.C(i,o),o_("preconnect",i,o)}function jA(i,o,a){Wi.L(i,o,a);var u=xr;if(u&&i&&o){var g='link[rel="preload"][as="'+ln(o)+'"]';o==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+ln(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+ln(a.imageSizes)+'"]')):g+='[href="'+ln(i)+'"]';var _=g;switch(o){case"style":_=Dr(i);break;case"script":_=br(i)}Gn.has(_)||(i=E({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:i,as:o},a),Gn.set(_,i),u.querySelector(g)!==null||o==="style"&&u.querySelector(rl(_))||o==="script"&&u.querySelector(al(_))||(o=u.createElement("link"),Kt(o,"link",i),Rt(o),u.head.appendChild(o)))}}function eC(i,o){Wi.m(i,o);var a=xr;if(a&&i){var u=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+ln(u)+'"][href="'+ln(i)+'"]',_=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=br(i)}if(!Gn.has(_)&&(i=E({rel:"modulepreload",href:i},o),Gn.set(_,i),a.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(al(_)))return}u=a.createElement("link"),Kt(u,"link",i),Rt(u),a.head.appendChild(u)}}}function tC(i,o,a){Wi.S(i,o,a);var u=xr;if(u&&i){var g=hi(u).hoistableStyles,_=Dr(i);o=o||"default";var A=g.get(_);if(!A){var I={loading:0,preload:null};if(A=u.querySelector(rl(_)))I.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":o},a),(a=Gn.get(_))&&lh(i,a);var P=A=u.createElement("link");Rt(P),Kt(P,"link",i),P._p=new Promise(function(z,Z){P.onload=z,P.onerror=Z}),P.addEventListener("load",function(){I.loading|=1}),P.addEventListener("error",function(){I.loading|=2}),I.loading|=4,rc(A,o,u)}A={type:"stylesheet",instance:A,count:1,state:I},g.set(_,A)}}}function nC(i,o){Wi.X(i,o);var a=xr;if(a&&i){var u=hi(a).hoistableScripts,g=br(i),_=u.get(g);_||(_=a.querySelector(al(g)),_||(i=E({src:i,async:!0},o),(o=Gn.get(g))&&uh(i,o),_=a.createElement("script"),Rt(_),Kt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function iC(i,o){Wi.M(i,o);var a=xr;if(a&&i){var u=hi(a).hoistableScripts,g=br(i),_=u.get(g);_||(_=a.querySelector(al(g)),_||(i=E({src:i,async:!0,type:"module"},o),(o=Gn.get(g))&&uh(i,o),_=a.createElement("script"),Rt(_),Kt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function r_(i,o,a,u){var g=(g=we.current)?oc(g):null;if(!g)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=Dr(a.href),a=hi(g).hoistableStyles,u=a.get(o),u||(u={type:"style",instance:null,count:0,state:null},a.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Dr(a.href);var _=hi(g).hoistableStyles,A=_.get(i);if(A||(g=g.ownerDocument||g,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,A),(_=g.querySelector(rl(i)))&&!_._p&&(A.instance=_,A.state.loading=5),Gn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Gn.set(i,a),_||sC(g,i,a,A.state))),o&&u===null)throw Error(s(528,""));return A}if(o&&u!==null)throw Error(s(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=br(a),a=hi(g).hoistableScripts,u=a.get(o),u||(u={type:"script",instance:null,count:0,state:null},a.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Dr(i){return'href="'+ln(i)+'"'}function rl(i){return'link[rel="stylesheet"]['+i+"]"}function a_(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function sC(i,o,a,u){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=i.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),Kt(o,"link",a),Rt(o),i.head.appendChild(o))}function br(i){return'[src="'+ln(i)+'"]'}function al(i){return"script[async]"+i}function l_(i,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var u=i.querySelector('style[data-href~="'+ln(a.href)+'"]');if(u)return o.instance=u,Rt(u),u;var g=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Rt(u),Kt(u,"style",g),rc(u,a.precedence,i),o.instance=u;case"stylesheet":g=Dr(a.href);var _=i.querySelector(rl(g));if(_)return o.state.loading|=4,o.instance=_,Rt(_),_;u=a_(a),(g=Gn.get(g))&&lh(u,g),_=(i.ownerDocument||i).createElement("link"),Rt(_);var A=_;return A._p=new Promise(function(I,P){A.onload=I,A.onerror=P}),Kt(_,"link",u),o.state.loading|=4,rc(_,a.precedence,i),o.instance=_;case"script":return _=br(a.src),(g=i.querySelector(al(_)))?(o.instance=g,Rt(g),g):(u=a,(g=Gn.get(_))&&(u=E({},a),uh(u,g)),i=i.ownerDocument||i,g=i.createElement("script"),Rt(g),Kt(g,"link",u),i.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,rc(u,a.precedence,i));return o.instance}function rc(i,o,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,_=g,A=0;A<u.length;A++){var I=u[A];if(I.dataset.precedence===o)_=I;else if(_!==g)break}_?_.parentNode.insertBefore(i,_.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(i,o.firstChild))}function lh(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function uh(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var ac=null;function u_(i,o,a){if(ac===null){var u=new Map,g=ac=new Map;g.set(a,u)}else g=ac,u=g.get(a),u||(u=new Map,g.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),g=0;g<a.length;g++){var _=a[g];if(!(_[fi]||_[It]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(o)||"";A=i+A;var I=u.get(A);I?I.push(_):u.set(A,[_])}}return u}function c_(i,o,a){i=i.ownerDocument||i,i.head.insertBefore(a,o==="title"?i.querySelector("head > title"):null)}function oC(i,o,a){if(a===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function f_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function rC(i,o,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Dr(u.href),_=o.querySelector(rl(g));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=lc.bind(i),o.then(i,i)),a.state.loading|=4,a.instance=_,Rt(_);return}_=o.ownerDocument||o,u=a_(u),(g=Gn.get(g))&&lh(u,g),_=_.createElement("link"),Rt(_);var A=_;A._p=new Promise(function(I,P){A.onload=I,A.onerror=P}),Kt(_,"link",u),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,o),(o=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=lc.bind(i),o.addEventListener("load",a),o.addEventListener("error",a))}}var ch=0;function aC(i,o){return i.stylesheets&&i.count===0&&cc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var u=setTimeout(function(){if(i.stylesheets&&cc(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+o);0<i.imgBytes&&ch===0&&(ch=62500*BA());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&cc(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>ch?50:800)+o);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function lc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)cc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var uc=null;function cc(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,uc=new Map,o.forEach(lC,i),uc=null,lc.call(i))}function lC(i,o){if(!(o.state.loading&4)){var a=uc.get(i);if(a)var u=a.get(null);else{a=new Map,uc.set(i,a);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<g.length;_++){var A=g[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),u=A)}u&&a.set(null,u)}g=o.instance,A=g.getAttribute("data-precedence"),_=a.get(A)||u,_===u&&a.set(null,g),a.set(A,g),this.count++,u=lc.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),_?_.parentNode.insertBefore(g,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),o.state.loading|=4}}var ll={$$typeof:ee,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function uC(i,o,a,u,g,_,A,I,P){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ui(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ui(0),this.hiddenUpdates=ui(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function d_(i,o,a,u,g,_,A,I,P,z,Z,te){return i=new uC(i,o,a,A,P,z,Z,te,I),o=1,_===!0&&(o|=24),_=vn(3,null,null,o),i.current=_,_.stateNode=i,o=Hf(),o.refCount++,i.pooledCache=o,o.refCount++,_.memoizedState={element:u,isDehydrated:a,cache:o},Kf(_),i}function h_(i){return i?(i=ur,i):ur}function m_(i,o,a,u,g,_){g=h_(g),u.context===null?u.context=g:u.pendingContext=g,u=Is(o),u.payload={element:a},_=_===void 0?null:_,_!==null&&(u.callback=_),a=Rs(i,u,o),a!==null&&(mn(a,i,o),Ga(a,i,o))}function p_(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<o?a:o}}function fh(i,o){p_(i,o),(i=i.alternate)&&p_(i,o)}function g_(i){if(i.tag===13||i.tag===31){var o=Ao(i,67108864);o!==null&&mn(o,i,67108864),fh(i,67108864)}}function y_(i){if(i.tag===13||i.tag===31){var o=In();o=co(o);var a=Ao(i,o);a!==null&&mn(a,i,o),fh(i,o)}}var fc=!0;function cC(i,o,a,u){var g=$.T;$.T=null;var _=re.p;try{re.p=2,dh(i,o,a,u)}finally{re.p=_,$.T=g}}function fC(i,o,a,u){var g=$.T;$.T=null;var _=re.p;try{re.p=8,dh(i,o,a,u)}finally{re.p=_,$.T=g}}function dh(i,o,a,u){if(fc){var g=hh(u);if(g===null)Wd(i,o,u,dc,a),T_(i,u);else if(hC(g,i,o,a,u))u.stopPropagation();else if(T_(i,u),o&4&&-1<dC.indexOf(i)){for(;g!==null;){var _=Mn(g);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=ai(_.pendingLanes);if(A!==0){var I=_;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var P=1<<31-yt(A);I.entanglements[1]|=P,A&=~P}Ri(_),(Xe&6)===0&&(Qu=sn()+500,nl(0))}}break;case 31:case 13:I=Ao(_,2),I!==null&&mn(I,_,2),$u(),fh(_,2)}if(_=hh(u),_===null&&Wd(i,o,u,dc,a),_===g)break;g=_}g!==null&&u.stopPropagation()}else Wd(i,o,u,null,a)}}function hh(i){return i=xn(i),mh(i)}var dc=null;function mh(i){if(dc=null,i=di(i),i!==null){var o=l(i);if(o===null)i=null;else{var a=o.tag;if(a===13){if(i=c(o),i!==null)return i;i=null}else if(a===31){if(i=m(o),i!==null)return i;i=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return dc=i,null}function __(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ro()){case fa:return 2;case da:return 8;case cs:case vf:return 32;case zl:return 268435456;default:return 32}default:return 32}}var ph=!1,ks=null,qs=null,Os=null,ul=new Map,cl=new Map,Gs=[],dC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function T_(i,o){switch(i){case"focusin":case"focusout":ks=null;break;case"dragenter":case"dragleave":qs=null;break;case"mouseover":case"mouseout":Os=null;break;case"pointerover":case"pointerout":ul.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":cl.delete(o.pointerId)}}function fl(i,o,a,u,g,_){return i===null||i.nativeEvent!==_?(i={blockedOn:o,domEventName:a,eventSystemFlags:u,nativeEvent:_,targetContainers:[g]},o!==null&&(o=Mn(o),o!==null&&g_(o)),i):(i.eventSystemFlags|=u,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function hC(i,o,a,u,g){switch(o){case"focusin":return ks=fl(ks,i,o,a,u,g),!0;case"dragenter":return qs=fl(qs,i,o,a,u,g),!0;case"mouseover":return Os=fl(Os,i,o,a,u,g),!0;case"pointerover":var _=g.pointerId;return ul.set(_,fl(ul.get(_)||null,i,o,a,u,g)),!0;case"gotpointercapture":return _=g.pointerId,cl.set(_,fl(cl.get(_)||null,i,o,a,u,g)),!0}return!1}function v_(i){var o=di(i.target);if(o!==null){var a=l(o);if(a!==null){if(o=a.tag,o===13){if(o=c(a),o!==null){i.blockedOn=o,Kn(i.priority,function(){y_(a)});return}}else if(o===31){if(o=m(a),o!==null){i.blockedOn=o,Kn(i.priority,function(){y_(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function hc(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var a=hh(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);Ca=u,a.target.dispatchEvent(u),Ca=null}else return o=Mn(a),o!==null&&g_(o),i.blockedOn=a,!1;o.shift()}return!0}function E_(i,o,a){hc(i)&&a.delete(o)}function mC(){ph=!1,ks!==null&&hc(ks)&&(ks=null),qs!==null&&hc(qs)&&(qs=null),Os!==null&&hc(Os)&&(Os=null),ul.forEach(E_),cl.forEach(E_)}function mc(i,o){i.blockedOn===o&&(i.blockedOn=null,ph||(ph=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,mC)))}var pc=null;function S_(i){pc!==i&&(pc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){pc===i&&(pc=null);for(var o=0;o<i.length;o+=3){var a=i[o],u=i[o+1],g=i[o+2];if(typeof u!="function"){if(mh(u||a)===null)continue;break}var _=Mn(a);_!==null&&(i.splice(o,3),o-=3,hd(_,{pending:!0,data:g,method:a.method,action:u},u,g))}}))}function Vr(i){function o(P){return mc(P,i)}ks!==null&&mc(ks,i),qs!==null&&mc(qs,i),Os!==null&&mc(Os,i),ul.forEach(o),cl.forEach(o);for(var a=0;a<Gs.length;a++){var u=Gs[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Gs.length&&(a=Gs[0],a.blockedOn===null);)v_(a),a.blockedOn===null&&Gs.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var g=a[u],_=a[u+1],A=g[qt]||null;if(typeof _=="function")A||S_(a);else if(A){var I=null;if(_&&_.hasAttribute("formAction")){if(g=_,A=_[qt]||null)I=A.formAction;else if(mh(g)!==null)continue}else I=A.action;typeof I=="function"?a[u+1]=I:(a.splice(u,3),u-=3),S_(a)}}}function A_(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return g=A})},focusReset:"manual",scroll:"manual"})}function o(){g!==null&&(g(),g=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),g!==null&&(g(),g=null)}}}function gh(i){this._internalRoot=i}gc.prototype.render=gh.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var a=o.current,u=In();m_(a,u,i,o,null,null)},gc.prototype.unmount=gh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;m_(i.current,2,null,i,null,null),$u(),o[ci]=null}};function gc(i){this._internalRoot=i}gc.prototype.unstable_scheduleHydration=function(i){if(i){var o=$l();i={blockedOn:null,target:i,priority:o};for(var a=0;a<Gs.length&&o!==0&&o<Gs[a].priority;a++);Gs.splice(a,0,i),a===0&&v_(i)}};var C_=e.version;if(C_!=="19.2.0")throw Error(s(527,C_,"19.2.0"));re.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=p(o),i=i!==null?T(i):null,i=i===null?null:i.stateNode,i};var pC={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yc.isDisabled&&yc.supportsFiber)try{Yn=yc.inject(pC),Ft=yc}catch{}}return hl.createRoot=function(i,o){if(!r(i))throw Error(s(299));var a=!1,u="",g=Dg,_=bg,A=Vg;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=d_(i,1,!1,null,null,a,u,null,g,_,A,A_),i[ci]=o.current,Zd(i),new gh(o)},hl.hydrateRoot=function(i,o,a){if(!r(i))throw Error(s(299));var u=!1,g="",_=Dg,A=bg,I=Vg,P=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(P=a.formState)),o=d_(i,1,!0,o,a??null,u,g,P,_,A,I,A_),o.context=h_(null),a=o.current,u=In(),u=co(u),g=Is(u),g.callback=null,Rs(a,g,u),a=u,o.current.lanes=a,lo(o,a),Ri(o),i[ci]=o.current,Zd(i),new gc(o)},hl.version="19.2.0",hl}var P_;function RC(){if(P_)return Th.exports;P_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Th.exports=IC(),Th.exports}var wC=RC();const NC=yE(wC);var ji=(n=>(n.LOGIN="LOGIN",n.REGISTER="REGISTER",n.DASHBOARD="DASHBOARD",n.ADMIN="ADMIN",n))(ji||{});const Fn=()=>{const e=new Date().toLocaleString("en-US",{timeZone:"Africa/Cairo"});return new Date(e)},MC=()=>{const n=Fn();return new Intl.DateTimeFormat("ar-SA-u-ca-islamic",{day:"numeric",month:"long",year:"numeric"}).format(n)},xC=()=>{const n=Fn();return new Intl.DateTimeFormat("ar-EG",{day:"numeric",month:"long",year:"numeric"}).format(n)},DC=5,bC=10,U_=()=>{const n=Fn(),e=new Date(n);e.setHours(DC,bC,0,0);const t=new Date(e.getTime()-1800*1e3),s=new Date(e.getTime()+3600*1e3),r=l=>l.toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit",hour12:!0});if(n>=t&&n<=s)return{isOpen:!0,message:`     .    ${r(s)}`,fajrTime:r(e),nextFajrCountdown:""};if(n<t){const l=t.getTime()-n.getTime(),c=Math.ceil(l/6e4),m=Math.floor(c/60),y=c%60;return{isOpen:!1,message:`    .       (${r(t)}).`,fajrTime:r(e),nextFajrCountdown:`${m>0?m+"   ":""}${y} `}}else return{isOpen:!1,message:"      .       .",fajrTime:r(e),nextFajrCountdown:" "}},Yr=(n,e)=>n.getFullYear()===e.getFullYear()&&n.getMonth()===e.getMonth()&&n.getDate()===e.getDate(),_E=(n,e)=>{const t=new Date(n);return t.setDate(t.getDate()-1),Yr(t,e)},VC=()=>{};var L_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},PC=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const r=n[t++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const l=n[t++];e[s++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=n[t++],c=n[t++],m=n[t++],y=((r&7)<<18|(l&63)<<12|(c&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((r&15)<<12|(l&63)<<6|c&63)}}return e.join("")},vE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const l=n[r],c=r+1<n.length,m=c?n[r+1]:0,y=r+2<n.length,p=y?n[r+2]:0,T=l>>2,E=(l&3)<<4|m>>4;let S=(m&15)<<2|p>>6,w=p&63;y||(w=64,c||(S=64)),s.push(t[T],t[E],t[S],t[w])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(TE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):PC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const l=t[n.charAt(r++)],m=r<n.length?t[n.charAt(r)]:0;++r;const p=r<n.length?t[n.charAt(r)]:64;++r;const E=r<n.length?t[n.charAt(r)]:64;if(++r,l==null||m==null||p==null||E==null)throw new UC;const S=l<<2|m>>4;if(s.push(S),p!==64){const w=m<<4&240|p>>2;if(s.push(w),E!==64){const G=p<<6&192|E;s.push(G)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class UC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LC=function(n){const e=TE(n);return vE.encodeByteArray(e,!0)},bc=function(n){return LC(n).replace(/\./g,"")},kC=function(n){try{return vE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=()=>qC().__FIREBASE_DEFAULTS__,GC=()=>{if(typeof process>"u"||typeof L_>"u")return;const n=L_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},BC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&kC(n[1]);return e&&JSON.parse(e)},fm=()=>{try{return VC()||OC()||GC()||BC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},FC=n=>{var e,t;return(t=(e=fm())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},HC=n=>{const e=FC(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},EE=()=>{var n;return(n=fm())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function YC(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",r=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[bc(JSON.stringify(t)),bc(JSON.stringify(c)),""].join(".")}const Tl={};function KC(){const n={prod:[],emulator:[]};for(const e of Object.keys(Tl))Tl[e]?n.emulator.push(e):n.prod.push(e);return n}function QC(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let k_=!1;function XC(n,e){if(typeof window>"u"||typeof document>"u"||!dm(window.location.host)||Tl[n]===e||Tl[n]||k_)return;Tl[n]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",l=KC().prod.length>0;function c(){const S=document.getElementById(s);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function y(S,w){S.setAttribute("width","24"),S.setAttribute("id",w),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{k_=!0,c()},S}function T(S,w){S.setAttribute("id",w),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=QC(s),w=t("text"),G=document.getElementById(w)||document.createElement("span"),B=t("learnmore"),J=document.getElementById(B)||document.createElement("a"),j=t("preprendIcon"),se=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ee=S.element;m(ee),T(J,B);const le=p();y(se,j),ee.append(se,G,J,le),document.body.appendChild(ee)}l?(G.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZC(){var e;const n=(e=fm())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WC(){return!ZC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jC(){try{return typeof indexedDB=="object"}catch{return!1}}function eI(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var l;e(((l=r.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="FirebaseError";class jr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=tI,Object.setPrototypeOf(this,jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,SE.prototype.create)}}class SE{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},r=`${this.service}/${e}`,l=this.errors[e],c=l?nI(l,s):"Error",m=`${this.serviceName}: ${c} (${r}).`;return new jr(r,m,s)}}function nI(n,e){return n.replace(iI,(t,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const iI=/\{\$([^}]+)}/g;function Vc(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const r of t){if(!s.includes(r))return!1;const l=n[r],c=e[r];if(q_(l)&&q_(c)){if(!Vc(l,c))return!1}else if(l!==c)return!1}for(const r of s)if(!t.includes(r))return!1;return!0}function q_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(n){return n&&n._delegate?n._delegate:n}class Il{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new zC;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rI(e))try{this.getOrInitializeService({instanceIdentifier:Lo})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:r});s.resolve(l)}catch{}}}}clearInstance(e=Lo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Lo){return this.instances.has(e)}getOptions(e=Lo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);s===m&&c.resolve(r)}return r}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const l=this.instances.get(s);return l&&e(l,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const r of s)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:oI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Lo){return this.component?this.component.multipleInstances?e:Lo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oI(n){return n===Lo?void 0:n}function rI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new sI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(He||(He={}));const lI={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},uI=He.INFO,cI={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},fI=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),r=cI[e];if(r)console[r](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class AE{constructor(e){this.name=e,this._logLevel=uI,this._logHandler=fI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const dI=(n,e)=>e.some(t=>n instanceof t);let O_,G_;function hI(){return O_||(O_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mI(){return G_||(G_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CE=new WeakMap,bh=new WeakMap,IE=new WeakMap,Ah=new WeakMap,hm=new WeakMap;function pI(n){const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(zs(n.result)),r()},c=()=>{s(n.error),r()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&CE.set(t,n)}).catch(()=>{}),hm.set(e,n),e}function gI(n){if(bh.has(n))return;const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),r()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});bh.set(n,e)}let Vh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return bh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||IE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return zs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function yI(n){Vh=n(Vh)}function _I(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Ch(this),e,...t);return IE.set(s,e.sort?e.sort():[e]),zs(s)}:mI().includes(n)?function(...e){return n.apply(Ch(this),e),zs(CE.get(this))}:function(...e){return zs(n.apply(Ch(this),e))}}function TI(n){return typeof n=="function"?_I(n):(n instanceof IDBTransaction&&gI(n),dI(n,hI())?new Proxy(n,Vh):n)}function zs(n){if(n instanceof IDBRequest)return pI(n);if(Ah.has(n))return Ah.get(n);const e=TI(n);return e!==n&&(Ah.set(n,e),hm.set(e,n)),e}const Ch=n=>hm.get(n);function vI(n,e,{blocked:t,upgrade:s,blocking:r,terminated:l}={}){const c=indexedDB.open(n,e),m=zs(c);return s&&c.addEventListener("upgradeneeded",y=>{s(zs(c.result),y.oldVersion,y.newVersion,zs(c.transaction),y)}),t&&c.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),m.then(y=>{l&&y.addEventListener("close",()=>l()),r&&y.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const EI=["get","getKey","getAll","getAllKeys","count"],SI=["put","add","delete","clear"],Ih=new Map;function B_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ih.get(e))return Ih.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,r=SI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(r||EI.includes(t)))return;const l=async function(c,...m){const y=this.transaction(c,r?"readwrite":"readonly");let p=y.store;return s&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),r&&y.done]))[0]};return Ih.set(e,l),l}yI(n=>({...n,get:(e,t,s)=>B_(e,t)||n.get(e,t,s),has:(e,t)=>!!B_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(CI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function CI(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ph="@firebase/app",F_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new AE("@firebase/app"),II="@firebase/app-compat",RI="@firebase/analytics-compat",wI="@firebase/analytics",NI="@firebase/app-check-compat",MI="@firebase/app-check",xI="@firebase/auth",DI="@firebase/auth-compat",bI="@firebase/database",VI="@firebase/data-connect",PI="@firebase/database-compat",UI="@firebase/functions",LI="@firebase/functions-compat",kI="@firebase/installations",qI="@firebase/installations-compat",OI="@firebase/messaging",GI="@firebase/messaging-compat",BI="@firebase/performance",FI="@firebase/performance-compat",HI="@firebase/remote-config",zI="@firebase/remote-config-compat",YI="@firebase/storage",JI="@firebase/storage-compat",KI="@firebase/firestore",QI="@firebase/ai",XI="@firebase/firestore-compat",$I="firebase",ZI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh="[DEFAULT]",WI={[Ph]:"fire-core",[II]:"fire-core-compat",[wI]:"fire-analytics",[RI]:"fire-analytics-compat",[MI]:"fire-app-check",[NI]:"fire-app-check-compat",[xI]:"fire-auth",[DI]:"fire-auth-compat",[bI]:"fire-rtdb",[VI]:"fire-data-connect",[PI]:"fire-rtdb-compat",[UI]:"fire-fn",[LI]:"fire-fn-compat",[kI]:"fire-iid",[qI]:"fire-iid-compat",[OI]:"fire-fcm",[GI]:"fire-fcm-compat",[BI]:"fire-perf",[FI]:"fire-perf-compat",[HI]:"fire-rc",[zI]:"fire-rc-compat",[YI]:"fire-gcs",[JI]:"fire-gcs-compat",[KI]:"fire-fst",[XI]:"fire-fst-compat",[QI]:"fire-vertex","fire-js":"fire-js",[$I]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=new Map,jI=new Map,Lh=new Map;function H_(n,e){try{n.container.addComponent(e)}catch(t){ns.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Uc(n){const e=n.name;if(Lh.has(e))return ns.debug(`There were multiple attempts to register component ${e}.`),!1;Lh.set(e,n);for(const t of Pc.values())H_(t,n);for(const t of jI.values())H_(t,n);return!0}function eR(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function tR(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ys=new SE("app","Firebase",nR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Il("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=ZI;function RE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Uh,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Ys.create("bad-app-name",{appName:String(r)});if(t||(t=EE()),!t)throw Ys.create("no-options");const l=Pc.get(r);if(l){if(Vc(t,l.options)&&Vc(s,l.config))return l;throw Ys.create("duplicate-app",{appName:r})}const c=new aI(r);for(const y of Lh.values())c.addComponent(y);const m=new iR(t,s,c);return Pc.set(r,m),m}function oR(n=Uh){const e=Pc.get(n);if(!e&&n===Uh&&EE())return RE();if(!e)throw Ys.create("no-app",{appName:n});return e}function Or(n,e,t){let s=WI[n]??n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),l=e.match(/\s|\//);if(r||l){const c=[`Unable to register library "${s}" with version "${e}":`];r&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ns.warn(c.join(" "));return}Uc(new Il(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR="firebase-heartbeat-database",aR=1,Rl="firebase-heartbeat-store";let Rh=null;function wE(){return Rh||(Rh=vI(rR,aR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Rl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ys.create("idb-open",{originalErrorMessage:n.message})})),Rh}async function lR(n){try{const t=(await wE()).transaction(Rl),s=await t.objectStore(Rl).get(NE(n));return await t.done,s}catch(e){if(e instanceof jr)ns.warn(e.message);else{const t=Ys.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ns.warn(t.message)}}}async function z_(n,e){try{const s=(await wE()).transaction(Rl,"readwrite");await s.objectStore(Rl).put(e,NE(n)),await s.done}catch(t){if(t instanceof jr)ns.warn(t.message);else{const s=Ys.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ns.warn(s.message)}}}function NE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=1024,cR=30;class fR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hR(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Y_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats.length>cR){const c=mR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ns.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Y_(),{heartbeatsToSend:s,unsentEntries:r}=dR(this._heartbeatsCache.heartbeats),l=bc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ns.warn(t),""}}}function Y_(){return new Date().toISOString().substring(0,10)}function dR(n,e=uR){const t=[];let s=n.slice();for(const r of n){const l=t.find(c=>c.agent===r.agent);if(l){if(l.dates.push(r.date),J_(t)>e){l.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),J_(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class hR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jC()?eI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await lR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return z_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return z_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function J_(n){return bc(JSON.stringify({version:2,heartbeats:n})).length}function mR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(n){Uc(new Il("platform-logger",e=>new AI(e),"PRIVATE")),Uc(new Il("heartbeat",e=>new fR(e),"PRIVATE")),Or(Ph,F_,n),Or(Ph,F_,"esm2020"),Or("fire-js","")}pR("");var K_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Js,ME;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,M){function N(){}N.prototype=M.prototype,D.F=M.prototype,D.prototype=new N,D.prototype.constructor=D,D.D=function(L,U,q){for(var V=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)V[ze-2]=arguments[ze];return M.prototype[U].apply(L,V)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,M,N){N||(N=0);const L=Array(16);if(typeof M=="string")for(var U=0;U<16;++U)L[U]=M.charCodeAt(N++)|M.charCodeAt(N++)<<8|M.charCodeAt(N++)<<16|M.charCodeAt(N++)<<24;else for(U=0;U<16;++U)L[U]=M[N++]|M[N++]<<8|M[N++]<<16|M[N++]<<24;M=D.g[0],N=D.g[1],U=D.g[2];let q=D.g[3],V;V=M+(q^N&(U^q))+L[0]+3614090360&4294967295,M=N+(V<<7&4294967295|V>>>25),V=q+(U^M&(N^U))+L[1]+3905402710&4294967295,q=M+(V<<12&4294967295|V>>>20),V=U+(N^q&(M^N))+L[2]+606105819&4294967295,U=q+(V<<17&4294967295|V>>>15),V=N+(M^U&(q^M))+L[3]+3250441966&4294967295,N=U+(V<<22&4294967295|V>>>10),V=M+(q^N&(U^q))+L[4]+4118548399&4294967295,M=N+(V<<7&4294967295|V>>>25),V=q+(U^M&(N^U))+L[5]+1200080426&4294967295,q=M+(V<<12&4294967295|V>>>20),V=U+(N^q&(M^N))+L[6]+2821735955&4294967295,U=q+(V<<17&4294967295|V>>>15),V=N+(M^U&(q^M))+L[7]+4249261313&4294967295,N=U+(V<<22&4294967295|V>>>10),V=M+(q^N&(U^q))+L[8]+1770035416&4294967295,M=N+(V<<7&4294967295|V>>>25),V=q+(U^M&(N^U))+L[9]+2336552879&4294967295,q=M+(V<<12&4294967295|V>>>20),V=U+(N^q&(M^N))+L[10]+4294925233&4294967295,U=q+(V<<17&4294967295|V>>>15),V=N+(M^U&(q^M))+L[11]+2304563134&4294967295,N=U+(V<<22&4294967295|V>>>10),V=M+(q^N&(U^q))+L[12]+1804603682&4294967295,M=N+(V<<7&4294967295|V>>>25),V=q+(U^M&(N^U))+L[13]+4254626195&4294967295,q=M+(V<<12&4294967295|V>>>20),V=U+(N^q&(M^N))+L[14]+2792965006&4294967295,U=q+(V<<17&4294967295|V>>>15),V=N+(M^U&(q^M))+L[15]+1236535329&4294967295,N=U+(V<<22&4294967295|V>>>10),V=M+(U^q&(N^U))+L[1]+4129170786&4294967295,M=N+(V<<5&4294967295|V>>>27),V=q+(N^U&(M^N))+L[6]+3225465664&4294967295,q=M+(V<<9&4294967295|V>>>23),V=U+(M^N&(q^M))+L[11]+643717713&4294967295,U=q+(V<<14&4294967295|V>>>18),V=N+(q^M&(U^q))+L[0]+3921069994&4294967295,N=U+(V<<20&4294967295|V>>>12),V=M+(U^q&(N^U))+L[5]+3593408605&4294967295,M=N+(V<<5&4294967295|V>>>27),V=q+(N^U&(M^N))+L[10]+38016083&4294967295,q=M+(V<<9&4294967295|V>>>23),V=U+(M^N&(q^M))+L[15]+3634488961&4294967295,U=q+(V<<14&4294967295|V>>>18),V=N+(q^M&(U^q))+L[4]+3889429448&4294967295,N=U+(V<<20&4294967295|V>>>12),V=M+(U^q&(N^U))+L[9]+568446438&4294967295,M=N+(V<<5&4294967295|V>>>27),V=q+(N^U&(M^N))+L[14]+3275163606&4294967295,q=M+(V<<9&4294967295|V>>>23),V=U+(M^N&(q^M))+L[3]+4107603335&4294967295,U=q+(V<<14&4294967295|V>>>18),V=N+(q^M&(U^q))+L[8]+1163531501&4294967295,N=U+(V<<20&4294967295|V>>>12),V=M+(U^q&(N^U))+L[13]+2850285829&4294967295,M=N+(V<<5&4294967295|V>>>27),V=q+(N^U&(M^N))+L[2]+4243563512&4294967295,q=M+(V<<9&4294967295|V>>>23),V=U+(M^N&(q^M))+L[7]+1735328473&4294967295,U=q+(V<<14&4294967295|V>>>18),V=N+(q^M&(U^q))+L[12]+2368359562&4294967295,N=U+(V<<20&4294967295|V>>>12),V=M+(N^U^q)+L[5]+4294588738&4294967295,M=N+(V<<4&4294967295|V>>>28),V=q+(M^N^U)+L[8]+2272392833&4294967295,q=M+(V<<11&4294967295|V>>>21),V=U+(q^M^N)+L[11]+1839030562&4294967295,U=q+(V<<16&4294967295|V>>>16),V=N+(U^q^M)+L[14]+4259657740&4294967295,N=U+(V<<23&4294967295|V>>>9),V=M+(N^U^q)+L[1]+2763975236&4294967295,M=N+(V<<4&4294967295|V>>>28),V=q+(M^N^U)+L[4]+1272893353&4294967295,q=M+(V<<11&4294967295|V>>>21),V=U+(q^M^N)+L[7]+4139469664&4294967295,U=q+(V<<16&4294967295|V>>>16),V=N+(U^q^M)+L[10]+3200236656&4294967295,N=U+(V<<23&4294967295|V>>>9),V=M+(N^U^q)+L[13]+681279174&4294967295,M=N+(V<<4&4294967295|V>>>28),V=q+(M^N^U)+L[0]+3936430074&4294967295,q=M+(V<<11&4294967295|V>>>21),V=U+(q^M^N)+L[3]+3572445317&4294967295,U=q+(V<<16&4294967295|V>>>16),V=N+(U^q^M)+L[6]+76029189&4294967295,N=U+(V<<23&4294967295|V>>>9),V=M+(N^U^q)+L[9]+3654602809&4294967295,M=N+(V<<4&4294967295|V>>>28),V=q+(M^N^U)+L[12]+3873151461&4294967295,q=M+(V<<11&4294967295|V>>>21),V=U+(q^M^N)+L[15]+530742520&4294967295,U=q+(V<<16&4294967295|V>>>16),V=N+(U^q^M)+L[2]+3299628645&4294967295,N=U+(V<<23&4294967295|V>>>9),V=M+(U^(N|~q))+L[0]+4096336452&4294967295,M=N+(V<<6&4294967295|V>>>26),V=q+(N^(M|~U))+L[7]+1126891415&4294967295,q=M+(V<<10&4294967295|V>>>22),V=U+(M^(q|~N))+L[14]+2878612391&4294967295,U=q+(V<<15&4294967295|V>>>17),V=N+(q^(U|~M))+L[5]+4237533241&4294967295,N=U+(V<<21&4294967295|V>>>11),V=M+(U^(N|~q))+L[12]+1700485571&4294967295,M=N+(V<<6&4294967295|V>>>26),V=q+(N^(M|~U))+L[3]+2399980690&4294967295,q=M+(V<<10&4294967295|V>>>22),V=U+(M^(q|~N))+L[10]+4293915773&4294967295,U=q+(V<<15&4294967295|V>>>17),V=N+(q^(U|~M))+L[1]+2240044497&4294967295,N=U+(V<<21&4294967295|V>>>11),V=M+(U^(N|~q))+L[8]+1873313359&4294967295,M=N+(V<<6&4294967295|V>>>26),V=q+(N^(M|~U))+L[15]+4264355552&4294967295,q=M+(V<<10&4294967295|V>>>22),V=U+(M^(q|~N))+L[6]+2734768916&4294967295,U=q+(V<<15&4294967295|V>>>17),V=N+(q^(U|~M))+L[13]+1309151649&4294967295,N=U+(V<<21&4294967295|V>>>11),V=M+(U^(N|~q))+L[4]+4149444226&4294967295,M=N+(V<<6&4294967295|V>>>26),V=q+(N^(M|~U))+L[11]+3174756917&4294967295,q=M+(V<<10&4294967295|V>>>22),V=U+(M^(q|~N))+L[2]+718787259&4294967295,U=q+(V<<15&4294967295|V>>>17),V=N+(q^(U|~M))+L[9]+3951481745&4294967295,D.g[0]=D.g[0]+M&4294967295,D.g[1]=D.g[1]+(U+(V<<21&4294967295|V>>>11))&4294967295,D.g[2]=D.g[2]+U&4294967295,D.g[3]=D.g[3]+q&4294967295}s.prototype.v=function(D,M){M===void 0&&(M=D.length);const N=M-this.blockSize,L=this.C;let U=this.h,q=0;for(;q<M;){if(U==0)for(;q<=N;)r(this,D,q),q+=this.blockSize;if(typeof D=="string"){for(;q<M;)if(L[U++]=D.charCodeAt(q++),U==this.blockSize){r(this,L),U=0;break}}else for(;q<M;)if(L[U++]=D[q++],U==this.blockSize){r(this,L),U=0;break}}this.h=U,this.o+=M},s.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var M=1;M<D.length-8;++M)D[M]=0;M=this.o*8;for(var N=D.length-8;N<D.length;++N)D[N]=M&255,M/=256;for(this.v(D),D=Array(16),M=0,N=0;N<4;++N)for(let L=0;L<32;L+=8)D[M++]=this.g[N]>>>L&255;return D};function l(D,M){var N=m;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=M(D)}function c(D,M){this.h=M;const N=[];let L=!0;for(let U=D.length-1;U>=0;U--){const q=D[U]|0;L&&q==M||(N[U]=q,L=!1)}this.g=N}var m={};function y(D){return-128<=D&&D<128?l(D,function(M){return new c([M|0],M<0?-1:0)}):new c([D|0],D<0?-1:0)}function p(D){if(isNaN(D)||!isFinite(D))return E;if(D<0)return J(p(-D));const M=[];let N=1;for(let L=0;D>=N;L++)M[L]=D/N|0,N*=4294967296;return new c(M,0)}function T(D,M){if(D.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(D.charAt(0)=="-")return J(T(D.substring(1),M));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=p(Math.pow(M,8));let L=E;for(let q=0;q<D.length;q+=8){var U=Math.min(8,D.length-q);const V=parseInt(D.substring(q,q+U),M);U<8?(U=p(Math.pow(M,U)),L=L.j(U).add(p(V))):(L=L.j(N),L=L.add(p(V)))}return L}var E=y(0),S=y(1),w=y(16777216);n=c.prototype,n.m=function(){if(B(this))return-J(this).m();let D=0,M=1;for(let N=0;N<this.g.length;N++){const L=this.i(N);D+=(L>=0?L:4294967296+L)*M,M*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(G(this))return"0";if(B(this))return"-"+J(this).toString(D);const M=p(Math.pow(D,6));var N=this;let L="";for(;;){const U=le(N,M).g;N=j(N,U.j(M));let q=((N.g.length>0?N.g[0]:N.h)>>>0).toString(D);if(N=U,G(N))return q+L;for(;q.length<6;)q="0"+q;L=q+L}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function G(D){if(D.h!=0)return!1;for(let M=0;M<D.g.length;M++)if(D.g[M]!=0)return!1;return!0}function B(D){return D.h==-1}n.l=function(D){return D=j(this,D),B(D)?-1:G(D)?0:1};function J(D){const M=D.g.length,N=[];for(let L=0;L<M;L++)N[L]=~D.g[L];return new c(N,~D.h).add(S)}n.abs=function(){return B(this)?J(this):this},n.add=function(D){const M=Math.max(this.g.length,D.g.length),N=[];let L=0;for(let U=0;U<=M;U++){let q=L+(this.i(U)&65535)+(D.i(U)&65535),V=(q>>>16)+(this.i(U)>>>16)+(D.i(U)>>>16);L=V>>>16,q&=65535,V&=65535,N[U]=V<<16|q}return new c(N,N[N.length-1]&-2147483648?-1:0)};function j(D,M){return D.add(J(M))}n.j=function(D){if(G(this)||G(D))return E;if(B(this))return B(D)?J(this).j(J(D)):J(J(this).j(D));if(B(D))return J(this.j(J(D)));if(this.l(w)<0&&D.l(w)<0)return p(this.m()*D.m());const M=this.g.length+D.g.length,N=[];for(var L=0;L<2*M;L++)N[L]=0;for(L=0;L<this.g.length;L++)for(let U=0;U<D.g.length;U++){const q=this.i(L)>>>16,V=this.i(L)&65535,ze=D.i(U)>>>16,st=D.i(U)&65535;N[2*L+2*U]+=V*st,se(N,2*L+2*U),N[2*L+2*U+1]+=q*st,se(N,2*L+2*U+1),N[2*L+2*U+1]+=V*ze,se(N,2*L+2*U+1),N[2*L+2*U+2]+=q*ze,se(N,2*L+2*U+2)}for(D=0;D<M;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=M;D<2*M;D++)N[D]=0;return new c(N,0)};function se(D,M){for(;(D[M]&65535)!=D[M];)D[M+1]+=D[M]>>>16,D[M]&=65535,M++}function ee(D,M){this.g=D,this.h=M}function le(D,M){if(G(M))throw Error("division by zero");if(G(D))return new ee(E,E);if(B(D))return M=le(J(D),M),new ee(J(M.g),J(M.h));if(B(M))return M=le(D,J(M)),new ee(J(M.g),M.h);if(D.g.length>30){if(B(D)||B(M))throw Error("slowDivide_ only works with positive integers.");for(var N=S,L=M;L.l(D)<=0;)N=fe(N),L=fe(L);var U=ue(N,1),q=ue(L,1);for(L=ue(L,2),N=ue(N,2);!G(L);){var V=q.add(L);V.l(D)<=0&&(U=U.add(N),q=V),L=ue(L,1),N=ue(N,1)}return M=j(D,U.j(M)),new ee(U,M)}for(U=E;D.l(M)>=0;){for(N=Math.max(1,Math.floor(D.m()/M.m())),L=Math.ceil(Math.log(N)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),q=p(N),V=q.j(M);B(V)||V.l(D)>0;)N-=L,q=p(N),V=q.j(M);G(q)&&(q=S),U=U.add(q),D=j(D,V)}return new ee(U,D)}n.B=function(D){return le(this,D).h},n.and=function(D){const M=Math.max(this.g.length,D.g.length),N=[];for(let L=0;L<M;L++)N[L]=this.i(L)&D.i(L);return new c(N,this.h&D.h)},n.or=function(D){const M=Math.max(this.g.length,D.g.length),N=[];for(let L=0;L<M;L++)N[L]=this.i(L)|D.i(L);return new c(N,this.h|D.h)},n.xor=function(D){const M=Math.max(this.g.length,D.g.length),N=[];for(let L=0;L<M;L++)N[L]=this.i(L)^D.i(L);return new c(N,this.h^D.h)};function fe(D){const M=D.g.length+1,N=[];for(let L=0;L<M;L++)N[L]=D.i(L)<<1|D.i(L-1)>>>31;return new c(N,D.h)}function ue(D,M){const N=M>>5;M%=32;const L=D.g.length-N,U=[];for(let q=0;q<L;q++)U[q]=M>0?D.i(q+N)>>>M|D.i(q+N+1)<<32-M:D.i(q+N);return new c(U,D.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,ME=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=T,Js=c}).apply(typeof K_<"u"?K_:typeof self<"u"?self:typeof window<"u"?window:{});var _c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xE,pl,DE,Cc,kh,bE,VE,PE;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof _c=="object"&&_c];for(var v=0;v<h.length;++v){var C=h[v];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var s=t(this);function r(h,v){if(v)e:{var C=s;h=h.split(".");for(var R=0;R<h.length-1;R++){var F=h[R];if(!(F in C))break e;C=C[F]}h=h[h.length-1],R=C[h],v=v(R),v!=R&&v!=null&&e(C,h,{configurable:!0,writable:!0,value:v})}}r("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(h){return h||function(v){var C=[],R;for(R in v)Object.prototype.hasOwnProperty.call(v,R)&&C.push([R,v[R]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function m(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function y(h,v,C){return h.call.apply(h.bind,arguments)}function p(h,v,C){return p=y,p.apply(null,arguments)}function T(h,v){var C=Array.prototype.slice.call(arguments,1);return function(){var R=C.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function E(h,v){function C(){}C.prototype=v.prototype,h.Z=v.prototype,h.prototype=new C,h.prototype.constructor=h,h.Ob=function(R,F,K){for(var ae=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)ae[Ne-2]=arguments[Ne];return v.prototype[F].apply(R,ae)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function w(h){const v=h.length;if(v>0){const C=Array(v);for(let R=0;R<v;R++)C[R]=h[R];return C}return[]}function G(h,v){for(let R=1;R<arguments.length;R++){const F=arguments[R];var C=typeof F;if(C=C!="object"?C:F?Array.isArray(F)?"array":C:"null",C=="array"||C=="object"&&typeof F.length=="number"){C=h.length||0;const K=F.length||0;h.length=C+K;for(let ae=0;ae<K;ae++)h[C+ae]=F[ae]}else h.push(F)}}class B{constructor(v,C){this.i=v,this.j=C,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function J(h){c.setTimeout(()=>{throw h},0)}function j(){var h=D;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class se{constructor(){this.h=this.g=null}add(v,C){const R=ee.get();R.set(v,C),this.h?this.h.next=R:this.g=R,this.h=R}}var ee=new B(()=>new le,h=>h.reset());class le{constructor(){this.next=this.g=this.h=null}set(v,C){this.h=v,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,ue=!1,D=new se,M=()=>{const h=Promise.resolve(void 0);fe=()=>{h.then(N)}};function N(){for(var h;h=j();){try{h.h.call(h.g)}catch(C){J(C)}var v=ee;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}ue=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const C=()=>{};c.addEventListener("test",C,v),c.removeEventListener("test",C,v)}catch{}return h})();function V(h){return/^[\s\xa0]*$/.test(h)}function ze(h,v){U.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}E(ze,U),ze.prototype.init=function(h,v){const C=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(C=="mouseover"?v=h.fromElement:C=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ze.Z.h.call(this)},ze.prototype.h=function(){ze.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var st="closure_listenable_"+(Math.random()*1e6|0),$=0;function re(h,v,C,R,F){this.listener=h,this.proxy=null,this.src=v,this.type=C,this.capture=!!R,this.ha=F,this.key=++$,this.da=this.fa=!1}function pe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function De(h,v,C){for(const R in h)v.call(C,h[R],R,h)}function Be(h,v){for(const C in h)v.call(void 0,h[C],C,h)}function x(h){const v={};for(const C in h)v[C]=h[C];return v}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(h,v){let C,R;for(let F=1;F<arguments.length;F++){R=arguments[F];for(C in R)h[C]=R[C];for(let K=0;K<X.length;K++)C=X[K],Object.prototype.hasOwnProperty.call(R,C)&&(h[C]=R[C])}}function ce(h){this.src=h,this.g={},this.h=0}ce.prototype.add=function(h,v,C,R,F){const K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);const ae=we(h,v,R,F);return ae>-1?(v=h[ae],C||(v.fa=!1)):(v=new re(v,this.src,K,!!R,F),v.fa=C,h.push(v)),v};function Se(h,v){const C=v.type;if(C in h.g){var R=h.g[C],F=Array.prototype.indexOf.call(R,v,void 0),K;(K=F>=0)&&Array.prototype.splice.call(R,F,1),K&&(pe(v),h.g[C].length==0&&(delete h.g[C],h.h--))}}function we(h,v,C,R){for(let F=0;F<h.length;++F){const K=h[F];if(!K.da&&K.listener==v&&K.capture==!!C&&K.ha==R)return F}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),mt={};function ye(h,v,C,R,F){if(Array.isArray(v)){for(let K=0;K<v.length;K++)ye(h,v[K],C,R,F);return null}return C=ca(C),h&&h[st]?h.J(v,C,m(R)?!!R.capture:!1,F):nn(h,v,C,!1,R,F)}function nn(h,v,C,R,F,K){if(!v)throw Error("Invalid event type");const ae=m(F)?!!F.capture:!!F;let Ne=oo(h);if(Ne||(h[Ue]=Ne=new ce(h)),C=Ne.add(v,C,R,ae,K),C.proxy)return C;if(R=zo(),C.proxy=R,R.src=h,R.listener=C,h.addEventListener)q||(F=ae),F===void 0&&(F=!1),h.addEventListener(v.toString(),R,F);else if(h.attachEvent)h.attachEvent(oi(v.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return C}function zo(){function h(C){return v.call(h.src,h.listener,C)}const v=la;return h}function Yo(h,v,C,R,F){if(Array.isArray(v))for(var K=0;K<v.length;K++)Yo(h,v[K],C,R,F);else R=m(R)?!!R.capture:!!R,C=ca(C),h&&h[st]?(h=h.i,K=String(v).toString(),K in h.g&&(v=h.g[K],C=we(v,C,R,F),C>-1&&(pe(v[C]),Array.prototype.splice.call(v,C,1),v.length==0&&(delete h.g[K],h.h--)))):h&&(h=oo(h))&&(v=h.g[v.toString()],h=-1,v&&(h=we(v,C,R,F)),(C=h>-1?v[h]:null)&&Jo(C))}function Jo(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[st])Se(v.i,h);else{var C=h.type,R=h.proxy;v.removeEventListener?v.removeEventListener(C,R,h.capture):v.detachEvent?v.detachEvent(oi(C),R):v.addListener&&v.removeListener&&v.removeListener(R),(C=oo(v))?(Se(C,h),C.h==0&&(C.src=null,v[Ue]=null)):pe(h)}}}function oi(h){return h in mt?mt[h]:mt[h]="on"+h}function la(h,v){if(h.da)h=!0;else{v=new ze(v,this);const C=h.listener,R=h.ha||h.src;h.fa&&Jo(h),h=C.call(R,v)}return h}function oo(h){return h=h[Ue],h instanceof ce?h:null}var ua="__closure_events_fn_"+(Math.random()*1e9>>>0);function ca(h){return typeof h=="function"?h:(h[ua]||(h[ua]=function(v){return h.handleEvent(v)}),h[ua])}function At(){L.call(this),this.i=new ce(this),this.M=this,this.G=null}E(At,L),At.prototype[st]=!0,At.prototype.removeEventListener=function(h,v,C,R){Yo(this,h,v,C,R)};function Ut(h,v){var C,R=h.G;if(R)for(C=[];R;R=R.G)C.push(R);if(h=h.M,R=v.type||v,typeof v=="string")v=new U(v,h);else if(v instanceof U)v.target=v.target||h;else{var F=v;v=new U(R,h),oe(v,F)}F=!0;let K,ae;if(C)for(ae=C.length-1;ae>=0;ae--)K=v.g=C[ae],F=us(K,R,!0,v)&&F;if(K=v.g=h,F=us(K,R,!0,v)&&F,F=us(K,R,!1,v)&&F,C)for(ae=0;ae<C.length;ae++)K=v.g=C[ae],F=us(K,R,!1,v)&&F}At.prototype.N=function(){if(At.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const C=h.g[v];for(let R=0;R<C.length;R++)pe(C[R]);delete h.g[v],h.h--}}this.G=null},At.prototype.J=function(h,v,C,R){return this.i.add(String(h),v,!1,C,R)},At.prototype.K=function(h,v,C,R){return this.i.add(String(h),v,!0,C,R)};function us(h,v,C,R){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let F=!0;for(let K=0;K<v.length;++K){const ae=v[K];if(ae&&!ae.da&&ae.capture==C){const Ne=ae.listener,_t=ae.ha||ae.src;ae.fa&&Se(h.i,ae),F=Ne.call(_t,R)!==!1&&F}}return F&&!R.defaultPrevented}function Tf(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:c.setTimeout(h,v||0)}function Hl(h){h.g=Tf(()=>{h.g=null,h.i&&(h.i=!1,Hl(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class sn extends L{constructor(v,C){super(),this.m=v,this.l=C,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Hl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ro(h){L.call(this),this.h=h,this.g={}}E(ro,L);var fa=[];function da(h){De(h.g,function(v,C){this.g.hasOwnProperty(C)&&Jo(v)},h),h.g={}}ro.prototype.N=function(){ro.Z.N.call(this),da(this)},ro.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cs=c.JSON.stringify,vf=c.JSON.parse,zl=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Yl(){}function Jl(){}var Yn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ft(){U.call(this,"d")}E(Ft,U);function Nn(){U.call(this,"c")}E(Nn,U);var yt={},Kl=null;function Ko(){return Kl=Kl||new At}yt.Ia="serverreachability";function Ql(h){U.call(this,yt.Ia,h)}E(Ql,U);function ri(h){const v=Ko();Ut(v,new Ql(v))}yt.STAT_EVENT="statevent";function ao(h,v){U.call(this,yt.STAT_EVENT,h),this.stat=v}E(ao,U);function Ct(h){const v=Ko();Ut(v,new ao(v,h))}yt.Ja="timingevent";function ai(h,v){U.call(this,yt.Ja,h),this.size=v}E(ai,U);function li(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},v)}function Jn(){this.g=!0}Jn.prototype.ua=function(){this.g=!1};function Ef(h,v,C,R,F,K){h.info(function(){if(h.g)if(K){var ae="",Ne=K.split("&");for(let Qe=0;Qe<Ne.length;Qe++){var _t=Ne[Qe].split("=");if(_t.length>1){const ft=_t[0];_t=_t[1];const bn=ft.split("_");ae=bn.length>=2&&bn[1]=="type"?ae+(ft+"="+_t+"&"):ae+(ft+"=redacted&")}}}else ae=null;else ae=K;return"XMLHTTP REQ ("+R+") [attempt "+F+"]: "+v+`
`+C+`
`+ae})}function Xl(h,v,C,R,F,K,ae){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+F+"]: "+v+`
`+C+`
`+K+" "+ae})}function ui(h,v,C,R){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Sf(h,C)+(R?" "+R:"")})}function lo(h,v){h.info(function(){return"TIMEOUT: "+v})}Jn.prototype.info=function(){};function Sf(h,v){if(!h.g)return v;if(!v)return null;try{const K=JSON.parse(v);if(K){for(h=0;h<K.length;h++)if(Array.isArray(K[h])){var C=K[h];if(!(C.length<2)){var R=C[1];if(Array.isArray(R)&&!(R.length<1)){var F=R[0];if(F!="noop"&&F!="stop"&&F!="close")for(let ae=1;ae<R.length;ae++)R[ae]=""}}}}return cs(K)}catch{return v}}var uo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ha={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ma;function co(){}E(co,Yl),co.prototype.g=function(){return new XMLHttpRequest},ma=new co;function Pi(h){return encodeURIComponent(String(h))}function $l(h){var v=1;h=h.split(":");const C=[];for(;v>0&&h.length;)C.push(h.shift()),v--;return h.length&&C.push(h.join(":")),C}function Kn(h,v,C,R){this.j=h,this.i=v,this.l=C,this.S=R||1,this.V=new ro(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qn}function Qn(){this.i=null,this.g="",this.h=!1}var It={},qt={};function ci(h,v,C){h.M=1,h.A=fo(wt(v)),h.u=C,h.R=!0,Qo(h,null)}function Qo(h,v){h.F=Date.now(),fi(h),h.B=wt(h.A);var C=h.B,R=h.S;Array.isArray(R)||(R=[String(R)]),Wo(C.i,"t",R),h.C=0,C=h.j.L,h.h=new Qn,h.g=fu(h.j,C?v:null,!h.u),h.P>0&&(h.O=new sn(p(h.Y,h,h.g),h.P)),v=h.V,C=h.g,R=h.ba;var F="readystatechange";Array.isArray(F)||(F&&(fa[0]=F.toString()),F=fa);for(let K=0;K<F.length;K++){const ae=ye(C,F[K],R||v.handleEvent,!1,v.h||v);if(!ae)break;v.g[ae.key]=ae}v=h.J?x(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),ri(),Ef(h.i,h.v,h.B,h.l,h.S,h.u)}Kn.prototype.ba=function(h){h=h.target;const v=this.O;v&&Zn(h)==3?v.j():this.Y(h)},Kn.prototype.Y=function(h){try{if(h==this.g)e:{const Ne=Zn(this.g),_t=this.g.ya(),Qe=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||Ht(this.g)))){this.K||Ne!=4||_t==7||(_t==8||Qe<=0?ri(3):ri(2)),di(this);var v=this.g.ca();this.X=v;var C=Af(this);if(this.o=v==200,Xl(this.i,this.v,this.B,this.l,this.S,Ne,v),this.o){if(this.U&&!this.L){t:{if(this.g){var R,F=this.g;if((R=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(R)){var K=R;break t}}K=null}if(h=K)ui(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,hi(this,h);else{this.o=!1,this.m=3,Ct(12),yn(this),Mn(this);break e}}if(this.R){h=!0;let ft;for(;!this.K&&this.C<C.length;)if(ft=Wl(this,C),ft==qt){Ne==4&&(this.m=4,Ct(14),h=!1),ui(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==It){this.m=4,Ct(15),ui(this.i,this.l,C,"[Invalid Chunk]"),h=!1;break}else ui(this.i,this.l,ft,null),hi(this,ft);if(Zl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||C.length!=0||this.h.h||(this.m=1,Ct(16),h=!1),this.o=this.o&&h,!h)ui(this.i,this.l,C,"[Invalid Chunked Response]"),yn(this),Mn(this);else if(C.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),Ma(ae),ae.P=!0,Ct(11))}}else ui(this.i,this.l,C,null),hi(this,C);Ne==4&&yn(this),this.o&&!this.K&&(Ne==4?au(this.j,this):(this.o=!1,fi(this)))}else Li(this.g),v==400&&C.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),yn(this),Mn(this)}}}catch{}finally{}};function Af(h){if(!Zl(h))return h.g.la();const v=Ht(h.g);if(v==="")return"";let C="";const R=v.length,F=Zn(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return yn(h),Mn(h),"";h.h.i=new c.TextDecoder}for(let K=0;K<R;K++)h.h.h=!0,C+=h.h.i.decode(v[K],{stream:!(F&&K==R-1)});return v.length=0,h.h.g+=C,h.C=0,h.h.g}function Zl(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Wl(h,v){var C=h.C,R=v.indexOf(`
`,C);return R==-1?qt:(C=Number(v.substring(C,R)),isNaN(C)?It:(R+=1,R+C>v.length?qt:(v=v.slice(R,R+C),h.C=R+C,v)))}Kn.prototype.cancel=function(){this.K=!0,yn(this)};function fi(h){h.T=Date.now()+h.H,Xo(h,h.H)}function Xo(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=li(p(h.aa,h),v)}function di(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Kn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(lo(this.i,this.B),this.M!=2&&(ri(),Ct(17)),yn(this),this.m=2,Mn(this)):Xo(this,this.T-h)};function Mn(h){h.j.I==0||h.K||au(h.j,h)}function yn(h){di(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,da(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function hi(h,v){try{var C=h.j;if(C.I!=0&&(C.g==h||pi(C.h,h))){if(!h.L&&pi(C.h,h)&&C.I==3){try{var R=C.Ba.g.parse(v)}catch{R=null}if(Array.isArray(R)&&R.length==3){var F=R;if(F[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<h.F)ir(C),_s(C);else break e;To(C),Ct(18)}}else C.xa=F[1],0<C.xa-C.K&&F[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=li(p(C.Va,C),6e3));mi(C.h)<=1&&C.ta&&(C.ta=void 0)}else Ei(C,11)}else if((h.L||C.g==h)&&ir(C),!V(v))for(F=C.Ba.g.parse(v),v=0;v<F.length;v++){let Qe=F[v];const ft=Qe[0];if(!(ft<=C.K))if(C.K=ft,Qe=Qe[1],C.I==2)if(Qe[0]=="c"){C.M=Qe[1],C.ba=Qe[2];const bn=Qe[3];bn!=null&&(C.ka=bn,C.j.info("VER="+C.ka));const Si=Qe[4];Si!=null&&(C.za=Si,C.j.info("SVER="+C.za));const Wn=Qe[5];Wn!=null&&typeof Wn=="number"&&Wn>0&&(R=1.5*Wn,C.O=R,C.j.info("backChannelRequestTimeoutMs_="+R)),R=C;const jn=h.g;if(jn){const vo=jn.g?jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vo){var K=R.h;K.g||vo.indexOf("spdy")==-1&&vo.indexOf("quic")==-1&&vo.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(ya(K,K.h),K.h=null))}if(R.G){const sr=jn.g?jn.g.getResponseHeader("X-HTTP-Session-Id"):null;sr&&(R.wa=sr,Ze(R.J,R.G,sr))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-h.F,C.j.info("Handshake RTT: "+C.T+"ms")),R=C;var ae=h;if(R.na=cu(R,R.L?R.ba:null,R.W),ae.L){_a(R.h,ae);var Ne=ae,_t=R.O;_t&&(Ne.H=_t),Ne.D&&(di(Ne),fi(Ne)),R.g=ae}else ou(R);C.i.length>0&&vi(C)}else Qe[0]!="stop"&&Qe[0]!="close"||Ei(C,7);else C.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Ei(C,7):wa(C):Qe[0]!="noop"&&C.l&&C.l.qa(Qe),C.A=0)}}ri(4)}catch{}}var Rt=class{constructor(h,v){this.g=h,this.map=v}};function pa(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ga(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function mi(h){return h.h?1:h.g?h.g.size:0}function pi(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function ya(h,v){h.g?h.g.add(v):h.h=v}function _a(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}pa.prototype.cancel=function(){if(this.i=Ta(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ta(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const C of h.g.values())v=v.concat(C.G);return v}return w(h.i)}var jl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $o(h,v){if(h){h=h.split("&");for(let C=0;C<h.length;C++){const R=h[C].indexOf("=");let F,K=null;R>=0?(F=h[C].substring(0,R),K=h[C].substring(R+1)):F=h[C],v(F,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function _n(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof _n?(this.l=h.l,Ot(this,h.j),this.o=h.o,this.g=h.g,fs(this,h.u),this.h=h.h,va(this,iu(h.i)),this.m=h.m):h&&(v=String(h).match(jl))?(this.l=!1,Ot(this,v[1]||"",!0),this.o=gi(v[2]||""),this.g=gi(v[3]||"",!0),fs(this,v[4]),this.h=gi(v[5]||"",!0),va(this,v[6]||"",!0),this.m=gi(v[7]||"")):(this.l=!1,this.i=new hs(null,this.l))}_n.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(ho(v,Zo,!0),":");var C=this.g;return(C||v=="file")&&(h.push("//"),(v=this.o)&&h.push(ho(v,Zo,!0),"@"),h.push(Pi(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&h.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&h.push("/"),h.push(ho(C,C.charAt(0)=="/"?Ea:eu,!0))),(C=this.i.toString())&&h.push("?",C),(C=this.m)&&h.push("#",ho(C,tu)),h.join("")},_n.prototype.resolve=function(h){const v=wt(this);let C=!!h.j;C?Ot(v,h.j):C=!!h.o,C?v.o=h.o:C=!!h.g,C?v.g=h.g:C=h.u!=null;var R=h.h;if(C)fs(v,h.u);else if(C=!!h.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var F=v.h.lastIndexOf("/");F!=-1&&(R=v.h.slice(0,F+1)+R)}if(F=R,F==".."||F==".")R="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){R=F.lastIndexOf("/",0)==0,F=F.split("/");const K=[];for(let ae=0;ae<F.length;){const Ne=F[ae++];Ne=="."?R&&ae==F.length&&K.push(""):Ne==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),R&&ae==F.length&&K.push("")):(K.push(Ne),R=!0)}R=K.join("/")}else R=F}return C?v.h=R:C=h.i.toString()!=="",C?va(v,iu(h.i)):C=!!h.m,C&&(v.m=h.m),v};function wt(h){return new _n(h)}function Ot(h,v,C){h.j=C?gi(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function fs(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function va(h,v,C){v instanceof hs?(h.i=v,jo(h.i,h.l)):(C||(v=ho(v,ds)),h.i=new hs(v,h.l))}function Ze(h,v,C){h.i.set(v,C)}function fo(h){return Ze(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function gi(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ho(h,v,C){return typeof h=="string"?(h=encodeURI(h).replace(v,ln),C&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ln(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Zo=/[#\/\?@]/g,eu=/[#\?:]/g,Ea=/[#\?]/g,ds=/[#\?@]/g,tu=/#/g;function hs(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function un(h){h.g||(h.g=new Map,h.h=0,h.i&&$o(h.i,function(v,C){h.add(decodeURIComponent(v.replace(/\+/g," ")),C)}))}n=hs.prototype,n.add=function(h,v){un(this),this.i=null,h=ms(this,h);let C=this.g.get(h);return C||this.g.set(h,C=[]),C.push(v),this.h+=1,this};function nu(h,v){un(h),v=ms(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Sa(h,v){return un(h),v=ms(h,v),h.g.has(v)}n.forEach=function(h,v){un(this),this.g.forEach(function(C,R){C.forEach(function(F){h.call(v,F,R,this)},this)},this)};function Aa(h,v){un(h);let C=[];if(typeof v=="string")Sa(h,v)&&(C=C.concat(h.g.get(ms(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)C=C.concat(h[v]);return C}n.set=function(h,v){return un(this),this.i=null,h=ms(this,h),Sa(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},n.get=function(h,v){return h?(h=Aa(this,h),h.length>0?String(h[0]):v):v};function Wo(h,v,C){nu(h,v),C.length>0&&(h.i=null,h.g.set(ms(h,v),w(C)),h.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let R=0;R<v.length;R++){var C=v[R];const F=Pi(C);C=Aa(this,C);for(let K=0;K<C.length;K++){let ae=F;C[K]!==""&&(ae+="="+Pi(C[K])),h.push(ae)}}return this.i=h.join("&")};function iu(h){const v=new hs;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function ms(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function jo(h,v){v&&!h.j&&(un(h),h.i=null,h.g.forEach(function(C,R){const F=R.toLowerCase();R!=F&&(nu(this,R),Wo(this,F,C))},h)),h.j=v}function Xn(h,v){const C=new Jn;if(c.Image){const R=new Image;R.onload=T(xn,C,"TestLoadImage: loaded",!0,v,R),R.onerror=T(xn,C,"TestLoadImage: error",!1,v,R),R.onabort=T(xn,C,"TestLoadImage: abort",!1,v,R),R.ontimeout=T(xn,C,"TestLoadImage: timeout",!1,v,R),c.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else v(!1)}function Ca(h,v){const C=new Jn,R=new AbortController,F=setTimeout(()=>{R.abort(),xn(C,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:R.signal}).then(K=>{clearTimeout(F),K.ok?xn(C,"TestPingServer: ok",!0,v):xn(C,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(F),xn(C,"TestPingServer: error",!1,v)})}function xn(h,v,C,R,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),R(C)}catch{}}function ps(){this.g=new zl}function yi(h){this.i=h.Sb||null,this.h=h.ab||!1}E(yi,Yl),yi.prototype.g=function(){return new mo(this.i,this.h)};function mo(h,v){At.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(mo,At),n=mo.prototype,n.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,$n(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||c).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gs(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,$n(this)),this.g&&(this.readyState=3,$n(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;er(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function er(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?gs(this):$n(this),this.readyState==3&&er(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,gs(this))},n.Na=function(h){this.g&&(this.response=h,gs(this))},n.ga=function(){this.g&&gs(this)};function gs(h){h.readyState=4,h.l=null,h.j=null,h.B=null,$n(h)}n.setRequestHeader=function(h,v){this.A.append(h,v)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var C=v.next();!C.done;)C=C.value,h.push(C[0]+": "+C[1]),C=v.next();return h.join(`\r
`)};function $n(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(mo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Dn(h){let v="";return De(h,function(C,R){v+=R,v+=":",v+=C,v+=`\r
`}),v}function po(h,v,C){e:{for(R in C){var R=!1;break e}R=!0}R||(C=Dn(C),typeof h=="string"?C!=null&&Pi(C):Ze(h,v,C))}function et(h){At.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(et,At);var _i=/^https?$/i,Ia=["POST","PUT"];n=et.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,v,C,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ma.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(K){go(this,K);return}if(h=C||"",C=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var F in R)C.set(F,R[F]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const K of R.keys())C.set(K,R.get(K));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(C.keys()).find(K=>K.toLowerCase()=="content-type"),F=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Ia,v,void 0)>=0)||R||F||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ae]of C)this.g.setRequestHeader(K,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(K){go(this,K)}};function go(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,Ra(h),Ui(h)}function Ra(h){h.A||(h.A=!0,Ut(h,"complete"),Ut(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ut(this,"complete"),Ut(this,"abort"),Ui(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ui(this,!0)),et.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?yo(this):this.Xa())},n.Xa=function(){yo(this)};function yo(h){if(h.h&&typeof l<"u"){if(h.v&&Zn(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ut(h,"readystatechange"),Zn(h)==4){h.h=!1;try{const K=h.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var C;if(!(C=v)){var R;if(R=K===0){let ae=String(h.D).match(jl)[1]||null;!ae&&c.self&&c.self.location&&(ae=c.self.location.protocol.slice(0,-1)),R=!_i.test(ae?ae.toLowerCase():"")}C=R}if(C)Ut(h,"complete"),Ut(h,"success");else{h.o=6;try{var F=Zn(h)>2?h.g.statusText:""}catch{F=""}h.l=F+" ["+h.ca()+"]",Ra(h)}}finally{Ui(h)}}}}function Ui(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const C=h.g;h.g=null,v||Ut(h,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Zn(h){return h.g?h.g.readyState:0}n.ca=function(){try{return Zn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),vf(v)}};function Ht(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Li(h){const v={};h=(h.g&&Zn(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(V(h[R]))continue;var C=$l(h[R]);const F=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const K=v[F]||[];v[F]=K,K.push(C)}Be(v,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ti(h,v,C){return C&&C.internalChannelParams&&C.internalChannelParams[h]||v}function ys(h){this.za=0,this.i=[],this.j=new Jn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ti("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ti("baseRetryDelayMs",5e3,h),this.Za=Ti("retryDelaySeedMs",1e4,h),this.Ta=Ti("forwardChannelMaxRetries",2,h),this.va=Ti("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new pa(h&&h.concurrentRequestLimit),this.Ba=new ps,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ys.prototype,n.ka=8,n.I=1,n.connect=function(h,v,C,R){Ct(0),this.W=h,this.H=v||{},C&&R!==void 0&&(this.H.OSID=C,this.H.OAID=R),this.F=this.X,this.J=cu(this,null,this.W),vi(this)};function wa(h){if(tr(h),h.I==3){var v=h.V++,C=wt(h.J);if(Ze(C,"SID",h.M),Ze(C,"RID",v),Ze(C,"TYPE","terminate"),_o(h,C),v=new Kn(h,h.j,v),v.M=2,v.A=fo(wt(C)),C=!1,c.navigator&&c.navigator.sendBeacon)try{C=c.navigator.sendBeacon(v.A.toString(),"")}catch{}!C&&c.Image&&(new Image().src=v.A,C=!0),C||(v.g=fu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),fi(v)}uu(h)}function _s(h){h.g&&(Ma(h),h.g.cancel(),h.g=null)}function tr(h){_s(h),h.v&&(c.clearTimeout(h.v),h.v=null),ir(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function vi(h){if(!ga(h.h)&&!h.m){h.m=!0;var v=h.Ea;fe||M(),ue||(fe(),ue=!0),D.add(v,h),h.D=0}}function nr(h,v){return mi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=li(p(h.Ea,h,v),lu(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const F=new Kn(this,this.j,h);let K=this.o;if(this.U&&(K?(K=x(K),oe(K,this.U)):K=this.U),this.u!==null||this.R||(F.J=K,K=null),this.S)e:{for(var v=0,C=0;C<this.i.length;C++){t:{var R=this.i[C];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(v+=R,v>4096){v=C;break e}if(v===4096||C===this.i.length-1){v=C+1;break e}}v=1e3}else v=1e3;v=su(this,F,v),C=wt(this.J),Ze(C,"RID",h),Ze(C,"CVER",22),this.G&&Ze(C,"X-HTTP-Session-Id",this.G),_o(this,C),K&&(this.R?v="headers="+Pi(Dn(K))+"&"+v:this.u&&po(C,this.u,K)),ya(this.h,F),this.Ra&&Ze(C,"TYPE","init"),this.S?(Ze(C,"$req",v),Ze(C,"SID","null"),F.U=!0,ci(F,C,null)):ci(F,C,v),this.I=2}}else this.I==3&&(h?Na(this,h):this.i.length==0||ga(this.h)||Na(this))};function Na(h,v){var C;v?C=v.l:C=h.V++;const R=wt(h.J);Ze(R,"SID",h.M),Ze(R,"RID",C),Ze(R,"AID",h.K),_o(h,R),h.u&&h.o&&po(R,h.u,h.o),C=new Kn(h,h.j,C,h.D+1),h.u===null&&(C.J=h.o),v&&(h.i=v.G.concat(h.i)),v=su(h,C,1e3),C.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),ya(h.h,C),ci(C,R,v)}function _o(h,v){h.H&&De(h.H,function(C,R){Ze(v,R,C)}),h.l&&De({},function(C,R){Ze(v,R,C)})}function su(h,v,C){C=Math.min(h.i.length,C);const R=h.l?p(h.l.Ka,h.l,h):null;e:{var F=h.i;let Ne=-1;for(;;){const _t=["count="+C];Ne==-1?C>0?(Ne=F[0].g,_t.push("ofs="+Ne)):Ne=0:_t.push("ofs="+Ne);let Qe=!0;for(let ft=0;ft<C;ft++){var K=F[ft].g;const bn=F[ft].map;if(K-=Ne,K<0)Ne=Math.max(0,F[ft].g-100),Qe=!1;else try{K="req"+K+"_"||"";try{var ae=bn instanceof Map?bn:Object.entries(bn);for(const[Si,Wn]of ae){let jn=Wn;m(Wn)&&(jn=cs(Wn)),_t.push(K+Si+"="+encodeURIComponent(jn))}}catch(Si){throw _t.push(K+"type="+encodeURIComponent("_badmap")),Si}}catch{R&&R(bn)}}if(Qe){ae=_t.join("&");break e}}ae=void 0}return h=h.i.splice(0,C),v.G=h,ae}function ou(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;fe||M(),ue||(fe(),ue=!0),D.add(v,h),h.A=0}}function To(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=li(p(h.Da,h),lu(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,ru(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=li(p(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),_s(this),ru(this))};function Ma(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function ru(h){h.g=new Kn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=wt(h.na);Ze(v,"RID","rpc"),Ze(v,"SID",h.M),Ze(v,"AID",h.K),Ze(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ze(v,"TO",h.ia),Ze(v,"TYPE","xmlhttp"),_o(h,v),h.u&&h.o&&po(v,h.u,h.o),h.O&&(h.g.H=h.O);var C=h.g;h=h.ba,C.M=1,C.A=fo(wt(v)),C.u=null,C.R=!0,Qo(C,h)}n.Va=function(){this.C!=null&&(this.C=null,_s(this),To(this),Ct(19))};function ir(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function au(h,v){var C=null;if(h.g==v){ir(h),Ma(h),h.g=null;var R=2}else if(pi(h.h,v))C=v.G,_a(h.h,v),R=1;else return;if(h.I!=0){if(v.o)if(R==1){C=v.u?v.u.length:0,v=Date.now()-v.F;var F=h.D;R=Ko(),Ut(R,new ai(R,C)),vi(h)}else ou(h);else if(F=v.m,F==3||F==0&&v.X>0||!(R==1&&nr(h,v)||R==2&&To(h)))switch(C&&C.length>0&&(v=h.h,v.i=v.i.concat(C)),F){case 1:Ei(h,5);break;case 4:Ei(h,10);break;case 3:Ei(h,6);break;default:Ei(h,2)}}}function lu(h,v){let C=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(C*=2),C*v}function Ei(h,v){if(h.j.info("Error code "+v),v==2){var C=p(h.bb,h),R=h.Ua;const F=!R;R=new _n(R||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ot(R,"https"),fo(R),F?Xn(R.toString(),C):Ca(R.toString(),C)}else Ct(2);h.I=0,h.l&&h.l.pa(v),uu(h),tr(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function uu(h){if(h.I=0,h.ja=[],h.l){const v=Ta(h.h);(v.length!=0||h.i.length!=0)&&(G(h.ja,v),G(h.ja,h.i),h.h.i.length=0,w(h.i),h.i.length=0),h.l.oa()}}function cu(h,v,C){var R=C instanceof _n?wt(C):new _n(C);if(R.g!="")v&&(R.g=v+"."+R.g),fs(R,R.u);else{var F=c.location;R=F.protocol,v=v?v+"."+F.hostname:F.hostname,F=+F.port;const K=new _n(null);R&&Ot(K,R),v&&(K.g=v),F&&fs(K,F),C&&(K.h=C),R=K}return C=h.G,v=h.wa,C&&v&&Ze(R,C,v),Ze(R,"VER",h.ka),_o(h,R),R}function fu(h,v,C){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new et(new yi({ab:C})):new et(h.ma),v.Fa(h.L),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function du(){}n=du.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ts(){}Ts.prototype.g=function(h,v){return new on(h,v)};function on(h,v){At.call(this),this.g=new ys(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!V(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!V(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new ki(this)}E(on,At),on.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){wa(this.g)},on.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var C={};C.__data__=h,h=C}else this.v&&(C={},C.__data__=cs(h),h=C);v.i.push(new Rt(v.Ya++,h)),v.I==3&&vi(v)},on.prototype.N=function(){this.g.l=null,delete this.j,wa(this.g),delete this.g,on.Z.N.call(this)};function hu(h){Ft.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const C in v){h=C;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}E(hu,Ft);function mu(){Nn.call(this),this.status=1}E(mu,Nn);function ki(h){this.g=h}E(ki,du),ki.prototype.ra=function(){Ut(this.g,"a")},ki.prototype.qa=function(h){Ut(this.g,new hu(h))},ki.prototype.pa=function(h){Ut(this.g,new mu)},ki.prototype.oa=function(){Ut(this.g,"b")},Ts.prototype.createWebChannel=Ts.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,PE=function(){return new Ts},VE=function(){return Ko()},bE=yt,kh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},uo.NO_ERROR=0,uo.TIMEOUT=8,uo.HTTP_ERROR=6,Cc=uo,ha.COMPLETE="complete",DE=ha,Jl.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",At.prototype.listen=At.prototype.J,pl=Jl,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,xE=et}).apply(typeof _c<"u"?_c:typeof self<"u"?self:typeof window<"u"?window:{});const Q_="@firebase/firestore",X_="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jt.UNAUTHENTICATED=new jt(null),jt.GOOGLE_CREDENTIALS=new jt("google-credentials-uid"),jt.FIRST_PARTY=new jt("first-party-uid"),jt.MOCK_USER=new jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ea="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=new AE("@firebase/firestore");function Pr(){return Oo.logLevel}function me(n,...e){if(Oo.logLevel<=He.DEBUG){const t=e.map(mm);Oo.debug(`Firestore (${ea}): ${n}`,...t)}}function is(n,...e){if(Oo.logLevel<=He.ERROR){const t=e.map(mm);Oo.error(`Firestore (${ea}): ${n}`,...t)}}function Jr(n,...e){if(Oo.logLevel<=He.WARN){const t=e.map(mm);Oo.warn(`Firestore (${ea}): ${n}`,...t)}}function mm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,UE(n,s,t)}function UE(n,e,t){let s=`FIRESTORE (${ea}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw is(s),new Error(s)}function $e(n,e,t,s){let r="Unexpected state";typeof t=="string"?r=t:s=t,n||UE(e,r,s)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends jr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(jt.UNAUTHENTICATED)))}shutdown(){}}class yR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class _R{constructor(e){this.t=e,this.currentUser=jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0,42304);let s=this.i;const r=y=>this.i!==s?(s=this.i,t(y)):Promise.resolve();let l=new es;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new es,e.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await r(this.currentUser)}))},m=y=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((y=>m(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new es)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?($e(typeof s.accessToken=="string",31837,{l:s}),new LE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new jt(e)}}class TR{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vR{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new TR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(jt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ER{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tR(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$e(this.o===void 0,3512);const s=l=>{l.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,me("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const r=l=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new $_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?($e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new $_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=SR(40);for(let l=0;l<r.length;++l)s.length<20&&r[l]<t&&(s+=e.charAt(r[l]%62))}return s}}function qe(n,e){return n<e?-1:n>e?1:0}function qh(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const r=n.charAt(s),l=e.charAt(s);if(r!==l)return wh(r)===wh(l)?qe(r,l):wh(r)?1:-1}return qe(n.length,e.length)}const AR=55296,CR=57343;function wh(n){const e=n.charCodeAt(0);return e>=AR&&e<=CR}function Kr(n,e,t){return n.length===e.length&&n.every(((s,r)=>t(s,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="__name__";class wi{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ae(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return wi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let r=0;r<s;r++){const l=wi.compareSegments(e.get(r),t.get(r));if(l!==0)return l}return qe(e.length,t.length)}static compareSegments(e,t){const s=wi.isNumericId(e),r=wi.isNumericId(t);return s&&!r?-1:!s&&r?1:s&&r?wi.extractNumericId(e).compare(wi.extractNumericId(t)):qh(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Js.fromString(e.substring(4,e.length-2))}}class rt extends wi{construct(e,t,s){return new rt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(ne.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((r=>r.length>0)))}return new rt(t)}static emptyPath(){return new rt([])}}const IR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends wi{construct(e,t,s){return new Xt(e,t,s)}static isValidIdentifier(e){return IR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Z_}static keyField(){return new Xt([Z_])}static fromServerFormat(e){const t=[];let s="",r=0;const l=()=>{if(s.length===0)throw new he(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;r<e.length;){const m=e[r];if(m==="\\"){if(r+1===e.length)throw new he(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[r+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new he(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,r+=2}else m==="`"?(c=!c,r++):m!=="."||c?(s+=m,r++):(l(),r++)}if(l(),c)throw new he(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(t)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(rt.fromString(e))}static fromName(e){return new ve(rt.fromString(e).popFirst(5))}static empty(){return new ve(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(n,e,t){if(!t)throw new he(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function RR(n,e,t,s){if(e===!0&&s===!0)throw new he(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function W_(n){if(!ve.isDocumentKey(n))throw new he(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function j_(n){if(ve.isDocumentKey(n))throw new he(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Wc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae(12329,{type:typeof n})}function ss(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wc(n);throw new he(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Pl(n,e){if(!qE(n))throw new he(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const r=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(r&&typeof c!==r){t=`JSON field '${s}' must be a ${r}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new he(ne.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT=-62135596800,tT=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*tT);return new ct(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<eT)throw new he(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tT}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Pl(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-eT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:Pt("string",ct._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new ct(0,0))}static max(){return new Ce(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl=-1;function wR(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=Ce.fromTimestamp(s===1e9?new ct(t+1,0):new ct(t,s));return new Qs(r,ve.empty(),e)}function NR(n){return new Qs(n.readTime,n.key,wl)}class Qs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Qs(Ce.min(),ve.empty(),wl)}static max(){return new Qs(Ce.max(),ve.empty(),wl)}}function MR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==xR)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((s,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,r)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,s)=>{t(e)}))}static reject(e){return new ie(((t,s)=>{s(e)}))}static waitFor(e){return new ie(((t,s)=>{let r=0,l=0,c=!1;e.forEach((m=>{++r,m.next((()=>{++l,c&&l===r&&t()}),(y=>s(y)))})),c=!0,l===r&&t()}))}static or(e){let t=ie.resolve(!1);for(const s of e)t=t.next((r=>r?ie.resolve(r):s()));return t}static forEach(e,t){const s=[];return e.forEach(((r,l)=>{s.push(t.call(this,r,l))})),this.waitFor(s)}static mapArray(e,t){return new ie(((s,r)=>{const l=e.length,c=new Array(l);let m=0;for(let y=0;y<l;y++){const p=y;t(e[p]).next((T=>{c[p]=T,++m,m===l&&s(c)}),(T=>r(T)))}}))}static doWhile(e,t){return new ie(((s,r)=>{const l=()=>{e()===!0?t().next((()=>{l()}),r):s()};l()}))}}function bR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function na(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm=-1;function ef(n){return n==null}function Lc(n){return n===0&&1/n==-1/0}function VR(n){return typeof n=="number"&&Number.isInteger(n)&&!Lc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="";function PR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=nT(e)),e=UR(n.get(t),e);return nT(e)}function UR(n,e){let t=e;const s=n.length;for(let r=0;r<s;r++){const l=n.charAt(r);switch(l){case"\0":t+="";break;case OE:t+="";break;default:t+=l}}return t}function nT(n){return n+OE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function eo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function GE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,t){this.comparator=e,this.root=t||Qt.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return t+s.left.size;r<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tc(this.root,e,this.comparator,!0)}}class Tc{constructor(e,t,s,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,t,s,r,l){this.key=e,this.value=t,this.color=s??Qt.RED,this.left=r??Qt.EMPTY,this.right=l??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,r,l){return new Qt(e??this.key,t??this.value,s??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let r=this;const l=s(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,t,s),null):l===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Qt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,s,r,l){return this}insert(e,t,s){return new Qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sT(this.data.getIterator())}getIteratorFrom(e){return new sT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=s.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new kt(this.comparator);return t.data=e,t}}class sT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new Rn([])}unionWith(e){let t=new kt(Xt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Rn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Kr(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new BE("Invalid base64 string: "+l):l}})(e);return new $t(t)}static fromUint8Array(e){const t=(function(r){let l="";for(let c=0;c<r.length;++c)l+=String.fromCharCode(r[c]);return l})(e);return new $t(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const LR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xs(n){if($e(!!n,39018),typeof n=="string"){let e=0;const t=LR.exec(n);if($e(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Et(n.seconds),nanos:Et(n.nanos)}}function Et(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function $s(n){return typeof n=="string"?$t.fromBase64String(n):$t.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="server_timestamp",HE="__type__",zE="__previous_value__",YE="__local_write_time__";function ym(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[HE])==null?void 0:s.stringValue)===FE}function tf(n){const e=n.mapValue.fields[zE];return ym(e)?tf(e):e}function Nl(n){const e=Xs(n.mapValue.fields[YE].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,t,s,r,l,c,m,y,p,T){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=r,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=p,this.isUsingEmulator=T}}const kc="(default)";class Ml{constructor(e,t){this.projectId=e,this.database=t||kc}static empty(){return new Ml("","")}get isDefaultDatabase(){return this.database===kc}isEqual(e){return e instanceof Ml&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="__type__",qR="__max__",vc={mapValue:{}},KE="__vector__",qc="value";function Zs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ym(n)?4:GR(n)?9007199254740991:OR(n)?10:11:Ae(28295,{value:n})}function Vi(n,e){if(n===e)return!0;const t=Zs(n);if(t!==Zs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Nl(n).isEqual(Nl(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const c=Xs(r.timestampValue),m=Xs(l.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,l){return $s(r.bytesValue).isEqual($s(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,l){return Et(r.geoPointValue.latitude)===Et(l.geoPointValue.latitude)&&Et(r.geoPointValue.longitude)===Et(l.geoPointValue.longitude)})(n,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return Et(r.integerValue)===Et(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const c=Et(r.doubleValue),m=Et(l.doubleValue);return c===m?Lc(c)===Lc(m):isNaN(c)&&isNaN(m)}return!1})(n,e);case 9:return Kr(n.arrayValue.values||[],e.arrayValue.values||[],Vi);case 10:case 11:return(function(r,l){const c=r.mapValue.fields||{},m=l.mapValue.fields||{};if(iT(c)!==iT(m))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(m[y]===void 0||!Vi(c[y],m[y])))return!1;return!0})(n,e);default:return Ae(52216,{left:n})}}function xl(n,e){return(n.values||[]).find((t=>Vi(t,e)))!==void 0}function Qr(n,e){if(n===e)return 0;const t=Zs(n),s=Zs(e);if(t!==s)return qe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const m=Et(l.integerValue||l.doubleValue),y=Et(c.integerValue||c.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1})(n,e);case 3:return oT(n.timestampValue,e.timestampValue);case 4:return oT(Nl(n),Nl(e));case 5:return qh(n.stringValue,e.stringValue);case 6:return(function(l,c){const m=$s(l),y=$s(c);return m.compareTo(y)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const m=l.split("/"),y=c.split("/");for(let p=0;p<m.length&&p<y.length;p++){const T=qe(m[p],y[p]);if(T!==0)return T}return qe(m.length,y.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const m=qe(Et(l.latitude),Et(c.latitude));return m!==0?m:qe(Et(l.longitude),Et(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return rT(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var S,w,G,B;const m=l.fields||{},y=c.fields||{},p=(S=m[qc])==null?void 0:S.arrayValue,T=(w=y[qc])==null?void 0:w.arrayValue,E=qe(((G=p==null?void 0:p.values)==null?void 0:G.length)||0,((B=T==null?void 0:T.values)==null?void 0:B.length)||0);return E!==0?E:rT(p,T)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===vc.mapValue&&c===vc.mapValue)return 0;if(l===vc.mapValue)return 1;if(c===vc.mapValue)return-1;const m=l.fields||{},y=Object.keys(m),p=c.fields||{},T=Object.keys(p);y.sort(),T.sort();for(let E=0;E<y.length&&E<T.length;++E){const S=qh(y[E],T[E]);if(S!==0)return S;const w=Qr(m[y[E]],p[T[E]]);if(w!==0)return w}return qe(y.length,T.length)})(n.mapValue,e.mapValue);default:throw Ae(23264,{he:t})}}function oT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return qe(n,e);const t=Xs(n),s=Xs(e),r=qe(t.seconds,s.seconds);return r!==0?r:qe(t.nanos,s.nanos)}function rT(n,e){const t=n.values||[],s=e.values||[];for(let r=0;r<t.length&&r<s.length;++r){const l=Qr(t[r],s[r]);if(l)return l}return qe(t.length,s.length)}function Xr(n){return Oh(n)}function Oh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Xs(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return $s(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",r=!0;for(const l of t.values||[])r?r=!1:s+=",",s+=Oh(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let r="{",l=!0;for(const c of s)l?l=!1:r+=",",r+=`${c}:${Oh(t.fields[c])}`;return r+"}"})(n.mapValue):Ae(61005,{value:n})}function Ic(n){switch(Zs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tf(n);return e?16+Ic(e):16;case 5:return 2*n.stringValue.length;case 6:return $s(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,l)=>r+Ic(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let r=0;return eo(s.fields,((l,c)=>{r+=l.length+Ic(c)})),r})(n.mapValue);default:throw Ae(13486,{value:n})}}function aT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gh(n){return!!n&&"integerValue"in n}function _m(n){return!!n&&"arrayValue"in n}function lT(n){return!!n&&"nullValue"in n}function uT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rc(n){return!!n&&"mapValue"in n}function OR(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[JE])==null?void 0:s.stringValue)===KE}function vl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return eo(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=vl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vl(n.arrayValue.values[t]);return e}return{...n}}function GR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===qR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.value=e}static empty(){return new gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Rc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vl(t)}setAll(e){let t=Xt.emptyPath(),s={},r=[];e.forEach(((c,m)=>{if(!t.isImmediateParentOf(m)){const y=this.getFieldsMap(t);this.applyChanges(y,s,r),s={},r=[],t=m.popLast()}c?s[m.lastSegment()]=vl(c):r.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,r)}delete(e){const t=this.field(e.popLast());Rc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=t.mapValue.fields[e.get(s)];Rc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,s){eo(t,((r,l)=>e[r]=l));for(const r of s)delete e[r]}clone(){return new gn(vl(this.value))}}function QE(n){const e=[];return eo(n.fields,((t,s)=>{const r=new Xt([t]);if(Rc(s)){const l=QE(s.mapValue).fields;if(l.length===0)e.push(r);else for(const c of l)e.push(r.child(c))}else e.push(r)})),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,t,s,r,l,c,m){this.key=e,this.documentType=t,this.version=s,this.readTime=r,this.createTime=l,this.data=c,this.documentState=m}static newInvalidDocument(e){return new en(e,0,Ce.min(),Ce.min(),Ce.min(),gn.empty(),0)}static newFoundDocument(e,t,s,r){return new en(e,1,t,Ce.min(),s,r,0)}static newNoDocument(e,t){return new en(e,2,t,Ce.min(),Ce.min(),gn.empty(),0)}static newUnknownDocument(e,t){return new en(e,3,t,Ce.min(),Ce.min(),gn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,t){this.position=e,this.inclusive=t}}function cT(n,e,t){let s=0;for(let r=0;r<n.position.length;r++){const l=e[r],c=n.position[r];if(l.field.isKeyField()?s=ve.comparator(ve.fromName(c.referenceValue),t.key):s=Qr(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function fT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,t="asc"){this.field=e,this.dir=t}}function BR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{}class Vt extends XE{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new HR(e,t,s):t==="array-contains"?new JR(e,s):t==="in"?new KR(e,s):t==="not-in"?new QR(e,s):t==="array-contains-any"?new XR(e,s):new Vt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new zR(e,s):new YR(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Qr(t,this.value)):t!==null&&Zs(this.value)===Zs(t)&&this.matchesComparison(Qr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ii extends XE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ii(e,t)}matches(e){return $E(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $E(n){return n.op==="and"}function ZE(n){return FR(n)&&$E(n)}function FR(n){for(const e of n.filters)if(e instanceof ii)return!1;return!0}function Bh(n){if(n instanceof Vt)return n.field.canonicalString()+n.op.toString()+Xr(n.value);if(ZE(n))return n.filters.map((e=>Bh(e))).join(",");{const e=n.filters.map((t=>Bh(t))).join(",");return`${n.op}(${e})`}}function WE(n,e){return n instanceof Vt?(function(s,r){return r instanceof Vt&&s.op===r.op&&s.field.isEqual(r.field)&&Vi(s.value,r.value)})(n,e):n instanceof ii?(function(s,r){return r instanceof ii&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((l,c,m)=>l&&WE(c,r.filters[m])),!0):!1})(n,e):void Ae(19439)}function jE(n){return n instanceof Vt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Xr(t.value)}`})(n):n instanceof ii?(function(t){return t.op.toString()+" {"+t.getFilters().map(jE).join(" ,")+"}"})(n):"Filter"}class HR extends Vt{constructor(e,t,s){super(e,t,s),this.key=ve.fromName(s.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class zR extends Vt{constructor(e,t){super(e,"in",t),this.keys=e0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class YR extends Vt{constructor(e,t){super(e,"not-in",t),this.keys=e0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function e0(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>ve.fromName(s.referenceValue)))}class JR extends Vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _m(t)&&xl(t.arrayValue,this.value)}}class KR extends Vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&xl(this.value.arrayValue,t)}}class QR extends Vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!xl(this.value.arrayValue,t)}}class XR extends Vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_m(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>xl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,t=null,s=[],r=[],l=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=r,this.limit=l,this.startAt=c,this.endAt=m,this.Te=null}}function dT(n,e=null,t=[],s=[],r=null,l=null,c=null){return new $R(n,e,t,s,r,l,c)}function Tm(n){const e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Bh(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),ef(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Xr(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Xr(s))).join(",")),e.Te=t}return e.Te}function vm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!BR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!WE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!fT(n.startAt,e.startAt)&&fT(n.endAt,e.endAt)}function Fh(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,t=null,s=[],r=[],l=null,c="F",m=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=r,this.limit=l,this.limitType=c,this.startAt=m,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ZR(n,e,t,s,r,l,c,m){return new Ul(n,e,t,s,r,l,c,m)}function Em(n){return new Ul(n)}function hT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function t0(n){return n.collectionGroup!==null}function El(n){const e=Re(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new kt(Xt.comparator);return c.filters.forEach((y=>{y.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Gc(l,s))})),t.has(Xt.keyField().canonicalString())||e.Ie.push(new Gc(Xt.keyField(),s))}return e.Ie}function Ni(n){const e=Re(n);return e.Ee||(e.Ee=WR(e,El(n))),e.Ee}function WR(n,e){if(n.limitType==="F")return dT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new Gc(r.field,l)}));const t=n.endAt?new Oc(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Oc(n.startAt.position,n.startAt.inclusive):null;return dT(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Hh(n,e){const t=n.filters.concat([e]);return new Ul(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function zh(n,e,t){return new Ul(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function nf(n,e){return vm(Ni(n),Ni(e))&&n.limitType===e.limitType}function n0(n){return`${Tm(Ni(n))}|lt:${n.limitType}`}function Ur(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((r=>jE(r))).join(", ")}]`),ef(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((r=>Xr(r))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((r=>Xr(r))).join(",")),`Target(${s})`})(Ni(n))}; limitType=${n.limitType})`}function sf(n,e){return e.isFoundDocument()&&(function(s,r){const l=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ve.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,r){for(const l of El(s))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,r){for(const l of s.filters)if(!l.matches(r))return!1;return!0})(n,e)&&(function(s,r){return!(s.startAt&&!(function(c,m,y){const p=cT(c,m,y);return c.inclusive?p<=0:p<0})(s.startAt,El(s),r)||s.endAt&&!(function(c,m,y){const p=cT(c,m,y);return c.inclusive?p>=0:p>0})(s.endAt,El(s),r))})(n,e)}function jR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function i0(n){return(e,t)=>{let s=!1;for(const r of El(n)){const l=ew(r,e,t);if(l!==0)return l;s=s||r.field.isKeyField()}return 0}}function ew(n,e,t){const s=n.field.isKeyField()?ve.comparator(e.key,t.key):(function(l,c,m){const y=c.data.field(l),p=m.data.field(l);return y!==null&&p!==null?Qr(y,p):Ae(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[r,l]of s)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[t]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){eo(this.inner,((t,s)=>{for(const[r,l]of s)e(r,l)}))}isEmpty(){return GE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=new ht(ve.comparator);function os(){return tw}const s0=new ht(ve.comparator);function gl(...n){let e=s0;for(const t of n)e=e.insert(t.key,t);return e}function o0(n){let e=s0;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function ko(){return Sl()}function r0(){return Sl()}function Sl(){return new Bo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const nw=new ht(ve.comparator),iw=new kt(ve.comparator);function Oe(...n){let e=iw;for(const t of n)e=e.add(t);return e}const sw=new kt(qe);function ow(){return sw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lc(e)?"-0":e}}function a0(n){return{integerValue:""+n}}function rw(n,e){return VR(e)?a0(e):Sm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(){this._=void 0}}function aw(n,e,t){return n instanceof Bc?(function(r,l){const c={fields:{[HE]:{stringValue:FE},[YE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&ym(l)&&(l=tf(l)),l&&(c.fields[zE]=l),{mapValue:c}})(t,e):n instanceof Dl?u0(n,e):n instanceof bl?c0(n,e):(function(r,l){const c=l0(r,l),m=mT(c)+mT(r.Ae);return Gh(c)&&Gh(r.Ae)?a0(m):Sm(r.serializer,m)})(n,e)}function lw(n,e,t){return n instanceof Dl?u0(n,e):n instanceof bl?c0(n,e):t}function l0(n,e){return n instanceof Fc?(function(s){return Gh(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Bc extends of{}class Dl extends of{constructor(e){super(),this.elements=e}}function u0(n,e){const t=f0(e);for(const s of n.elements)t.some((r=>Vi(r,s)))||t.push(s);return{arrayValue:{values:t}}}class bl extends of{constructor(e){super(),this.elements=e}}function c0(n,e){let t=f0(e);for(const s of n.elements)t=t.filter((r=>!Vi(r,s)));return{arrayValue:{values:t}}}class Fc extends of{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function mT(n){return Et(n.integerValue||n.doubleValue)}function f0(n){return _m(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function uw(n,e){return n.field.isEqual(e.field)&&(function(s,r){return s instanceof Dl&&r instanceof Dl||s instanceof bl&&r instanceof bl?Kr(s.elements,r.elements,Vi):s instanceof Fc&&r instanceof Fc?Vi(s.Ae,r.Ae):s instanceof Bc&&r instanceof Bc})(n.transform,e.transform)}class cw{constructor(e,t){this.version=e,this.transformResults=t}}class Mi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mi}static exists(e){return new Mi(void 0,e)}static updateTime(e){return new Mi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class rf{}function d0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new m0(n.key,Mi.none()):new Ll(n.key,n.data,Mi.none());{const t=n.data,s=gn.empty();let r=new kt(Xt.comparator);for(let l of e.fields)if(!r.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),r=r.add(l)}return new to(n.key,s,new Rn(r.toArray()),Mi.none())}}function fw(n,e,t){n instanceof Ll?(function(r,l,c){const m=r.value.clone(),y=gT(r.fieldTransforms,l,c.transformResults);m.setAll(y),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):n instanceof to?(function(r,l,c){if(!wc(r.precondition,l))return void l.convertToUnknownDocument(c.version);const m=gT(r.fieldTransforms,l,c.transformResults),y=l.data;y.setAll(h0(r)),y.setAll(m),l.convertToFoundDocument(c.version,y).setHasCommittedMutations()})(n,e,t):(function(r,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Al(n,e,t,s){return n instanceof Ll?(function(l,c,m,y){if(!wc(l.precondition,c))return m;const p=l.value.clone(),T=yT(l.fieldTransforms,y,c);return p.setAll(T),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(n,e,t,s):n instanceof to?(function(l,c,m,y){if(!wc(l.precondition,c))return m;const p=yT(l.fieldTransforms,y,c),T=c.data;return T.setAll(h0(l)),T.setAll(p),c.convertToFoundDocument(c.version,T).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,s):(function(l,c,m){return wc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(n,e,t)}function dw(n,e){let t=null;for(const s of n.fieldTransforms){const r=e.data.field(s.field),l=l0(s.transform,r||null);l!=null&&(t===null&&(t=gn.empty()),t.set(s.field,l))}return t||null}function pT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Kr(s,r,((l,c)=>uw(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ll extends rf{constructor(e,t,s,r=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class to extends rf{constructor(e,t,s,r,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function h0(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function gT(n,e,t){const s=new Map;$e(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const l=n[r],c=l.transform,m=e.data.field(l.field);s.set(l.field,lw(c,m,t[r]))}return s}function yT(n,e,t){const s=new Map;for(const r of n){const l=r.transform,c=t.data.field(r.field);s.set(r.field,aw(l,c,e))}return s}class m0 extends rf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hw extends rf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,t,s,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&fw(l,e,s[r])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Al(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Al(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=r0();return this.mutations.forEach((r=>{const l=e.get(r.key),c=l.overlayedDocument;let m=this.applyToLocalView(c,l.mutatedFields);m=t.has(r.key)?null:m;const y=d0(c,m);y!==null&&s.set(r.key,y),c.isValidDocument()||c.convertToNoDocument(Ce.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Oe())}isEqual(e){return this.batchId===e.batchId&&Kr(this.mutations,e.mutations,((t,s)=>pT(t,s)))&&Kr(this.baseMutations,e.baseMutations,((t,s)=>pT(t,s)))}}class Am{constructor(e,t,s,r){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=r}static from(e,t,s){$e(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return nw})();const l=e.mutations;for(let c=0;c<l.length;c++)r=r.insert(l[c].key,s[c].version);return new Am(e,t,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,Fe;function yw(n){switch(n){case ne.OK:return Ae(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Ae(15467,{code:n})}}function p0(n){if(n===void 0)return is("GRPC error has no .code"),ne.UNKNOWN;switch(n){case bt.OK:return ne.OK;case bt.CANCELLED:return ne.CANCELLED;case bt.UNKNOWN:return ne.UNKNOWN;case bt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case bt.INTERNAL:return ne.INTERNAL;case bt.UNAVAILABLE:return ne.UNAVAILABLE;case bt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case bt.NOT_FOUND:return ne.NOT_FOUND;case bt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case bt.ABORTED:return ne.ABORTED;case bt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case bt.DATA_LOSS:return ne.DATA_LOSS;default:return Ae(39323,{code:n})}}(Fe=bt||(bt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw=new Js([4294967295,4294967295],0);function _T(n){const e=_w().encode(n),t=new ME;return t.update(e),new Uint8Array(t.digest())}function TT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Js([t,s],0),new Js([r,l],0)]}class Cm{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new yl(`Invalid padding: ${t}`);if(s<0)throw new yl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new yl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new yl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Js.fromNumber(this.ge)}ye(e,t,s){let r=e.add(t.multiply(Js.fromNumber(s)));return r.compare(Tw)===1&&(r=new Js([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=_T(e),[s,r]=TT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,r,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Cm(l,r,t);return s.forEach((m=>c.insert(m))),c}insert(e){if(this.ge===0)return;const t=_T(e),[s,r]=TT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,r,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class yl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,t,s,r,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const r=new Map;return r.set(e,kl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new af(Ce.min(),r,new ht(qe),os(),Oe())}}class kl{constructor(e,t,s,r,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new kl(s,t,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,t,s,r){this.be=e,this.removedTargetIds=t,this.key=s,this.De=r}}class g0{constructor(e,t){this.targetId=e,this.Ce=t}}class y0{constructor(e,t,s=$t.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=r}}class vT{constructor(){this.ve=0,this.Fe=ET(),this.Me=$t.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),t=Oe(),s=Oe();return this.Fe.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:s=s.add(r);break;default:Ae(38017,{changeType:l})}})),new kl(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=ET()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class vw{constructor(e){this.Ge=e,this.ze=new Map,this.je=os(),this.Je=Ec(),this.He=Ec(),this.Ye=new ht(qe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,s=e.Ce.count,r=this.ot(t);if(r){const l=r.target;if(Fh(l))if(s===0){const c=new ve(l.path);this.et(t,c,en.newNoDocument(c,Ce.min()))}else $e(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const m=this.ut(e),y=m?this.ct(m,e,c):1;if(y!==0){this.it(t);const p=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:l=0}=t;let c,m;try{c=$s(s).toUint8Array()}catch(y){if(y instanceof BE)return Jr("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Cm(c,r,l)}catch(y){return Jr(y instanceof yl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.ge===0?null:m}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let r=0;return s.forEach((l=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const m=this.ot(c);if(m){if(l.current&&Fh(m.target)){const y=new ve(m.target.path);this.It(y).has(c)||this.Et(c,y)||this.et(c,y,en.newNoDocument(y,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=Oe();this.He.forEach(((l,c)=>{let m=!0;c.forEachWhile((y=>{const p=this.ot(y);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const r=new af(e,t,this.Ye,this.je,s);return this.je=os(),this.Je=Ec(),this.He=Ec(),this.Ye=new ht(qe),r}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new vT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new kt(qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new kt(qe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new vT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ec(){return new ht(ve.comparator)}function ET(){return new ht(ve.comparator)}const Ew={asc:"ASCENDING",desc:"DESCENDING"},Sw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Aw={and:"AND",or:"OR"};class Cw{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yh(n,e){return n.useProto3Json||ef(e)?e:{value:e}}function Hc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Iw(n,e){return Hc(n,e.toTimestamp())}function xi(n){return $e(!!n,49232),Ce.fromTimestamp((function(t){const s=Xs(t);return new ct(s.seconds,s.nanos)})(n))}function Im(n,e){return Jh(n,e).canonicalString()}function Jh(n,e){const t=(function(r){return new rt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function T0(n){const e=rt.fromString(n);return $e(C0(e),10190,{key:e.toString()}),e}function Kh(n,e){return Im(n.databaseId,e.path)}function Nh(n,e){const t=T0(e);if(t.get(1)!==n.databaseId.projectId)throw new he(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(E0(t))}function v0(n,e){return Im(n.databaseId,e)}function Rw(n){const e=T0(n);return e.length===4?rt.emptyPath():E0(e)}function Qh(n){return new rt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function E0(n){return $e(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ST(n,e,t){return{name:Kh(n,e),fields:t.value.mapValue.fields}}function ww(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ae(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(p,T){return p.useProto3Json?($e(T===void 0||typeof T=="string",58123),$t.fromBase64String(T||"")):($e(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),$t.fromUint8Array(T||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&(function(p){const T=p.code===void 0?ne.UNKNOWN:p0(p.code);return new he(T,p.message||"")})(c);t=new y0(s,r,l,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Nh(n,s.document.name),l=xi(s.document.updateTime),c=s.document.createTime?xi(s.document.createTime):Ce.min(),m=new gn({mapValue:{fields:s.document.fields}}),y=en.newFoundDocument(r,l,c,m),p=s.targetIds||[],T=s.removedTargetIds||[];t=new Nc(p,T,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Nh(n,s.document),l=s.readTime?xi(s.readTime):Ce.min(),c=en.newNoDocument(r,l),m=s.removedTargetIds||[];t=new Nc([],m,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Nh(n,s.document),l=s.removedTargetIds||[];t=new Nc([],l,r,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:l}=s,c=new gw(r,l),m=s.targetId;t=new g0(m,c)}}return t}function Nw(n,e){let t;if(e instanceof Ll)t={update:ST(n,e.key,e.value)};else if(e instanceof m0)t={delete:Kh(n,e.key)};else if(e instanceof to)t={update:ST(n,e.key,e.data),updateMask:kw(e.fieldMask)};else{if(!(e instanceof hw))return Ae(16599,{Vt:e.type});t={verify:Kh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const m=c.transform;if(m instanceof Bc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Dl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof bl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Fc)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw Ae(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:Iw(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ae(27497)})(n,e.precondition)),t}function Mw(n,e){return n&&n.length>0?($e(e!==void 0,14353),n.map((t=>(function(r,l){let c=r.updateTime?xi(r.updateTime):xi(l);return c.isEqual(Ce.min())&&(c=xi(l)),new cw(c,r.transformResults||[])})(t,e)))):[]}function xw(n,e){return{documents:[v0(n,e.path)]}}function Dw(n,e){const t={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=v0(n,r);const l=(function(p){if(p.length!==0)return A0(ii.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((T=>(function(S){return{field:Lr(S.field),direction:Pw(S.dir)}})(T)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const m=Yh(n,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:r}}function bw(n){let e=Rw(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let r=null;if(s>0){$e(s===1,65062);const T=t.from[0];T.allDescendants?r=T.collectionId:e=e.child(T.collectionId)}let l=[];t.where&&(l=(function(E){const S=S0(E);return S instanceof ii&&ZE(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((S=>(function(G){return new Gc(kr(G.field),(function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(G.direction))})(S)))})(t.orderBy));let m=null;t.limit&&(m=(function(E){let S;return S=typeof E=="object"?E.value:E,ef(S)?null:S})(t.limit));let y=null;t.startAt&&(y=(function(E){const S=!!E.before,w=E.values||[];return new Oc(w,S)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const S=!E.before,w=E.values||[];return new Oc(w,S)})(t.endAt)),ZR(e,r,c,l,m,"F",y,p)}function Vw(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function S0(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=kr(t.unaryFilter.field);return Vt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=kr(t.unaryFilter.field);return Vt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=kr(t.unaryFilter.field);return Vt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=kr(t.unaryFilter.field);return Vt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Vt.create(kr(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ii.create(t.compositeFilter.filters.map((s=>S0(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(t.compositeFilter.op))})(n):Ae(30097,{filter:n})}function Pw(n){return Ew[n]}function Uw(n){return Sw[n]}function Lw(n){return Aw[n]}function Lr(n){return{fieldPath:n.canonicalString()}}function kr(n){return Xt.fromServerFormat(n.fieldPath)}function A0(n){return n instanceof Vt?(function(t){if(t.op==="=="){if(uT(t.value))return{unaryFilter:{field:Lr(t.field),op:"IS_NAN"}};if(lT(t.value))return{unaryFilter:{field:Lr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(uT(t.value))return{unaryFilter:{field:Lr(t.field),op:"IS_NOT_NAN"}};if(lT(t.value))return{unaryFilter:{field:Lr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lr(t.field),op:Uw(t.op),value:t.value}}})(n):n instanceof ii?(function(t){const s=t.getFilters().map((r=>A0(r)));return s.length===1?s[0]:{compositeFilter:{op:Lw(t.op),filters:s}}})(n):Ae(54877,{filter:n})}function kw(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function C0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,t,s,r,l=Ce.min(),c=Ce.min(),m=$t.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new Fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e){this.yt=e}}function Ow(n){const e=bw({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?zh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(){this.Cn=new Bw}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Qs.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Qs.min())}updateCollectionGroup(e,t,s){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class Bw{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t]||new kt(rt.comparator),l=!r.has(s);return this.index[t]=r.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t];return r&&r.has(s)}getEntries(e){return(this.index[e]||new kt(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},I0=41943040;class pn{static withCacheSize(e){return new pn(e,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(I0,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new $r(0)}static cr(){return new $r(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="LruGarbageCollector",Fw=1048576;function IT([n,e],[t,s]){const r=qe(n,t);return r===0?qe(e,s):r}class Hw{constructor(e){this.Ir=e,this.buffer=new kt(IT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();IT(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class zw{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(CT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){na(t)?me(CT,"Ignoring IndexedDB error during garbage collection: ",t):await ta(t)}await this.Vr(3e5)}))}}class Yw{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(jc.ce);const s=new Hw(t);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(AT)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),AT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,r,l,c,m,y,p;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),r=this.params.maximumSequenceNumbersToCollect):r=E,c=Date.now(),this.nthSequenceNumber(e,r)))).next((E=>(s=E,m=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,y=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(p=Date.now(),Pr()<=He.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-T}ms
	Determined least recently used ${r} in `+(m-c)+`ms
	Removed ${l} targets in `+(y-m)+`ms
	Removed ${E} documents in `+(p-y)+`ms
Total Duration: ${p-T}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:E}))))}}function Jw(n,e){return new Yw(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(){this.changes=new Bo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ie.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,t,s,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(s!==null&&Al(s.mutation,r,Rn.empty(),ct.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Oe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Oe()){const r=ko();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,s).next((l=>{let c=gl();return l.forEach(((m,y)=>{c=c.insert(m,y.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=ko();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Oe())))}populateOverlays(e,t,s){const r=[];return s.forEach((l=>{t.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((c,m)=>{t.set(c,m)}))}))}computeViews(e,t,s,r){let l=os();const c=Sl(),m=(function(){return Sl()})();return t.forEach(((y,p)=>{const T=s.get(p.key);r.has(p.key)&&(T===void 0||T.mutation instanceof to)?l=l.insert(p.key,p):T!==void 0?(c.set(p.key,T.mutation.getFieldMask()),Al(T.mutation,p,T.mutation.getFieldMask(),ct.now())):c.set(p.key,Rn.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((p,T)=>c.set(p,T))),t.forEach(((p,T)=>m.set(p,new Qw(T,c.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,t){const s=Sl();let r=new ht(((c,m)=>c-m)),l=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const m of c)m.keys().forEach((y=>{const p=t.get(y);if(p===null)return;let T=s.get(y)||Rn.empty();T=m.applyToLocalView(p,T),s.set(y,T);const E=(r.get(m.batchId)||Oe()).add(y);r=r.insert(m.batchId,E)}))})).next((()=>{const c=[],m=r.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),p=y.key,T=y.value,E=r0();T.forEach((S=>{if(!l.has(S)){const w=d0(t.get(S),s.get(S));w!==null&&E.set(S,w),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,E))}return ie.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,r){return(function(c){return ve.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):t0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,r):this.getDocumentsMatchingCollectionQuery(e,t,s,r)}getNextDocuments(e,t,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,r).next((l=>{const c=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,r-l.size):ie.resolve(ko());let m=wl,y=l;return c.next((p=>ie.forEach(p,((T,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),l.get(T)?ie.resolve():this.remoteDocumentCache.getEntry(e,T).next((S=>{y=y.insert(T,S)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,y,p,Oe()))).next((T=>({batchId:m,changes:o0(T)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((s=>{let r=gl();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,r){const l=t.collectionGroup;let c=gl();return this.indexManager.getCollectionParents(e,l).next((m=>ie.forEach(m,(y=>{const p=(function(E,S){return new Ul(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,s,r).next((T=>{T.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,r)))).next((c=>{l.forEach(((y,p)=>{const T=p.getKey();c.get(T)===null&&(c=c.insert(T,en.newInvalidDocument(T)))}));let m=gl();return c.forEach(((y,p)=>{const T=l.get(y);T!==void 0&&Al(T.mutation,p,Rn.empty(),ct.now()),sf(t,p)&&(m=m.insert(y,p))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:xi(r.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:Ow(r.bundledQuery),readTime:xi(r.readTime)}})(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(){this.overlays=new ht(ve.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ko();return ie.forEach(t,(r=>this.getOverlay(e,r).next((l=>{l!==null&&s.set(r,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((r,l)=>{this.St(e,t,l)})),ie.resolve()}removeOverlaysForBatchId(e,t,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),ie.resolve()}getOverlaysForCollection(e,t,s){const r=ko(),l=t.length+1,c=new ve(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const y=m.getNext().value,p=y.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&y.largestBatchId>s&&r.set(y.getKey(),y)}return ie.resolve(r)}getOverlaysForCollectionGroup(e,t,s,r){let l=new ht(((p,T)=>p-T));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let T=l.get(p.largestBatchId);T===null&&(T=ko(),l=l.insert(p.largestBatchId,T)),T.set(p.getKey(),p)}}const m=ko(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((p,T)=>m.set(p,T))),!(m.size()>=r)););return ie.resolve(m)}St(e,t,s){const r=this.overlays.get(s.key);if(r!==null){const c=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new pw(t,s));let l=this.qr.get(t);l===void 0&&(l=Oe(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(){this.Qr=new kt(Bt.$r),this.Ur=new kt(Bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Bt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Bt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new ve(new rt([])),s=new Bt(t,e),r=new Bt(t,e+1),l=[];return this.Ur.forEachInRange([s,r],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ve(new rt([])),s=new Bt(t,e),r=new Bt(t,e+1);let l=Oe();return this.Ur.forEachInRange([s,r],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Bt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Bt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ve.comparator(e.key,t.key)||qe(e.Yr,t.Yr)}static Kr(e,t){return qe(e.Yr,t.Yr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new kt(Bt.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,r){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new mw(l,t,s,r);this.mutationQueue.push(c);for(const m of r)this.Zr=this.Zr.add(new Bt(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ie.resolve(c)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,r=this.ei(s),l=r<0?0:r;return ie.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?gm:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Bt(t,0),r=new Bt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,r],(c=>{const m=this.Xr(c.Yr);l.push(m)})),ie.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new kt(qe);return t.forEach((r=>{const l=new Bt(r,0),c=new Bt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(m=>{s=s.add(m.Yr)}))})),ie.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,r=s.length+1;let l=s;ve.isDocumentKey(l)||(l=l.child(""));const c=new Bt(new ve(l),0);let m=new kt(qe);return this.Zr.forEachWhile((y=>{const p=y.key.path;return!!s.isPrefixOf(p)&&(p.length===r&&(m=m.add(y.Yr)),!0)}),c),ie.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){$e(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ie.forEach(t.mutations,(r=>{const l=new Bt(r.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Bt(t,0),r=this.Zr.firstAfterOrEqual(s);return ie.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.ri=e,this.docs=(function(){return new ht(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,r=this.docs.get(s),l=r?r.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ie.resolve(s?s.document.mutableCopy():en.newInvalidDocument(t))}getEntries(e,t){let s=os();return t.forEach((r=>{const l=this.docs.get(r);s=s.insert(r,l?l.document.mutableCopy():en.newInvalidDocument(r))})),ie.resolve(s)}getDocumentsMatchingQuery(e,t,s,r){let l=os();const c=t.path,m=new ve(c.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:p,value:{document:T}}=y.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||MR(NR(T),s)<=0||(r.has(T.key)||sf(t,T))&&(l=l.insert(T.key,T.mutableCopy()))}return ie.resolve(l)}getAllFromCollectionGroup(e,t,s,r){Ae(9500)}ii(e,t){return ie.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new tN(this)}getSize(e){return ie.resolve(this.size)}}class tN extends Kw{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e){this.persistence=e,this.si=new Bo((t=>Tm(t)),vm),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new Rm,this.targetCount=0,this.ai=$r.ur()}forEachTarget(e,t){return this.si.forEach(((s,r)=>t(r))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new $r(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,s){let r=0;const l=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),r++)})),ie.waitFor(l).next((()=>r))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return ie.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),ie.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const r=this.persistence.referenceDelegate,l=[];return r&&t.forEach((c=>{l.push(r.markPotentiallyOrphaned(e,c))})),ie.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return ie.resolve(s)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,t){this.ui={},this.overlays={},this.ci=new jc(0),this.li=!1,this.li=!0,this.hi=new Ww,this.referenceDelegate=e(this),this.Pi=new nN(this),this.indexManager=new Gw,this.remoteDocumentCache=(function(r){return new eN(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new qw(t),this.Ii=new $w(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Zw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new jw(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){me("MemoryPersistence","Starting transaction:",e);const r=new iN(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((l=>this.referenceDelegate.di(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Ai(e,t){return ie.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class iN extends DR{constructor(e){super(),this.currentSequenceNumber=e}}class wm{constructor(e){this.persistence=e,this.Ri=new Rm,this.Vi=null}static mi(e){return new wm(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),ie.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(s=>{const r=ve.fromPath(s);return this.gi(e,r).next((l=>{l||t.removeEntry(r,Ce.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class zc{constructor(e,t){this.persistence=e,this.pi=new Bo((s=>PR(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=Jw(this,t)}static mi(e,t){return new zc(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((r=>s+r))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return ie.forEach(this.pi,((s,r)=>this.br(e,s,r).next((l=>l?ie.resolve():t(r)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.ii(e,(c=>this.br(e,c,t).next((m=>{m||(s++,l.removeEntry(c,Ce.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ic(e.data.value)),t}br(e,t,s){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return ie.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,t,s,r){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=r}static As(e,t){let s=Oe(),r=Oe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new Nm(e,t.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return WC()?8:bR($C())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,r){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,r,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new sN;return this.Ss(e,t,c).next((m=>{if(l.result=m,this.Vs)return this.bs(e,t,c,m.size)}))})).next((()=>l.result))}bs(e,t,s,r){return s.documentReadCount<this.fs?(Pr()<=He.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Ur(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(Pr()<=He.DEBUG&&me("QueryEngine","Query:",Ur(t),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Pr()<=He.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Ur(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ni(t))):ie.resolve())}ys(e,t){if(hT(t))return ie.resolve(null);let s=Ni(t);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=zh(t,null,"F"),s=Ni(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=Oe(...l);return this.ps.getDocuments(e,c).next((m=>this.indexManager.getMinOffset(e,s).next((y=>{const p=this.Ds(t,m);return this.Cs(t,p,c,y.readTime)?this.ys(e,zh(t,null,"F")):this.vs(e,p,t,y)}))))})))))}ws(e,t,s,r){return hT(t)||r.isEqual(Ce.min())?ie.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,r)?ie.resolve(null):(Pr()<=He.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ur(t)),this.vs(e,c,t,wR(r,wl)).next((m=>m)))}))}Ds(e,t){let s=new kt(i0(e));return t.forEach(((r,l)=>{sf(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,r){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Ss(e,t,s){return Pr()<=He.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Ur(t)),this.ps.getDocumentsMatchingQuery(e,t,Qs.min(),s)}vs(e,t,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="LocalStore",rN=3e8;class aN{constructor(e,t,s,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new ht(qe),this.xs=new Bo((l=>Tm(l)),vm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xw(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function lN(n,e,t,s){return new aN(n,e,t,s)}async function w0(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return t.mutationQueue.getAllMutationBatches(s).next((l=>(r=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],m=[];let y=Oe();for(const p of r){c.push(p.batchId);for(const T of p.mutations)y=y.add(T.key)}for(const p of l){m.push(p.batchId);for(const T of p.mutations)y=y.add(T.key)}return t.localDocuments.getDocuments(s,y).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:m})))}))}))}function uN(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,y,p,T){const E=p.batch,S=E.keys();let w=ie.resolve();return S.forEach((G=>{w=w.next((()=>T.getEntry(y,G))).next((B=>{const J=p.docVersions.get(G);$e(J!==null,48541),B.version.compareTo(J)<0&&(E.applyToRemoteDocument(B,p),B.isValidDocument()&&(B.setReadTime(p.commitVersion),T.addEntry(B)))}))})),w.next((()=>m.mutationQueue.removeMutationBatch(y,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let y=Oe();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(y=y.add(m.batch.mutations[p].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(s,r)))}))}function N0(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function cN(n,e){const t=Re(n),s=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const m=[];e.targetChanges.forEach(((T,E)=>{const S=r.get(E);if(!S)return;m.push(t.Pi.removeMatchingKeys(l,T.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,T.addedDocuments,E))));let w=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken($t.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):T.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(T.resumeToken,s)),r=r.insert(E,w),(function(B,J,j){return B.resumeToken.approximateByteSize()===0||J.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=rN?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(S,w,T)&&m.push(t.Pi.updateTargetData(l,w))}));let y=os(),p=Oe();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,T))})),m.push(fN(l,c,e.documentUpdates).next((T=>{y=T.ks,p=T.qs}))),!s.isEqual(Ce.min())){const T=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));m.push(T)}return ie.waitFor(m).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,y,p))).next((()=>y))})).then((l=>(t.Ms=r,l)))}function fN(n,e,t){let s=Oe(),r=Oe();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=os();return t.forEach(((m,y)=>{const p=l.get(m);y.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(m)),y.isNoDocument()&&y.version.isEqual(Ce.min())?(e.removeEntry(m,y.readTime),c=c.insert(m,y)):!p.isValidDocument()||y.version.compareTo(p.version)>0||y.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(y),c=c.insert(m,y)):me(Mm,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",y.version)})),{ks:c,qs:r}}))}function dN(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=gm),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function hN(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return t.Pi.getTargetData(s,e).next((l=>l?(r=l,ie.resolve(r)):t.Pi.allocateTargetId(s).next((c=>(r=new Fs(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=t.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Xh(n,e,t){const s=Re(n),r=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!na(c))throw c;me(Mm,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function RT(n,e,t){const s=Re(n);let r=Ce.min(),l=Oe();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(y,p,T){const E=Re(y),S=E.xs.get(T);return S!==void 0?ie.resolve(E.Ms.get(S)):E.Pi.getTargetData(p,T)})(s,c,Ni(e)).next((m=>{if(m)return r=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,m.targetId).next((y=>{l=y}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?r:Ce.min(),t?l:Oe()))).next((m=>(mN(s,jR(e),m),{documents:m,Qs:l})))))}function mN(n,e,t){let s=n.Os.get(e)||Ce.min();t.forEach(((r,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class wT{constructor(){this.activeTargetIds=ow()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pN{constructor(){this.Mo=new wT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wT,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="ConnectivityMonitor";class MT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(NT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(NT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sc=null;function $h(){return Sc===null?Sc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Sc++,"0x"+Sc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh="RestConnection",yN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _N{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===kc?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,t,s,r,l){const c=$h(),m=this.zo(e,t.toUriEncodedString());me(Mh,`Sending RPC '${e}' ${c}:`,m,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,r,l);const{host:p}=new URL(m),T=dm(p);return this.Jo(e,m,y,s,T).then((E=>(me(Mh,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Jr(Mh,`RPC '${e}' ${c} failed with error: `,E,"url: ",m,"request:",s),E}))}Ho(e,t,s,r,l,c){return this.Go(e,t,s,r,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ea})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,l)=>e[l]=r)),s&&s.headers.forEach(((r,l)=>e[l]=r))}zo(e,t){const s=yN[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class vN extends _N{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,r,l){const c=$h();return new Promise(((m,y)=>{const p=new xE;p.setWithCredentials(!0),p.listenOnce(DE.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Cc.NO_ERROR:const E=p.getResponseJson();me(Wt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),m(E);break;case Cc.TIMEOUT:me(Wt,`RPC '${e}' ${c} timed out`),y(new he(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Cc.HTTP_ERROR:const S=p.getStatus();if(me(Wt,`RPC '${e}' ${c} failed with status:`,S,"response text:",p.getResponseText()),S>0){let w=p.getResponseJson();Array.isArray(w)&&(w=w[0]);const G=w==null?void 0:w.error;if(G&&G.status&&G.message){const B=(function(j){const se=j.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(se)>=0?se:ne.UNKNOWN})(G.status);y(new he(B,G.message))}else y(new he(ne.UNKNOWN,"Server responded with status "+p.getStatus()))}else y(new he(ne.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{me(Wt,`RPC '${e}' ${c} completed.`)}}));const T=JSON.stringify(r);me(Wt,`RPC '${e}' ${c} sending request:`,r),p.send(t,"POST",T,s,15)}))}T_(e,t,s){const r=$h(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=PE(),m=VE(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(y.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,t,s),y.encodeInitMessageHeaders=!0;const T=l.join("");me(Wt,`Creating RPC '${e}' stream ${r}: ${T}`,y);const E=c.createWebChannel(T,y);this.I_(E);let S=!1,w=!1;const G=new TN({Yo:J=>{w?me(Wt,`Not sending because RPC '${e}' stream ${r} is closed:`,J):(S||(me(Wt,`Opening RPC '${e}' stream ${r} transport.`),E.open(),S=!0),me(Wt,`RPC '${e}' stream ${r} sending:`,J),E.send(J))},Zo:()=>E.close()}),B=(J,j,se)=>{J.listen(j,(ee=>{try{se(ee)}catch(le){setTimeout((()=>{throw le}),0)}}))};return B(E,pl.EventType.OPEN,(()=>{w||(me(Wt,`RPC '${e}' stream ${r} transport opened.`),G.o_())})),B(E,pl.EventType.CLOSE,(()=>{w||(w=!0,me(Wt,`RPC '${e}' stream ${r} transport closed`),G.a_(),this.E_(E))})),B(E,pl.EventType.ERROR,(J=>{w||(w=!0,Jr(Wt,`RPC '${e}' stream ${r} transport errored. Name:`,J.name,"Message:",J.message),G.a_(new he(ne.UNAVAILABLE,"The operation could not be completed")))})),B(E,pl.EventType.MESSAGE,(J=>{var j;if(!w){const se=J.data[0];$e(!!se,16349);const ee=se,le=(ee==null?void 0:ee.error)||((j=ee[0])==null?void 0:j.error);if(le){me(Wt,`RPC '${e}' stream ${r} received error:`,le);const fe=le.status;let ue=(function(N){const L=bt[N];if(L!==void 0)return p0(L)})(fe),D=le.message;ue===void 0&&(ue=ne.INTERNAL,D="Unknown error status: "+fe+" with message "+le.message),w=!0,G.a_(new he(ue,D)),E.close()}else me(Wt,`RPC '${e}' stream ${r} received:`,se),G.u_(se)}})),B(m,bE.STAT_EVENT,(J=>{J.stat===kh.PROXY?me(Wt,`RPC '${e}' stream ${r} detected buffering proxy`):J.stat===kh.NOPROXY&&me(Wt,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{G.__()}),0),G}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function xh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(n){return new Cw(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,t,s=1e3,r=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=r,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-s);r>0&&me("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="PersistentStream";class x0{constructor(e,t,s,r,l,c,m,y){this.Mi=e,this.S_=s,this.b_=r,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new M0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(is(t.toString()),is("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===t&&this.G_(s,r)}),(s=>{e((()=>{const r=new he(ne.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(xT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(me(xT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class EN extends x0{constructor(e,t,s,r,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,r,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=ww(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Ce.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ce.min():c.readTime?xi(c.readTime):Ce.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Qh(this.serializer),t.addTarget=(function(l,c){let m;const y=c.target;if(m=Fh(y)?{documents:xw(l,y)}:{query:Dw(l,y).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=_0(l,c.resumeToken);const p=Yh(l,c.expectedCount);p!==null&&(m.expectedCount=p)}else if(c.snapshotVersion.compareTo(Ce.min())>0){m.readTime=Hc(l,c.snapshotVersion.toTimestamp());const p=Yh(l,c.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const s=Vw(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Qh(this.serializer),t.removeTarget=e,this.q_(t)}}class SN extends x0{constructor(e,t,s,r,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,r,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Mw(e.writeResults,e.commitTime),s=xi(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Qh(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>Nw(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{}class CN extends AN{constructor(e,t,s,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new he(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Jh(t,s),r,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(ne.UNKNOWN,l.toString())}))}Ho(e,t,s,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(e,Jh(t,s),r,c,m,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(ne.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class IN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(is(t),this.aa=!1):me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="RemoteStore";class RN{constructor(e,t,s,r,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Fo(this)&&(me(Go,"Restarting streams for network reachability change."),await(async function(y){const p=Re(y);p.Ea.add(4),await ql(p),p.Ra.set("Unknown"),p.Ea.delete(4),await uf(p)})(this))}))})),this.Ra=new IN(s,r)}}async function uf(n){if(Fo(n))for(const e of n.da)await e(!0)}async function ql(n){for(const e of n.da)await e(!1)}function D0(n,e){const t=Re(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Vm(t)?bm(t):ia(t).O_()&&Dm(t,e))}function xm(n,e){const t=Re(n),s=ia(t);t.Ia.delete(e),s.O_()&&b0(t,e),t.Ia.size===0&&(s.O_()?s.L_():Fo(t)&&t.Ra.set("Unknown"))}function Dm(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ia(n).Y_(e)}function b0(n,e){n.Va.Ue(e),ia(n).Z_(e)}function bm(n){n.Va=new vw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ia(n).start(),n.Ra.ua()}function Vm(n){return Fo(n)&&!ia(n).x_()&&n.Ia.size>0}function Fo(n){return Re(n).Ea.size===0}function V0(n){n.Va=void 0}async function wN(n){n.Ra.set("Online")}async function NN(n){n.Ia.forEach(((e,t)=>{Dm(n,e)}))}async function MN(n,e){V0(n),Vm(n)?(n.Ra.ha(e),bm(n)):n.Ra.set("Unknown")}async function xN(n,e,t){if(n.Ra.set("Online"),e instanceof y0&&e.state===2&&e.cause)try{await(async function(r,l){const c=l.cause;for(const m of l.targetIds)r.Ia.has(m)&&(await r.remoteSyncer.rejectListen(m,c),r.Ia.delete(m),r.Va.removeTarget(m))})(n,e)}catch(s){me(Go,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Yc(n,s)}else if(e instanceof Nc?n.Va.Ze(e):e instanceof g0?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ce.min()))try{const s=await N0(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const m=l.Va.Tt(c);return m.targetChanges.forEach(((y,p)=>{if(y.resumeToken.approximateByteSize()>0){const T=l.Ia.get(p);T&&l.Ia.set(p,T.withResumeToken(y.resumeToken,c))}})),m.targetMismatches.forEach(((y,p)=>{const T=l.Ia.get(y);if(!T)return;l.Ia.set(y,T.withResumeToken($t.EMPTY_BYTE_STRING,T.snapshotVersion)),b0(l,y);const E=new Fs(T.target,y,p,T.sequenceNumber);Dm(l,E)})),l.remoteSyncer.applyRemoteEvent(m)})(n,t)}catch(s){me(Go,"Failed to raise snapshot:",s),await Yc(n,s)}}async function Yc(n,e,t){if(!na(e))throw e;n.Ea.add(1),await ql(n),n.Ra.set("Offline"),t||(t=()=>N0(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{me(Go,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await uf(n)}))}function P0(n,e){return e().catch((t=>Yc(n,t,e)))}async function cf(n){const e=Re(n),t=Ws(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:gm;for(;DN(e);)try{const r=await dN(e.localStore,s);if(r===null){e.Ta.length===0&&t.L_();break}s=r.batchId,bN(e,r)}catch(r){await Yc(e,r)}U0(e)&&L0(e)}function DN(n){return Fo(n)&&n.Ta.length<10}function bN(n,e){n.Ta.push(e);const t=Ws(n);t.O_()&&t.X_&&t.ea(e.mutations)}function U0(n){return Fo(n)&&!Ws(n).x_()&&n.Ta.length>0}function L0(n){Ws(n).start()}async function VN(n){Ws(n).ra()}async function PN(n){const e=Ws(n);for(const t of n.Ta)e.ea(t.mutations)}async function UN(n,e,t){const s=n.Ta.shift(),r=Am.from(s,e,t);await P0(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await cf(n)}async function LN(n,e){e&&Ws(n).X_&&await(async function(s,r){if((function(c){return yw(c)&&c!==ne.ABORTED})(r.code)){const l=s.Ta.shift();Ws(s).B_(),await P0(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,r))),await cf(s)}})(n,e),U0(n)&&L0(n)}async function DT(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),me(Go,"RemoteStore received new credentials");const s=Fo(t);t.Ea.add(3),await ql(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await uf(t)}async function kN(n,e){const t=Re(n);e?(t.Ea.delete(2),await uf(t)):e||(t.Ea.add(2),await ql(t),t.Ra.set("Unknown"))}function ia(n){return n.ma||(n.ma=(function(t,s,r){const l=Re(t);return l.sa(),new EN(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:wN.bind(null,n),t_:NN.bind(null,n),r_:MN.bind(null,n),H_:xN.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Vm(n)?bm(n):n.Ra.set("Unknown")):(await n.ma.stop(),V0(n))}))),n.ma}function Ws(n){return n.fa||(n.fa=(function(t,s,r){const l=Re(t);return l.sa(),new SN(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:VN.bind(null,n),r_:LN.bind(null,n),ta:PN.bind(null,n),na:UN.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await cf(n)):(await n.fa.stop(),n.Ta.length>0&&(me(Go,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,t,s,r,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=r,this.removalCallback=l,this.deferred=new es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,r,l){const c=Date.now()+s,m=new Pm(e,t,c,r,l);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Um(n,e){if(is("AsyncQueue",`${e}: ${n}`),na(n))return new he(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{static emptySet(e){return new Gr(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ve.comparator(t.key,s.key):(t,s)=>ve.comparator(t.key,s.key),this.keyedMap=gl(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Gr)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=s.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Gr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(){this.ga=new ht(ve.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Zr{constructor(e,t,s,r,l,c,m,y,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,r,l){const c=[];return t.forEach((m=>{c.push({type:0,doc:m})})),new Zr(e,t,Gr.emptySet(t),c,s,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==s[r].type||!t[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class ON{constructor(){this.queries=VT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const r=Re(t),l=r.queries;r.queries=VT(),l.forEach(((c,m)=>{for(const y of m.Sa)y.onError(s)}))})(this,new he(ne.ABORTED,"Firestore shutting down"))}}function VT(){return new Bo((n=>n0(n)),nf)}async function k0(n,e){const t=Re(n);let s=3;const r=e.query;let l=t.queries.get(r);l?!l.ba()&&e.Da()&&(s=2):(l=new qN,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(r,!0);break;case 1:l.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(c){const m=Um(c,`Initialization of query '${Ur(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Lm(t)}async function q0(n,e){const t=Re(n),s=e.query;let r=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?r=e.Da()?0:1:!l.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function GN(n,e){const t=Re(n);let s=!1;for(const r of e){const l=r.query,c=t.queries.get(l);if(c){for(const m of c.Sa)m.Fa(r)&&(s=!0);c.wa=r}}s&&Lm(t)}function BN(n,e,t){const s=Re(n),r=s.queries.get(e);if(r)for(const l of r.Sa)l.onError(t);s.queries.delete(e)}function Lm(n){n.Ca.forEach((e=>{e.next()}))}var Zh,PT;(PT=Zh||(Zh={})).Ma="default",PT.Cache="cache";class O0{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Zr(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Zr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Zh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e){this.key=e}}class B0{constructor(e){this.key=e}}class FN{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Oe(),this.mutatedKeys=Oe(),this.eu=i0(e),this.tu=new Gr(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new bT,r=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=r,m=!1;const y=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((T,E)=>{const S=r.get(T),w=sf(this.query,E)?E:null,G=!!S&&this.mutatedKeys.has(S.key),B=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let J=!1;S&&w?S.data.isEqual(w.data)?G!==B&&(s.track({type:3,doc:w}),J=!0):this.su(S,w)||(s.track({type:2,doc:w}),J=!0,(y&&this.eu(w,y)>0||p&&this.eu(w,p)<0)&&(m=!0)):!S&&w?(s.track({type:0,doc:w}),J=!0):S&&!w&&(s.track({type:1,doc:S}),J=!0,(y||p)&&(m=!0)),J&&(w?(c=c.add(w),l=B?l.add(T):l.delete(T)):(c=c.delete(T),l=l.delete(T)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const T=this.query.limitType==="F"?c.last():c.first();c=c.delete(T.key),l=l.delete(T.key),s.track({type:1,doc:T})}return{tu:c,iu:s,Cs:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,r){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((T,E)=>(function(w,G){const B=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:J})}};return B(w)-B(G)})(T.type,E.type)||this.eu(T.doc,E.doc))),this.ou(s),r=r??!1;const m=t&&!r?this._u():[],y=this.Xa.size===0&&this.current&&!r?1:0,p=y!==this.Za;return this.Za=y,c.length!==0||p?{snapshot:new Zr(this.query,e.tu,l,c,e.mutatedKeys,y===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new bT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Oe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new B0(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new G0(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Oe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Zr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const km="SyncEngine";class HN{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class zN{constructor(e){this.key=e,this.hu=!1}}class YN{constructor(e,t,s,r,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Bo((m=>n0(m)),nf),this.Iu=new Map,this.Eu=new Set,this.du=new ht(ve.comparator),this.Au=new Map,this.Ru=new Rm,this.Vu={},this.mu=new Map,this.fu=$r.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function JN(n,e,t=!0){const s=K0(n);let r;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.lu()):r=await F0(s,e,t,!0),r}async function KN(n,e){const t=K0(n);await F0(t,e,!0,!1)}async function F0(n,e,t,s){const r=await hN(n.localStore,Ni(e)),l=r.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let m;return s&&(m=await QN(n,e,l,c==="current",r.resumeToken)),n.isPrimaryClient&&t&&D0(n.remoteStore,r),m}async function QN(n,e,t,s,r){n.pu=(E,S,w)=>(async function(B,J,j,se){let ee=J.view.ru(j);ee.Cs&&(ee=await RT(B.localStore,J.query,!1).then((({documents:D})=>J.view.ru(D,ee))));const le=se&&se.targetChanges.get(J.targetId),fe=se&&se.targetMismatches.get(J.targetId)!=null,ue=J.view.applyChanges(ee,B.isPrimaryClient,le,fe);return LT(B,J.targetId,ue.au),ue.snapshot})(n,E,S,w);const l=await RT(n.localStore,e,!0),c=new FN(e,l.Qs),m=c.ru(l.documents),y=kl.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",r),p=c.applyChanges(m,n.isPrimaryClient,y);LT(n,t,p.au);const T=new HN(e,t,c);return n.Tu.set(e,T),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function XN(n,e,t){const s=Re(n),r=s.Tu.get(e),l=s.Iu.get(r.targetId);if(l.length>1)return s.Iu.set(r.targetId,l.filter((c=>!nf(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Xh(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),t&&xm(s.remoteStore,r.targetId),Wh(s,r.targetId)})).catch(ta)):(Wh(s,r.targetId),await Xh(s.localStore,r.targetId,!0))}async function $N(n,e){const t=Re(n),s=t.Tu.get(e),r=t.Iu.get(s.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),xm(t.remoteStore,s.targetId))}async function ZN(n,e,t){const s=s1(n);try{const r=await(function(c,m){const y=Re(c),p=ct.now(),T=m.reduce(((w,G)=>w.add(G.key)),Oe());let E,S;return y.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let G=os(),B=Oe();return y.Ns.getEntries(w,T).next((J=>{G=J,G.forEach(((j,se)=>{se.isValidDocument()||(B=B.add(j))}))})).next((()=>y.localDocuments.getOverlayedDocuments(w,G))).next((J=>{E=J;const j=[];for(const se of m){const ee=dw(se,E.get(se.key).overlayedDocument);ee!=null&&j.push(new to(se.key,ee,QE(ee.value.mapValue),Mi.exists(!0)))}return y.mutationQueue.addMutationBatch(w,p,j,m)})).next((J=>{S=J;const j=J.applyToLocalDocumentSet(E,B);return y.documentOverlayCache.saveOverlays(w,J.batchId,j)}))})).then((()=>({batchId:S.batchId,changes:o0(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(c,m,y){let p=c.Vu[c.currentUser.toKey()];p||(p=new ht(qe)),p=p.insert(m,y),c.Vu[c.currentUser.toKey()]=p})(s,r.batchId,t),await Ol(s,r.changes),await cf(s.remoteStore)}catch(r){const l=Um(r,"Failed to persist write");t.reject(l)}}async function H0(n,e){const t=Re(n);try{const s=await cN(t.localStore,e);e.targetChanges.forEach(((r,l)=>{const c=t.Au.get(l);c&&($e(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.hu=!0:r.modifiedDocuments.size>0?$e(c.hu,14607):r.removedDocuments.size>0&&($e(c.hu,42227),c.hu=!1))})),await Ol(t,s,e)}catch(s){await ta(s)}}function UT(n,e,t){const s=Re(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const r=[];s.Tu.forEach(((l,c)=>{const m=c.view.va(e);m.snapshot&&r.push(m.snapshot)})),(function(c,m){const y=Re(c);y.onlineState=m;let p=!1;y.queries.forEach(((T,E)=>{for(const S of E.Sa)S.va(m)&&(p=!0)})),p&&Lm(y)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function WN(n,e,t){const s=Re(n);s.sharedClientState.updateQueryState(e,"rejected",t);const r=s.Au.get(e),l=r&&r.key;if(l){let c=new ht(ve.comparator);c=c.insert(l,en.newNoDocument(l,Ce.min()));const m=Oe().add(l),y=new af(Ce.min(),new Map,new ht(qe),c,m);await H0(s,y),s.du=s.du.remove(l),s.Au.delete(e),qm(s)}else await Xh(s.localStore,e,!1).then((()=>Wh(s,e,t))).catch(ta)}async function jN(n,e){const t=Re(n),s=e.batch.batchId;try{const r=await uN(t.localStore,e);Y0(t,s,null),z0(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ol(t,r)}catch(r){await ta(r)}}async function e1(n,e,t){const s=Re(n);try{const r=await(function(c,m){const y=Re(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let T;return y.mutationQueue.lookupMutationBatch(p,m).next((E=>($e(E!==null,37113),T=E.keys(),y.mutationQueue.removeMutationBatch(p,E)))).next((()=>y.mutationQueue.performConsistencyCheck(p))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(p,T,m))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,T))).next((()=>y.localDocuments.getDocuments(p,T)))}))})(s.localStore,e);Y0(s,e,t),z0(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ol(s,r)}catch(r){await ta(r)}}function z0(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Y0(n,e,t){const s=Re(n);let r=s.Vu[s.currentUser.toKey()];if(r){const l=r.get(e);l&&(t?l.reject(t):l.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Wh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||J0(n,s)}))}function J0(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(xm(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),qm(n))}function LT(n,e,t){for(const s of t)s instanceof G0?(n.Ru.addReference(s.key,e),t1(n,s)):s instanceof B0?(me(km,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||J0(n,s.key)):Ae(19791,{wu:s})}function t1(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(me(km,"New document in limbo: "+t),n.Eu.add(s),qm(n))}function qm(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ve(rt.fromString(e)),s=n.fu.next();n.Au.set(s,new zN(t)),n.du=n.du.insert(t,s),D0(n.remoteStore,new Fs(Ni(Em(t.path)),s,"TargetPurposeLimboResolution",jc.ce))}}async function Ol(n,e,t){const s=Re(n),r=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,y)=>{c.push(s.pu(y,e,t).then((p=>{var T;if((p||t)&&s.isPrimaryClient){const E=p?!p.fromCache:(T=t==null?void 0:t.targetChanges.get(y.targetId))==null?void 0:T.current;s.sharedClientState.updateQueryState(y.targetId,E?"current":"not-current")}if(p){r.push(p);const E=Nm.As(y.targetId,p);l.push(E)}})))})),await Promise.all(c),s.Pu.H_(r),await(async function(y,p){const T=Re(y);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ie.forEach(p,(S=>ie.forEach(S.Es,(w=>T.persistence.referenceDelegate.addReference(E,S.targetId,w))).next((()=>ie.forEach(S.ds,(w=>T.persistence.referenceDelegate.removeReference(E,S.targetId,w)))))))))}catch(E){if(!na(E))throw E;me(Mm,"Failed to update sequence numbers: "+E)}for(const E of p){const S=E.targetId;if(!E.fromCache){const w=T.Ms.get(S),G=w.snapshotVersion,B=w.withLastLimboFreeSnapshotVersion(G);T.Ms=T.Ms.insert(S,B)}}})(s.localStore,l))}async function n1(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){me(km,"User change. New user:",e.toKey());const s=await w0(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((m=>{m.forEach((y=>{y.reject(new he(ne.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ol(t,s.Ls)}}function i1(n,e){const t=Re(n),s=t.Au.get(e);if(s&&s.hu)return Oe().add(s.key);{let r=Oe();const l=t.Iu.get(e);if(!l)return r;for(const c of l){const m=t.Tu.get(c);r=r.unionWith(m.view.nu)}return r}}function K0(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=H0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=i1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WN.bind(null,e),e.Pu.H_=GN.bind(null,e.eventManager),e.Pu.yu=BN.bind(null,e.eventManager),e}function s1(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=e1.bind(null,e),e}class Jc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return lN(this.persistence,new oN,e.initialUser,this.serializer)}Cu(e){return new R0(wm.mi,this.serializer)}Du(e){return new pN}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jc.provider={build:()=>new Jc};class o1 extends Jc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){$e(this.persistence.referenceDelegate instanceof zc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new zw(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new R0((s=>zc.mi(s,t)),this.serializer)}}class jh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>UT(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=n1.bind(null,this.syncEngine),await kN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ON})()}createDatastore(e){const t=lf(e.databaseInfo.databaseId),s=(function(l){return new vN(l)})(e.databaseInfo);return(function(l,c,m,y){return new CN(l,c,m,y)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,r,l,c,m){return new RN(s,r,l,c,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>UT(this.syncEngine,t,0)),(function(){return MT.v()?new MT:new gN})())}createSyncEngine(e,t){return(function(r,l,c,m,y,p,T){const E=new YN(r,l,c,m,y,p);return T&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const l=Re(r);me(Go,"RemoteStore shutting down."),l.Ea.add(5),await ql(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}jh.provider={build:()=>new jh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):is("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="FirestoreClient";class r1{constructor(e,t,s,r,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=r,this.user=jt.UNAUTHENTICATED,this.clientId=pm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{me(js,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(me(js,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Um(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Dh(n,e){n.asyncQueue.verifyOperationInProgress(),me(js,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async r=>{s.isEqual(r)||(await w0(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function kT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await a1(n);me(js,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>DT(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,r)=>DT(e.remoteStore,r))),n._onlineComponents=e}async function a1(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me(js,"Using user provided OfflineComponentProvider");try{await Dh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ne.FAILED_PRECONDITION||r.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Jr("Error using user provided cache. Falling back to memory cache: "+t),await Dh(n,new Jc)}}else me(js,"Using default OfflineComponentProvider"),await Dh(n,new o1(void 0));return n._offlineComponents}async function X0(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me(js,"Using user provided OnlineComponentProvider"),await kT(n,n._uninitializedComponentsProvider._online)):(me(js,"Using default OnlineComponentProvider"),await kT(n,new jh))),n._onlineComponents}function l1(n){return X0(n).then((e=>e.syncEngine))}async function $0(n){const e=await X0(n),t=e.eventManager;return t.onListen=JN.bind(null,e.syncEngine),t.onUnlisten=XN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=KN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$N.bind(null,e.syncEngine),t}function u1(n,e,t={}){const s=new es;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,m,y,p){const T=new Q0({next:S=>{T.Nu(),c.enqueueAndForget((()=>q0(l,E)));const w=S.docs.has(m);!w&&S.fromCache?p.reject(new he(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&S.fromCache&&y&&y.source==="server"?p.reject(new he(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),E=new O0(Em(m.path),T,{includeMetadataChanges:!0,qa:!0});return k0(l,E)})(await $0(n),n.asyncQueue,e,t,s))),s.promise}function c1(n,e,t={}){const s=new es;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,m,y,p){const T=new Q0({next:S=>{T.Nu(),c.enqueueAndForget((()=>q0(l,E))),S.fromCache&&y.source==="server"?p.reject(new he(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),E=new O0(m,T,{includeMetadataChanges:!0,qa:!0});return k0(l,E)})(await $0(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="firestore.googleapis.com",OT=!0;class GT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=W0,this.ssl=OT}else this.host=e.host,this.ssl=e.ssl??OT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=I0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Fw)throw new he(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Z0(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ff{constructor(e,t,s,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new gR;switch(s.type){case"firstParty":return new vR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=qT.get(t);s&&(me("ComponentProvider","Removing Datastore"),qT.delete(t),s.terminate())})(this),Promise.resolve()}}function f1(n,e,t,s={}){var p;n=ss(n,ff);const r=dm(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},m=`${e}:${t}`;r&&(YC(`https://${m}`),XC("Firestore",!0)),l.host!==W0&&l.host!==m&&Jr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...l,host:m,ssl:r,emulatorOptions:s};if(!Vc(y,c)&&(n._setSettings(y),s.mockUserToken)){let T,E;if(typeof s.mockUserToken=="string")T=s.mockUserToken,E=jt.MOCK_USER;else{T=JC(s.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new he(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new jt(S)}n._authCredentials=new yR(new LE(T,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new sa(this.firestore,e,this._query)}}class St{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ks(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new St(this.firestore,e,this._key)}toJSON(){return{type:St._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Pl(t,St._jsonSchema))return new St(e,s||null,new ve(rt.fromString(t.referencePath)))}}St._jsonSchemaVersion="firestore/documentReference/1.0",St._jsonSchema={type:Pt("string",St._jsonSchemaVersion),referencePath:Pt("string")};class Ks extends sa{constructor(e,t,s){super(e,t,Em(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new ve(e))}withConverter(e){return new Ks(this.firestore,e,this._path)}}function Om(n,e,...t){if(n=ts(n),kE("collection","path",e),n instanceof ff){const s=rt.fromString(e,...t);return j_(s),new Ks(n,null,s)}{if(!(n instanceof St||n instanceof Ks))throw new he(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(rt.fromString(e,...t));return j_(s),new Ks(n.firestore,null,s)}}function zn(n,e,...t){if(n=ts(n),arguments.length===1&&(e=pm.newId()),kE("doc","path",e),n instanceof ff){const s=rt.fromString(e,...t);return W_(s),new St(n,null,new ve(s))}{if(!(n instanceof St||n instanceof Ks))throw new he(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(rt.fromString(e,...t));return W_(s),new St(n.firestore,n instanceof Ks?n.converter:null,new ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="AsyncQueue";class FT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new M0(this,"async_queue_retry"),this._c=()=>{const s=xh();s&&me(BT,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=xh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=xh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new es;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!na(e))throw e;me(BT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,is("INTERNAL UNHANDLED ERROR: ",HT(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Pm.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(r),r}uc(){this.nc&&Ae(47125,{Pc:HT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function HT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Gl extends ff{constructor(e,t,s,r){super(e,t,s,r),this.type="firestore",this._queue=new FT,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new FT(e),this._firestoreClient=void 0,await e}}}function d1(n,e){const t=typeof n=="object"?n:oR(),s=typeof n=="string"?n:kc,r=eR(t,"firestore").getImmediate({identifier:s});if(!r._initialized){const l=HC("firestore");l&&f1(r,...l)}return r}function Gm(n){if(n._terminated)throw new he(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||h1(n),n._firestoreClient}function h1(n){var s,r,l;const e=n._freezeSettings(),t=(function(m,y,p,T){return new kR(m,y,p,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,Z0(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new r1(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bn($t.fromBase64String(e))}catch(t){throw new he(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Bn($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Pl(e,Bn._jsonSchema))return Bn.fromBase64String(e.bytes)}}Bn._jsonSchemaVersion="firestore/bytes/1.0",Bn._jsonSchema={type:Pt("string",Bn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Di._jsonSchemaVersion}}static fromJSON(e){if(Pl(e,Di._jsonSchema))return new Di(e.latitude,e.longitude)}}Di._jsonSchemaVersion="firestore/geoPoint/1.0",Di._jsonSchema={type:Pt("string",Di._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==r[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:bi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Pl(e,bi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new bi(e.vectorValues);throw new he(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bi._jsonSchemaVersion="firestore/vectorValue/1.0",bi._jsonSchema={type:Pt("string",bi._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1=/^__.*__$/;class p1{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new to(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ll(e,this.data,t,this.fieldTransforms)}}class j0{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new to(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function eS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:n})}}class Fm{constructor(e,t,s,r,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=r,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Fm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Kc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(eS(this.Ac)&&m1.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class g1{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||lf(e)}Cc(e,t,s,r=!1){return new Fm({Ac:e,methodName:t,Dc:s,path:Xt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hm(n){const e=n._freezeSettings(),t=lf(n._databaseId);return new g1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function y1(n,e,t,s,r,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,r);zm("Data must be an object, but it was:",c,s);const m=tS(s,c);let y,p;if(l.merge)y=new Rn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const T=[];for(const E of l.mergeFields){const S=em(e,E,t);if(!c.contains(S))throw new he(ne.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);iS(T,S)||T.push(S)}y=new Rn(T),p=c.fieldTransforms.filter((E=>y.covers(E.field)))}else y=null,p=c.fieldTransforms;return new p1(new gn(m),y,p)}class hf extends Bm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hf}}function _1(n,e,t,s){const r=n.Cc(1,e,t);zm("Data must be an object, but it was:",r,s);const l=[],c=gn.empty();eo(s,((y,p)=>{const T=Ym(e,y,t);p=ts(p);const E=r.yc(T);if(p instanceof hf)l.push(T);else{const S=Bl(p,E);S!=null&&(l.push(T),c.set(T,S))}}));const m=new Rn(l);return new j0(c,m,r.fieldTransforms)}function T1(n,e,t,s,r,l){const c=n.Cc(1,e,t),m=[em(e,s,t)],y=[r];if(l.length%2!=0)throw new he(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)m.push(em(e,l[S])),y.push(l[S+1]);const p=[],T=gn.empty();for(let S=m.length-1;S>=0;--S)if(!iS(p,m[S])){const w=m[S];let G=y[S];G=ts(G);const B=c.yc(w);if(G instanceof hf)p.push(w);else{const J=Bl(G,B);J!=null&&(p.push(w),T.set(w,J))}}const E=new Rn(p);return new j0(T,E,c.fieldTransforms)}function v1(n,e,t,s=!1){return Bl(t,n.Cc(s?4:3,e))}function Bl(n,e){if(nS(n=ts(n)))return zm("Unsupported field value:",e,n),tS(n,e);if(n instanceof Bm)return(function(s,r){if(!eS(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const l=[];let c=0;for(const m of s){let y=Bl(m,r.wc(c));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,r){if((s=ts(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return rw(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=ct.fromDate(s);return{timestampValue:Hc(r.serializer,l)}}if(s instanceof ct){const l=new ct(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Hc(r.serializer,l)}}if(s instanceof Di)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Bn)return{bytesValue:_0(r.serializer,s._byteString)};if(s instanceof St){const l=r.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw r.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Im(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof bi)return(function(c,m){return{mapValue:{fields:{[JE]:{stringValue:KE},[qc]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return Sm(m.serializer,p)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${Wc(s)}`)})(n,e)}function tS(n,e){const t={};return GE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):eo(n,((s,r)=>{const l=Bl(r,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function nS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ct||n instanceof Di||n instanceof Bn||n instanceof St||n instanceof Bm||n instanceof bi)}function zm(n,e,t){if(!nS(t)||!qE(t)){const s=Wc(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function em(n,e,t){if((e=ts(e))instanceof df)return e._internalPath;if(typeof e=="string")return Ym(n,e);throw Kc("Field path arguments must be of type string or ",n,!1,void 0,t)}const E1=new RegExp("[~\\*/\\[\\]]");function Ym(n,e,t){if(e.search(E1)>=0)throw Kc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new df(...e.split("."))._internalPath}catch{throw Kc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Kc(n,e,t,s,r){const l=s&&!s.isEmpty(),c=r!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(l||c)&&(y+=" (found",l&&(y+=` in field ${s}`),c&&(y+=` in document ${r}`),y+=")"),new he(ne.INVALID_ARGUMENT,m+n+y)}function iS(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,t,s,r,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new S1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Jm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class S1 extends sS{data(){return super.data()}}function Jm(n,e){return typeof e=="string"?Ym(n,e):e instanceof df?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Km{}class C1 extends Km{}function oS(n,e,...t){let s=[];e instanceof Km&&s.push(e),s=s.concat(t),(function(l){const c=l.filter((y=>y instanceof Qm)).length,m=l.filter((y=>y instanceof mf)).length;if(c>1||c>0&&m>0)throw new he(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const r of s)n=r._apply(n);return n}class mf extends C1{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new mf(e,t,s)}_apply(e){const t=this._parse(e);return aS(e._query,t),new sa(e.firestore,e.converter,Hh(e._query,t))}_parse(e){const t=Hm(e.firestore);return(function(l,c,m,y,p,T,E){let S;if(p.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new he(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){YT(E,T);const G=[];for(const B of E)G.push(zT(y,l,B));S={arrayValue:{values:G}}}else S=zT(y,l,E)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||YT(E,T),S=v1(m,c,E,T==="in"||T==="not-in");return Vt.create(p,T,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function rS(n,e,t){const s=e,r=Jm("where",n);return mf._create(r,s,t)}class Qm extends Km{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Qm(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:ii.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,l){let c=r;const m=l.getFlattenedFilters();for(const y of m)aS(c,y),c=Hh(c,y)})(e._query,t),new sa(e.firestore,e.converter,Hh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function zT(n,e,t){if(typeof(t=ts(t))=="string"){if(t==="")throw new he(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!t0(e)&&t.indexOf("/")!==-1)throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(rt.fromString(t));if(!ve.isDocumentKey(s))throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return aT(n,new ve(s))}if(t instanceof St)return aT(n,t._key);throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wc(t)}.`)}function YT(n,e){if(!Array.isArray(n)||n.length===0)throw new he(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aS(n,e){const t=(function(r,l){for(const c of r)for(const m of c.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class I1{convertValue(e,t="none"){switch(Zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($s(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return eo(e,((r,l)=>{s[r]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,r,l;const t=(l=(r=(s=e.fields)==null?void 0:s[qc].arrayValue)==null?void 0:r.values)==null?void 0:l.map((c=>Et(c.doubleValue)));return new bi(t)}convertGeoPoint(e){return new Di(Et(e.latitude),Et(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=tf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Nl(e));default:return null}}convertTimestamp(e){const t=Xs(e);return new ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=rt.fromString(e);$e(C0(s),9688,{name:e});const r=new Ml(s.get(1),s.get(3)),l=new ve(s.popFirst(5));return r.isEqual(t)||is(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class _l{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qo extends sS{constructor(e,t,s,r,l,c){super(e,t,s,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Jm("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=qo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}qo._jsonSchemaVersion="firestore/documentSnapshot/1.0",qo._jsonSchema={type:Pt("string",qo._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class Mc extends qo{data(e={}){return super.data(e)}}class Br{constructor(e,t,s,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new _l(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Mc(this._firestore,this._userDataWriter,s.key,s,new _l(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((m=>{const y=new Mc(r._firestore,r._userDataWriter,m.doc.key,m.doc,new _l(r._snapshot.mutatedKeys.has(m.doc.key),r._snapshot.fromCache),r.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const y=new Mc(r._firestore,r._userDataWriter,m.doc.key,m.doc,new _l(r._snapshot.mutatedKeys.has(m.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,T=-1;return m.type!==0&&(p=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),T=c.indexOf(m.doc.key)),{type:w1(m.type),doc:y,oldIndex:p,newIndex:T}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Br._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],r=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),r.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function w1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(n){n=ss(n,St);const e=ss(n.firestore,Gl);return u1(Gm(e),n._key).then((t=>N1(e,n,t)))}Br._jsonSchemaVersion="firestore/querySnapshot/1.0",Br._jsonSchema={type:Pt("string",Br._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class lS extends I1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,t)}}function Xm(n){n=ss(n,sa);const e=ss(n.firestore,Gl),t=Gm(e),s=new lS(e);return A1(n._query),c1(t,n._query).then((r=>new Br(e,s,n,r)))}function $m(n,e,t){n=ss(n,St);const s=ss(n.firestore,Gl),r=R1(n.converter,e,t);return uS(s,[y1(Hm(s),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Mi.none())])}function io(n,e,t,...s){n=ss(n,St);const r=ss(n.firestore,Gl),l=Hm(r);let c;return c=typeof(e=ts(e))=="string"||e instanceof df?T1(l,"updateDoc",n._key,e,t,s):_1(l,"updateDoc",n._key,e),uS(r,[c.toMutation(n._key,Mi.exists(!0))])}function uS(n,e){return(function(s,r){const l=new es;return s.asyncQueue.enqueueAndForget((async()=>ZN(await l1(s),r,l))),l.promise})(Gm(n),e)}function N1(n,e,t){const s=t.docs.get(e._key),r=new lS(n);return new qo(n,r,e._key,s,new _l(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){ea=r})(sR),Uc(new Il("firestore",((s,{instanceIdentifier:r,options:l})=>{const c=s.getProvider("app").getImmediate(),m=new Gl(new _R(s.getProvider("auth-internal")),new ER(c,s.getProvider("app-check-internal")),(function(p,T){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new he(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ml(p.options.projectId,T)})(c,r),c);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),Or(Q_,X_,e),Or(Q_,X_,"esm2020")})();var M1="firebase",x1="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Or(M1,x1,"app");const D1={apiKey:"AIzaSyAu7UMwYdwMWs12NoEn0ICvrNDVAu2wrug",authDomain:"fazarah-5182e.firebaseapp.com",projectId:"fazarah-5182e",storageBucket:"fazarah-5182e.firebasestorage.app",messagingSenderId:"437928741348",appId:"1:437928741348:web:d25a4ee91b8a5af020dff1",measurementId:"G-9K313Y6QXY"},b1=RE(D1),an=d1(b1),Vl="fazara_current_user_id",Ac="Faioumy9954",wn="users",cS="config",fS="admin_settings",Fl=(n,e)=>(console.error(`Error in ${e}:`,n),n.code==="not-found"||n.message&&n.message.includes("database")?":    .     Firestore Database  Firebase Console.":n.code==="unavailable"||n.message&&n.message.includes("offline")?"     .":"   .   ."),V1=async(n,e,t)=>{try{const s=Om(an,wn),r=oS(s,rS("phoneNumber","==",e));if(!(await Xm(r)).empty)return{success:!1,message:"   "};const c=Date.now().toString(),m={id:c,fullName:n,phoneNumber:e,password:t,streak:0,lastCheckIn:null,history:[],attendanceLog:[],claimedReward:!1,messages:[]};return await $m(zn(an,wn,c),m),localStorage.setItem(Vl,m.id),{success:!0,message:"  ",user:m}}catch(s){return{success:!1,message:Fl(s,"registerUser")}}},P1=async(n,e)=>{try{const t=Om(an,wn),s=oS(t,rS("phoneNumber","==",n)),r=await Xm(s);if(r.empty)return{success:!1,message:"   "};const c=r.docs[0].data();if(c.password!==e)return{success:!1,message:"   "};const m=await dS(c);return localStorage.setItem(Vl,m.id),{success:!0,message:"  ",user:m}}catch(t){return{success:!1,message:Fl(t,"loginUser")}}},U1=async()=>{const n=localStorage.getItem(Vl);if(!n)return null;try{const e=zn(an,wn,n),t=await no(e);if(t.exists()){const s=t.data();return await dS(s)}else return localStorage.removeItem(Vl),null}catch(e){return Fl(e,"getCurrentUser"),null}},L1=()=>{localStorage.removeItem(Vl)},k1=async(n,e)=>{try{const t=zn(an,wn,n);return await io(t,{password:e}),!0}catch(t){return console.error("Error changing password:",t),!1}},q1=async n=>{try{const e=zn(an,cS,fS),t=await no(e);let s=Ac;if(t.exists()){const r=t.data();s=(r==null?void 0:r.password)||Ac}else try{await $m(e,{password:Ac})}catch{console.warn("Could not create admin config, using default")}return s===n}catch(e){return console.error("Error checking admin pass:",e),n===Ac}},O1=async n=>{try{const e=zn(an,cS,fS);await $m(e,{password:n},{merge:!0})}catch(e){console.error("Error changing admin password:",e),alert(Fl(e,"changeAdminPassword"))}},G1=async n=>{try{const e=zn(an,wn,n);await io(e,{claimedReward:!0});const t=await no(e);return t.exists()?t.data():null}catch(e){return console.error("Error claiming reward:",e),null}},B1=async(n,e)=>{try{const t=zn(an,wn,n),s=await no(t);if(s.exists()){const r=s.data(),l={id:Date.now().toString(),date:Fn().toISOString(),content:`   :   .
: ${e}`},c={streak:0,lastCheckIn:null,history:[],claimedReward:!1,messages:[l,...r.messages||[]]};await io(t,c)}return await Wr()}catch(t){return console.error("Error resetting streak:",t),await Wr()}},F1=async(n,e)=>{try{const t=zn(an,wn,n),s=await no(t);if(s.exists()){const r=s.data(),l={id:Date.now().toString(),date:Fn().toISOString(),content:e},c=[...r.messages||[],l];return await io(t,{messages:c}),{...r,messages:c}}return null}catch(t){return console.error("Error sending message:",t),null}},H1=async(n,e)=>{try{const t=zn(an,wn,n),s=await no(t);if(s.exists()){const l=(s.data().messages||[]).filter(c=>c.id!==e);await io(t,{messages:l})}return await Wr()}catch(t){return console.error("Error deleting message:",t),await Wr()}},Wr=async()=>{try{const n=Om(an,wn),e=await Xm(n),t=[];return e.forEach(s=>{t.push(s.data())}),t}catch(n){return Fl(n,"getAllUsersForAdmin"),[]}},dS=async n=>{if(!n.lastCheckIn)return n;const e=Fn(),t=new Date(n.lastCheckIn);if(Yr(e,t)||_E(e,t))return n;const s=new Date(e);s.setDate(s.getDate()-1),s.setHours(0,0,0,0);const r=new Date(t);if(r.setHours(0,0,0,0),r<s&&n.streak!==0)try{const l=zn(an,wn,n.id);await io(l,{streak:0}),n.streak=0}catch(l){console.error("Error auto-updating streak:",l)}return n},z1=async n=>{try{const e=zn(an,wn,n),t=await no(e);if(!t.exists())throw new Error("User not found");let s=t.data();const r=Fn(),l=s.attendanceLog||[],c=l[l.length-1];let m=s.streak??0,y=!1;if(!c)m=1;else{const E=new Date(c.date);if(Yr(E,r))return{newStreak:m,resetDueToMiss:!1};_E(E,r)?m=m+1:(m=1,y=!0)}const p={date:r.toISOString(),mosque:"",imam:""},T=[...l,p];return await io(e,{attendanceLog:T,streak:m,lastCheckIn:r.toISOString(),history:[...s.history||[],r.toISOString()]}),{newStreak:m,resetDueToMiss:y}}catch(e){throw console.error("Error in markFajrAttendance:",e),e}},Y1=async(n,e)=>{try{const t=zn(an,wn,n),s=await no(t);if(s.exists()){const r=s.data(),c=[{id:Date.now().toString(),date:Fn().toISOString(),content:`   :
${e}`},...r.messages||[]];await io(t,{messages:c})}return await Wr()}catch(t){throw console.error("Error sending reply:",t),t}},J1=({onLoginSuccess:n,onAdminClick:e})=>{const[t,s]=be.useState(!1),[r,l]=be.useState(!1),[c,m]=be.useState(""),[y,p]=be.useState(""),[T,E]=be.useState(""),[S,w]=be.useState(""),[G,B]=be.useState(""),J=async j=>{if(j.preventDefault(),B(""),l(!0),t){if(c.trim().split(" ").length<4){B("   "),l(!1);return}if(T!==S){B("   "),l(!1);return}if(y.length<10){B("    "),l(!1);return}const se=await V1(c,y,T);se.success&&se.user?n(se.user):B(se.message)}else{const se=await P1(y,T);se.success&&se.user?n(se.user):B(se.message)}l(!1)};return b.jsx("div",{className:"max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden md:max-w-lg mt-4",children:b.jsx("div",{className:"md:flex",children:b.jsxs("div",{className:"w-full p-8",children:[b.jsx("div",{className:"uppercase tracking-wide text-sm text-islamic-accent font-semibold mb-1",children:t?"  ":" "}),b.jsx("h2",{className:"block mt-1 text-lg leading-tight font-medium text-black",children:"      "}),b.jsxs("form",{onSubmit:J,className:"mt-6 grid grid-cols-1 gap-y-4",children:[t&&b.jsxs("div",{children:[b.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-sm",children:" "}),b.jsx("input",{type:"text",value:c,onChange:j=>m(j.target.value),className:"w-full border border-gray-300 px-3 py-2 rounded-lg shadow-sm focus:outline-none focus:border-islamic-accent focus:ring-1 focus:ring-islamic-accent",placeholder:"    ",required:t})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-sm",children:" "}),b.jsx("input",{type:"tel",value:y,onChange:j=>p(j.target.value),className:"w-full border border-gray-300 px-3 py-2 rounded-lg shadow-sm focus:outline-none focus:border-islamic-accent focus:ring-1 focus:ring-islamic-accent",placeholder:"01xxxxxxxxx",required:!0})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-sm",children:" "}),b.jsx("input",{type:"password",value:T,onChange:j=>E(j.target.value),className:"w-full border border-gray-300 px-3 py-2 rounded-lg shadow-sm focus:outline-none focus:border-islamic-accent focus:ring-1 focus:ring-islamic-accent",required:!0})]}),t&&b.jsxs("div",{children:[b.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-sm",children:"  "}),b.jsx("input",{type:"password",value:S,onChange:j=>w(j.target.value),className:"w-full border border-gray-300 px-3 py-2 rounded-lg shadow-sm focus:outline-none focus:border-islamic-accent focus:ring-1 focus:ring-islamic-accent",required:t})]}),G&&b.jsx("p",{className:"text-red-500 text-sm mt-2",children:G}),b.jsx("button",{type:"submit",disabled:r,className:`bg-islamic-dark text-white font-bold py-3 px-4 rounded-lg transition duration-300 shadow-lg mt-2 ${r?"opacity-50 cursor-not-allowed":"hover:bg-teal-900"}`,children:r?" ...":t?" ":""})]}),b.jsx("div",{className:"mt-6 text-center border-t pt-4",children:b.jsx("button",{onClick:()=>{s(!t),B("")},className:"text-islamic-dark hover:underline text-sm font-semibold",children:t?"    ":"    "})}),b.jsx("div",{className:"mt-8 text-center",children:b.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-xs",children:" "})})]})})})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let K1,Q1;function X1(){return{geminiUrl:K1,vertexUrl:Q1}}function $1(n,e,t,s){var r,l;if(!(n!=null&&n.baseUrl)){const c=X1();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:t:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class as{}function de(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function d(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const m=c.slice(0,-2);if(!(m in n))if(Array.isArray(t))n[m]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[m])){const y=n[m];if(Array.isArray(t))for(let p=0;p<y.length;p++){const T=y[p];d(T,e.slice(l+1),t[p])}else for(const p of y)d(p,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const m=c.slice(0,-3);m in n||(n[m]=[{}]);const y=n[m];d(y[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],r=n[s];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const r=e[s];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(m=>f(m,e.slice(s+1),t)):t}else return t}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function Z1(n,e){for(const[t,s]of Object.entries(e)){const r=t.split("."),l=s.split("."),c=new Set;let m=-1;for(let y=0;y<r.length;y++)if(r[y]==="*"){m=y;break}if(m!==-1&&l.length>m)for(let y=m;y<l.length;y++){const p=l[y];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&c.add(p)}tm(n,r,l,0,c)}}function tm(n,e,t,s,r){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const c=l.slice(0,-2),m=n;if(c in m&&Array.isArray(m[c]))for(const y of m[c])tm(y,e,t,s+1,r)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,m=Object.keys(c).filter(p=>!p.startsWith("_")&&!r.has(p)),y={};for(const p of m)y[p]=c[p];for(const[p,T]of Object.entries(y)){const E=[];for(const S of t.slice(s))S==="*"?E.push(p):E.push(S);d(c,E,T)}for(const p of m)delete c[p]}}else{const c=n;l in c&&tm(c[l],e,t,s+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W1(n){const e={},t=f(n,["operationName"]);t!=null&&d(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&d(e,["_url","resourceName"],s),e}function j1(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const s=f(n,["metadata"]);s!=null&&d(e,["metadata"],s);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&d(e,["response"],tM(c)),e}function eM(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const s=f(n,["metadata"]);s!=null&&d(e,["metadata"],s);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["response"]);return c!=null&&d(e,["response"],nM(c)),e}function tM(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>iM(c))),d(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&d(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function nM(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>sM(c))),d(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&d(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function iM(n){const e={},t=f(n,["video"]);return t!=null&&d(e,["video"],cM(t)),e}function sM(n){const e={},t=f(n,["_self"]);return t!=null&&d(e,["video"],fM(t)),e}function oM(n){const e={},t=f(n,["operationName"]);return t!=null&&d(e,["_url","operationName"],t),e}function rM(n){const e={},t=f(n,["operationName"]);return t!=null&&d(e,["_url","operationName"],t),e}function aM(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const s=f(n,["metadata"]);s!=null&&d(e,["metadata"],s);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["response"]);return c!=null&&d(e,["response"],lM(c)),e}function lM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&d(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function hS(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const s=f(n,["metadata"]);s!=null&&d(e,["metadata"],s);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["response"]);return c!=null&&d(e,["response"],uM(c)),e}function uM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&d(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function cM(n){const e={},t=f(n,["uri"]);t!=null&&d(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&d(e,["videoBytes"],Zm(s));const r=f(n,["encoding"]);return r!=null&&d(e,["mimeType"],r),e}function fM(n){const e={},t=f(n,["gcsUri"]);t!=null&&d(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&d(e,["videoBytes"],Zm(s));const r=f(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var JT;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(JT||(JT={}));var KT;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(KT||(KT={}));var QT;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(QT||(QT={}));var Hs;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Hs||(Hs={}));var XT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(XT||(XT={}));var $T;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})($T||($T={}));var ZT;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(ZT||(ZT={}));var WT;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(WT||(WT={}));var jT;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(jT||(jT={}));var ev;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(ev||(ev={}));var tv;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(tv||(tv={}));var nv;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(nv||(nv={}));var iv;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(iv||(iv={}));var sv;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(sv||(sv={}));var ov;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(ov||(ov={}));var rv;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(rv||(rv={}));var av;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(av||(av={}));var lv;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(lv||(lv={}));var uv;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(uv||(uv={}));var Qc;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Qc||(Qc={}));var cv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(cv||(cv={}));var fv;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(fv||(fv={}));var dv;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(dv||(dv={}));var nm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(nm||(nm={}));var hv;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(hv||(hv={}));var mv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(mv||(mv={}));var pv;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(pv||(pv={}));var gv;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(gv||(gv={}));var yv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(yv||(yv={}));var _v;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(_v||(_v={}));var Tv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Tv||(Tv={}));var vv;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(vv||(vv={}));var Ev;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Ev||(Ev={}));var Sv;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Sv||(Sv={}));var Av;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Av||(Av={}));var Cv;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Cv||(Cv={}));var Iv;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Iv||(Iv={}));var Rv;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Rv||(Rv={}));var wv;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(wv||(wv={}));var Nv;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(Nv||(Nv={}));var Mv;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Mv||(Mv={}));var xv;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(xv||(xv={}));var Dv;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Dv||(Dv={}));var bv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(bv||(bv={}));var Vv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Vv||(Vv={}));var Pv;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Pv||(Pv={}));var Uv;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Uv||(Uv={}));var Lv;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Lv||(Lv={}));var kv;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(kv||(kv={}));var qv;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(qv||(qv={}));var Ov;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Ov||(Ov={}));var Gv;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Gv||(Gv={}));var Bv;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Bv||(Bv={}));var Fv;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Fv||(Fv={}));var qr;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(qr||(qr={}));class im{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class ml{get text(){var e,t,s,r,l,c,m,y;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",T=!1;const E=[];for(const S of(y=(m=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||m===void 0?void 0:m.parts)!==null&&y!==void 0?y:[]){for(const[w,G]of Object.entries(S))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(G!==null||G!==void 0)&&E.push(w);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;T=!0,p+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),T?p:void 0}get data(){var e,t,s,r,l,c,m,y;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const T=[];for(const E of(y=(m=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||m===void 0?void 0:m.parts)!==null&&y!==void 0?y:[]){for(const[S,w]of Object.entries(E))S!=="inlineData"&&(w!==null||w!==void 0)&&T.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(p+=atob(E.inlineData.data))}return T.length>0&&console.warn(`there are non-data parts ${T} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,s,r,l,c,m,y;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(y=(m=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||m===void 0?void 0:m.parts)===null||y===void 0?void 0:y.filter(T=>T.functionCall).map(T=>T.functionCall).filter(T=>T!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,t,s,r,l,c,m,y,p;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const T=(y=(m=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||m===void 0?void 0:m.parts)===null||y===void 0?void 0:y.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((T==null?void 0:T.length)!==0)return(p=T==null?void 0:T[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,s,r,l,c,m,y,p;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const T=(y=(m=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||m===void 0?void 0:m.parts)===null||y===void 0?void 0:y.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((T==null?void 0:T.length)!==0)return(p=T==null?void 0:T[0])===null||p===void 0?void 0:p.output}}class Hv{}class zv{}class dM{}class hM{}class mM{}class pM{}class Yv{}class Jv{}class Kv{}class gM{}class Xc{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Xc;let r;const l=e;return t?r=eM(l):r=j1(l),Object.assign(s,r),s}}class Qv{}class Xv{}class $v{}class yM{}class _M{}class TM{}class Wm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Wm,l=aM(e);return Object.assign(s,l),s}}class vM{}class EM{}class SM{}class Zv{}class AM{get text(){var e,t,s;let r="",l=!1;const c=[];for(const m of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[y,p]of Object.entries(m))y!=="text"&&y!=="thought"&&p!==null&&c.push(y);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;l=!0,r+=m.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,s;let r="";const l=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[m,y]of Object.entries(c))m!=="inlineData"&&y!==null&&l.push(m);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class CM{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class jm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new jm,l=hS(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ke(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function mS(n,e){const t=Ke(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function pS(n){return Array.isArray(n)?n.map(e=>$c(e)):[$c(n)]}function $c(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function gS(n){const e=$c(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function yS(n){const e=$c(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Wv(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function _S(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Wv(e)):[Wv(n)]}function sm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function jv(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function eE(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function tn(n){if(n==null)throw new Error("ContentUnion is required");return sm(n)?n:{role:"user",parts:_S(n)}}function ep(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=tn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=tn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>tn(t)):[tn(e)]}function Hn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(jv(n)||eE(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[tn(n)]}const e=[],t=[],s=sm(n[0]);for(const r of n){const l=sm(r);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(jv(r)||eE(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return s||e.push({role:"user",parts:_S(t)}),e}function IM(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(Hs).includes(t[0].toUpperCase())?t[0].toUpperCase():Hs.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(Hs).includes(s.toUpperCase())?s.toUpperCase():Hs.TYPE_UNSPECIFIED})}}function Fr(n){const e={},t=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&IM(n.type,e);for(const[c,m]of Object.entries(n))if(m!=null)if(c=="type"){if(m==="null")throw new Error("type: null can not be the only possible type for the field.");if(m instanceof Array)continue;e.type=Object.values(Hs).includes(m.toUpperCase())?m.toUpperCase():Hs.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=Fr(m);else if(s.includes(c)){const y=[];for(const p of m){if(p.type=="null"){e.nullable=!0;continue}y.push(Fr(p))}e[c]=y}else if(r.includes(c)){const y={};for(const[p,T]of Object.entries(m))y[p]=Fr(T);e[c]=y}else{if(c==="additionalProperties")continue;e[c]=m}return e}function tp(n){return Fr(n)}function np(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function ip(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function oa(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Fr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Fr(e.response));return n}function ra(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function RM(n,e,t,s=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function ls(n,e){if(typeof e!="string")throw new Error("name must be a string");return RM(n,e,"cachedContents")}function TS(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function so(n){return Zm(n)}function wM(n){return n!=null&&typeof n=="object"&&"name"in n}function NM(n){return n!=null&&typeof n=="object"&&"video"in n}function MM(n){return n!=null&&typeof n=="object"&&"uri"in n}function vS(n){var e;let t;if(wM(n)&&(t=n.name),!(MM(n)&&(t=n.uri,t===void 0))&&!(NM(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function ES(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function SS(n){for(const e of["models","tunedModels","publisherModels"])if(xM(n,e))return n[e];return[]}function xM(n,e){return n!==null&&typeof n=="object"&&e in n}function DM(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function bM(n,e={}){const t=[],s=new Set;for(const r of n){const l=r.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=DM(r,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function AS(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function VM(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function CS(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const y=c.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function aa(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function IS(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PM(n){const e={},t=f(n,["responsesFile"]);t!=null&&d(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>mx(c))),d(e,["inlinedResponses"],l)}const r=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["inlinedEmbedContentResponses"],l)}return e}function UM(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&d(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&d(e,["gcsUri"],s);const r=f(n,["bigqueryDestination","outputUri"]);return r!=null&&d(e,["bigqueryUri"],r),e}function LM(n){const e={},t=f(n,["format"]);t!=null&&d(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&d(e,["gcsDestination","outputUriPrefix"],s);const r=f(n,["bigqueryUri"]);if(r!=null&&d(e,["bigqueryDestination","outputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function xc(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&d(e,["displayName"],s);const r=f(n,["metadata","state"]);r!=null&&d(e,["state"],IS(r));const l=f(n,["metadata","createTime"]);l!=null&&d(e,["createTime"],l);const c=f(n,["metadata","endTime"]);c!=null&&d(e,["endTime"],c);const m=f(n,["metadata","updateTime"]);m!=null&&d(e,["updateTime"],m);const y=f(n,["metadata","model"]);y!=null&&d(e,["model"],y);const p=f(n,["metadata","output"]);return p!=null&&d(e,["dest"],PM(CS(p))),e}function om(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const s=f(n,["displayName"]);s!=null&&d(e,["displayName"],s);const r=f(n,["state"]);r!=null&&d(e,["state"],IS(r));const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["createTime"]);c!=null&&d(e,["createTime"],c);const m=f(n,["startTime"]);m!=null&&d(e,["startTime"],m);const y=f(n,["endTime"]);y!=null&&d(e,["endTime"],y);const p=f(n,["updateTime"]);p!=null&&d(e,["updateTime"],p);const T=f(n,["model"]);T!=null&&d(e,["model"],T);const E=f(n,["inputConfig"]);E!=null&&d(e,["src"],kM(E));const S=f(n,["outputConfig"]);S!=null&&d(e,["dest"],UM(CS(S)));const w=f(n,["completionStats"]);return w!=null&&d(e,["completionStats"],w),e}function kM(n){const e={},t=f(n,["instancesFormat"]);t!=null&&d(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&d(e,["gcsUri"],s);const r=f(n,["bigquerySource","inputUri"]);return r!=null&&d(e,["bigqueryUri"],r),e}function qM(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&d(t,["fileName"],s);const r=f(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>hx(n,c))),d(t,["requests","requests"],l)}return t}function OM(n){const e={},t=f(n,["format"]);t!=null&&d(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&d(e,["gcsSource","uris"],s);const r=f(n,["bigqueryUri"]);if(r!=null&&d(e,["bigquerySource","inputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function GM(n){const e={},t=f(n,["data"]);if(t!=null&&d(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function BM(n,e){const t={},s=f(e,["name"]);return s!=null&&d(t,["_url","name"],aa(n,s)),t}function FM(n,e){const t={},s=f(e,["name"]);return s!=null&&d(t,["_url","name"],aa(n,s)),t}function HM(n){const e={},t=f(n,["content"]);t!=null&&d(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&d(e,["citationMetadata"],zM(s));const r=f(n,["tokenCount"]);r!=null&&d(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&d(e,["finishReason"],l);const c=f(n,["avgLogprobs"]);c!=null&&d(e,["avgLogprobs"],c);const m=f(n,["groundingMetadata"]);m!=null&&d(e,["groundingMetadata"],m);const y=f(n,["index"]);y!=null&&d(e,["index"],y);const p=f(n,["logprobsResult"]);p!=null&&d(e,["logprobsResult"],p);const T=f(n,["safetyRatings"]);if(T!=null){let S=T;Array.isArray(S)&&(S=S.map(w=>w)),d(e,["safetyRatings"],S)}const E=f(n,["urlContextMetadata"]);return E!=null&&d(e,["urlContextMetadata"],E),e}function zM(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),d(e,["citations"],s)}return e}function RS(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Ex(l))),d(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&d(e,["role"],s),e}function YM(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&d(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function JM(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&d(e,["displayName"],s);const r=f(n,["dest"]);return e!==void 0&&r!=null&&d(e,["outputConfig"],LM(VM(r))),t}function tE(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Ke(n,s));const r=f(e,["src"]);r!=null&&d(t,["batch","inputConfig"],qM(n,AS(n,r)));const l=f(e,["config"]);return l!=null&&YM(l,t),t}function KM(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["model"],Ke(n,s));const r=f(e,["src"]);r!=null&&d(t,["inputConfig"],OM(AS(n,r)));const l=f(e,["config"]);return l!=null&&JM(l,t),t}function QM(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&d(e,["batch","displayName"],s),t}function XM(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Ke(n,s));const r=f(e,["src"]);r!=null&&d(t,["batch","inputConfig"],nx(n,r));const l=f(e,["config"]);return l!=null&&QM(l,t),t}function $M(n,e){const t={},s=f(e,["name"]);return s!=null&&d(t,["_url","name"],aa(n,s)),t}function ZM(n,e){const t={},s=f(e,["name"]);return s!=null&&d(t,["_url","name"],aa(n,s)),t}function WM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&d(e,["name"],s);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);return l!=null&&d(e,["error"],l),e}function jM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&d(e,["name"],s);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);return l!=null&&d(e,["error"],l),e}function ex(n,e){const t={},s=f(e,["contents"]);if(s!=null){let l=ep(n,s);Array.isArray(l)&&(l=l.map(c=>c)),d(t,["requests[]","request","content"],l)}const r=f(e,["config"]);return r!=null&&(d(t,["_self"],tx(r,t)),Z1(t,{"requests[].*":"requests[].request.*"})),t}function tx(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&d(e,["requests[]","taskType"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&d(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&d(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function nx(n,e){const t={},s=f(e,["fileName"]);s!=null&&d(t,["file_name"],s);const r=f(e,["inlinedRequests"]);return r!=null&&d(t,["requests"],ex(n,r)),t}function ix(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&d(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function sx(n){const e={},t=f(n,["id"]);t!=null&&d(e,["id"],t);const s=f(n,["args"]);s!=null&&d(e,["args"],s);const r=f(n,["name"]);if(r!=null&&d(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ox(n){const e={},t=f(n,["mode"]);t!=null&&d(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&d(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function rx(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&d(t,["systemInstruction"],RS(tn(r)));const l=f(e,["temperature"]);l!=null&&d(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&d(s,["topP"],c);const m=f(e,["topK"]);m!=null&&d(s,["topK"],m);const y=f(e,["candidateCount"]);y!=null&&d(s,["candidateCount"],y);const p=f(e,["maxOutputTokens"]);p!=null&&d(s,["maxOutputTokens"],p);const T=f(e,["stopSequences"]);T!=null&&d(s,["stopSequences"],T);const E=f(e,["responseLogprobs"]);E!=null&&d(s,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&d(s,["logprobs"],S);const w=f(e,["presencePenalty"]);w!=null&&d(s,["presencePenalty"],w);const G=f(e,["frequencyPenalty"]);G!=null&&d(s,["frequencyPenalty"],G);const B=f(e,["seed"]);B!=null&&d(s,["seed"],B);const J=f(e,["responseMimeType"]);J!=null&&d(s,["responseMimeType"],J);const j=f(e,["responseSchema"]);j!=null&&d(s,["responseSchema"],tp(j));const se=f(e,["responseJsonSchema"]);if(se!=null&&d(s,["responseJsonSchema"],se),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ee=f(e,["safetySettings"]);if(t!==void 0&&ee!=null){let q=ee;Array.isArray(q)&&(q=q.map(V=>Sx(V))),d(t,["safetySettings"],q)}const le=f(e,["tools"]);if(t!==void 0&&le!=null){let q=ra(le);Array.isArray(q)&&(q=q.map(V=>Cx(oa(V)))),d(t,["tools"],q)}const fe=f(e,["toolConfig"]);if(t!==void 0&&fe!=null&&d(t,["toolConfig"],Ax(fe)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);t!==void 0&&ue!=null&&d(t,["cachedContent"],ls(n,ue));const D=f(e,["responseModalities"]);D!=null&&d(s,["responseModalities"],D);const M=f(e,["mediaResolution"]);M!=null&&d(s,["mediaResolution"],M);const N=f(e,["speechConfig"]);if(N!=null&&d(s,["speechConfig"],np(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);L!=null&&d(s,["thinkingConfig"],L);const U=f(e,["imageConfig"]);return U!=null&&d(s,["imageConfig"],dx(U)),s}function ax(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(p=>HM(p))),d(e,["candidates"],y)}const r=f(n,["modelVersion"]);r!=null&&d(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&d(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&d(e,["responseId"],c);const m=f(n,["usageMetadata"]);return m!=null&&d(e,["usageMetadata"],m),e}function lx(n,e){const t={},s=f(e,["name"]);return s!=null&&d(t,["_url","name"],aa(n,s)),t}function ux(n,e){const t={},s=f(e,["name"]);return s!=null&&d(t,["_url","name"],aa(n,s)),t}function cx(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&d(e,["enableWidget"],t),e}function fx(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&d(e,["timeRangeFilter"],t),e}function dx(n){const e={},t=f(n,["aspectRatio"]);t!=null&&d(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&d(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function hx(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["request","model"],Ke(n,s));const r=f(e,["contents"]);if(r!=null){let m=Hn(r);Array.isArray(m)&&(m=m.map(y=>RS(y))),d(t,["request","contents"],m)}const l=f(e,["metadata"]);l!=null&&d(t,["metadata"],l);const c=f(e,["config"]);return c!=null&&d(t,["request","generationConfig"],rx(n,c,f(t,["request"],{}))),t}function mx(n){const e={},t=f(n,["response"]);t!=null&&d(e,["response"],ax(t));const s=f(n,["error"]);return s!=null&&d(e,["error"],s),e}function px(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);if(e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function gx(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);e!==void 0&&r!=null&&d(e,["_query","pageToken"],r);const l=f(n,["filter"]);return e!==void 0&&l!=null&&d(e,["_query","filter"],l),t}function yx(n){const e={},t=f(n,["config"]);return t!=null&&px(t,e),e}function _x(n){const e={},t=f(n,["config"]);return t!=null&&gx(t,e),e}function Tx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=f(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>xc(c))),d(e,["batchJobs"],l)}return e}function vx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=f(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>om(c))),d(e,["batchJobs"],l)}return e}function Ex(n){const e={},t=f(n,["mediaResolution"]);t!=null&&d(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&d(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&d(e,["fileData"],ix(l));const c=f(n,["functionCall"]);c!=null&&d(e,["functionCall"],sx(c));const m=f(n,["functionResponse"]);m!=null&&d(e,["functionResponse"],m);const y=f(n,["inlineData"]);y!=null&&d(e,["inlineData"],GM(y));const p=f(n,["text"]);p!=null&&d(e,["text"],p);const T=f(n,["thought"]);T!=null&&d(e,["thought"],T);const E=f(n,["thoughtSignature"]);E!=null&&d(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function Sx(n){const e={},t=f(n,["category"]);if(t!=null&&d(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&d(e,["threshold"],s),e}function Ax(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&d(e,["functionCallingConfig"],ox(t));const s=f(n,["retrievalConfig"]);return s!=null&&d(e,["retrievalConfig"],s),e}function Cx(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(E=>E)),d(e,["functionDeclarations"],T)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&d(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&d(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&d(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const m=f(n,["googleMaps"]);m!=null&&d(e,["googleMaps"],cx(m));const y=f(n,["googleSearch"]);y!=null&&d(e,["googleSearch"],fx(y));const p=f(n,["urlContext"]);return p!=null&&d(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var rs;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(rs||(rs={}));class Ho{constructor(e,t,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,r)}init(e,t,s){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ix extends as{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new Ho(rs.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=tE(this.apiClient,e),s=t._url,r=de("{model}:batchGenerateContent",s),m=t.batch.inputConfig.requests,y=m.requests,p=[];for(const T of y){const E=Object.assign({},T);if(E.systemInstruction){const S=E.systemInstruction;delete E.systemInstruction;const w=E.request;w.systemInstruction=S,E.request=w}p.push(E)}return m.requests=p,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${r}`;else if(c)s.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=KM(this.apiClient,e);return m=de("batchPredictionJobs",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>om(T))}else{const p=tE(this.apiClient,e);return m=de("{model}:batchGenerateContent",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>xc(T))}}async createEmbeddingsInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=XM(this.apiClient,e);return l=de("{model}:asyncBatchEmbedContent",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>xc(y))}}async get(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=ux(this.apiClient,e);return m=de("batchPredictionJobs/{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>om(T))}else{const p=lx(this.apiClient,e);return m=de("batches/{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>xc(T))}}async cancel(e){var t,s,r,l;let c="",m={};if(this.apiClient.isVertexAI()){const y=FM(this.apiClient,e);c=de("batchPredictionJobs/{name}:cancel",y._url),m=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const y=BM(this.apiClient,e);c=de("batches/{name}:cancel",y._url),m=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=_x(e);return m=de("batchPredictionJobs",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=vx(T),S=new Zv;return Object.assign(S,E),S})}else{const p=yx(e);return m=de("batches",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=Tx(T),S=new Zv;return Object.assign(S,E),S})}}async delete(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=ZM(this.apiClient,e);return m=de("batchPredictionJobs/{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>jM(T))}else{const p=$M(this.apiClient,e);return m=de("batches/{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>WM(T))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rx(n){const e={},t=f(n,["data"]);if(t!=null&&d(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function nE(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Xx(l))),d(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&d(e,["role"],s),e}function wx(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&d(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&d(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let T=Hn(c);Array.isArray(T)&&(T=T.map(E=>nE(E))),d(e,["contents"],T)}const m=f(n,["systemInstruction"]);e!==void 0&&m!=null&&d(e,["systemInstruction"],nE(tn(m)));const y=f(n,["tools"]);if(e!==void 0&&y!=null){let T=y;Array.isArray(T)&&(T=T.map(E=>Zx(E))),d(e,["tools"],T)}const p=f(n,["toolConfig"]);if(e!==void 0&&p!=null&&d(e,["toolConfig"],$x(p)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function Nx(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&d(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&d(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let E=Hn(c);Array.isArray(E)&&(E=E.map(S=>S)),d(e,["contents"],E)}const m=f(n,["systemInstruction"]);e!==void 0&&m!=null&&d(e,["systemInstruction"],tn(m));const y=f(n,["tools"]);if(e!==void 0&&y!=null){let E=y;Array.isArray(E)&&(E=E.map(S=>Wx(S))),d(e,["tools"],E)}const p=f(n,["toolConfig"]);e!==void 0&&p!=null&&d(e,["toolConfig"],p);const T=f(n,["kmsKeyName"]);return e!==void 0&&T!=null&&d(e,["encryption_spec","kmsKeyName"],T),t}function Mx(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["model"],mS(n,s));const r=f(e,["config"]);return r!=null&&wx(r,t),t}function xx(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["model"],mS(n,s));const r=f(e,["config"]);return r!=null&&Nx(r,t),t}function Dx(n,e){const t={},s=f(e,["name"]);return s!=null&&d(t,["_url","name"],ls(n,s)),t}function bx(n,e){const t={},s=f(e,["name"]);return s!=null&&d(t,["_url","name"],ls(n,s)),t}function Vx(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function Px(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function Ux(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&d(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function Lx(n){const e={},t=f(n,["id"]);t!=null&&d(e,["id"],t);const s=f(n,["args"]);s!=null&&d(e,["args"],s);const r=f(n,["name"]);if(r!=null&&d(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function kx(n){const e={},t=f(n,["mode"]);t!=null&&d(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&d(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function qx(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&d(e,["description"],t);const s=f(n,["name"]);s!=null&&d(e,["name"],s);const r=f(n,["parameters"]);r!=null&&d(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&d(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&d(e,["response"],c);const m=f(n,["responseJsonSchema"]);return m!=null&&d(e,["responseJsonSchema"],m),e}function Ox(n,e){const t={},s=f(e,["name"]);return s!=null&&d(t,["_url","name"],ls(n,s)),t}function Gx(n,e){const t={},s=f(e,["name"]);return s!=null&&d(t,["_url","name"],ls(n,s)),t}function Bx(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&d(e,["enableWidget"],t),e}function Fx(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&d(e,["timeRangeFilter"],t),e}function Hx(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),t}function zx(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),t}function Yx(n){const e={},t=f(n,["config"]);return t!=null&&Hx(t,e),e}function Jx(n){const e={},t=f(n,["config"]);return t!=null&&zx(t,e),e}function Kx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["cachedContents"],l)}return e}function Qx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["cachedContents"],l)}return e}function Xx(n){const e={},t=f(n,["mediaResolution"]);t!=null&&d(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&d(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&d(e,["fileData"],Ux(l));const c=f(n,["functionCall"]);c!=null&&d(e,["functionCall"],Lx(c));const m=f(n,["functionResponse"]);m!=null&&d(e,["functionResponse"],m);const y=f(n,["inlineData"]);y!=null&&d(e,["inlineData"],Rx(y));const p=f(n,["text"]);p!=null&&d(e,["text"],p);const T=f(n,["thought"]);T!=null&&d(e,["thought"],T);const E=f(n,["thoughtSignature"]);E!=null&&d(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function $x(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&d(e,["functionCallingConfig"],kx(t));const s=f(n,["retrievalConfig"]);return s!=null&&d(e,["retrievalConfig"],s),e}function Zx(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(E=>E)),d(e,["functionDeclarations"],T)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&d(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&d(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&d(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const m=f(n,["googleMaps"]);m!=null&&d(e,["googleMaps"],Bx(m));const y=f(n,["googleSearch"]);y!=null&&d(e,["googleSearch"],Fx(y));const p=f(n,["urlContext"]);return p!=null&&d(e,["urlContext"],p),e}function Wx(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>qx(S))),d(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&d(e,["retrieval"],s);const r=f(n,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);const l=f(n,["computerUse"]);if(l!=null&&d(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(n,["codeExecution"]);c!=null&&d(e,["codeExecution"],c);const m=f(n,["enterpriseWebSearch"]);m!=null&&d(e,["enterpriseWebSearch"],m);const y=f(n,["googleMaps"]);y!=null&&d(e,["googleMaps"],y);const p=f(n,["googleSearch"]);p!=null&&d(e,["googleSearch"],p);const T=f(n,["urlContext"]);return T!=null&&d(e,["urlContext"],T),e}function jx(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&d(e,["expireTime"],r),t}function eD(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&d(e,["expireTime"],r),t}function tD(n,e){const t={},s=f(e,["name"]);s!=null&&d(t,["_url","name"],ls(n,s));const r=f(e,["config"]);return r!=null&&jx(r,t),t}function nD(n,e){const t={},s=f(e,["name"]);s!=null&&d(t,["_url","name"],ls(n,s));const r=f(e,["config"]);return r!=null&&eD(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iD extends as{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ho(rs.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=xx(this.apiClient,e);return m=de("cachedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>T)}else{const p=Mx(this.apiClient,e);return m=de("cachedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>T)}}async get(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=Gx(this.apiClient,e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>T)}else{const p=Ox(this.apiClient,e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>T)}}async delete(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=bx(this.apiClient,e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=Px(T),S=new Xv;return Object.assign(S,E),S})}else{const p=Dx(this.apiClient,e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=Vx(T),S=new Xv;return Object.assign(S,E),S})}}async update(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=nD(this.apiClient,e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>T)}else{const p=tD(this.apiClient,e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>T)}}async listInternal(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=Jx(e);return m=de("cachedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=Qx(T),S=new $v;return Object.assign(S,E),S})}else{const p=Yx(e);return m=de("cachedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=Kx(T),S=new $v;return Object.assign(S,E),S})}}}function iE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ut(n){return this instanceof ut?(this.v=n,this):new ut(n)}function Hr(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),m("next"),m("throw"),m("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(w){return function(G){return Promise.resolve(G).then(w,E)}}function m(w,G){s[w]&&(r[w]=function(B){return new Promise(function(J,j){l.push([w,B,J,j])>1||y(w,B)})},G&&(r[w]=G(r[w])))}function y(w,G){try{p(s[w](G))}catch(B){S(l[0][3],B)}}function p(w){w.value instanceof ut?Promise.resolve(w.value.v).then(T,E):S(l[0][2],w)}function T(w){y("next",w)}function E(w){y("throw",w)}function S(w,G){w(G),l.shift(),l.length&&y(l[0][0],l[0][1])}}function Cl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof iE=="function"?iE(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(c){return new Promise(function(m,y){c=n[l](c),r(m,y,c.done,c.value)})}}function r(l,c,m,y){Promise.resolve(y).then(function(p){l({value:p,done:m})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sD(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:wS(t)}function wS(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function oD(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function sE(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const r=[];let l=!0;for(;s<t&&n[s].role==="model";)r.push(n[s]),l&&!wS(n[s])&&(l=!1),s++;l?e.push(...r):e.pop()}return e}class rD{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new aD(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class aD{constructor(e,t,s,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),oD(l)}async sendMessage(e){var t;await this.sendPromise;const s=tn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,m;const y=await r,p=(c=(l=y.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,T=y.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];T!=null&&(S=(m=T.slice(E))!==null&&m!==void 0?m:[]);const w=p?[p]:[];this.recordHistory(s,w,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const s=tn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?sE(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,r;return Hr(this,arguments,function*(){var c,m,y,p;const T=[];try{for(var E=!0,S=Cl(e),w;w=yield ut(S.next()),c=w.done,!c;E=!0){p=w.value,E=!1;const G=p;if(sD(G)){const B=(r=(s=G.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content;B!==void 0&&T.push(B)}yield yield ut(G)}}catch(G){m={error:G}}finally{try{!E&&!c&&(y=S.return)&&(yield ut(y.call(S)))}finally{if(m)throw m.error}}this.recordHistory(t,T)})}recordHistory(e,t,s){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...sE(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,pf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lD(n){const e={},t=f(n,["file"]);return t!=null&&d(e,["file"],t),e}function uD(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function cD(n){const e={},t=f(n,["name"]);return t!=null&&d(e,["_url","file"],vS(t)),e}function fD(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function dD(n){const e={},t=f(n,["name"]);return t!=null&&d(e,["_url","file"],vS(t)),e}function hD(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),t}function mD(n){const e={},t=f(n,["config"]);return t!=null&&hD(t,e),e}function pD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=f(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gD extends as{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ho(rs.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=mD(e);return l=de("files",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),r.then(y=>{const p=pD(y),T=new vM;return Object.assign(T,p),T})}}async createInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=lD(e);return l=de("upload/v1beta/files",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const p=uD(y),T=new EM;return Object.assign(T,p),T})}}async get(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=dD(e);return l=de("files/{file}",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=cD(e);return l=de("files/{file}",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),r.then(y=>{const p=fD(y),T=new SM;return Object.assign(T,p),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dc(n){const e={},t=f(n,["data"]);if(t!=null&&d(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function yD(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>VD(l))),d(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&d(e,["role"],s),e}function _D(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&d(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function TD(n){const e={},t=f(n,["id"]);t!=null&&d(e,["id"],t);const s=f(n,["args"]);s!=null&&d(e,["args"],s);const r=f(n,["name"]);if(r!=null&&d(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vD(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&d(e,["description"],t);const s=f(n,["name"]);s!=null&&d(e,["name"],s);const r=f(n,["parameters"]);r!=null&&d(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&d(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&d(e,["response"],c);const m=f(n,["responseJsonSchema"]);return m!=null&&d(e,["responseJsonSchema"],m),e}function ED(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&d(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&d(e,["responseJsonSchema"],s);const r=f(n,["audioTimestamp"]);r!=null&&d(e,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&d(e,["candidateCount"],l);const c=f(n,["enableAffectiveDialog"]);c!=null&&d(e,["enableAffectiveDialog"],c);const m=f(n,["frequencyPenalty"]);m!=null&&d(e,["frequencyPenalty"],m);const y=f(n,["logprobs"]);y!=null&&d(e,["logprobs"],y);const p=f(n,["maxOutputTokens"]);p!=null&&d(e,["maxOutputTokens"],p);const T=f(n,["mediaResolution"]);T!=null&&d(e,["mediaResolution"],T);const E=f(n,["presencePenalty"]);E!=null&&d(e,["presencePenalty"],E);const S=f(n,["responseLogprobs"]);S!=null&&d(e,["responseLogprobs"],S);const w=f(n,["responseMimeType"]);w!=null&&d(e,["responseMimeType"],w);const G=f(n,["responseModalities"]);G!=null&&d(e,["responseModalities"],G);const B=f(n,["responseSchema"]);B!=null&&d(e,["responseSchema"],B);const J=f(n,["routingConfig"]);J!=null&&d(e,["routingConfig"],J);const j=f(n,["seed"]);j!=null&&d(e,["seed"],j);const se=f(n,["speechConfig"]);se!=null&&d(e,["speechConfig"],NS(se));const ee=f(n,["stopSequences"]);ee!=null&&d(e,["stopSequences"],ee);const le=f(n,["temperature"]);le!=null&&d(e,["temperature"],le);const fe=f(n,["thinkingConfig"]);fe!=null&&d(e,["thinkingConfig"],fe);const ue=f(n,["topK"]);ue!=null&&d(e,["topK"],ue);const D=f(n,["topP"]);if(D!=null&&d(e,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function SD(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&d(e,["enableWidget"],t),e}function AD(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&d(e,["timeRangeFilter"],t),e}function CD(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig"],s);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const m=f(n,["topK"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","topK"],m);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","maxOutputTokens"],y);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","mediaResolution"],p);const T=f(n,["seed"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","seed"],T);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","speechConfig"],ip(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&d(e,["setup","generationConfig","thinkingConfig"],S);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],w);const G=f(n,["systemInstruction"]);e!==void 0&&G!=null&&d(e,["setup","systemInstruction"],yD(tn(G)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let ue=ra(B);Array.isArray(ue)&&(ue=ue.map(D=>UD(oa(D)))),d(e,["setup","tools"],ue)}const J=f(n,["sessionResumption"]);e!==void 0&&J!=null&&d(e,["setup","sessionResumption"],PD(J));const j=f(n,["inputAudioTranscription"]);e!==void 0&&j!=null&&d(e,["setup","inputAudioTranscription"],j);const se=f(n,["outputAudioTranscription"]);e!==void 0&&se!=null&&d(e,["setup","outputAudioTranscription"],se);const ee=f(n,["realtimeInputConfig"]);e!==void 0&&ee!=null&&d(e,["setup","realtimeInputConfig"],ee);const le=f(n,["contextWindowCompression"]);e!==void 0&&le!=null&&d(e,["setup","contextWindowCompression"],le);const fe=f(n,["proactivity"]);return e!==void 0&&fe!=null&&d(e,["setup","proactivity"],fe),t}function ID(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig"],ED(s));const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const m=f(n,["topK"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","topK"],m);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","maxOutputTokens"],y);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","mediaResolution"],p);const T=f(n,["seed"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","seed"],T);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","speechConfig"],NS(ip(E)));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&d(e,["setup","generationConfig","thinkingConfig"],S);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],w);const G=f(n,["systemInstruction"]);e!==void 0&&G!=null&&d(e,["setup","systemInstruction"],tn(G));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let ue=ra(B);Array.isArray(ue)&&(ue=ue.map(D=>LD(oa(D)))),d(e,["setup","tools"],ue)}const J=f(n,["sessionResumption"]);e!==void 0&&J!=null&&d(e,["setup","sessionResumption"],J);const j=f(n,["inputAudioTranscription"]);e!==void 0&&j!=null&&d(e,["setup","inputAudioTranscription"],j);const se=f(n,["outputAudioTranscription"]);e!==void 0&&se!=null&&d(e,["setup","outputAudioTranscription"],se);const ee=f(n,["realtimeInputConfig"]);e!==void 0&&ee!=null&&d(e,["setup","realtimeInputConfig"],ee);const le=f(n,["contextWindowCompression"]);e!==void 0&&le!=null&&d(e,["setup","contextWindowCompression"],le);const fe=f(n,["proactivity"]);return e!==void 0&&fe!=null&&d(e,["setup","proactivity"],fe),t}function RD(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["setup","model"],Ke(n,s));const r=f(e,["config"]);return r!=null&&d(t,["config"],CD(r,t)),t}function wD(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["setup","model"],Ke(n,s));const r=f(e,["config"]);return r!=null&&d(t,["config"],ID(r,t)),t}function ND(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&d(e,["musicGenerationConfig"],t),e}function MD(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),d(e,["weightedPrompts"],s)}return e}function xD(n){const e={},t=f(n,["media"]);if(t!=null){let p=pS(t);Array.isArray(p)&&(p=p.map(T=>Dc(T))),d(e,["mediaChunks"],p)}const s=f(n,["audio"]);s!=null&&d(e,["audio"],Dc(yS(s)));const r=f(n,["audioStreamEnd"]);r!=null&&d(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&d(e,["video"],Dc(gS(l)));const c=f(n,["text"]);c!=null&&d(e,["text"],c);const m=f(n,["activityStart"]);m!=null&&d(e,["activityStart"],m);const y=f(n,["activityEnd"]);return y!=null&&d(e,["activityEnd"],y),e}function DD(n){const e={},t=f(n,["media"]);if(t!=null){let p=pS(t);Array.isArray(p)&&(p=p.map(T=>T)),d(e,["mediaChunks"],p)}const s=f(n,["audio"]);s!=null&&d(e,["audio"],yS(s));const r=f(n,["audioStreamEnd"]);r!=null&&d(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&d(e,["video"],gS(l));const c=f(n,["text"]);c!=null&&d(e,["text"],c);const m=f(n,["activityStart"]);m!=null&&d(e,["activityStart"],m);const y=f(n,["activityEnd"]);return y!=null&&d(e,["activityEnd"],y),e}function bD(n){const e={},t=f(n,["setupComplete"]);t!=null&&d(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&d(e,["serverContent"],s);const r=f(n,["toolCall"]);r!=null&&d(e,["toolCall"],r);const l=f(n,["toolCallCancellation"]);l!=null&&d(e,["toolCallCancellation"],l);const c=f(n,["usageMetadata"]);c!=null&&d(e,["usageMetadata"],kD(c));const m=f(n,["goAway"]);m!=null&&d(e,["goAway"],m);const y=f(n,["sessionResumptionUpdate"]);return y!=null&&d(e,["sessionResumptionUpdate"],y),e}function VD(n){const e={},t=f(n,["mediaResolution"]);t!=null&&d(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&d(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&d(e,["fileData"],_D(l));const c=f(n,["functionCall"]);c!=null&&d(e,["functionCall"],TD(c));const m=f(n,["functionResponse"]);m!=null&&d(e,["functionResponse"],m);const y=f(n,["inlineData"]);y!=null&&d(e,["inlineData"],Dc(y));const p=f(n,["text"]);p!=null&&d(e,["text"],p);const T=f(n,["thought"]);T!=null&&d(e,["thought"],T);const E=f(n,["thoughtSignature"]);E!=null&&d(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function PD(n){const e={},t=f(n,["handle"]);if(t!=null&&d(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function NS(n){const e={},t=f(n,["languageCode"]);t!=null&&d(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&d(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function UD(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(E=>E)),d(e,["functionDeclarations"],T)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&d(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&d(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&d(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const m=f(n,["googleMaps"]);m!=null&&d(e,["googleMaps"],SD(m));const y=f(n,["googleSearch"]);y!=null&&d(e,["googleSearch"],AD(y));const p=f(n,["urlContext"]);return p!=null&&d(e,["urlContext"],p),e}function LD(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>vD(S))),d(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&d(e,["retrieval"],s);const r=f(n,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);const l=f(n,["computerUse"]);if(l!=null&&d(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(n,["codeExecution"]);c!=null&&d(e,["codeExecution"],c);const m=f(n,["enterpriseWebSearch"]);m!=null&&d(e,["enterpriseWebSearch"],m);const y=f(n,["googleMaps"]);y!=null&&d(e,["googleMaps"],y);const p=f(n,["googleSearch"]);p!=null&&d(e,["googleSearch"],p);const T=f(n,["urlContext"]);return T!=null&&d(e,["urlContext"],T),e}function kD(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&d(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&d(e,["cachedContentTokenCount"],s);const r=f(n,["candidatesTokenCount"]);r!=null&&d(e,["responseTokenCount"],r);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&d(e,["toolUsePromptTokenCount"],l);const c=f(n,["thoughtsTokenCount"]);c!=null&&d(e,["thoughtsTokenCount"],c);const m=f(n,["totalTokenCount"]);m!=null&&d(e,["totalTokenCount"],m);const y=f(n,["promptTokensDetails"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(G=>G)),d(e,["promptTokensDetails"],w)}const p=f(n,["cacheTokensDetails"]);if(p!=null){let w=p;Array.isArray(w)&&(w=w.map(G=>G)),d(e,["cacheTokensDetails"],w)}const T=f(n,["candidatesTokensDetails"]);if(T!=null){let w=T;Array.isArray(w)&&(w=w.map(G=>G)),d(e,["responseTokensDetails"],w)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(G=>G)),d(e,["toolUsePromptTokensDetails"],w)}const S=f(n,["trafficType"]);return S!=null&&d(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qD(n){const e={},t=f(n,["data"]);if(t!=null&&d(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function OD(n){const e={},t=f(n,["content"]);t!=null&&d(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&d(e,["citationMetadata"],GD(s));const r=f(n,["tokenCount"]);r!=null&&d(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&d(e,["finishReason"],l);const c=f(n,["avgLogprobs"]);c!=null&&d(e,["avgLogprobs"],c);const m=f(n,["groundingMetadata"]);m!=null&&d(e,["groundingMetadata"],m);const y=f(n,["index"]);y!=null&&d(e,["index"],y);const p=f(n,["logprobsResult"]);p!=null&&d(e,["logprobsResult"],p);const T=f(n,["safetyRatings"]);if(T!=null){let S=T;Array.isArray(S)&&(S=S.map(w=>w)),d(e,["safetyRatings"],S)}const E=f(n,["urlContextMetadata"]);return E!=null&&d(e,["urlContextMetadata"],E),e}function GD(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),d(e,["citations"],s)}return e}function BD(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Ke(n,s));const r=f(e,["contents"]);if(r!=null){let l=Hn(r);Array.isArray(l)&&(l=l.map(c=>c)),d(t,["contents"],l)}return t}function FD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),d(e,["tokensInfo"],r)}return e}function HD(n){const e={},t=f(n,["values"]);t!=null&&d(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&d(e,["statistics"],zD(s)),e}function zD(n){const e={},t=f(n,["truncated"]);t!=null&&d(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&d(e,["tokenCount"],s),e}function gf(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>jb(l))),d(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&d(e,["role"],s),e}function YD(n){const e={},t=f(n,["controlType"]);t!=null&&d(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&d(e,["computeControl"],s),e}function JD(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function KD(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&d(e,["systemInstruction"],tn(s));const r=f(n,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(m=>VS(m))),d(e,["tools"],c)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&d(e,["generationConfig"],qb(l)),t}function QD(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Ke(n,s));const r=f(e,["contents"]);if(r!=null){let c=Hn(r);Array.isArray(c)&&(c=c.map(m=>gf(m))),d(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&JD(l),t}function XD(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Ke(n,s));const r=f(e,["contents"]);if(r!=null){let c=Hn(r);Array.isArray(c)&&(c=c.map(m=>m)),d(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&KD(l,t),t}function $D(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&d(e,["totalTokens"],s);const r=f(n,["cachedContentTokenCount"]);return r!=null&&d(e,["cachedContentTokenCount"],r),e}function ZD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&d(e,["totalTokens"],s),e}function WD(n,e){const t={},s=f(e,["model"]);return s!=null&&d(t,["_url","name"],Ke(n,s)),t}function jD(n,e){const t={},s=f(e,["model"]);return s!=null&&d(t,["_url","name"],Ke(n,s)),t}function eb(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function tb(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function nb(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&d(e,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&d(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&d(e,["parameters","aspectRatio"],c);const m=f(n,["guidanceScale"]);e!==void 0&&m!=null&&d(e,["parameters","guidanceScale"],m);const y=f(n,["seed"]);e!==void 0&&y!=null&&d(e,["parameters","seed"],y);const p=f(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&d(e,["parameters","safetySetting"],p);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&d(e,["parameters","personGeneration"],T);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&d(e,["parameters","includeSafetyAttributes"],E);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&d(e,["parameters","includeRaiReason"],S);const w=f(n,["language"]);e!==void 0&&w!=null&&d(e,["parameters","language"],w);const G=f(n,["outputMimeType"]);e!==void 0&&G!=null&&d(e,["parameters","outputOptions","mimeType"],G);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&d(e,["parameters","outputOptions","compressionQuality"],B);const J=f(n,["addWatermark"]);e!==void 0&&J!=null&&d(e,["parameters","addWatermark"],J);const j=f(n,["labels"]);e!==void 0&&j!=null&&d(e,["labels"],j);const se=f(n,["editMode"]);e!==void 0&&se!=null&&d(e,["parameters","editMode"],se);const ee=f(n,["baseSteps"]);return e!==void 0&&ee!=null&&d(e,["parameters","editConfig","baseSteps"],ee),t}function ib(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Ke(n,s));const r=f(e,["prompt"]);r!=null&&d(t,["instances[0]","prompt"],r);const l=f(e,["referenceImages"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(y=>o2(y))),d(t,["instances[0]","referenceImages"],m)}const c=f(e,["config"]);return c!=null&&nb(c,t),t}function sb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>yf(l))),d(e,["generatedImages"],r)}return e}function ob(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&d(e,["requests[]","taskType"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&d(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&d(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function rb(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&d(e,["instances[]","task_type"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&d(e,["instances[]","title"],r);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&d(e,["parameters","outputDimensionality"],l);const c=f(n,["mimeType"]);e!==void 0&&c!=null&&d(e,["instances[]","mimeType"],c);const m=f(n,["autoTruncate"]);return e!==void 0&&m!=null&&d(e,["parameters","autoTruncate"],m),t}function ab(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Ke(n,s));const r=f(e,["contents"]);if(r!=null){let m=ep(n,r);Array.isArray(m)&&(m=m.map(y=>y)),d(t,["requests[]","content"],m)}const l=f(e,["config"]);l!=null&&ob(l,t);const c=f(e,["model"]);return c!==void 0&&d(t,["requests[]","model"],Ke(n,c)),t}function lb(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Ke(n,s));const r=f(e,["contents"]);if(r!=null){let c=ep(n,r);Array.isArray(c)&&(c=c.map(m=>m)),d(t,["instances[]","content"],c)}const l=f(e,["config"]);return l!=null&&rb(l,t),t}function ub(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&d(e,["metadata"],r),e}function cb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>HD(c))),d(e,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&d(e,["metadata"],r),e}function fb(n){const e={},t=f(n,["endpoint"]);t!=null&&d(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&d(e,["deployedModelId"],s),e}function db(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&d(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function hb(n){const e={},t=f(n,["id"]);t!=null&&d(e,["id"],t);const s=f(n,["args"]);s!=null&&d(e,["args"],s);const r=f(n,["name"]);if(r!=null&&d(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function mb(n){const e={},t=f(n,["mode"]);t!=null&&d(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&d(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function pb(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&d(e,["description"],t);const s=f(n,["name"]);s!=null&&d(e,["name"],s);const r=f(n,["parameters"]);r!=null&&d(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&d(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&d(e,["response"],c);const m=f(n,["responseJsonSchema"]);return m!=null&&d(e,["responseJsonSchema"],m),e}function gb(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&d(t,["systemInstruction"],gf(tn(r)));const l=f(e,["temperature"]);l!=null&&d(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&d(s,["topP"],c);const m=f(e,["topK"]);m!=null&&d(s,["topK"],m);const y=f(e,["candidateCount"]);y!=null&&d(s,["candidateCount"],y);const p=f(e,["maxOutputTokens"]);p!=null&&d(s,["maxOutputTokens"],p);const T=f(e,["stopSequences"]);T!=null&&d(s,["stopSequences"],T);const E=f(e,["responseLogprobs"]);E!=null&&d(s,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&d(s,["logprobs"],S);const w=f(e,["presencePenalty"]);w!=null&&d(s,["presencePenalty"],w);const G=f(e,["frequencyPenalty"]);G!=null&&d(s,["frequencyPenalty"],G);const B=f(e,["seed"]);B!=null&&d(s,["seed"],B);const J=f(e,["responseMimeType"]);J!=null&&d(s,["responseMimeType"],J);const j=f(e,["responseSchema"]);j!=null&&d(s,["responseSchema"],tp(j));const se=f(e,["responseJsonSchema"]);if(se!=null&&d(s,["responseJsonSchema"],se),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ee=f(e,["safetySettings"]);if(t!==void 0&&ee!=null){let q=ee;Array.isArray(q)&&(q=q.map(V=>r2(V))),d(t,["safetySettings"],q)}const le=f(e,["tools"]);if(t!==void 0&&le!=null){let q=ra(le);Array.isArray(q)&&(q=q.map(V=>h2(oa(V)))),d(t,["tools"],q)}const fe=f(e,["toolConfig"]);if(t!==void 0&&fe!=null&&d(t,["toolConfig"],d2(fe)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);t!==void 0&&ue!=null&&d(t,["cachedContent"],ls(n,ue));const D=f(e,["responseModalities"]);D!=null&&d(s,["responseModalities"],D);const M=f(e,["mediaResolution"]);M!=null&&d(s,["mediaResolution"],M);const N=f(e,["speechConfig"]);if(N!=null&&d(s,["speechConfig"],np(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);L!=null&&d(s,["thinkingConfig"],L);const U=f(e,["imageConfig"]);return U!=null&&d(s,["imageConfig"],Hb(U)),s}function yb(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&d(t,["systemInstruction"],tn(r));const l=f(e,["temperature"]);l!=null&&d(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&d(s,["topP"],c);const m=f(e,["topK"]);m!=null&&d(s,["topK"],m);const y=f(e,["candidateCount"]);y!=null&&d(s,["candidateCount"],y);const p=f(e,["maxOutputTokens"]);p!=null&&d(s,["maxOutputTokens"],p);const T=f(e,["stopSequences"]);T!=null&&d(s,["stopSequences"],T);const E=f(e,["responseLogprobs"]);E!=null&&d(s,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&d(s,["logprobs"],S);const w=f(e,["presencePenalty"]);w!=null&&d(s,["presencePenalty"],w);const G=f(e,["frequencyPenalty"]);G!=null&&d(s,["frequencyPenalty"],G);const B=f(e,["seed"]);B!=null&&d(s,["seed"],B);const J=f(e,["responseMimeType"]);J!=null&&d(s,["responseMimeType"],J);const j=f(e,["responseSchema"]);j!=null&&d(s,["responseSchema"],tp(j));const se=f(e,["responseJsonSchema"]);se!=null&&d(s,["responseJsonSchema"],se);const ee=f(e,["routingConfig"]);ee!=null&&d(s,["routingConfig"],ee);const le=f(e,["modelSelectionConfig"]);le!=null&&d(s,["modelConfig"],le);const fe=f(e,["safetySettings"]);if(t!==void 0&&fe!=null){let $=fe;Array.isArray($)&&($=$.map(re=>re)),d(t,["safetySettings"],$)}const ue=f(e,["tools"]);if(t!==void 0&&ue!=null){let $=ra(ue);Array.isArray($)&&($=$.map(re=>VS(oa(re)))),d(t,["tools"],$)}const D=f(e,["toolConfig"]);t!==void 0&&D!=null&&d(t,["toolConfig"],D);const M=f(e,["labels"]);t!==void 0&&M!=null&&d(t,["labels"],M);const N=f(e,["cachedContent"]);t!==void 0&&N!=null&&d(t,["cachedContent"],ls(n,N));const L=f(e,["responseModalities"]);L!=null&&d(s,["responseModalities"],L);const U=f(e,["mediaResolution"]);U!=null&&d(s,["mediaResolution"],U);const q=f(e,["speechConfig"]);q!=null&&d(s,["speechConfig"],bS(np(q)));const V=f(e,["audioTimestamp"]);V!=null&&d(s,["audioTimestamp"],V);const ze=f(e,["thinkingConfig"]);ze!=null&&d(s,["thinkingConfig"],ze);const st=f(e,["imageConfig"]);return st!=null&&d(s,["imageConfig"],zb(st)),s}function oE(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Ke(n,s));const r=f(e,["contents"]);if(r!=null){let c=Hn(r);Array.isArray(c)&&(c=c.map(m=>gf(m))),d(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&d(t,["generationConfig"],gb(n,l,t)),t}function rE(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Ke(n,s));const r=f(e,["contents"]);if(r!=null){let c=Hn(r);Array.isArray(c)&&(c=c.map(m=>m)),d(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&d(t,["generationConfig"],yb(n,l,t)),t}function aE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(p=>OD(p))),d(e,["candidates"],y)}const r=f(n,["modelVersion"]);r!=null&&d(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&d(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&d(e,["responseId"],c);const m=f(n,["usageMetadata"]);return m!=null&&d(e,["usageMetadata"],m),e}function lE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(T=>T)),d(e,["candidates"],p)}const r=f(n,["createTime"]);r!=null&&d(e,["createTime"],r);const l=f(n,["modelVersion"]);l!=null&&d(e,["modelVersion"],l);const c=f(n,["promptFeedback"]);c!=null&&d(e,["promptFeedback"],c);const m=f(n,["responseId"]);m!=null&&d(e,["responseId"],m);const y=f(n,["usageMetadata"]);return y!=null&&d(e,["usageMetadata"],y),e}function _b(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);const r=f(n,["aspectRatio"]);e!==void 0&&r!=null&&d(e,["parameters","aspectRatio"],r);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&d(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&d(e,["parameters","safetySetting"],c);const m=f(n,["personGeneration"]);e!==void 0&&m!=null&&d(e,["parameters","personGeneration"],m);const y=f(n,["includeSafetyAttributes"]);e!==void 0&&y!=null&&d(e,["parameters","includeSafetyAttributes"],y);const p=f(n,["includeRaiReason"]);e!==void 0&&p!=null&&d(e,["parameters","includeRaiReason"],p);const T=f(n,["language"]);e!==void 0&&T!=null&&d(e,["parameters","language"],T);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&d(e,["parameters","outputOptions","mimeType"],E);const S=f(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&d(e,["parameters","outputOptions","compressionQuality"],S),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=f(n,["imageSize"]);if(e!==void 0&&w!=null&&d(e,["parameters","sampleImageSize"],w),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function Tb(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&d(e,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&d(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&d(e,["parameters","aspectRatio"],c);const m=f(n,["guidanceScale"]);e!==void 0&&m!=null&&d(e,["parameters","guidanceScale"],m);const y=f(n,["seed"]);e!==void 0&&y!=null&&d(e,["parameters","seed"],y);const p=f(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&d(e,["parameters","safetySetting"],p);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&d(e,["parameters","personGeneration"],T);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&d(e,["parameters","includeSafetyAttributes"],E);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&d(e,["parameters","includeRaiReason"],S);const w=f(n,["language"]);e!==void 0&&w!=null&&d(e,["parameters","language"],w);const G=f(n,["outputMimeType"]);e!==void 0&&G!=null&&d(e,["parameters","outputOptions","mimeType"],G);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&d(e,["parameters","outputOptions","compressionQuality"],B);const J=f(n,["addWatermark"]);e!==void 0&&J!=null&&d(e,["parameters","addWatermark"],J);const j=f(n,["labels"]);e!==void 0&&j!=null&&d(e,["labels"],j);const se=f(n,["imageSize"]);e!==void 0&&se!=null&&d(e,["parameters","sampleImageSize"],se);const ee=f(n,["enhancePrompt"]);return e!==void 0&&ee!=null&&d(e,["parameters","enhancePrompt"],ee),t}function vb(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Ke(n,s));const r=f(e,["prompt"]);r!=null&&d(t,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&_b(l,t),t}function Eb(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Ke(n,s));const r=f(e,["prompt"]);r!=null&&d(t,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&Tb(l,t),t}function Sb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Pb(c))),d(e,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&d(e,["positivePromptSafetyAttributes"],xS(r)),e}function Ab(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>yf(c))),d(e,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&d(e,["positivePromptSafetyAttributes"],DS(r)),e}function Cb(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=f(n,["durationSeconds"]);if(e!==void 0&&r!=null&&d(e,["parameters","durationSeconds"],r),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&d(e,["parameters","aspectRatio"],l);const c=f(n,["resolution"]);e!==void 0&&c!=null&&d(e,["parameters","resolution"],c);const m=f(n,["personGeneration"]);if(e!==void 0&&m!=null&&d(e,["parameters","personGeneration"],m),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=f(n,["negativePrompt"]);e!==void 0&&y!=null&&d(e,["parameters","negativePrompt"],y);const p=f(n,["enhancePrompt"]);if(e!==void 0&&p!=null&&d(e,["parameters","enhancePrompt"],p),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const T=f(n,["lastFrame"]);e!==void 0&&T!=null&&d(e,["instances[0]","lastFrame"],_f(T));const E=f(n,["referenceImages"]);if(e!==void 0&&E!=null){let S=E;Array.isArray(S)&&(S=S.map(w=>R2(w))),d(e,["instances[0]","referenceImages"],S)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function Ib(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);const r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const l=f(n,["fps"]);e!==void 0&&l!=null&&d(e,["parameters","fps"],l);const c=f(n,["durationSeconds"]);e!==void 0&&c!=null&&d(e,["parameters","durationSeconds"],c);const m=f(n,["seed"]);e!==void 0&&m!=null&&d(e,["parameters","seed"],m);const y=f(n,["aspectRatio"]);e!==void 0&&y!=null&&d(e,["parameters","aspectRatio"],y);const p=f(n,["resolution"]);e!==void 0&&p!=null&&d(e,["parameters","resolution"],p);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&d(e,["parameters","personGeneration"],T);const E=f(n,["pubsubTopic"]);e!==void 0&&E!=null&&d(e,["parameters","pubsubTopic"],E);const S=f(n,["negativePrompt"]);e!==void 0&&S!=null&&d(e,["parameters","negativePrompt"],S);const w=f(n,["enhancePrompt"]);e!==void 0&&w!=null&&d(e,["parameters","enhancePrompt"],w);const G=f(n,["generateAudio"]);e!==void 0&&G!=null&&d(e,["parameters","generateAudio"],G);const B=f(n,["lastFrame"]);e!==void 0&&B!=null&&d(e,["instances[0]","lastFrame"],si(B));const J=f(n,["referenceImages"]);if(e!==void 0&&J!=null){let ee=J;Array.isArray(ee)&&(ee=ee.map(le=>w2(le))),d(e,["instances[0]","referenceImages"],ee)}const j=f(n,["mask"]);e!==void 0&&j!=null&&d(e,["instances[0]","mask"],I2(j));const se=f(n,["compressionQuality"]);return e!==void 0&&se!=null&&d(e,["parameters","compressionQuality"],se),t}function Rb(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const s=f(n,["metadata"]);s!=null&&d(e,["metadata"],s);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&d(e,["response"],xb(c)),e}function wb(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const s=f(n,["metadata"]);s!=null&&d(e,["metadata"],s);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["response"]);return c!=null&&d(e,["response"],Db(c)),e}function Nb(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Ke(n,s));const r=f(e,["prompt"]);r!=null&&d(t,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&d(t,["instances[0]","image"],_f(l));const c=f(e,["video"]);c!=null&&d(t,["instances[0]","video"],PS(c));const m=f(e,["source"]);m!=null&&bb(m,t);const y=f(e,["config"]);return y!=null&&Cb(y,t),t}function Mb(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Ke(n,s));const r=f(e,["prompt"]);r!=null&&d(t,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&d(t,["instances[0]","image"],si(l));const c=f(e,["video"]);c!=null&&d(t,["instances[0]","video"],US(c));const m=f(e,["source"]);m!=null&&Vb(m,t);const y=f(e,["config"]);return y!=null&&Ib(y,t),t}function xb(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>Lb(c))),d(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&d(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function Db(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>kb(c))),d(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&d(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function bb(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],_f(r));const l=f(n,["video"]);return e!==void 0&&l!=null&&d(e,["instances[0]","video"],PS(l)),t}function Vb(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],si(r));const l=f(n,["video"]);return e!==void 0&&l!=null&&d(e,["instances[0]","video"],US(l)),t}function Pb(n){const e={},t=f(n,["_self"]);t!=null&&d(e,["image"],Yb(t));const s=f(n,["raiFilteredReason"]);s!=null&&d(e,["raiFilteredReason"],s);const r=f(n,["_self"]);return r!=null&&d(e,["safetyAttributes"],xS(r)),e}function yf(n){const e={},t=f(n,["_self"]);t!=null&&d(e,["image"],MS(t));const s=f(n,["raiFilteredReason"]);s!=null&&d(e,["raiFilteredReason"],s);const r=f(n,["_self"]);r!=null&&d(e,["safetyAttributes"],DS(r));const l=f(n,["prompt"]);return l!=null&&d(e,["enhancedPrompt"],l),e}function Ub(n){const e={},t=f(n,["_self"]);t!=null&&d(e,["mask"],MS(t));const s=f(n,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),d(e,["labels"],r)}return e}function Lb(n){const e={},t=f(n,["video"]);return t!=null&&d(e,["video"],A2(t)),e}function kb(n){const e={},t=f(n,["_self"]);return t!=null&&d(e,["video"],C2(t)),e}function qb(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&d(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&d(e,["responseJsonSchema"],s);const r=f(n,["audioTimestamp"]);r!=null&&d(e,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&d(e,["candidateCount"],l);const c=f(n,["enableAffectiveDialog"]);c!=null&&d(e,["enableAffectiveDialog"],c);const m=f(n,["frequencyPenalty"]);m!=null&&d(e,["frequencyPenalty"],m);const y=f(n,["logprobs"]);y!=null&&d(e,["logprobs"],y);const p=f(n,["maxOutputTokens"]);p!=null&&d(e,["maxOutputTokens"],p);const T=f(n,["mediaResolution"]);T!=null&&d(e,["mediaResolution"],T);const E=f(n,["presencePenalty"]);E!=null&&d(e,["presencePenalty"],E);const S=f(n,["responseLogprobs"]);S!=null&&d(e,["responseLogprobs"],S);const w=f(n,["responseMimeType"]);w!=null&&d(e,["responseMimeType"],w);const G=f(n,["responseModalities"]);G!=null&&d(e,["responseModalities"],G);const B=f(n,["responseSchema"]);B!=null&&d(e,["responseSchema"],B);const J=f(n,["routingConfig"]);J!=null&&d(e,["routingConfig"],J);const j=f(n,["seed"]);j!=null&&d(e,["seed"],j);const se=f(n,["speechConfig"]);se!=null&&d(e,["speechConfig"],bS(se));const ee=f(n,["stopSequences"]);ee!=null&&d(e,["stopSequences"],ee);const le=f(n,["temperature"]);le!=null&&d(e,["temperature"],le);const fe=f(n,["thinkingConfig"]);fe!=null&&d(e,["thinkingConfig"],fe);const ue=f(n,["topK"]);ue!=null&&d(e,["topK"],ue);const D=f(n,["topP"]);if(D!=null&&d(e,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Ob(n,e){const t={},s=f(e,["model"]);return s!=null&&d(t,["_url","name"],Ke(n,s)),t}function Gb(n,e){const t={},s=f(e,["model"]);return s!=null&&d(t,["_url","name"],Ke(n,s)),t}function Bb(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&d(e,["enableWidget"],t),e}function Fb(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&d(e,["timeRangeFilter"],t),e}function Hb(n){const e={},t=f(n,["aspectRatio"]);t!=null&&d(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&d(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function zb(n){const e={},t=f(n,["aspectRatio"]);t!=null&&d(e,["aspectRatio"],t);const s=f(n,["imageSize"]);s!=null&&d(e,["imageSize"],s);const r=f(n,["outputMimeType"]);r!=null&&d(e,["imageOutputOptions","mimeType"],r);const l=f(n,["outputCompressionQuality"]);return l!=null&&d(e,["imageOutputOptions","compressionQuality"],l),e}function Yb(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&d(e,["imageBytes"],so(t));const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function MS(n){const e={},t=f(n,["gcsUri"]);t!=null&&d(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&d(e,["imageBytes"],so(s));const r=f(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function _f(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&d(e,["bytesBase64Encoded"],so(t));const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function si(n){const e={},t=f(n,["gcsUri"]);t!=null&&d(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&d(e,["bytesBase64Encoded"],so(s));const r=f(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Jb(n,e,t){const s={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&d(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&d(t,["_query","filter"],c);const m=f(e,["queryBase"]);return t!==void 0&&m!=null&&d(t,["_url","models_url"],ES(n,m)),s}function Kb(n,e,t){const s={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&d(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&d(t,["_query","filter"],c);const m=f(e,["queryBase"]);return t!==void 0&&m!=null&&d(t,["_url","models_url"],ES(n,m)),s}function Qb(n,e){const t={},s=f(e,["config"]);return s!=null&&Jb(n,s,t),t}function Xb(n,e){const t={},s=f(e,["config"]);return s!=null&&Kb(n,s,t),t}function $b(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=f(n,["_self"]);if(r!=null){let l=SS(r);Array.isArray(l)&&(l=l.map(c=>rm(c))),d(e,["models"],l)}return e}function Zb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=f(n,["_self"]);if(r!=null){let l=SS(r);Array.isArray(l)&&(l=l.map(c=>am(c))),d(e,["models"],l)}return e}function Wb(n){const e={},t=f(n,["maskMode"]);t!=null&&d(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&d(e,["maskClasses"],s);const r=f(n,["maskDilation"]);return r!=null&&d(e,["dilation"],r),e}function rm(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const s=f(n,["displayName"]);s!=null&&d(e,["displayName"],s);const r=f(n,["description"]);r!=null&&d(e,["description"],r);const l=f(n,["version"]);l!=null&&d(e,["version"],l);const c=f(n,["_self"]);c!=null&&d(e,["tunedModelInfo"],m2(c));const m=f(n,["inputTokenLimit"]);m!=null&&d(e,["inputTokenLimit"],m);const y=f(n,["outputTokenLimit"]);y!=null&&d(e,["outputTokenLimit"],y);const p=f(n,["supportedGenerationMethods"]);p!=null&&d(e,["supportedActions"],p);const T=f(n,["temperature"]);T!=null&&d(e,["temperature"],T);const E=f(n,["maxTemperature"]);E!=null&&d(e,["maxTemperature"],E);const S=f(n,["topP"]);S!=null&&d(e,["topP"],S);const w=f(n,["topK"]);w!=null&&d(e,["topK"],w);const G=f(n,["thinking"]);return G!=null&&d(e,["thinking"],G),e}function am(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const s=f(n,["displayName"]);s!=null&&d(e,["displayName"],s);const r=f(n,["description"]);r!=null&&d(e,["description"],r);const l=f(n,["versionId"]);l!=null&&d(e,["version"],l);const c=f(n,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(S=>fb(S))),d(e,["endpoints"],E)}const m=f(n,["labels"]);m!=null&&d(e,["labels"],m);const y=f(n,["_self"]);y!=null&&d(e,["tunedModelInfo"],p2(y));const p=f(n,["defaultCheckpointId"]);p!=null&&d(e,["defaultCheckpointId"],p);const T=f(n,["checkpoints"]);if(T!=null){let E=T;Array.isArray(E)&&(E=E.map(S=>S)),d(e,["checkpoints"],E)}return e}function jb(n){const e={},t=f(n,["mediaResolution"]);t!=null&&d(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&d(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&d(e,["fileData"],db(l));const c=f(n,["functionCall"]);c!=null&&d(e,["functionCall"],hb(c));const m=f(n,["functionResponse"]);m!=null&&d(e,["functionResponse"],m);const y=f(n,["inlineData"]);y!=null&&d(e,["inlineData"],qD(y));const p=f(n,["text"]);p!=null&&d(e,["text"],p);const T=f(n,["thought"]);T!=null&&d(e,["thought"],T);const E=f(n,["thoughtSignature"]);E!=null&&d(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function e2(n){const e={},t=f(n,["productImage"]);return t!=null&&d(e,["image"],si(t)),e}function t2(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);const r=f(n,["baseSteps"]);e!==void 0&&r!=null&&d(e,["parameters","baseSteps"],r);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&d(e,["parameters","storageUri"],l);const c=f(n,["seed"]);e!==void 0&&c!=null&&d(e,["parameters","seed"],c);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&d(e,["parameters","safetySetting"],m);const y=f(n,["personGeneration"]);e!==void 0&&y!=null&&d(e,["parameters","personGeneration"],y);const p=f(n,["addWatermark"]);e!==void 0&&p!=null&&d(e,["parameters","addWatermark"],p);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&d(e,["parameters","outputOptions","mimeType"],T);const E=f(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&d(e,["parameters","outputOptions","compressionQuality"],E);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&d(e,["parameters","enhancePrompt"],S);const w=f(n,["labels"]);return e!==void 0&&w!=null&&d(e,["labels"],w),t}function n2(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Ke(n,s));const r=f(e,["source"]);r!=null&&s2(r,t);const l=f(e,["config"]);return l!=null&&t2(l,t),t}function i2(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>yf(r))),d(e,["generatedImages"],s)}return e}function s2(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const r=f(n,["personImage"]);e!==void 0&&r!=null&&d(e,["instances[0]","personImage","image"],si(r));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(m=>e2(m))),d(e,["instances[0]","productImages"],c)}return t}function o2(n){const e={},t=f(n,["referenceImage"]);t!=null&&d(e,["referenceImage"],si(t));const s=f(n,["referenceId"]);s!=null&&d(e,["referenceId"],s);const r=f(n,["referenceType"]);r!=null&&d(e,["referenceType"],r);const l=f(n,["maskImageConfig"]);l!=null&&d(e,["maskImageConfig"],Wb(l));const c=f(n,["controlImageConfig"]);c!=null&&d(e,["controlImageConfig"],YD(c));const m=f(n,["styleImageConfig"]);m!=null&&d(e,["styleImageConfig"],m);const y=f(n,["subjectImageConfig"]);return y!=null&&d(e,["subjectImageConfig"],y),e}function xS(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&d(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&d(e,["scores"],s);const r=f(n,["contentType"]);return r!=null&&d(e,["contentType"],r),e}function DS(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&d(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&d(e,["scores"],s);const r=f(n,["contentType"]);return r!=null&&d(e,["contentType"],r),e}function r2(n){const e={},t=f(n,["category"]);if(t!=null&&d(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&d(e,["threshold"],s),e}function a2(n){const e={},t=f(n,["image"]);return t!=null&&d(e,["image"],si(t)),e}function l2(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&d(e,["parameters","mode"],s);const r=f(n,["maxPredictions"]);e!==void 0&&r!=null&&d(e,["parameters","maxPredictions"],r);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&d(e,["parameters","confidenceThreshold"],l);const c=f(n,["maskDilation"]);e!==void 0&&c!=null&&d(e,["parameters","maskDilation"],c);const m=f(n,["binaryColorThreshold"]);e!==void 0&&m!=null&&d(e,["parameters","binaryColorThreshold"],m);const y=f(n,["labels"]);return e!==void 0&&y!=null&&d(e,["labels"],y),t}function u2(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Ke(n,s));const r=f(e,["source"]);r!=null&&f2(r,t);const l=f(e,["config"]);return l!=null&&l2(l,t),t}function c2(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>Ub(r))),d(e,["generatedMasks"],s)}return e}function f2(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],si(r));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&d(e,["instances[0]","scribble"],a2(l)),t}function bS(n){const e={},t=f(n,["languageCode"]);t!=null&&d(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&d(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function d2(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&d(e,["functionCallingConfig"],mb(t));const s=f(n,["retrievalConfig"]);return s!=null&&d(e,["retrievalConfig"],s),e}function h2(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(E=>E)),d(e,["functionDeclarations"],T)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&d(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&d(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&d(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const m=f(n,["googleMaps"]);m!=null&&d(e,["googleMaps"],Bb(m));const y=f(n,["googleSearch"]);y!=null&&d(e,["googleSearch"],Fb(y));const p=f(n,["urlContext"]);return p!=null&&d(e,["urlContext"],p),e}function VS(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>pb(S))),d(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&d(e,["retrieval"],s);const r=f(n,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);const l=f(n,["computerUse"]);if(l!=null&&d(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(n,["codeExecution"]);c!=null&&d(e,["codeExecution"],c);const m=f(n,["enterpriseWebSearch"]);m!=null&&d(e,["enterpriseWebSearch"],m);const y=f(n,["googleMaps"]);y!=null&&d(e,["googleMaps"],y);const p=f(n,["googleSearch"]);p!=null&&d(e,["googleSearch"],p);const T=f(n,["urlContext"]);return T!=null&&d(e,["urlContext"],T),e}function m2(n){const e={},t=f(n,["baseModel"]);t!=null&&d(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&d(e,["createTime"],s);const r=f(n,["updateTime"]);return r!=null&&d(e,["updateTime"],r),e}function p2(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&d(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&d(e,["createTime"],s);const r=f(n,["updateTime"]);return r!=null&&d(e,["updateTime"],r),e}function g2(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&d(e,["displayName"],s);const r=f(n,["description"]);e!==void 0&&r!=null&&d(e,["description"],r);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&d(e,["defaultCheckpointId"],l),t}function y2(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&d(e,["displayName"],s);const r=f(n,["description"]);e!==void 0&&r!=null&&d(e,["description"],r);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&d(e,["defaultCheckpointId"],l),t}function _2(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","name"],Ke(n,s));const r=f(e,["config"]);return r!=null&&g2(r,t),t}function T2(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Ke(n,s));const r=f(e,["config"]);return r!=null&&y2(r,t),t}function v2(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);const r=f(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&d(e,["parameters","safetySetting"],r);const l=f(n,["personGeneration"]);e!==void 0&&l!=null&&d(e,["parameters","personGeneration"],l);const c=f(n,["includeRaiReason"]);e!==void 0&&c!=null&&d(e,["parameters","includeRaiReason"],c);const m=f(n,["outputMimeType"]);e!==void 0&&m!=null&&d(e,["parameters","outputOptions","mimeType"],m);const y=f(n,["outputCompressionQuality"]);e!==void 0&&y!=null&&d(e,["parameters","outputOptions","compressionQuality"],y);const p=f(n,["enhanceInputImage"]);e!==void 0&&p!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],p);const T=f(n,["imagePreservationFactor"]);e!==void 0&&T!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],T);const E=f(n,["labels"]);e!==void 0&&E!=null&&d(e,["labels"],E);const S=f(n,["numberOfImages"]);e!==void 0&&S!=null&&d(e,["parameters","sampleCount"],S);const w=f(n,["mode"]);return e!==void 0&&w!=null&&d(e,["parameters","mode"],w),t}function E2(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Ke(n,s));const r=f(e,["image"]);r!=null&&d(t,["instances[0]","image"],si(r));const l=f(e,["upscaleFactor"]);l!=null&&d(t,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(e,["config"]);return c!=null&&v2(c,t),t}function S2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>yf(l))),d(e,["generatedImages"],r)}return e}function A2(n){const e={},t=f(n,["uri"]);t!=null&&d(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&d(e,["videoBytes"],so(s));const r=f(n,["encoding"]);return r!=null&&d(e,["mimeType"],r),e}function C2(n){const e={},t=f(n,["gcsUri"]);t!=null&&d(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&d(e,["videoBytes"],so(s));const r=f(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function I2(n){const e={},t=f(n,["image"]);t!=null&&d(e,["_self"],si(t));const s=f(n,["maskMode"]);return s!=null&&d(e,["maskMode"],s),e}function R2(n){const e={},t=f(n,["image"]);t!=null&&d(e,["image"],_f(t));const s=f(n,["referenceType"]);return s!=null&&d(e,["referenceType"],s),e}function w2(n){const e={},t=f(n,["image"]);t!=null&&d(e,["image"],si(t));const s=f(n,["referenceType"]);return s!=null&&d(e,["referenceType"],s),e}function PS(n){const e={},t=f(n,["uri"]);t!=null&&d(e,["uri"],t);const s=f(n,["videoBytes"]);s!=null&&d(e,["encodedVideo"],so(s));const r=f(n,["mimeType"]);return r!=null&&d(e,["encoding"],r),e}function US(n){const e={},t=f(n,["uri"]);t!=null&&d(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&d(e,["bytesBase64Encoded"],so(s));const r=f(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N2="Content-Type",M2="X-Server-Timeout",x2="User-Agent",lm="x-goog-api-client",D2="1.30.0",b2=`google-genai-sdk/${D2}`,V2="v1beta1",P2="v1beta",uE=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class U2{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:V2,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:P2,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const r=[this.getRequestUrlInternal(t)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,m]of Object.entries(e.queryParams))r.searchParams.append(c,String(m));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?s[r]=Object.assign(Object.assign({},s[r]),l):l!==void 0&&(s[r]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,r){if(t&&t.timeout||r){const l=new AbortController,c=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const m=setTimeout(()=>l.abort(),t.timeout);m&&typeof m.unref=="function"&&m.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=c}return t&&t.extraBody!==null&&L2(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await cE(r),new im(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await cE(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return Hr(this,arguments,function*(){const r=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";for(;;){const{done:m,value:y}=yield ut(r.read());if(m){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=l.decode(y,{stream:!0});try{const E=JSON.parse(p);if("error"in E){const S=JSON.parse(JSON.stringify(E.error)),w=S.status,G=S.code,B=`got status: ${w}. ${JSON.stringify(E)}`;if(G>=400&&G<600)throw new pf({message:B,status:G})}}catch(E){if(E.name==="ApiError")throw E}c+=p;let T=c.match(uE);for(;T;){const E=T[1];try{const S=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ut(new im(S)),c=c.slice(T[0].length),T=c.match(uE)}catch(S){throw new Error(`exception parsing stream chunk ${E}. ${S}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=b2+" "+this.clientOptions.userAgentExtra;return e[x2]=t,e[lm]=t,e[N2]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))s.append(r,l);e.timeout&&e.timeout>0&&s.append(M2,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);r.sizeBytes=String(c.size);const m=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:c.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=m;const y={file:r},p=this.getFileName(e),T=de("upload/v1beta/files",y._url),E=await this.fetchUploadUrl(T,r.sizeBytes,r.mimeType,p,y,t==null?void 0:t.httpOptions);return l.upload(e,E,this)}async uploadFileToFileSearchStore(e,t,s){var r;const l=this.clientOptions.uploader,c=await l.stat(t),m=String(c.size),y=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:c.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,T=this.getFileName(t),E={};s!=null&&s.customMetadata&&(E.customMetadata=s.customMetadata),s!=null&&s.chunkingConfig&&(E.chunkingConfig=s.chunkingConfig);const S=await this.fetchUploadUrl(p,m,y,T,E,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,r,l,c){var m;let y={};c?y=c:y={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const p=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:y});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const T=(m=p==null?void 0:p.headers)===null||m===void 0?void 0:m["x-goog-upload-url"];if(T===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return T}}async function cE(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(s);throw t>=400&&t<600?new pf({message:r,status:t}):new Error(r)}}function L2(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const m=Object.assign({},l);for(const y in c)if(Object.prototype.hasOwnProperty.call(c,y)){const p=c[y],T=m[y];p&&typeof p=="object"&&!Array.isArray(p)&&T&&typeof T=="object"&&!Array.isArray(T)?m[y]=s(T,p):(T&&p&&typeof T!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof T}, New type: ${typeof p}. Overwriting.`),m[y]=p)}return m}const r=s(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const k2="mcp_used/unknown";let q2=!1;function LS(n){for(const e of n)if(O2(e)||typeof e=="object"&&"inputSchema"in e)return!0;return q2}function kS(n){var e;const t=(e=n[lm])!==null&&e!==void 0?e:"";n[lm]=(t+` ${k2}`).trimStart()}function O2(n){return n!==null&&typeof n=="object"&&n instanceof sp}function G2(n,e=100){return Hr(this,arguments,function*(){let s,r=0;for(;r<e;){const l=yield ut(n.listTools({cursor:s}));for(const c of l.tools)yield yield ut(c),r++;if(!l.nextCursor)break;s=l.nextCursor}})}class sp{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new sp(e,t)}async initialize(){var e,t,s,r;if(this.mcpTools.length>0)return;const l={},c=[];for(const T of this.mcpClients)try{for(var m=!0,y=(t=void 0,Cl(G2(T))),p;p=await y.next(),e=p.done,!e;m=!0){r=p.value,m=!1;const E=r;c.push(E);const S=E.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=T}}catch(E){t={error:E}}finally{try{!m&&!e&&(s=y.return)&&await s.call(y)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),bM(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await r.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function B2(n,e,t){const s=new CM;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(s,r),e(s)}class F2{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=Y2(this.apiClient.getDefaultHeaders()),m=this.apiClient.getApiKey(),y=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${m}`;let p=()=>{};const T=new Promise(ee=>{p=ee}),E=e.callbacks,S=function(){p({})},w=this.apiClient,G={onopen:S,onmessage:ee=>{B2(w,E.onmessage,ee)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(ee){},onclose:(s=E==null?void 0:E.onclose)!==null&&s!==void 0?s:function(ee){}},B=this.webSocketFactory.create(y,z2(c),G);B.connect(),await T;const se={setup:{model:Ke(this.apiClient,e.model)}};return B.send(JSON.stringify(se)),new H2(B,this.apiClient)}}class H2{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=MD(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=ND(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(qr.PLAY)}pause(){this.sendPlaybackControl(qr.PAUSE)}stop(){this.sendPlaybackControl(qr.STOP)}resetContext(){this.sendPlaybackControl(qr.RESET_CONTEXT)}close(){this.conn.close()}}function z2(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function Y2(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const J2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function K2(n,e,t){const s=new AM;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const c=bD(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class Q2{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new F2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,r,l,c,m;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let T;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&LS(e.config.tools)&&kS(E);const S=W2(E);if(this.apiClient.isVertexAI())T=`${y}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,T);else{const N=this.apiClient.getApiKey();let L="BidiGenerateContent",U="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",U="access_token"),T=`${y}/ws/google.ai.generativelanguage.${p}.GenerativeService.${L}?${U}=${N}`}let w=()=>{};const G=new Promise(N=>{w=N}),B=e.callbacks,J=function(){var N;(N=B==null?void 0:B.onopen)===null||N===void 0||N.call(B),w({})},j=this.apiClient,se={onopen:J,onmessage:N=>{K2(j,B.onmessage,N)},onerror:(t=B==null?void 0:B.onerror)!==null&&t!==void 0?t:function(N){},onclose:(s=B==null?void 0:B.onclose)!==null&&s!==void 0?s:function(N){}},ee=this.webSocketFactory.create(T,Z2(S),se);ee.connect(),await G;let le=Ke(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&le.startsWith("publishers/")){const N=this.apiClient.getProject(),L=this.apiClient.getLocation();le=`projects/${N}/locations/${L}/`+le}let fe={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Qc.AUDIO]}:e.config.responseModalities=[Qc.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ue=(m=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&m!==void 0?m:[],D=[];for(const N of ue)if(this.isCallableTool(N)){const L=N;D.push(await L.tool())}else D.push(N);D.length>0&&(e.config.tools=D);const M={model:le,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?fe=wD(this.apiClient,M):fe=RD(this.apiClient,M),delete fe.config,ee.send(JSON.stringify(fe)),new $2(ee,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const X2={turnComplete:!0};class $2{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=Hn(t.turns),e.isVertexAI()||(s=s.map(r=>gf(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(J2)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},X2),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:DD(e)}:t={realtimeInput:xD(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function Z2(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function W2(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fE=10;function dE(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(zr(c)){r=!0;break}if(!r)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function zr(n){return"callTool"in n&&typeof n.callTool=="function"}function j2(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>zr(r)))!==null&&s!==void 0?s:!1}function hE(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,r)=>{if(zr(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(r)}),t}function mE(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eV extends as{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,r,l,c,m;const y=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!j2(t)||dE(t.config))return await this.generateContentInternal(y);const p=hE(t);if(p.length>0){const B=p.map(J=>`tools[${J}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${B}.`)}let T,E;const S=Hn(y.contents),w=(l=(r=(s=y.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:fE;let G=0;for(;G<w&&(T=await this.generateContentInternal(y),!(!T.functionCalls||T.functionCalls.length===0));){const B=T.candidates[0].content,J=[];for(const j of(m=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&m!==void 0?m:[])if(zr(j)){const ee=await j.callTool(T.functionCalls);J.push(...ee)}G++,E={role:"user",parts:J},y.contents=Hn(y.contents),y.contents.push(B),y.contents.push(E),mE(y.config)&&(S.push(B),S.push(E))}return mE(y.config)&&(T.automaticFunctionCallingHistory=S),T},this.generateContentStream=async t=>{var s,r,l,c,m;if(this.maybeMoveToResponseJsonSchem(t),dE(t.config)){const E=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(E)}const y=hE(t);if(y.length>0){const E=y.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(l=(r=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,T=(m=(c=t==null?void 0:t.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||m===void 0?void 0:m.disable;if(p&&!T)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var r;let l;const c=[];if(s!=null&&s.generatedImages)for(const y of s.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((r=y==null?void 0:y.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=y==null?void 0:y.safetyAttributes:c.push(y);let m;return l?m={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:m={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},m}),this.list=async t=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Ho(rs.PAGED_ITEM_MODELS,m=>this.listInternal(m),await this.listInternal(c),c)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var s,r,l,c,m,y;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(l=t.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((y=(m=t.source)===null||m===void 0?void 0:m.video)===null||y===void 0)&&y.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async y=>zr(y)?await y.tool():y)),m={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(m.config.tools=c,e.config&&e.config.tools&&LS(e.config.tools)){const y=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},y);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),kS(p),m.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return m}async initAfcToolsMap(e){var t,s,r;const l=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(zr(c)){const m=c,y=await m.tool();for(const p of(r=y.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,m)}}return l}async processAfcStream(e){var t,s,r;const l=(r=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:fE;let c=!1,m=0;const y=await this.initAfcToolsMap(e);return(function(p,T,E){var S,w;return Hr(this,arguments,function*(){for(var G,B,J,j;m<l;){c&&(m++,c=!1);const fe=yield ut(p.processParamsMaybeAddMcpUsage(E)),ue=yield ut(p.generateContentStreamInternal(fe)),D=[],M=[];try{for(var se=!0,ee=(B=void 0,Cl(ue)),le;le=yield ut(ee.next()),G=le.done,!G;se=!0){j=le.value,se=!1;const N=j;if(yield yield ut(N),N.candidates&&(!((S=N.candidates[0])===null||S===void 0)&&S.content)){M.push(N.candidates[0].content);for(const L of(w=N.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(m<l&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(T.has(L.functionCall.name)){const U=yield ut(T.get(L.functionCall.name).callTool([L.functionCall]));D.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${T.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(N){B={error:N}}finally{try{!se&&!G&&(J=ee.return)&&(yield ut(J.call(ee)))}finally{if(B)throw B.error}}if(D.length>0){c=!0;const N=new ml;N.candidates=[{content:{role:"user",parts:D}}],yield yield ut(N);const L=[];L.push(...M),L.push({role:"user",parts:D});const U=Hn(E.contents).concat(L);E.contents=U}else break}})})(this,y,e)}async generateContentInternal(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=rE(this.apiClient,e);return m=de("{model}:generateContent",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=lE(T),S=new ml;return Object.assign(S,E),S})}else{const p=oE(this.apiClient,e);return m=de("{model}:generateContent",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=aE(T),S=new ml;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=rE(this.apiClient,e);return m=de("{model}:streamGenerateContent?alt=sse",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(E){return Hr(this,arguments,function*(){var S,w,G,B;try{for(var J=!0,j=Cl(E),se;se=yield ut(j.next()),S=se.done,!S;J=!0){B=se.value,J=!1;const ee=B,le=lE(yield ut(ee.json()));le.sdkHttpResponse={headers:ee.headers};const fe=new ml;Object.assign(fe,le),yield yield ut(fe)}}catch(ee){w={error:ee}}finally{try{!J&&!S&&(G=j.return)&&(yield ut(G.call(j)))}finally{if(w)throw w.error}}})})}else{const p=oE(this.apiClient,e);return m=de("{model}:streamGenerateContent?alt=sse",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(E){return Hr(this,arguments,function*(){var S,w,G,B;try{for(var J=!0,j=Cl(E),se;se=yield ut(j.next()),S=se.done,!S;J=!0){B=se.value,J=!1;const ee=B,le=aE(yield ut(ee.json()));le.sdkHttpResponse={headers:ee.headers};const fe=new ml;Object.assign(fe,le),yield yield ut(fe)}}catch(ee){w={error:ee}}finally{try{!J&&!S&&(G=j.return)&&(yield ut(G.call(j)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=lb(this.apiClient,e);return m=de("{model}:predict",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=cb(T),S=new Hv;return Object.assign(S,E),S})}else{const p=ab(this.apiClient,e);return m=de("{model}:batchEmbedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=ub(T),S=new Hv;return Object.assign(S,E),S})}}async generateImagesInternal(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=Eb(this.apiClient,e);return m=de("{model}:predict",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=Ab(T),S=new zv;return Object.assign(S,E),S})}else{const p=vb(this.apiClient,e);return m=de("{model}:predict",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=Sb(T),S=new zv;return Object.assign(S,E),S})}}async editImageInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const m=ib(this.apiClient,e);return l=de("{model}:predict",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),r.then(y=>{const p=sb(y),T=new dM;return Object.assign(T,p),T})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const m=E2(this.apiClient,e);return l=de("{model}:predict",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),r.then(y=>{const p=S2(y),T=new hM;return Object.assign(T,p),T})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const m=n2(this.apiClient,e);return l=de("{model}:predict",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const p=i2(y),T=new mM;return Object.assign(T,p),T})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const m=u2(this.apiClient,e);return l=de("{model}:predict",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const p=c2(y),T=new pM;return Object.assign(T,p),T})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=Gb(this.apiClient,e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>am(T))}else{const p=Ob(this.apiClient,e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>rm(T))}}async listInternal(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=Xb(this.apiClient,e);return m=de("{models_url}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=Zb(T),S=new Yv;return Object.assign(S,E),S})}else{const p=Qb(this.apiClient,e);return m=de("{models_url}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=$b(T),S=new Yv;return Object.assign(S,E),S})}}async update(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=T2(this.apiClient,e);return m=de("{model}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>am(T))}else{const p=_2(this.apiClient,e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>rm(T))}}async delete(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=jD(this.apiClient,e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=tb(T),S=new Jv;return Object.assign(S,E),S})}else{const p=WD(this.apiClient,e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=eb(T),S=new Jv;return Object.assign(S,E),S})}}async countTokens(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=XD(this.apiClient,e);return m=de("{model}:countTokens",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=ZD(T),S=new Kv;return Object.assign(S,E),S})}else{const p=QD(this.apiClient,e);return m=de("{model}:countTokens",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=$D(T),S=new Kv;return Object.assign(S,E),S})}}async computeTokens(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const m=BD(this.apiClient,e);return l=de("{model}:computeTokens",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),r.then(y=>{const p=FD(y),T=new gM;return Object.assign(T,p),T})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=Mb(this.apiClient,e);return m=de("{model}:predictLongRunning",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>{const E=wb(T),S=new Xc;return Object.assign(S,E),S})}else{const p=Nb(this.apiClient,e);return m=de("{model}:predictLongRunning",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>{const E=Rb(T),S=new Xc;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tV extends as{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=rM(e);return m=de("{operationName}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c}else{const p=oM(e);return m=de("{operationName}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const m=W1(e);return l=de("{resourceName}:fetchPredictOperation",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nV(n){const e={},t=f(n,["data"]);if(t!=null&&d(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function iV(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>dV(l))),d(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&d(e,["role"],s),e}function sV(n,e,t){const s={},r=f(e,["expireTime"]);t!==void 0&&r!=null&&d(t,["expireTime"],r);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&d(t,["newSessionExpireTime"],l);const c=f(e,["uses"]);t!==void 0&&c!=null&&d(t,["uses"],c);const m=f(e,["liveConnectConstraints"]);t!==void 0&&m!=null&&d(t,["bidiGenerateContentSetup"],fV(n,m));const y=f(e,["lockAdditionalFields"]);return t!==void 0&&y!=null&&d(t,["fieldMask"],y),s}function oV(n,e){const t={},s=f(e,["config"]);return s!=null&&d(t,["config"],sV(n,s,t)),t}function rV(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&d(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function aV(n){const e={},t=f(n,["id"]);t!=null&&d(e,["id"],t);const s=f(n,["args"]);s!=null&&d(e,["args"],s);const r=f(n,["name"]);if(r!=null&&d(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function lV(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&d(e,["enableWidget"],t),e}function uV(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&d(e,["timeRangeFilter"],t),e}function cV(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig"],s);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const m=f(n,["topK"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","topK"],m);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","maxOutputTokens"],y);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","mediaResolution"],p);const T=f(n,["seed"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","seed"],T);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","speechConfig"],ip(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&d(e,["setup","generationConfig","thinkingConfig"],S);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],w);const G=f(n,["systemInstruction"]);e!==void 0&&G!=null&&d(e,["setup","systemInstruction"],iV(tn(G)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let ue=ra(B);Array.isArray(ue)&&(ue=ue.map(D=>mV(oa(D)))),d(e,["setup","tools"],ue)}const J=f(n,["sessionResumption"]);e!==void 0&&J!=null&&d(e,["setup","sessionResumption"],hV(J));const j=f(n,["inputAudioTranscription"]);e!==void 0&&j!=null&&d(e,["setup","inputAudioTranscription"],j);const se=f(n,["outputAudioTranscription"]);e!==void 0&&se!=null&&d(e,["setup","outputAudioTranscription"],se);const ee=f(n,["realtimeInputConfig"]);e!==void 0&&ee!=null&&d(e,["setup","realtimeInputConfig"],ee);const le=f(n,["contextWindowCompression"]);e!==void 0&&le!=null&&d(e,["setup","contextWindowCompression"],le);const fe=f(n,["proactivity"]);return e!==void 0&&fe!=null&&d(e,["setup","proactivity"],fe),t}function fV(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["setup","model"],Ke(n,s));const r=f(e,["config"]);return r!=null&&d(t,["config"],cV(r,t)),t}function dV(n){const e={},t=f(n,["mediaResolution"]);t!=null&&d(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&d(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&d(e,["fileData"],rV(l));const c=f(n,["functionCall"]);c!=null&&d(e,["functionCall"],aV(c));const m=f(n,["functionResponse"]);m!=null&&d(e,["functionResponse"],m);const y=f(n,["inlineData"]);y!=null&&d(e,["inlineData"],nV(y));const p=f(n,["text"]);p!=null&&d(e,["text"],p);const T=f(n,["thought"]);T!=null&&d(e,["thought"],T);const E=f(n,["thoughtSignature"]);E!=null&&d(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function hV(n){const e={},t=f(n,["handle"]);if(t!=null&&d(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function mV(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(E=>E)),d(e,["functionDeclarations"],T)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&d(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&d(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&d(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const m=f(n,["googleMaps"]);m!=null&&d(e,["googleMaps"],lV(m));const y=f(n,["googleSearch"]);y!=null&&d(e,["googleSearch"],uV(y));const p=f(n,["urlContext"]);return p!=null&&d(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pV(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function gV(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=pV(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let m=[];r.length>0&&(m=r.map(p=>c.includes(p)?`generationConfig.${p}`:p));const y=[];l&&y.push(l),m.length>0&&y.push(...m),y.length>0?n.fieldMask=y.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class yV extends as{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const m=oV(this.apiClient,e);l=de("auth_tokens",m._url),c=m._query,delete m.config,delete m._url,delete m._query;const y=gV(m,e.config);return r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _V(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&d(e,["displayName"],s),t}function TV(n){const e={},t=f(n,["config"]);return t!=null&&_V(t,e),e}function vV(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&d(e,["_query","force"],s),t}function EV(n){const e={},t=f(n,["name"]);t!=null&&d(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&vV(s,e),e}function SV(n){const e={},t=f(n,["name"]);return t!=null&&d(e,["_url","name"],t),e}function AV(n,e){const t={},s=f(n,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["customMetadata"],l)}const r=f(n,["chunkingConfig"]);return e!==void 0&&r!=null&&d(e,["chunkingConfig"],r),t}function CV(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const s=f(n,["metadata"]);s!=null&&d(e,["metadata"],s);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["response"]);return c!=null&&d(e,["response"],RV(c)),e}function IV(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&d(e,["_url","file_search_store_name"],t);const s=f(n,["fileName"]);s!=null&&d(e,["fileName"],s);const r=f(n,["config"]);return r!=null&&AV(r,e),e}function RV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&d(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function wV(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),t}function NV(n){const e={},t=f(n,["config"]);return t!=null&&wV(t,e),e}function MV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=f(n,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["fileSearchStores"],l)}return e}function xV(n,e){const t={},s=f(n,["mimeType"]);e!==void 0&&s!=null&&d(e,["mimeType"],s);const r=f(n,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const l=f(n,["customMetadata"]);if(e!==void 0&&l!=null){let m=l;Array.isArray(m)&&(m=m.map(y=>y)),d(e,["customMetadata"],m)}const c=f(n,["chunkingConfig"]);return e!==void 0&&c!=null&&d(e,["chunkingConfig"],c),t}function DV(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&d(e,["_url","file_search_store_name"],t);const s=f(n,["config"]);return s!=null&&xV(s,e),e}function bV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VV(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&d(e,["_query","force"],s),t}function PV(n){const e={},t=f(n,["name"]);t!=null&&d(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&VV(s,e),e}function UV(n){const e={},t=f(n,["name"]);return t!=null&&d(e,["_url","name"],t),e}function LV(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),t}function kV(n){const e={},t=f(n,["parent"]);t!=null&&d(e,["_url","parent"],t);const s=f(n,["config"]);return s!=null&&LV(s,e),e}function qV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=f(n,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OV extends as{constructor(e){super(),this.apiClient=e,this.list=async t=>new Ho(rs.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=UV(e);return l=de("{name}",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var t,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=PV(e);r=de("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=kV(e);return l=de("{parent}/documents",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const p=qV(y),T=new yM;return Object.assign(T,p),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GV extends as{constructor(e,t=new OV(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new Ho(rs.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=TV(e);return l=de("fileSearchStores",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async get(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=SV(e);return l=de("{name}",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var t,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=EV(e);r=de("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=NV(e);return l=de("fileSearchStores",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const p=MV(y),T=new _M;return Object.assign(T,p),T})}}async uploadToFileSearchStoreInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=DV(e);return l=de("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const p=bV(y),T=new TM;return Object.assign(T,p),T})}}async importFile(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=IV(e);return l=de("{file_search_store_name}:importFile",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const p=CV(y),T=new Wm;return Object.assign(T,p),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BV(n,e){const t={},s=f(n,["name"]);return s!=null&&d(t,["_url","name"],s),t}function FV(n,e){const t={},s=f(n,["name"]);return s!=null&&d(t,["_url","name"],s),t}function HV(n,e,t){const s={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&d(e,["displayName"],r),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&d(e,["tuningTask","hyperparameters","epochCount"],l);const c=f(n,["learningRateMultiplier"]);if(c!=null&&d(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const m=f(n,["batchSize"]);e!==void 0&&m!=null&&d(e,["tuningTask","hyperparameters","batchSize"],m);const y=f(n,["learningRate"]);if(e!==void 0&&y!=null&&d(e,["tuningTask","hyperparameters","learningRate"],y),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function zV(n,e,t){const s={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const w=f(n,["validationDataset"]);e!==void 0&&w!=null&&d(e,["supervisedTuningSpec"],pE(w))}else if(r==="PREFERENCE_TUNING"){const w=f(n,["validationDataset"]);e!==void 0&&w!=null&&d(e,["preferenceOptimizationSpec"],pE(w))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&d(e,["tunedModelDisplayName"],l);const c=f(n,["description"]);e!==void 0&&c!=null&&d(e,["description"],c);let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const w=f(n,["epochCount"]);e!==void 0&&w!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(m==="PREFERENCE_TUNING"){const w=f(n,["epochCount"]);e!==void 0&&w!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let y=f(t,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const w=f(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(y==="PREFERENCE_TUNING"){const w=f(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const w=f(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(p==="PREFERENCE_TUNING"){const w=f(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let T=f(t,["config","method"]);if(T===void 0&&(T="SUPERVISED_FINE_TUNING"),T==="SUPERVISED_FINE_TUNING"){const w=f(n,["adapterSize"]);e!==void 0&&w!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(T==="PREFERENCE_TUNING"){const w=f(n,["adapterSize"]);e!==void 0&&w!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=f(n,["labels"]);e!==void 0&&E!=null&&d(e,["labels"],E);const S=f(n,["beta"]);return e!==void 0&&S!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),s}function YV(n,e){const t={},s=f(n,["baseModel"]);s!=null&&d(t,["baseModel"],s);const r=f(n,["preTunedModel"]);r!=null&&d(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&nP(l);const c=f(n,["config"]);return c!=null&&HV(c,t),t}function JV(n,e){const t={},s=f(n,["baseModel"]);s!=null&&d(t,["baseModel"],s);const r=f(n,["preTunedModel"]);r!=null&&d(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&iP(l,t,e);const c=f(n,["config"]);return c!=null&&zV(c,t,e),t}function KV(n,e){const t={},s=f(n,["name"]);return s!=null&&d(t,["_url","name"],s),t}function QV(n,e){const t={},s=f(n,["name"]);return s!=null&&d(t,["_url","name"],s),t}function XV(n,e,t){const s={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&d(e,["_query","pageToken"],l);const c=f(n,["filter"]);return e!==void 0&&c!=null&&d(e,["_query","filter"],c),s}function $V(n,e,t){const s={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&d(e,["_query","pageToken"],l);const c=f(n,["filter"]);return e!==void 0&&c!=null&&d(e,["_query","filter"],c),s}function ZV(n,e){const t={},s=f(n,["config"]);return s!=null&&XV(s,t),t}function WV(n,e){const t={},s=f(n,["config"]);return s!=null&&$V(s,t),t}function jV(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&d(t,["sdkHttpResponse"],s);const r=f(n,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const l=f(n,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(m=>qS(m))),d(t,["tuningJobs"],c)}return t}function eP(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&d(t,["sdkHttpResponse"],s);const r=f(n,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const l=f(n,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(m=>um(m))),d(t,["tuningJobs"],c)}return t}function tP(n,e){const t={},s=f(n,["name"]);s!=null&&d(t,["model"],s);const r=f(n,["name"]);return r!=null&&d(t,["endpoint"],r),t}function nP(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=f(n,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),d(t,["examples","examples"],r)}return t}function iP(n,e,t){const s={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=f(n,["gcsUri"]);e!==void 0&&c!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=f(n,["gcsUri"]);e!==void 0&&c!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=f(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=f(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function qS(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&d(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&d(t,["name"],r);const l=f(n,["state"]);l!=null&&d(t,["state"],TS(l));const c=f(n,["createTime"]);c!=null&&d(t,["createTime"],c);const m=f(n,["tuningTask","startTime"]);m!=null&&d(t,["startTime"],m);const y=f(n,["tuningTask","completeTime"]);y!=null&&d(t,["endTime"],y);const p=f(n,["updateTime"]);p!=null&&d(t,["updateTime"],p);const T=f(n,["description"]);T!=null&&d(t,["description"],T);const E=f(n,["baseModel"]);E!=null&&d(t,["baseModel"],E);const S=f(n,["_self"]);return S!=null&&d(t,["tunedModel"],tP(S)),t}function um(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&d(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&d(t,["name"],r);const l=f(n,["state"]);l!=null&&d(t,["state"],TS(l));const c=f(n,["createTime"]);c!=null&&d(t,["createTime"],c);const m=f(n,["startTime"]);m!=null&&d(t,["startTime"],m);const y=f(n,["endTime"]);y!=null&&d(t,["endTime"],y);const p=f(n,["updateTime"]);p!=null&&d(t,["updateTime"],p);const T=f(n,["error"]);T!=null&&d(t,["error"],T);const E=f(n,["description"]);E!=null&&d(t,["description"],E);const S=f(n,["baseModel"]);S!=null&&d(t,["baseModel"],S);const w=f(n,["tunedModel"]);w!=null&&d(t,["tunedModel"],w);const G=f(n,["preTunedModel"]);G!=null&&d(t,["preTunedModel"],G);const B=f(n,["supervisedTuningSpec"]);B!=null&&d(t,["supervisedTuningSpec"],B);const J=f(n,["preferenceOptimizationSpec"]);J!=null&&d(t,["preferenceOptimizationSpec"],J);const j=f(n,["tuningDataStats"]);j!=null&&d(t,["tuningDataStats"],j);const se=f(n,["encryptionSpec"]);se!=null&&d(t,["encryptionSpec"],se);const ee=f(n,["partnerModelTuningSpec"]);ee!=null&&d(t,["partnerModelTuningSpec"],ee);const le=f(n,["customBaseModel"]);le!=null&&d(t,["customBaseModel"],le);const fe=f(n,["experiment"]);fe!=null&&d(t,["experiment"],fe);const ue=f(n,["labels"]);ue!=null&&d(t,["labels"],ue);const D=f(n,["outputUri"]);D!=null&&d(t,["outputUri"],D);const M=f(n,["pipelineJob"]);M!=null&&d(t,["pipelineJob"],M);const N=f(n,["serviceAccount"]);N!=null&&d(t,["serviceAccount"],N);const L=f(n,["tunedModelDisplayName"]);L!=null&&d(t,["tunedModelDisplayName"],L);const U=f(n,["veoTuningSpec"]);return U!=null&&d(t,["veoTuningSpec"],U),t}function sP(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&d(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&d(t,["name"],r);const l=f(n,["metadata"]);l!=null&&d(t,["metadata"],l);const c=f(n,["done"]);c!=null&&d(t,["done"],c);const m=f(n,["error"]);return m!=null&&d(t,["error"],m),t}function pE(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&d(t,["validationDatasetUri"],s);const r=f(n,["vertexDatasetResource"]);return r!=null&&d(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oP extends as{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Ho(rs.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),l=await this.tuneMldevInternal(r);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:nm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=QV(e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>um(T))}else{const p=KV(e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>qS(T))}}async listInternal(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=WV(e);return m=de("tuningJobs",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=eP(T),S=new Qv;return Object.assign(S,E),S})}else{const p=ZV(e);return m=de("tunedModels",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=jV(T),S=new Qv;return Object.assign(S,E),S})}}async cancel(e){var t,s,r,l;let c="",m={};if(this.apiClient.isVertexAI()){const y=FV(e);c=de("{name}:cancel",y._url),m=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const y=BV(e);c=de("{name}:cancel",y._url),m=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const m=JV(e,e);return l=de("tuningJobs",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),r.then(y=>um(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=YV(e);return l=de("tunedModels",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),r.then(y=>sP(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rP{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const aP=1024*1024*8,lP=3,uP=1e3,cP=2,Zc="x-goog-upload-status";async function fP(n,e,t){var s;const r=await OS(n,e,t),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[Zc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function dP(n,e,t){var s;const r=await OS(n,e,t),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[Zc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=hS(l),m=new jm;return Object.assign(m,c),m}async function OS(n,e,t){var s,r;let l=0,c=0,m=new im(new Response),y="upload";for(l=n.size;c<l;){const p=Math.min(aP,l-c),T=n.slice(c,c+p);c+p>=l&&(y+=", finalize");let E=0,S=uP;for(;E<lP&&(m=await t.request({path:"",body:T,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":String(c),"Content-Length":String(p)}}}),!(!((s=m==null?void 0:m.headers)===null||s===void 0)&&s[Zc]));)E++,await mP(S),S=S*cP;if(c+=p,((r=m==null?void 0:m.headers)===null||r===void 0?void 0:r[Zc])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return m}async function hP(n){return{size:n.size,type:n.type}}function mP(n){return new Promise(e=>setTimeout(e,n))}class pP{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await fP(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await dP(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await hP(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gP{create(e,t,s){return new yP(e,t,s)}}class yP{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gE="x-goog-api-key";class _P{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(gE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(gE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TP="gl-node/";class vP{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=$1(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const r=new _P(this.apiKey);this.apiClient=new U2({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:TP+"web",uploader:new pP,downloader:new rP}),this.models=new eV(this.apiClient),this.live=new Q2(this.apiClient,r,new gP),this.batches=new Ix(this.apiClient),this.chats=new rD(this.models,this.apiClient),this.caches=new iD(this.apiClient),this.files=new gD(this.apiClient),this.operations=new tV(this.apiClient),this.authTokens=new yV(this.apiClient),this.tunings=new oP(this.apiClient),this.fileSearchStores=new GV(this.apiClient)}}const EP=["","","","","",""," "],SP=({user:n,onLogout:e,onUpdateUser:t})=>{const[s,r]=be.useState(U_()),[l,c]=be.useState(Fn().toLocaleTimeString("ar-EG")),[m,y]=be.useState(""),[p,T]=be.useState(!1),[E,S]=be.useState(!1),[w,G]=be.useState(!1),[B,J]=be.useState(""),[j,se]=be.useState(""),[ee,le]=be.useState(!1),[fe,ue]=be.useState(""),[D,M]=be.useState(""),[N,L]=be.useState(""),[U,q]=be.useState(!1),[V,ze]=be.useState(null),[st,$]=be.useState(n.streak??0),re=Fn(),pe=n.lastCheckIn&&Yr(new Date(n.lastCheckIn),re),De=pe&&n.attendanceLog?n.attendanceLog.find(ye=>Yr(new Date(ye.date),re)):null;be.useEffect(()=>{const ye=setInterval(()=>{r(U_()),c(Fn().toLocaleTimeString("ar-EG"))},1e4);return Be(),()=>clearInterval(ye)},[]);const Be=async()=>{if(!m){T(!0);try{const nn=await new vP({apiKey:"PLACEHOLDER_API_KEY"}).models.generateContent({model:"gemini-2.5-flash",contents:`         ${n.fullName.split(" ")[0]}    .    20 .`});y(nn.text)}catch(ye){console.error("AI error",ye)}finally{T(!1)}}},x=()=>{if(pe){alert("     .  .");return}G(!0)},X=async()=>{if(!B){alert("     ");return}if(!j.trim()){alert("   ");return}S(!0);try{const{newStreak:ye,resetDueToMiss:nn}=await z1(n.id);$(ye),ze(nn?"            .         1.":`    .    : ${ye}.`),G(!1),J(""),se("")}catch(ye){console.error("Error:",ye),ze("     .   .")}finally{S(!1)}},oe=async()=>{if(!confirm("     "))return;S(!0);const ye=await G1(n.id);ye?(t(ye),alert("!    .   .")):alert("   "),S(!1)},ce=async ye=>{if(ye.preventDefault(),!N.trim())return;q(!0);const nn=await F1(n.id,N);nn?(t(nn),L(""),alert("     ")):alert(" "),q(!1)},Se=async ye=>{if(ye.preventDefault(),fe.length<4){alert("     4   ");return}if(fe!==D){alert("   ");return}S(!0),await k1(n.id,fe)?(alert("    "),le(!1),ue(""),M("")):alert("     "),S(!1)},Ue=440-440*Math.min(n.streak/30*100,100)/100,mt=n.messages?[...n.messages].reverse():[];return b.jsxs("div",{className:"max-w-4xl mx-auto p-4 space-y-6",children:[b.jsxs("header",{className:"flex justify-between items-center bg-white p-4 rounded-lg shadow-md border-b-4 border-islamic-gold",children:[b.jsxs("div",{children:[b.jsxs("h2",{className:"text-xl font-bold text-islamic-dark",children:["  ",n.fullName]}),b.jsx("p",{className:"text-sm text-gray-500",children:"  "})]}),b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsxs("button",{onClick:()=>le(!0),className:"text-gray-500 hover:text-islamic-dark font-semibold text-sm flex items-center gap-1",children:[b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),""]}),b.jsx("button",{onClick:e,className:"text-red-500 hover:text-red-700 font-semibold text-sm",children:""})]})]}),b.jsxs("div",{className:"bg-gradient-to-r from-islamic-dark to-teal-900 text-white p-6 rounded-xl shadow-lg text-center relative overflow-hidden",children:[b.jsxs("div",{className:"relative z-10",children:[b.jsx("p",{className:"text-lg opacity-90",children:MC()}),b.jsx("p",{className:"text-3xl font-bold font-serif my-2",children:l}),b.jsx("p",{className:"text-sm opacity-80",children:xC()}),b.jsx("p",{className:"mt-4 text-islamic-gold font-bold bg-black bg-opacity-20 inline-block px-4 py-1 rounded-full",children:" "})]}),b.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-white opacity-5 rounded-full blur-2xl"})]}),m&&b.jsx("div",{className:"bg-indigo-50 border-r-4 border-indigo-400 p-4 rounded shadow-sm",children:b.jsxs("p",{className:"text-indigo-800 italic text-center text-lg font-serif",children:['"',m,'"']})}),V&&b.jsx("div",{className:"mb-4 p-3 rounded bg-yellow-50 text-yellow-800 text-sm border border-yellow-200",children:V}),b.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[b.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md flex flex-col items-center justify-center",children:[b.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-4",children:" "}),b.jsxs("div",{className:"relative w-40 h-40",children:[b.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[b.jsx("circle",{cx:"80",cy:"80",r:"70",stroke:"#e5e7eb",strokeWidth:"10",fill:"transparent"}),b.jsx("circle",{cx:"80",cy:"80",r:"70",stroke:"#d4af37",strokeWidth:"10",fill:"transparent",strokeDasharray:"440",strokeDashoffset:Ue,className:"transition-all duration-1000"})]}),b.jsxs("div",{className:"absolute top-0 left-0 w-full h-full flex flex-col items-center justify-center",children:[b.jsx("span",{className:"text-4xl font-bold text-islamic-dark",children:st}),b.jsx("span",{className:"text-xs text-gray-500",children:" 30 "})]})]}),st>=30?b.jsxs("div",{className:"mt-6 text-center",children:[b.jsx("p",{className:"text-green-600 font-bold mb-2",children:" 30 !   "}),n.claimedReward?b.jsx("div",{className:"bg-yellow-50 text-yellow-800 px-4 py-2 rounded-lg border border-yellow-200",children:"  "}):b.jsx("button",{onClick:oe,disabled:E,className:"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white px-6 py-2 rounded-full shadow hover:scale-105 transition animate-pulse font-bold disabled:opacity-50",children:E?" ...":" "})]}):b.jsx("p",{className:"mt-4 text-center text-gray-600 text-sm",children:"        !"})]}),b.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md flex flex-col items-center justify-between",children:[b.jsxs("div",{className:"text-center w-full",children:[b.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-2",children:" "}),pe?b.jsxs("div",{className:"bg-green-50 border border-green-200 p-4 rounded-lg mb-4",children:[b.jsx("div",{className:"flex items-center justify-center text-green-600 mb-2",children:b.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),b.jsx("p",{className:"text-green-800 font-bold",children:"   "}),De&&b.jsxs("div",{className:"text-sm text-gray-600 mt-2 space-y-1",children:[b.jsxs("p",{children:[": ",b.jsx("span",{className:"font-semibold text-islamic-dark",children:De.mosque})]}),b.jsxs("p",{children:[": ",b.jsx("span",{className:"font-semibold text-islamic-dark",children:De.imam})]})]})]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"bg-gray-100 p-3 rounded mb-4",children:[b.jsx("p",{className:"text-gray-600 text-sm",children:"  "}),b.jsx("p",{className:"text-2xl font-serif text-islamic-dark",children:s.fajrTime})]}),b.jsx("p",{className:`text-sm mb-6 p-2 rounded ${s.isOpen?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:s.message}),!s.isOpen&&s.nextFajrCountdown&&b.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:["  : ",s.nextFajrCountdown]})]})]}),b.jsx("button",{onClick:x,disabled:!s.isOpen||!!pe,className:`w-full py-4 rounded-xl text-xl font-bold transition shadow-lg flex items-center justify-center gap-2
                    ${pe?"bg-gray-400 text-white cursor-not-allowed":s.isOpen?"bg-islamic-accent text-white hover:bg-emerald-600 hover:-translate-y-1":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:pe?b.jsxs(b.Fragment,{children:[b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})," "]}):b.jsxs(b.Fragment,{children:[b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})," "]})})]})]}),mt.length>0&&b.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border-t-4 border-blue-500",children:[b.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})})," "]}),b.jsx("div",{className:"max-h-60 overflow-y-auto space-y-3 pr-1",children:mt.map(ye=>b.jsxs("div",{className:`p-3 rounded-lg border text-sm ${ye.content.includes("")?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"}`,children:[b.jsxs("div",{className:"flex justify-between items-center mb-1",children:[b.jsx("span",{className:"font-bold text-gray-700",children:ye.content.includes("")?" ":""}),b.jsx("span",{className:"text-xs text-gray-500",children:new Date(ye.date).toLocaleDateString("ar-EG")})]}),b.jsx("p",{className:"text-gray-800 whitespace-pre-wrap",children:ye.content})]},ye.id))})]}),b.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[b.jsxs("h3",{className:"text-lg font-bold text-islamic-dark mb-2 flex items-center gap-2",children:[b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[b.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),b.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}),"  "]}),b.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"        ."}),b.jsxs("form",{onSubmit:ce,className:"space-y-3",children:[b.jsx("textarea",{value:N,onChange:ye=>L(ye.target.value),placeholder:"  ...",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-islamic-accent outline-none bg-gray-50 h-24 text-sm"}),b.jsx("button",{type:"submit",disabled:U||!N.trim(),className:`bg-islamic-dark text-white px-4 py-2 rounded shadow text-sm font-semibold transition ${U?"opacity-50":"hover:bg-teal-900"}`,children:U?" ...":" "})]})]}),w&&b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:b.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md shadow-2xl transform transition-all scale-100",children:[b.jsx("h3",{className:"text-xl font-bold text-islamic-dark mb-4 text-center border-b pb-2",children:"  "}),b.jsxs("div",{className:"mb-4",children:[b.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-sm",children:"   "}),b.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-y-auto pr-1",children:EP.map(ye=>b.jsx("button",{onClick:()=>J(ye),className:`p-2 rounded border text-sm transition text-center ${B===ye?"bg-islamic-dark text-white border-islamic-dark shadow-md":"bg-gray-50 border-gray-200 hover:bg-gray-100 text-gray-700"}`,children:ye},ye))})]}),b.jsxs("div",{className:"mb-4",children:[b.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-sm",children:"    "}),b.jsx("input",{type:"text",value:j,onChange:ye=>se(ye.target.value),placeholder:"   ...",className:"w-full border border-gray-300 px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-islamic-accent bg-gray-50"})]}),b.jsxs("div",{className:"bg-red-50 border-r-4 border-red-500 p-3 mb-6 rounded text-right",children:[b.jsx("p",{className:"font-bold text-red-700 text-sm",children:"  :"}),b.jsxs("p",{className:"text-xs text-red-600 mt-1 leading-relaxed",children:["    .       ",b.jsx("span",{className:"font-bold underline",children:"   "}),"   ."]})]}),b.jsxs("div",{className:"flex gap-3 mt-4",children:[b.jsx("button",{onClick:X,disabled:E,className:`flex-1 bg-islamic-accent text-white py-2 rounded-lg font-bold transition shadow ${E?"opacity-50":"hover:bg-emerald-600"}`,children:E?" ...":" "}),b.jsx("button",{onClick:()=>G(!1),className:"flex-1 bg-gray-200 text-gray-800 py-2 rounded-lg font-bold hover:bg-gray-300 transition",children:""})]})]})}),ee&&b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:b.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm shadow-2xl",children:[b.jsx("h3",{className:"text-xl font-bold text-islamic-dark mb-4 text-center",children:"  "}),b.jsxs("form",{onSubmit:Se,children:[b.jsxs("div",{className:"mb-4",children:[b.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-sm",children:"  "}),b.jsx("input",{type:"password",value:fe,onChange:ye=>ue(ye.target.value),className:"w-full border p-2 rounded focus:ring-2 focus:ring-islamic-accent",placeholder:"******"})]}),b.jsxs("div",{className:"mb-6",children:[b.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-sm",children:"  "}),b.jsx("input",{type:"password",value:D,onChange:ye=>M(ye.target.value),className:"w-full border p-2 rounded focus:ring-2 focus:ring-islamic-accent",placeholder:"******"})]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{type:"submit",disabled:E,className:"flex-1 bg-islamic-dark text-white py-2 rounded hover:bg-opacity-90 transition font-bold disabled:opacity-50",children:E?"...":""}),b.jsx("button",{type:"button",onClick:()=>le(!1),className:"flex-1 bg-gray-200 text-gray-800 py-2 rounded hover:bg-gray-300",children:""})]})]})]})})]})},AP=({onBack:n})=>{var De,Be;const[e,t]=be.useState(!1),[s,r]=be.useState(""),[l,c]=be.useState([]),[m,y]=be.useState("USERS"),[p,T]=be.useState(!1),[E,S]=be.useState(""),[w,G]=be.useState(""),[B,J]=be.useState(!1),[j,se]=be.useState(null),[ee,le]=be.useState(null),[fe,ue]=be.useState("");be.useEffect(()=>{e&&D()},[e,m]);const D=async()=>{T(!0);const x=await Wr();c(x),T(!1)},M=async x=>{x.preventDefault(),T(!0),await q1(s)?(t(!0),await D()):alert("   "),T(!1)},N=async(x,X,oe)=>{if(x.preventDefault(),!window.confirm(`       "${oe}"  `))return;const ce=window.prompt("      (  ):","     ");if(ce&&ce.trim().length>0){T(!0);const Se=await B1(X,ce);c(Se),T(!1),alert(`    ${oe}    .`)}else ce!==null&&alert(" :    .")},L=async(x,X,oe)=>{if(x.preventDefault(),window.confirm("    ")){T(!0);const ce=await H1(X,oe);c(ce),T(!1)}},U=(x,X)=>{le(x),se(X),ue(""),J(!0)},q=async()=>{if(!fe.trim()||!ee){alert("  ");return}T(!0);try{const x=await Y1(ee,fe);c(x),J(!1),ue(""),alert("   ")}catch(x){console.error(x),alert("    ")}finally{T(!1)}},V=async x=>{if(x.preventDefault(),E.length<4){alert("   ");return}if(E!==w){alert("   ");return}T(!0),await O1(E),alert("     ."),S(""),G(""),T(!1)},ze=Fn(),st=()=>{const x=[];for(const X of l)if(X.attendanceLog){const oe=X.attendanceLog.find(ce=>Yr(new Date(ce.date),ze));oe&&x.push({user:X,record:oe})}return x},$=()=>{const x=[];return l.forEach(X=>{X.messages&&X.messages.length>0&&X.messages.forEach(oe=>{x.push({user:X,content:oe.content,date:oe.date,id:oe.id})})}),x.sort((X,oe)=>new Date(oe.date).getTime()-new Date(X.date).getTime())},re=st(),pe=$();return e?b.jsxs("div",{className:"p-4 md:p-8",children:[b.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[b.jsx("h2",{className:"text-3xl font-bold text-islamic-dark font-serif",children:" "}),b.jsxs("div",{className:"flex gap-2 flex-wrap justify-center",children:[b.jsx("button",{onClick:()=>y("USERS"),className:`px-4 py-2 rounded ${m==="USERS"?"bg-islamic-dark text-white":"bg-white text-gray-700"}`,children:""}),b.jsxs("button",{onClick:()=>y("TODAY_LOGS"),className:`px-4 py-2 rounded ${m==="TODAY_LOGS"?"bg-islamic-dark text-white":"bg-white text-gray-700"}`,children:["  (",re.length,")"]}),b.jsxs("button",{onClick:()=>y("MESSAGES"),className:`px-4 py-2 rounded ${m==="MESSAGES"?"bg-islamic-dark text-white":"bg-white text-gray-700"}`,children:[" (",pe.length,")"]}),b.jsx("button",{onClick:()=>y("SETTINGS"),className:`px-4 py-2 rounded ${m==="SETTINGS"?"bg-islamic-dark text-white":"bg-white text-gray-700"}`,children:""}),b.jsx("button",{onClick:n,className:"bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300",children:""})]})]}),p&&b.jsx("div",{className:"text-center py-2 text-islamic-accent",children:"  ..."}),b.jsxs("div",{className:"overflow-x-auto bg-white rounded-lg shadow min-h-[400px]",children:[m==="USERS"&&b.jsxs("table",{className:"min-w-full leading-normal",children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:""}),b.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:""}),b.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider",children:" "}),b.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider",children:" "}),b.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider",children:""})]})}),b.jsx("tbody",{children:l.length===0&&!p?b.jsx("tr",{children:b.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"    "})}):l.map(x=>b.jsxs("tr",{children:[b.jsxs("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:[b.jsx("p",{className:"text-gray-900 whitespace-no-wrap font-bold",children:x.fullName}),b.jsxs("p",{className:"text-xs text-gray-400",children:[" : ",x.password]})]}),b.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:b.jsx("p",{className:"text-gray-900 whitespace-no-wrap",dir:"ltr",children:x.phoneNumber})}),b.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm text-center",children:b.jsxs("span",{className:`relative inline-block px-3 py-1 font-semibold leading-tight ${x.streak>=30?"text-green-900":"text-gray-900"}`,children:[b.jsx("span",{"aria-hidden":!0,className:`absolute inset-0 opacity-50 rounded-full ${x.streak>=30?"bg-green-200":"bg-gray-200"}`}),b.jsxs("span",{className:"relative",children:[x.streak," / 30"]})]})}),b.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm text-center",children:x.claimedReward?b.jsx("div",{className:"flex flex-col items-center",children:b.jsx("span",{className:"inline-flex items-center gap-1 bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-bold border border-yellow-300",children:"  "})}):b.jsx("span",{className:"text-gray-400 text-xs",children:"-"})}),b.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm text-center",children:b.jsx("button",{onClick:X=>N(X,x.id,x.fullName),className:"bg-red-50 text-red-600 border border-red-200 px-3 py-1 rounded hover:bg-red-100 text-xs font-bold transition shadow-sm",children:" "})})]},x.id))})]}),m==="TODAY_LOGS"&&b.jsxs("table",{className:"min-w-full leading-normal",children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-islamic-light text-right text-xs font-semibold text-islamic-dark uppercase tracking-wider",children:""}),b.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-islamic-light text-right text-xs font-semibold text-islamic-dark uppercase tracking-wider",children:" "}),b.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-islamic-light text-right text-xs font-semibold text-islamic-dark uppercase tracking-wider",children:""}),b.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-islamic-light text-right text-xs font-semibold text-islamic-dark uppercase tracking-wider",children:""})]})}),b.jsx("tbody",{children:re.length===0?b.jsx("tr",{children:b.jsx("td",{colSpan:4,className:"text-center py-4",children:"      "})}):re.map((x,X)=>b.jsxs("tr",{children:[b.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm font-bold",children:x.user.fullName}),b.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm dir-ltr text-right",children:new Date(x.record.date).toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"})}),b.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:x.record.mosque}),b.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:x.record.imam})]},X))})]}),m==="MESSAGES"&&b.jsx("div",{className:"p-4",children:pe.length===0?b.jsx("p",{className:"text-center text-gray-500",children:"   "}):b.jsx("div",{className:"space-y-4",children:pe.map(x=>b.jsxs("div",{className:"border border-gray-200 rounded p-4 bg-gray-50 shadow-sm",children:[b.jsxs("div",{className:"flex justify-between items-start mb-2",children:[b.jsx("h4",{className:"font-bold text-islamic-dark",children:x.user.fullName}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{onClick:()=>U(x.user.id,x.id),className:"text-blue-400 hover:text-blue-600 text-sm px-2 py-1 bg-blue-50 rounded",title:"  ",children:""}),b.jsx("button",{onClick:X=>L(X,x.user.id,x.id),className:"text-red-400 hover:text-red-600",title:" ",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),b.jsx("span",{className:"text-xs text-gray-500",children:new Date(x.date).toLocaleString("ar-EG")}),b.jsx("p",{className:"text-gray-700 whitespace-pre-wrap mt-2",children:x.content}),b.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[" : ",x.user.phoneNumber]})]},x.id))})}),B&&b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:b.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:[b.jsx("h3",{className:"text-xl font-bold mb-4 text-islamic-dark",children:"  "}),j&&pe.find(x=>x.id===j)&&b.jsxs("div",{className:"mb-4 p-3 bg-gray-100 rounded",children:[b.jsxs("p",{className:"text-sm font-bold text-gray-700 mb-1",children:[": ",(De=pe.find(x=>x.id===j))==null?void 0:De.user.fullName]}),b.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:(Be=pe.find(x=>x.id===j))==null?void 0:Be.content})]}),b.jsx("textarea",{value:fe,onChange:x=>ue(x.target.value),placeholder:"  ...",className:"w-full border rounded p-3 mb-4 min-h-24 focus:ring-2 focus:ring-islamic-accent outline-none"}),b.jsxs("div",{className:"flex gap-2 justify-end",children:[b.jsx("button",{onClick:()=>J(!1),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300 transition",children:""}),b.jsx("button",{onClick:q,disabled:p||!fe.trim(),className:"px-4 py-2 bg-islamic-accent text-white rounded hover:bg-opacity-90 transition disabled:opacity-50",children:p?" ...":" "})]})]})}),m==="SETTINGS"&&b.jsxs("div",{className:"p-8 max-w-xl mx-auto",children:[b.jsx("h3",{className:"text-xl font-bold mb-6 text-islamic-dark border-b pb-2",children:"  "}),b.jsxs("form",{onSubmit:V,className:"bg-gray-50 p-6 rounded-lg border shadow-sm",children:[b.jsx("h4",{className:"font-bold text-gray-700 mb-4",children:"   "}),b.jsxs("div",{className:"mb-4",children:[b.jsx("label",{className:"block text-gray-600 mb-2 text-sm",children:"  "}),b.jsx("input",{type:"password",value:E,onChange:x=>S(x.target.value),className:"w-full border p-2 rounded focus:ring-2 focus:ring-islamic-accent outline-none",placeholder:"   "})]}),b.jsxs("div",{className:"mb-6",children:[b.jsx("label",{className:"block text-gray-600 mb-2 text-sm",children:"  "}),b.jsx("input",{type:"password",value:w,onChange:x=>G(x.target.value),className:"w-full border p-2 rounded focus:ring-2 focus:ring-islamic-accent outline-none",placeholder:"   "})]}),b.jsx("button",{type:"submit",disabled:p,className:"w-full bg-islamic-dark text-white py-2 rounded hover:bg-opacity-90 transition font-bold disabled:opacity-50",children:p?" ...":" "})]})]})]})]}):b.jsx("div",{className:"flex flex-col items-center justify-center min-h-[50vh] p-4",children:b.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full border-t-4 border-islamic-dark",children:[b.jsx("h2",{className:"text-2xl font-bold mb-4 text-center text-islamic-dark font-serif",children:"  "}),b.jsxs("form",{onSubmit:M,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-gray-700 mb-1",children:" "}),b.jsx("input",{type:"password",value:s,onChange:x=>r(x.target.value),className:"w-full border p-2 rounded focus:ring-2 focus:ring-islamic-accent outline-none"})]}),b.jsx("button",{type:"submit",disabled:p,className:"w-full bg-islamic-dark text-white p-2 rounded hover:bg-opacity-90 transition disabled:opacity-50",children:p?" ...":""}),b.jsx("button",{type:"button",onClick:n,className:"w-full text-gray-500 text-sm hover:underline",children:" "})]})]})})},CP=()=>{const[n,e]=be.useState(ji.LOGIN),[t,s]=be.useState(null),[r,l]=be.useState(!0);be.useEffect(()=>{(async()=>{const E=await U1();E&&(s(E),e(ji.DASHBOARD)),l(!1)})()},[]);const c=T=>{s(T),e(ji.DASHBOARD)},m=()=>{L1(),s(null),e(ji.LOGIN)},y=()=>{e(ji.ADMIN)},p=()=>{switch(n){case ji.ADMIN:return b.jsx(AP,{onBack:()=>e(ji.LOGIN)});case ji.DASHBOARD:return t?b.jsx(SP,{user:t,onLogout:m,onUpdateUser:s}):b.jsx("div",{className:"text-center p-10",children:"  ..."});default:return b.jsx(J1,{onLoginSuccess:c,onAdminClick:y})}};return r?b.jsx("div",{className:"min-h-screen flex items-center justify-center bg-islamic-light",children:b.jsx("div",{className:"text-xl font-serif text-islamic-dark animate-pulse",children:"    ..."})}):b.jsxs("div",{className:"min-h-screen bg-gray-50 text-gray-800 font-sans pb-10",children:[b.jsxs("div",{className:"bg-islamic-dark h-24 w-full relative overflow-hidden shadow-lg",children:[b.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/arabesque.png')] opacity-10"}),b.jsx("div",{className:"absolute top-4 left-4 z-30 group",title:" ",children:b.jsx("img",{src:"https://flagcdn.com/w160/eg.png",alt:" ",className:"w-[60px] h-[40px] object-cover shadow-md rounded-[4px] transform group-hover:scale-110 transition-transform duration-300 ring-1 ring-white/30"})}),b.jsx("div",{className:"container mx-auto h-full flex items-center justify-center px-4 relative z-10",children:b.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-white font-thuluth drop-shadow-md tracking-wide pt-2",children:"  "})})]}),b.jsx("div",{className:"container mx-auto px-4 -mt-6 relative z-20 mb-8",children:b.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 text-center border-t-4 border-islamic-gold max-w-3xl mx-auto",children:[b.jsx("p",{className:"text-xl md:text-2xl font-serif text-gray-800 leading-relaxed",children:'"        ..."'}),b.jsx("p",{className:"text-sm text-gray-500 mt-2 font-semibold",children:" "})]})}),b.jsx("main",{className:"container mx-auto px-4",children:p()}),b.jsx("footer",{className:"mt-12 text-center text-gray-400 text-sm",children:b.jsx("p",{children:"    "})})]})},GS=document.getElementById("root");if(!GS)throw new Error("Could not find root element to mount to");const IP=NC.createRoot(GS);IP.render(b.jsx(vC.StrictMode,{children:b.jsx(CP,{})}));
