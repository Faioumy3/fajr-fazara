(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();function TE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var yh={exports:{}},hl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R_;function vC(){if(R_)return hl;R_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var m in r)m!=="key"&&(l[m]=r[m])}else l=r;return r=l.ref,{$$typeof:n,type:s,key:c,ref:r!==void 0?r:null,props:l}}return hl.Fragment=e,hl.jsx=t,hl.jsxs=t,hl}var I_;function EC(){return I_||(I_=1,yh.exports=vC()),yh.exports}var D=EC(),_h={exports:{}},we={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_;function SC(){if(w_)return we;w_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function w(q){return q===null||typeof q!="object"?null:(q=S&&q[S]||q["@@iterator"],typeof q=="function"?q:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,K={};function W(q,ee,ce){this.props=q,this.context=ee,this.refs=K,this.updater=ce||G}W.prototype.isReactComponent={},W.prototype.setState=function(q,ee){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ee,"setState")},W.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function ie(){}ie.prototype=W.prototype;function j(q,ee,ce){this.props=q,this.context=ee,this.refs=K,this.updater=ce||G}var ue=j.prototype=new ie;ue.constructor=j,B(ue,W.prototype),ue.isPureReactComponent=!0;var he=Array.isArray;function fe(){}var x={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function N(q,ee,ce){var pe=ce.ref;return{$$typeof:n,type:q,key:ee,ref:pe!==void 0?pe:null,props:ce}}function U(q,ee){return N(q.type,ee,q.props)}function P(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function k(q){var ee={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ce){return ee[ce]})}var b=/\/+/g;function re(q,ee){return typeof q=="object"&&q!==null&&q.key!=null?k(""+q.key):ee.toString(36)}function Se(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(fe,fe):(q.status="pending",q.then(function(ee){q.status==="pending"&&(q.status="fulfilled",q.value=ee)},function(ee){q.status==="pending"&&(q.status="rejected",q.reason=ee)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function Y(q,ee,ce,pe,ae){var Re=typeof q;(Re==="undefined"||Re==="boolean")&&(q=null);var Pe=!1;if(q===null)Pe=!0;else switch(Re){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(q.$$typeof){case n:case e:Pe=!0;break;case T:return Pe=q._init,Y(Pe(q._payload),ee,ce,pe,ae)}}if(Pe)return ae=ae(q),Pe=pe===""?"."+re(q,0):pe,he(ae)?(ce="",Pe!=null&&(ce=Pe.replace(b,"$&/")+"/"),Y(ae,ee,ce,"",function(so){return so})):ae!=null&&(P(ae)&&(ae=U(ae,ce+(ae.key==null||q&&q.key===ae.key?"":(""+ae.key).replace(b,"$&/")+"/")+Pe)),ee.push(ae)),1;Pe=0;var Pt=pe===""?".":pe+":";if(he(q))for(var ct=0;ct<q.length;ct++)pe=q[ct],Re=Pt+re(pe,ct),Pe+=Y(pe,ee,ce,Re,ae);else if(ct=w(q),typeof ct=="function")for(q=ct.call(q),ct=0;!(pe=q.next()).done;)pe=pe.value,Re=Pt+re(pe,ct++),Pe+=Y(pe,ee,ce,Re,ae);else if(Re==="object"){if(typeof q.then=="function")return Y(Se(q),ee,ce,pe,ae);throw ee=String(q),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function oe(q,ee,ce){if(q==null)return q;var pe=[],ae=0;return Y(q,pe,"","",function(Re){return ee.call(ce,Re,ae++)}),pe}function Te(q){if(q._status===-1){var ee=q._result;ee=ee(),ee.then(function(ce){(q._status===0||q._status===-1)&&(q._status=1,q._result=ce)},function(ce){(q._status===0||q._status===-1)&&(q._status=2,q._result=ce)}),q._status===-1&&(q._status=0,q._result=ee)}if(q._status===1)return q._result.default;throw q._result}var Ge=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Ke={map:oe,forEach:function(q,ee,ce){oe(q,function(){ee.apply(this,arguments)},ce)},count:function(q){var ee=0;return oe(q,function(){ee++}),ee},toArray:function(q){return oe(q,function(ee){return ee})||[]},only:function(q){if(!P(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return we.Activity=E,we.Children=Ke,we.Component=W,we.Fragment=t,we.Profiler=r,we.PureComponent=j,we.StrictMode=s,we.Suspense=y,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,we.__COMPILER_RUNTIME={__proto__:null,c:function(q){return x.H.useMemoCache(q)}},we.cache=function(q){return function(){return q.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(q,ee,ce){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var pe=B({},q.props),ae=q.key;if(ee!=null)for(Re in ee.key!==void 0&&(ae=""+ee.key),ee)!M.call(ee,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&ee.ref===void 0||(pe[Re]=ee[Re]);var Re=arguments.length-2;if(Re===1)pe.children=ce;else if(1<Re){for(var Pe=Array(Re),Pt=0;Pt<Re;Pt++)Pe[Pt]=arguments[Pt+2];pe.children=Pe}return N(q.type,ae,pe)},we.createContext=function(q){return q={$$typeof:c,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:l,_context:q},q},we.createElement=function(q,ee,ce){var pe,ae={},Re=null;if(ee!=null)for(pe in ee.key!==void 0&&(Re=""+ee.key),ee)M.call(ee,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(ae[pe]=ee[pe]);var Pe=arguments.length-2;if(Pe===1)ae.children=ce;else if(1<Pe){for(var Pt=Array(Pe),ct=0;ct<Pe;ct++)Pt[ct]=arguments[ct+2];ae.children=Pt}if(q&&q.defaultProps)for(pe in Pe=q.defaultProps,Pe)ae[pe]===void 0&&(ae[pe]=Pe[pe]);return N(q,Re,ae)},we.createRef=function(){return{current:null}},we.forwardRef=function(q){return{$$typeof:m,render:q}},we.isValidElement=P,we.lazy=function(q){return{$$typeof:T,_payload:{_status:-1,_result:q},_init:Te}},we.memo=function(q,ee){return{$$typeof:p,type:q,compare:ee===void 0?null:ee}},we.startTransition=function(q){var ee=x.T,ce={};x.T=ce;try{var pe=q(),ae=x.S;ae!==null&&ae(ce,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(fe,Ge)}catch(Re){Ge(Re)}finally{ee!==null&&ce.types!==null&&(ee.types=ce.types),x.T=ee}},we.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},we.use=function(q){return x.H.use(q)},we.useActionState=function(q,ee,ce){return x.H.useActionState(q,ee,ce)},we.useCallback=function(q,ee){return x.H.useCallback(q,ee)},we.useContext=function(q){return x.H.useContext(q)},we.useDebugValue=function(){},we.useDeferredValue=function(q,ee){return x.H.useDeferredValue(q,ee)},we.useEffect=function(q,ee){return x.H.useEffect(q,ee)},we.useEffectEvent=function(q){return x.H.useEffectEvent(q)},we.useId=function(){return x.H.useId()},we.useImperativeHandle=function(q,ee,ce){return x.H.useImperativeHandle(q,ee,ce)},we.useInsertionEffect=function(q,ee){return x.H.useInsertionEffect(q,ee)},we.useLayoutEffect=function(q,ee){return x.H.useLayoutEffect(q,ee)},we.useMemo=function(q,ee){return x.H.useMemo(q,ee)},we.useOptimistic=function(q,ee){return x.H.useOptimistic(q,ee)},we.useReducer=function(q,ee,ce){return x.H.useReducer(q,ee,ce)},we.useRef=function(q){return x.H.useRef(q)},we.useState=function(q){return x.H.useState(q)},we.useSyncExternalStore=function(q,ee,ce){return x.H.useSyncExternalStore(q,ee,ce)},we.useTransition=function(){return x.H.useTransition()},we.version="19.2.1",we}var N_;function cm(){return N_||(N_=1,_h.exports=SC()),_h.exports}var ke=cm();const AC=TE(ke);var Th={exports:{}},ml={},vh={exports:{}},Eh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M_;function CC(){return M_||(M_=1,(function(n){function e(Y,oe){var Te=Y.length;Y.push(oe);e:for(;0<Te;){var Ge=Te-1>>>1,Ke=Y[Ge];if(0<r(Ke,oe))Y[Ge]=oe,Y[Te]=Ke,Te=Ge;else break e}}function t(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var oe=Y[0],Te=Y.pop();if(Te!==oe){Y[0]=Te;e:for(var Ge=0,Ke=Y.length,q=Ke>>>1;Ge<q;){var ee=2*(Ge+1)-1,ce=Y[ee],pe=ee+1,ae=Y[pe];if(0>r(ce,Te))pe<Ke&&0>r(ae,ce)?(Y[Ge]=ae,Y[pe]=Te,Ge=pe):(Y[Ge]=ce,Y[ee]=Te,Ge=ee);else if(pe<Ke&&0>r(ae,Te))Y[Ge]=ae,Y[pe]=Te,Ge=pe;else break e}}return oe}function r(Y,oe){var Te=Y.sortIndex-oe.sortIndex;return Te!==0?Te:Y.id-oe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,m=c.now();n.unstable_now=function(){return c.now()-m}}var y=[],p=[],T=1,E=null,S=3,w=!1,G=!1,B=!1,K=!1,W=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function ue(Y){for(var oe=t(p);oe!==null;){if(oe.callback===null)s(p);else if(oe.startTime<=Y)s(p),oe.sortIndex=oe.expirationTime,e(y,oe);else break;oe=t(p)}}function he(Y){if(B=!1,ue(Y),!G)if(t(y)!==null)G=!0,fe||(fe=!0,k());else{var oe=t(p);oe!==null&&Se(he,oe.startTime-Y)}}var fe=!1,x=-1,M=5,N=-1;function U(){return K?!0:!(n.unstable_now()-N<M)}function P(){if(K=!1,fe){var Y=n.unstable_now();N=Y;var oe=!0;try{e:{G=!1,B&&(B=!1,ie(x),x=-1),w=!0;var Te=S;try{t:{for(ue(Y),E=t(y);E!==null&&!(E.expirationTime>Y&&U());){var Ge=E.callback;if(typeof Ge=="function"){E.callback=null,S=E.priorityLevel;var Ke=Ge(E.expirationTime<=Y);if(Y=n.unstable_now(),typeof Ke=="function"){E.callback=Ke,ue(Y),oe=!0;break t}E===t(y)&&s(y),ue(Y)}else s(y);E=t(y)}if(E!==null)oe=!0;else{var q=t(p);q!==null&&Se(he,q.startTime-Y),oe=!1}}break e}finally{E=null,S=Te,w=!1}oe=void 0}}finally{oe?k():fe=!1}}}var k;if(typeof j=="function")k=function(){j(P)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,re=b.port2;b.port1.onmessage=P,k=function(){re.postMessage(null)}}else k=function(){W(P,0)};function Se(Y,oe){x=W(function(){Y(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(Y){switch(S){case 1:case 2:case 3:var oe=3;break;default:oe=S}var Te=S;S=oe;try{return Y()}finally{S=Te}},n.unstable_requestPaint=function(){K=!0},n.unstable_runWithPriority=function(Y,oe){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var Te=S;S=Y;try{return oe()}finally{S=Te}},n.unstable_scheduleCallback=function(Y,oe,Te){var Ge=n.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?Ge+Te:Ge):Te=Ge,Y){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=Te+Ke,Y={id:T++,callback:oe,priorityLevel:Y,startTime:Te,expirationTime:Ke,sortIndex:-1},Te>Ge?(Y.sortIndex=Te,e(p,Y),t(y)===null&&Y===t(p)&&(B?(ie(x),x=-1):B=!0,Se(he,Te-Ge))):(Y.sortIndex=Ke,e(y,Y),G||w||(G=!0,fe||(fe=!0,k()))),Y},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(Y){var oe=S;return function(){var Te=S;S=oe;try{return Y.apply(this,arguments)}finally{S=Te}}}})(Eh)),Eh}var x_;function RC(){return x_||(x_=1,vh.exports=CC()),vh.exports}var Sh={exports:{}},Zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_;function IC(){if(D_)return Zt;D_=1;var n=cm();function e(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)p+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(y,p,T){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:y,containerInfo:p,implementation:T}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Zt.createPortal=function(y,p){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(y,p,null,T)},Zt.flushSync=function(y){var p=c.T,T=s.p;try{if(c.T=null,s.p=2,y)return y()}finally{c.T=p,s.p=T,s.d.f()}},Zt.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(y,p))},Zt.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},Zt.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var T=p.as,E=m(T,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;T==="style"?s.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:w}):T==="script"&&s.d.X(y,{crossOrigin:E,integrity:S,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Zt.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var T=m(p.as,p.crossOrigin);s.d.M(y,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(y)},Zt.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var T=p.as,E=m(T,p.crossOrigin);s.d.L(y,T,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Zt.preloadModule=function(y,p){if(typeof y=="string")if(p){var T=m(p.as,p.crossOrigin);s.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(y)},Zt.requestFormReset=function(y){s.d.r(y)},Zt.unstable_batchedUpdates=function(y,p){return y(p)},Zt.useFormState=function(y,p,T){return c.H.useFormState(y,p,T)},Zt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Zt.version="19.2.1",Zt}var b_;function wC(){if(b_)return Sh.exports;b_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Sh.exports=IC(),Sh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_;function NC(){if(V_)return ml;V_=1;var n=RC(),e=cm(),t=wC();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var o=i,a=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(a=o.return),i=o.return;while(i)}return o.tag===3?a:null}function c(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function m(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function y(i){if(l(i)!==i)throw Error(s(188))}function p(i){var o=i.alternate;if(!o){if(o=l(i),o===null)throw Error(s(188));return o!==i?null:i}for(var a=i,u=o;;){var g=a.return;if(g===null)break;var _=g.alternate;if(_===null){if(u=g.return,u!==null){a=u;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===a)return y(g),i;if(_===u)return y(g),o;_=_.sibling}throw Error(s(188))}if(a.return!==u.return)a=g,u=_;else{for(var A=!1,R=g.child;R;){if(R===a){A=!0,a=g,u=_;break}if(R===u){A=!0,u=g,a=_;break}R=R.sibling}if(!A){for(R=_.child;R;){if(R===a){A=!0,a=_,u=g;break}if(R===u){A=!0,u=_,a=g;break}R=R.sibling}if(!A)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:o}function T(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=T(i),o!==null)return o;i=i.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),ie=Symbol.for("react.consumer"),j=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function k(i){return i===null||typeof i!="object"?null:(i=P&&i[P]||i["@@iterator"],typeof i=="function"?i:null)}var b=Symbol.for("react.client.reference");function re(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===b?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case B:return"Fragment";case W:return"Profiler";case K:return"StrictMode";case he:return"Suspense";case fe:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case G:return"Portal";case j:return i.displayName||"Context";case ie:return(i._context.displayName||"Context")+".Consumer";case ue:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case x:return o=i.displayName||null,o!==null?o:re(i.type)||"Memo";case M:o=i._payload,i=i._init;try{return re(i(o))}catch{}}return null}var Se=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te={pending:!1,data:null,method:null,action:null},Ge=[],Ke=-1;function q(i){return{current:i}}function ee(i){0>Ke||(i.current=Ge[Ke],Ge[Ke]=null,Ke--)}function ce(i,o){Ke++,Ge[Ke]=i.current,i.current=o}var pe=q(null),ae=q(null),Re=q(null),Pe=q(null);function Pt(i,o){switch(ce(Re,o),ce(ae,i),ce(pe,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?Qy(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=Qy(o),i=Xy(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ee(pe),ce(pe,i)}function ct(){ee(pe),ee(ae),ee(Re)}function so(i){i.memoizedState!==null&&ce(Pe,i);var o=pe.current,a=Xy(o,i.type);o!==a&&(ce(ae,i),ce(pe,a))}function Yo(i){ae.current===i&&(ee(pe),ee(ae)),Pe.current===i&&(ee(Pe),ul._currentValue=Te)}var Jo,Ko;function si(i){if(Jo===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);Jo=o&&o[1]||"",Ko=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Jo+i+Ko}var ua=!1;function oo(i,o){if(!i||ua)return"";ua=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(X){var J=X}Reflect.construct(i,[],te)}else{try{te.call()}catch(X){J=X}i.call(te.prototype)}}else{try{throw Error()}catch(X){J=X}(te=i())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(X){if(X&&J&&typeof X.stack=="string")return[X.stack,J.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),A=_[0],R=_[1];if(A&&R){var V=A.split(`
`),z=R.split(`
`);for(g=u=0;u<V.length&&!V[u].includes("DetermineComponentFrameRoot");)u++;for(;g<z.length&&!z[g].includes("DetermineComponentFrameRoot");)g++;if(u===V.length||g===z.length)for(u=V.length-1,g=z.length-1;1<=u&&0<=g&&V[u]!==z[g];)g--;for(;1<=u&&0<=g;u--,g--)if(V[u]!==z[g]){if(u!==1||g!==1)do if(u--,g--,0>g||V[u]!==z[g]){var $=`
`+V[u].replace(" at new "," at ");return i.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",i.displayName)),$}while(1<=u&&0<=g);break}}}finally{ua=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?si(a):""}function ca(i,o){switch(i.tag){case 26:case 27:case 5:return si(i.type);case 16:return si("Lazy");case 13:return i.child!==o&&o!==null?si("Suspense Fallback"):si("Suspense");case 19:return si("SuspenseList");case 0:case 15:return oo(i.type,!1);case 11:return oo(i.type.render,!1);case 1:return oo(i.type,!0);case 31:return si("Activity");default:return""}}function fa(i){try{var o="",a=null;do o+=ca(i,a),a=i,i=i.return;while(i);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var St=Object.prototype.hasOwnProperty,Ut=n.unstable_scheduleCallback,ls=n.unstable_cancelCallback,Tf=n.unstable_shouldYield,Hl=n.unstable_requestPaint,nn=n.unstable_now,ro=n.unstable_getCurrentPriorityLevel,da=n.unstable_ImmediatePriority,ha=n.unstable_UserBlockingPriority,us=n.unstable_NormalPriority,vf=n.unstable_LowPriority,zl=n.unstable_IdlePriority,Yl=n.log,Jl=n.unstable_setDisableYieldValue,zn=null,Ft=null;function wn(i){if(typeof Yl=="function"&&Jl(i),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(zn,i)}catch{}}var gt=Math.clz32?Math.clz32:Ql,Kl=Math.log,Qo=Math.LN2;function Ql(i){return i>>>=0,i===0?32:31-(Kl(i)/Qo|0)|0}var oi=256,ao=262144,At=4194304;function ri(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function ai(i,o,a){var u=i.pendingLanes;if(u===0)return 0;var g=0,_=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var R=u&134217727;return R!==0?(u=R&~_,u!==0?g=ri(u):(A&=R,A!==0?g=ri(A):a||(a=R&~i,a!==0&&(g=ri(a))))):(R=u&~_,R!==0?g=ri(R):A!==0?g=ri(A):a||(a=u&~i,a!==0&&(g=ri(a)))),g===0?0:o!==0&&o!==g&&(o&_)===0&&(_=g&-g,a=o&-o,_>=a||_===32&&(a&4194048)!==0)?o:g}function Yn(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Ef(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xl(){var i=At;return At<<=1,(At&62914560)===0&&(At=4194304),i}function li(i){for(var o=[],a=0;31>a;a++)o.push(i);return o}function lo(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Sf(i,o,a,u,g,_){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var R=i.entanglements,V=i.expirationTimes,z=i.hiddenUpdates;for(a=A&~a;0<a;){var $=31-gt(a),te=1<<$;R[$]=0,V[$]=-1;var J=z[$];if(J!==null)for(z[$]=null,$=0;$<J.length;$++){var X=J[$];X!==null&&(X.lane&=-536870913)}a&=~te}u!==0&&uo(i,u,0),_!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=_&~(A&~o))}function uo(i,o,a){i.pendingLanes|=o,i.suspendedLanes&=~o;var u=31-gt(o);i.entangledLanes|=o,i.entanglements[u]=i.entanglements[u]|1073741824|a&261930}function ma(i,o){var a=i.entangledLanes|=o;for(i=i.entanglements;a;){var u=31-gt(a),g=1<<u;g&o|i[u]&o&&(i[u]|=o),a&=~g}}function pa(i,o){var a=o&-o;return a=(a&42)!==0?1:co(a),(a&(i.suspendedLanes|o))!==0?0:a}function co(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Vi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function $l(){var i=oe.p;return i!==0?i:(i=window.event,i===void 0?32:__(i.type))}function Jn(i,o){var a=oe.p;try{return oe.p=i,o()}finally{oe.p=a}}var Kn=Math.random().toString(36).slice(2),Ct="__reactFiber$"+Kn,qt="__reactProps$"+Kn,ui="__reactContainer$"+Kn,Xo="__reactEvents$"+Kn,Af="__reactListeners$"+Kn,Zl="__reactHandles$"+Kn,Wl="__reactResources$"+Kn,ci="__reactMarker$"+Kn;function $o(i){delete i[Ct],delete i[qt],delete i[Xo],delete i[Af],delete i[Zl]}function fi(i){var o=i[Ct];if(o)return o;for(var a=i.parentNode;a;){if(o=a[ui]||a[Ct]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(i=n_(i);i!==null;){if(a=i[Ct])return a;i=n_(i)}return o}i=a,a=i.parentNode}return null}function Nn(i){if(i=i[Ct]||i[ui]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function gn(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function di(i){var o=i[Wl];return o||(o=i[Wl]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Rt(i){i[ci]=!0}var ga=new Set,ya={};function hi(i,o){mi(i,o),mi(i+"Capture",o)}function mi(i,o){for(ya[i]=o,i=0;i<o.length;i++)ga.add(o[i])}var _a=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ta={},va={};function jl(i){return St.call(va,i)?!0:St.call(Ta,i)?!1:_a.test(i)?va[i]=!0:(Ta[i]=!0,!1)}function Zo(i,o,a){if(jl(o))if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+a)}}function yn(i,o,a){if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+a)}}function It(i,o,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(o,a,""+u)}}function Ot(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function cs(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ea(i,o,a){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,_=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(A){a=""+A,_.call(this,A)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ze(i){if(!i._valueTracker){var o=cs(i)?"checked":"value";i._valueTracker=Ea(i,o,""+i[o])}}function fo(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var a=o.getValue(),u="";return i&&(u=cs(i)?i.checked?"true":"false":i.value),i=u,i!==a?(o.setValue(i),!0):!1}function pi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var ho=/[\n"\\]/g;function an(i){return i.replace(ho,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Wo(i,o,a,u,g,_,A,R){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),o!=null?A==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Ot(o)):i.value!==""+Ot(o)&&(i.value=""+Ot(o)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),o!=null?Sa(i,A,Ot(o)):a!=null?Sa(i,A,Ot(a)):u!=null&&i.removeAttribute("value"),g==null&&_!=null&&(i.defaultChecked=!!_),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+Ot(R):i.removeAttribute("name")}function eu(i,o,a,u,g,_,A,R){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),o!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){Ze(i);return}a=a!=null?""+Ot(a):"",o=o!=null?""+Ot(o):a,R||o===i.value||(i.value=o),i.defaultValue=o}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=R?i.checked:!!u,i.defaultChecked=!!u,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),Ze(i)}function Sa(i,o,a){o==="number"&&pi(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function fs(i,o,a,u){if(i=i.options,o){o={};for(var g=0;g<a.length;g++)o["$"+a[g]]=!0;for(a=0;a<i.length;a++)g=o.hasOwnProperty("$"+i[a].value),i[a].selected!==g&&(i[a].selected=g),g&&u&&(i[a].defaultSelected=!0)}else{for(a=""+Ot(a),o=null,g=0;g<i.length;g++){if(i[g].value===a){i[g].selected=!0,u&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function tu(i,o,a){if(o!=null&&(o=""+Ot(o),o!==i.value&&(i.value=o),a==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=a!=null?""+Ot(a):""}function ds(i,o,a,u){if(o==null){if(u!=null){if(a!=null)throw Error(s(92));if(Se(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),o=a}a=Ot(o),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u),Ze(i)}function ln(i,o){if(o){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=o;return}}i.textContent=o}var nu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Aa(i,o,a){var u=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":u?i.setProperty(o,a):typeof a!="number"||a===0||nu.has(o)?o==="float"?i.cssFloat=a:i[o]=(""+a).trim():i[o]=a+"px"}function Ca(i,o,a){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var g in o)u=o[g],o.hasOwnProperty(g)&&a[g]!==u&&Aa(i,g,u)}else for(var _ in o)o.hasOwnProperty(_)&&Aa(i,_,o[_])}function jo(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function er(i){return hs.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Qn(){}var Ra=null;function Mn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ms=null,gi=null;function mo(i){var o=Nn(i);if(o&&(i=o.stateNode)){var a=i[qt]||null;e:switch(i=o.stateNode,o.type){case"input":if(Wo(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+an(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var u=a[o];if(u!==i&&u.form===i.form){var g=u[qt]||null;if(!g)throw Error(s(90));Wo(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<a.length;o++)u=a[o],u.form===i.form&&fo(u)}break e;case"textarea":tu(i,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&fs(i,!!a.multiple,o,!1)}}}var tr=!1;function ps(i,o,a){if(tr)return i(o,a);tr=!0;try{var u=i(o);return u}finally{if(tr=!1,(ms!==null||gi!==null)&&($u(),ms&&(o=ms,i=gi,gi=ms=null,mo(o),i)))for(o=0;o<i.length;o++)mo(i[o])}}function Xn(i,o){var a=i.stateNode;if(a===null)return null;var u=a[qt]||null;if(u===null)return null;a=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,o,typeof a));return a}var xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),po=!1;if(xn)try{var et={};Object.defineProperty(et,"passive",{get:function(){po=!0}}),window.addEventListener("test",et,et),window.removeEventListener("test",et,et)}catch{po=!1}var yi=null,Ia=null,go=null;function wa(){if(go)return go;var i,o=Ia,a=o.length,u,g="value"in yi?yi.value:yi.textContent,_=g.length;for(i=0;i<a&&o[i]===g[i];i++);var A=a-i;for(u=1;u<=A&&o[a-u]===g[_-u];u++);return go=g.slice(i,1<u?1-u:void 0)}function yo(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Pi(){return!0}function $n(){return!1}function Ht(i){function o(a,u,g,_,A){this._reactName=a,this._targetInst=g,this.type=u,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(a=i[R],this[R]=a?a(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Pi:$n,this.isPropagationStopped=$n,this}return E(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Pi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Pi)},persist:function(){},isPersistent:Pi}),o}var Ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_i=Ht(Ui),gs=E({},Ui,{view:0,detail:0}),Na=Ht(gs),ys,nr,Ti,ir=E({},gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_s,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ti&&(Ti&&i.type==="mousemove"?(ys=i.screenX-Ti.screenX,nr=i.screenY-Ti.screenY):nr=ys=0,Ti=i),ys)},movementY:function(i){return"movementY"in i?i.movementY:nr}}),Ma=Ht(ir),_o=E({},ir,{dataTransfer:0}),su=Ht(_o),ou=E({},gs,{relatedTarget:0}),To=Ht(ou),xa=E({},Ui,{animationName:0,elapsedTime:0,pseudoElement:0}),ru=Ht(xa),sr=E({},Ui,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),au=Ht(sr),lu=E({},Ui,{data:0}),vi=Ht(lu),uu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function du(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=fu[i])?!!o[i]:!1}function _s(){return du}var sn=E({},gs,{key:function(i){if(i.key){var o=uu[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=yo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?cu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_s,charCode:function(i){return i.type==="keypress"?yo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?yo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),hu=Ht(sn),mu=E({},ir,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Li=Ht(mu),h=E({},gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_s}),v=Ht(h),C=E({},Ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=Ht(C),F=E({},ir,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Ht(F),le=E({},Ui,{newState:0,oldState:0}),Me=Ht(le),yt=[9,13,27,32],Qe=xn&&"CompositionEvent"in window,ft=null;xn&&"documentMode"in document&&(ft=document.documentMode);var Dn=xn&&"TextEvent"in window&&!ft,Ei=xn&&(!Qe||ft&&8<ft&&11>=ft),Zn=" ",Wn=!1;function vo(i,o){switch(i){case"keyup":return yt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function or(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var rr=!1;function zS(i,o){switch(i){case"compositionend":return or(o);case"keypress":return o.which!==32?null:(Wn=!0,Zn);case"textInput":return i=o.data,i===Zn&&Wn?null:i;default:return null}}function YS(i,o){if(rr)return i==="compositionend"||!Qe&&vo(i,o)?(i=wa(),go=Ia=yi=null,rr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ei&&o.locale!=="ko"?null:o.data;default:return null}}var JS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function op(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!JS[i.type]:o==="textarea"}function rp(i,o,a,u){ms?gi?gi.push(u):gi=[u]:ms=u,o=ic(o,"onChange"),0<o.length&&(a=new _i("onChange","change",null,a,u),i.push({event:a,listeners:o}))}var Da=null,ba=null;function KS(i){Fy(i,0)}function pu(i){var o=gn(i);if(fo(o))return i}function ap(i,o){if(i==="change")return o}var lp=!1;if(xn){var Cf;if(xn){var Rf="oninput"in document;if(!Rf){var up=document.createElement("div");up.setAttribute("oninput","return;"),Rf=typeof up.oninput=="function"}Cf=Rf}else Cf=!1;lp=Cf&&(!document.documentMode||9<document.documentMode)}function cp(){Da&&(Da.detachEvent("onpropertychange",fp),ba=Da=null)}function fp(i){if(i.propertyName==="value"&&pu(ba)){var o=[];rp(o,ba,i,Mn(i)),ps(KS,o)}}function QS(i,o,a){i==="focusin"?(cp(),Da=o,ba=a,Da.attachEvent("onpropertychange",fp)):i==="focusout"&&cp()}function XS(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return pu(ba)}function $S(i,o){if(i==="click")return pu(o)}function ZS(i,o){if(i==="input"||i==="change")return pu(o)}function WS(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var _n=typeof Object.is=="function"?Object.is:WS;function Va(i,o){if(_n(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var a=Object.keys(i),u=Object.keys(o);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var g=a[u];if(!St.call(o,g)||!_n(i[g],o[g]))return!1}return!0}function dp(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function hp(i,o){var a=dp(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=o&&u>=o)return{node:a,offset:o-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=dp(a)}}function mp(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?mp(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function pp(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=pi(i.document);o instanceof i.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)i=o.contentWindow;else break;o=pi(i.document)}return o}function If(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var jS=xn&&"documentMode"in document&&11>=document.documentMode,ar=null,wf=null,Pa=null,Nf=!1;function gp(i,o,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Nf||ar==null||ar!==pi(u)||(u=ar,"selectionStart"in u&&If(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Pa&&Va(Pa,u)||(Pa=u,u=ic(wf,"onSelect"),0<u.length&&(o=new _i("onSelect","select",null,o,a),i.push({event:o,listeners:u}),o.target=ar)))}function Eo(i,o){var a={};return a[i.toLowerCase()]=o.toLowerCase(),a["Webkit"+i]="webkit"+o,a["Moz"+i]="moz"+o,a}var lr={animationend:Eo("Animation","AnimationEnd"),animationiteration:Eo("Animation","AnimationIteration"),animationstart:Eo("Animation","AnimationStart"),transitionrun:Eo("Transition","TransitionRun"),transitionstart:Eo("Transition","TransitionStart"),transitioncancel:Eo("Transition","TransitionCancel"),transitionend:Eo("Transition","TransitionEnd")},Mf={},yp={};xn&&(yp=document.createElement("div").style,"AnimationEvent"in window||(delete lr.animationend.animation,delete lr.animationiteration.animation,delete lr.animationstart.animation),"TransitionEvent"in window||delete lr.transitionend.transition);function So(i){if(Mf[i])return Mf[i];if(!lr[i])return i;var o=lr[i],a;for(a in o)if(o.hasOwnProperty(a)&&a in yp)return Mf[i]=o[a];return i}var _p=So("animationend"),Tp=So("animationiteration"),vp=So("animationstart"),eA=So("transitionrun"),tA=So("transitionstart"),nA=So("transitioncancel"),Ep=So("transitionend"),Sp=new Map,xf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xf.push("scrollEnd");function jn(i,o){Sp.set(i,o),hi(o,[i])}var gu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},bn=[],ur=0,Df=0;function yu(){for(var i=ur,o=Df=ur=0;o<i;){var a=bn[o];bn[o++]=null;var u=bn[o];bn[o++]=null;var g=bn[o];bn[o++]=null;var _=bn[o];if(bn[o++]=null,u!==null&&g!==null){var A=u.pending;A===null?g.next=g:(g.next=A.next,A.next=g),u.pending=g}_!==0&&Ap(a,g,_)}}function _u(i,o,a,u){bn[ur++]=i,bn[ur++]=o,bn[ur++]=a,bn[ur++]=u,Df|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function bf(i,o,a,u){return _u(i,o,a,u),Tu(i)}function Ao(i,o){return _u(i,null,null,o),Tu(i)}function Ap(i,o,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var g=!1,_=i.return;_!==null;)_.childLanes|=a,u=_.alternate,u!==null&&(u.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(g=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,g&&o!==null&&(g=31-gt(a),i=_.hiddenUpdates,u=i[g],u===null?i[g]=[o]:u.push(o),o.lane=a|536870912),_):null}function Tu(i){if(50<nl)throw nl=0,Bd=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var cr={};function iA(i,o,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(i,o,a,u){return new iA(i,o,a,u)}function Vf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ki(i,o){var a=i.alternate;return a===null?(a=Tn(i.tag,o,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=o,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,o=i.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Cp(i,o){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,o=a.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function vu(i,o,a,u,g,_){var A=0;if(u=i,typeof i=="function")Vf(i)&&(A=1);else if(typeof i=="string")A=lC(i,a,pe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=Tn(31,a,o,g),i.elementType=N,i.lanes=_,i;case B:return Co(a.children,g,_,o);case K:A=8,g|=24;break;case W:return i=Tn(12,a,o,g|2),i.elementType=W,i.lanes=_,i;case he:return i=Tn(13,a,o,g),i.elementType=he,i.lanes=_,i;case fe:return i=Tn(19,a,o,g),i.elementType=fe,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case j:A=10;break e;case ie:A=9;break e;case ue:A=11;break e;case x:A=14;break e;case M:A=16,u=null;break e}A=29,a=Error(s(130,i===null?"null":typeof i,"")),u=null}return o=Tn(A,a,o,g),o.elementType=i,o.type=u,o.lanes=_,o}function Co(i,o,a,u){return i=Tn(7,i,u,o),i.lanes=a,i}function Pf(i,o,a){return i=Tn(6,i,null,o),i.lanes=a,i}function Rp(i){var o=Tn(18,null,null,0);return o.stateNode=i,o}function Uf(i,o,a){return o=Tn(4,i.children!==null?i.children:[],i.key,o),o.lanes=a,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Ip=new WeakMap;function Vn(i,o){if(typeof i=="object"&&i!==null){var a=Ip.get(i);return a!==void 0?a:(o={value:i,source:o,stack:fa(o)},Ip.set(i,o),o)}return{value:i,source:o,stack:fa(o)}}var fr=[],dr=0,Eu=null,Ua=0,Pn=[],Un=0,Ts=null,Si=1,Ai="";function qi(i,o){fr[dr++]=Ua,fr[dr++]=Eu,Eu=i,Ua=o}function wp(i,o,a){Pn[Un++]=Si,Pn[Un++]=Ai,Pn[Un++]=Ts,Ts=i;var u=Si;i=Ai;var g=32-gt(u)-1;u&=~(1<<g),a+=1;var _=32-gt(o)+g;if(30<_){var A=g-g%5;_=(u&(1<<A)-1).toString(32),u>>=A,g-=A,Si=1<<32-gt(o)+g|a<<g|u,Ai=_+i}else Si=1<<_|a<<g|u,Ai=i}function Lf(i){i.return!==null&&(qi(i,1),wp(i,1,0))}function kf(i){for(;i===Eu;)Eu=fr[--dr],fr[dr]=null,Ua=fr[--dr],fr[dr]=null;for(;i===Ts;)Ts=Pn[--Un],Pn[Un]=null,Ai=Pn[--Un],Pn[Un]=null,Si=Pn[--Un],Pn[Un]=null}function Np(i,o){Pn[Un++]=Si,Pn[Un++]=Ai,Pn[Un++]=Ts,Si=o.id,Ai=o.overflow,Ts=i}var zt=null,rt=null,Be=!1,vs=null,Ln=!1,qf=Error(s(519));function Es(i){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw La(Vn(o,i)),qf}function Mp(i){var o=i.stateNode,a=i.type,u=i.memoizedProps;switch(o[Ct]=i,o[qt]=u,a){case"dialog":Ve("cancel",o),Ve("close",o);break;case"iframe":case"object":case"embed":Ve("load",o);break;case"video":case"audio":for(a=0;a<sl.length;a++)Ve(sl[a],o);break;case"source":Ve("error",o);break;case"img":case"image":case"link":Ve("error",o),Ve("load",o);break;case"details":Ve("toggle",o);break;case"input":Ve("invalid",o),eu(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ve("invalid",o);break;case"textarea":Ve("invalid",o),ds(o,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||u.suppressHydrationWarning===!0||Jy(o.textContent,a)?(u.popover!=null&&(Ve("beforetoggle",o),Ve("toggle",o)),u.onScroll!=null&&Ve("scroll",o),u.onScrollEnd!=null&&Ve("scrollend",o),u.onClick!=null&&(o.onclick=Qn),o=!0):o=!1,o||Es(i,!0)}function xp(i){for(zt=i.return;zt;)switch(zt.tag){case 5:case 31:case 13:Ln=!1;return;case 27:case 3:Ln=!0;return;default:zt=zt.return}}function hr(i){if(i!==zt)return!1;if(!Be)return xp(i),Be=!0,!1;var o=i.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||nh(i.type,i.memoizedProps)),a=!a),a&&rt&&Es(i),xp(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));rt=t_(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));rt=t_(i)}else o===27?(o=rt,Us(i.type)?(i=ah,ah=null,rt=i):rt=o):rt=zt?qn(i.stateNode.nextSibling):null;return!0}function Ro(){rt=zt=null,Be=!1}function Of(){var i=vs;return i!==null&&(dn===null?dn=i:dn.push.apply(dn,i),vs=null),i}function La(i){vs===null?vs=[i]:vs.push(i)}var Gf=q(null),Io=null,Oi=null;function Ss(i,o,a){ce(Gf,o._currentValue),o._currentValue=a}function Gi(i){i._currentValue=Gf.current,ee(Gf)}function Bf(i,o,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),i===a)break;i=i.return}}function Ff(i,o,a,u){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var _=g.dependencies;if(_!==null){var A=g.child;_=_.firstContext;e:for(;_!==null;){var R=_;_=g;for(var V=0;V<o.length;V++)if(R.context===o[V]){_.lanes|=a,R=_.alternate,R!==null&&(R.lanes|=a),Bf(_.return,a,i),u||(A=null);break e}_=R.next}}else if(g.tag===18){if(A=g.return,A===null)throw Error(s(341));A.lanes|=a,_=A.alternate,_!==null&&(_.lanes|=a),Bf(A,a,i),A=null}else A=g.child;if(A!==null)A.return=g;else for(A=g;A!==null;){if(A===i){A=null;break}if(g=A.sibling,g!==null){g.return=A.return,A=g;break}A=A.return}g=A}}function mr(i,o,a,u){i=null;for(var g=o,_=!1;g!==null;){if(!_){if((g.flags&524288)!==0)_=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var A=g.alternate;if(A===null)throw Error(s(387));if(A=A.memoizedProps,A!==null){var R=g.type;_n(g.pendingProps.value,A.value)||(i!==null?i.push(R):i=[R])}}else if(g===Pe.current){if(A=g.alternate,A===null)throw Error(s(387));A.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(ul):i=[ul])}g=g.return}i!==null&&Ff(o,i,a,u),o.flags|=262144}function Su(i){for(i=i.firstContext;i!==null;){if(!_n(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function wo(i){Io=i,Oi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Yt(i){return Dp(Io,i)}function Au(i,o){return Io===null&&wo(i),Dp(i,o)}function Dp(i,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},Oi===null){if(i===null)throw Error(s(308));Oi=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Oi=Oi.next=o;return a}var sA=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){o.aborted=!0,i.forEach(function(a){return a()})}},oA=n.unstable_scheduleCallback,rA=n.unstable_NormalPriority,wt={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hf(){return{controller:new sA,data:new Map,refCount:0}}function ka(i){i.refCount--,i.refCount===0&&oA(rA,function(){i.controller.abort()})}var qa=null,zf=0,pr=0,gr=null;function aA(i,o){if(qa===null){var a=qa=[];zf=0,pr=Kd(),gr={status:"pending",value:void 0,then:function(u){a.push(u)}}}return zf++,o.then(bp,bp),o}function bp(){if(--zf===0&&qa!==null){gr!==null&&(gr.status="fulfilled");var i=qa;qa=null,pr=0,gr=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function lA(i,o){var a=[],u={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return i.then(function(){u.status="fulfilled",u.value=o;for(var g=0;g<a.length;g++)(0,a[g])(o)},function(g){for(u.status="rejected",u.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),u}var Vp=Y.S;Y.S=function(i,o){gy=nn(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&aA(i,o),Vp!==null&&Vp(i,o)};var No=q(null);function Yf(){var i=No.current;return i!==null?i:st.pooledCache}function Cu(i,o){o===null?ce(No,No.current):ce(No,o.pool)}function Pp(){var i=Yf();return i===null?null:{parent:wt._currentValue,pool:i}}var yr=Error(s(460)),Jf=Error(s(474)),Ru=Error(s(542)),Iu={then:function(){}};function Up(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Lp(i,o,a){switch(a=i[a],a===void 0?i.push(o):a!==o&&(o.then(Qn,Qn),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,qp(i),i;default:if(typeof o.status=="string")o.then(Qn,Qn);else{if(i=st,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(u){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=u}},function(u){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,qp(i),i}throw xo=o,yr}}function Mo(i){try{var o=i._init;return o(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(xo=a,yr):a}}var xo=null;function kp(){if(xo===null)throw Error(s(459));var i=xo;return xo=null,i}function qp(i){if(i===yr||i===Ru)throw Error(s(483))}var _r=null,Oa=0;function wu(i){var o=Oa;return Oa+=1,_r===null&&(_r=[]),Lp(_r,i,o)}function Ga(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Nu(i,o){throw o.$$typeof===S?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Op(i){function o(O,L){if(i){var H=O.deletions;H===null?(O.deletions=[L],O.flags|=16):H.push(L)}}function a(O,L){if(!i)return null;for(;L!==null;)o(O,L),L=L.sibling;return null}function u(O){for(var L=new Map;O!==null;)O.key!==null?L.set(O.key,O):L.set(O.index,O),O=O.sibling;return L}function g(O,L){return O=ki(O,L),O.index=0,O.sibling=null,O}function _(O,L,H){return O.index=H,i?(H=O.alternate,H!==null?(H=H.index,H<L?(O.flags|=67108866,L):H):(O.flags|=67108866,L)):(O.flags|=1048576,L)}function A(O){return i&&O.alternate===null&&(O.flags|=67108866),O}function R(O,L,H,Z){return L===null||L.tag!==6?(L=Pf(H,O.mode,Z),L.return=O,L):(L=g(L,H),L.return=O,L)}function V(O,L,H,Z){var ve=H.type;return ve===B?$(O,L,H.props.children,Z,H.key):L!==null&&(L.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===M&&Mo(ve)===L.type)?(L=g(L,H.props),Ga(L,H),L.return=O,L):(L=vu(H.type,H.key,H.props,null,O.mode,Z),Ga(L,H),L.return=O,L)}function z(O,L,H,Z){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=Uf(H,O.mode,Z),L.return=O,L):(L=g(L,H.children||[]),L.return=O,L)}function $(O,L,H,Z,ve){return L===null||L.tag!==7?(L=Co(H,O.mode,Z,ve),L.return=O,L):(L=g(L,H),L.return=O,L)}function te(O,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Pf(""+L,O.mode,H),L.return=O,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case w:return H=vu(L.type,L.key,L.props,null,O.mode,H),Ga(H,L),H.return=O,H;case G:return L=Uf(L,O.mode,H),L.return=O,L;case M:return L=Mo(L),te(O,L,H)}if(Se(L)||k(L))return L=Co(L,O.mode,H,null),L.return=O,L;if(typeof L.then=="function")return te(O,wu(L),H);if(L.$$typeof===j)return te(O,Au(O,L),H);Nu(O,L)}return null}function J(O,L,H,Z){var ve=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ve!==null?null:R(O,L,""+H,Z);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case w:return H.key===ve?V(O,L,H,Z):null;case G:return H.key===ve?z(O,L,H,Z):null;case M:return H=Mo(H),J(O,L,H,Z)}if(Se(H)||k(H))return ve!==null?null:$(O,L,H,Z,null);if(typeof H.then=="function")return J(O,L,wu(H),Z);if(H.$$typeof===j)return J(O,L,Au(O,H),Z);Nu(O,H)}return null}function X(O,L,H,Z,ve){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return O=O.get(H)||null,R(L,O,""+Z,ve);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case w:return O=O.get(Z.key===null?H:Z.key)||null,V(L,O,Z,ve);case G:return O=O.get(Z.key===null?H:Z.key)||null,z(L,O,Z,ve);case M:return Z=Mo(Z),X(O,L,H,Z,ve)}if(Se(Z)||k(Z))return O=O.get(H)||null,$(L,O,Z,ve,null);if(typeof Z.then=="function")return X(O,L,H,wu(Z),ve);if(Z.$$typeof===j)return X(O,L,H,Au(L,Z),ve);Nu(L,Z)}return null}function ye(O,L,H,Z){for(var ve=null,ze=null,_e=L,De=L=0,Le=null;_e!==null&&De<H.length;De++){_e.index>De?(Le=_e,_e=null):Le=_e.sibling;var Ye=J(O,_e,H[De],Z);if(Ye===null){_e===null&&(_e=Le);break}i&&_e&&Ye.alternate===null&&o(O,_e),L=_(Ye,L,De),ze===null?ve=Ye:ze.sibling=Ye,ze=Ye,_e=Le}if(De===H.length)return a(O,_e),Be&&qi(O,De),ve;if(_e===null){for(;De<H.length;De++)_e=te(O,H[De],Z),_e!==null&&(L=_(_e,L,De),ze===null?ve=_e:ze.sibling=_e,ze=_e);return Be&&qi(O,De),ve}for(_e=u(_e);De<H.length;De++)Le=X(_e,O,De,H[De],Z),Le!==null&&(i&&Le.alternate!==null&&_e.delete(Le.key===null?De:Le.key),L=_(Le,L,De),ze===null?ve=Le:ze.sibling=Le,ze=Le);return i&&_e.forEach(function(Gs){return o(O,Gs)}),Be&&qi(O,De),ve}function Ae(O,L,H,Z){if(H==null)throw Error(s(151));for(var ve=null,ze=null,_e=L,De=L=0,Le=null,Ye=H.next();_e!==null&&!Ye.done;De++,Ye=H.next()){_e.index>De?(Le=_e,_e=null):Le=_e.sibling;var Gs=J(O,_e,Ye.value,Z);if(Gs===null){_e===null&&(_e=Le);break}i&&_e&&Gs.alternate===null&&o(O,_e),L=_(Gs,L,De),ze===null?ve=Gs:ze.sibling=Gs,ze=Gs,_e=Le}if(Ye.done)return a(O,_e),Be&&qi(O,De),ve;if(_e===null){for(;!Ye.done;De++,Ye=H.next())Ye=te(O,Ye.value,Z),Ye!==null&&(L=_(Ye,L,De),ze===null?ve=Ye:ze.sibling=Ye,ze=Ye);return Be&&qi(O,De),ve}for(_e=u(_e);!Ye.done;De++,Ye=H.next())Ye=X(_e,O,De,Ye.value,Z),Ye!==null&&(i&&Ye.alternate!==null&&_e.delete(Ye.key===null?De:Ye.key),L=_(Ye,L,De),ze===null?ve=Ye:ze.sibling=Ye,ze=Ye);return i&&_e.forEach(function(TC){return o(O,TC)}),Be&&qi(O,De),ve}function it(O,L,H,Z){if(typeof H=="object"&&H!==null&&H.type===B&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case w:e:{for(var ve=H.key;L!==null;){if(L.key===ve){if(ve=H.type,ve===B){if(L.tag===7){a(O,L.sibling),Z=g(L,H.props.children),Z.return=O,O=Z;break e}}else if(L.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===M&&Mo(ve)===L.type){a(O,L.sibling),Z=g(L,H.props),Ga(Z,H),Z.return=O,O=Z;break e}a(O,L);break}else o(O,L);L=L.sibling}H.type===B?(Z=Co(H.props.children,O.mode,Z,H.key),Z.return=O,O=Z):(Z=vu(H.type,H.key,H.props,null,O.mode,Z),Ga(Z,H),Z.return=O,O=Z)}return A(O);case G:e:{for(ve=H.key;L!==null;){if(L.key===ve)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){a(O,L.sibling),Z=g(L,H.children||[]),Z.return=O,O=Z;break e}else{a(O,L);break}else o(O,L);L=L.sibling}Z=Uf(H,O.mode,Z),Z.return=O,O=Z}return A(O);case M:return H=Mo(H),it(O,L,H,Z)}if(Se(H))return ye(O,L,H,Z);if(k(H)){if(ve=k(H),typeof ve!="function")throw Error(s(150));return H=ve.call(H),Ae(O,L,H,Z)}if(typeof H.then=="function")return it(O,L,wu(H),Z);if(H.$$typeof===j)return it(O,L,Au(O,H),Z);Nu(O,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(a(O,L.sibling),Z=g(L,H),Z.return=O,O=Z):(a(O,L),Z=Pf(H,O.mode,Z),Z.return=O,O=Z),A(O)):a(O,L)}return function(O,L,H,Z){try{Oa=0;var ve=it(O,L,H,Z);return _r=null,ve}catch(_e){if(_e===yr||_e===Ru)throw _e;var ze=Tn(29,_e,null,O.mode);return ze.lanes=Z,ze.return=O,ze}finally{}}}var Do=Op(!0),Gp=Op(!1),As=!1;function Kf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qf(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Cs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Rs(i,o,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Xe&2)!==0){var g=u.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),u.pending=o,o=Tu(i),Ap(i,null,a),o}return _u(i,u,o,a),Tu(i)}function Ba(i,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var u=o.lanes;u&=i.pendingLanes,a|=u,o.lanes=a,ma(i,a)}}function Xf(i,o){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var g=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?g=_=A:_=_.next=A,a=a.next}while(a!==null);_===null?g=_=o:_=_.next=o}else g=_=o;a={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=o:i.next=o,a.lastBaseUpdate=o}var $f=!1;function Fa(){if($f){var i=gr;if(i!==null)throw i}}function Ha(i,o,a,u){$f=!1;var g=i.updateQueue;As=!1;var _=g.firstBaseUpdate,A=g.lastBaseUpdate,R=g.shared.pending;if(R!==null){g.shared.pending=null;var V=R,z=V.next;V.next=null,A===null?_=z:A.next=z,A=V;var $=i.alternate;$!==null&&($=$.updateQueue,R=$.lastBaseUpdate,R!==A&&(R===null?$.firstBaseUpdate=z:R.next=z,$.lastBaseUpdate=V))}if(_!==null){var te=g.baseState;A=0,$=z=V=null,R=_;do{var J=R.lane&-536870913,X=J!==R.lane;if(X?(Ue&J)===J:(u&J)===J){J!==0&&J===pr&&($f=!0),$!==null&&($=$.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var ye=i,Ae=R;J=o;var it=a;switch(Ae.tag){case 1:if(ye=Ae.payload,typeof ye=="function"){te=ye.call(it,te,J);break e}te=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=Ae.payload,J=typeof ye=="function"?ye.call(it,te,J):ye,J==null)break e;te=E({},te,J);break e;case 2:As=!0}}J=R.callback,J!==null&&(i.flags|=64,X&&(i.flags|=8192),X=g.callbacks,X===null?g.callbacks=[J]:X.push(J))}else X={lane:J,tag:R.tag,payload:R.payload,callback:R.callback,next:null},$===null?(z=$=X,V=te):$=$.next=X,A|=J;if(R=R.next,R===null){if(R=g.shared.pending,R===null)break;X=R,R=X.next,X.next=null,g.lastBaseUpdate=X,g.shared.pending=null}}while(!0);$===null&&(V=te),g.baseState=V,g.firstBaseUpdate=z,g.lastBaseUpdate=$,_===null&&(g.shared.lanes=0),xs|=A,i.lanes=A,i.memoizedState=te}}function Bp(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function Fp(i,o){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Bp(a[i],o)}var Tr=q(null),Mu=q(0);function Hp(i,o){i=Xi,ce(Mu,i),ce(Tr,o),Xi=i|o.baseLanes}function Zf(){ce(Mu,Xi),ce(Tr,Tr.current)}function Wf(){Xi=Mu.current,ee(Tr),ee(Mu)}var vn=q(null),kn=null;function Is(i){var o=i.alternate;ce(_t,_t.current&1),ce(vn,i),kn===null&&(o===null||Tr.current!==null||o.memoizedState!==null)&&(kn=i)}function jf(i){ce(_t,_t.current),ce(vn,i),kn===null&&(kn=i)}function zp(i){i.tag===22?(ce(_t,_t.current),ce(vn,i),kn===null&&(kn=i)):ws()}function ws(){ce(_t,_t.current),ce(vn,vn.current)}function En(i){ee(vn),kn===i&&(kn=null),ee(_t)}var _t=q(0);function xu(i){for(var o=i;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||oh(a)||rh(a)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Bi=0,xe=null,tt=null,Nt=null,Du=!1,vr=!1,bo=!1,bu=0,za=0,Er=null,uA=0;function mt(){throw Error(s(321))}function ed(i,o){if(o===null)return!1;for(var a=0;a<o.length&&a<i.length;a++)if(!_n(i[a],o[a]))return!1;return!0}function td(i,o,a,u,g,_){return Bi=_,xe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Y.H=i===null||i.memoizedState===null?wg:gd,bo=!1,_=a(u,g),bo=!1,vr&&(_=Jp(o,a,u,g)),Yp(i),_}function Yp(i){Y.H=Ka;var o=tt!==null&&tt.next!==null;if(Bi=0,Nt=tt=xe=null,Du=!1,za=0,Er=null,o)throw Error(s(300));i===null||Mt||(i=i.dependencies,i!==null&&Su(i)&&(Mt=!0))}function Jp(i,o,a,u){xe=i;var g=0;do{if(vr&&(Er=null),za=0,vr=!1,25<=g)throw Error(s(301));if(g+=1,Nt=tt=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}Y.H=Ng,_=o(a,u)}while(vr);return _}function cA(){var i=Y.H,o=i.useState()[0];return o=typeof o.then=="function"?Ya(o):o,i=i.useState()[0],(tt!==null?tt.memoizedState:null)!==i&&(xe.flags|=1024),o}function nd(){var i=bu!==0;return bu=0,i}function id(i,o,a){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~a}function sd(i){if(Du){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Du=!1}Bi=0,Nt=tt=xe=null,vr=!1,za=bu=0,Er=null}function on(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?xe.memoizedState=Nt=i:Nt=Nt.next=i,Nt}function Tt(){if(tt===null){var i=xe.alternate;i=i!==null?i.memoizedState:null}else i=tt.next;var o=Nt===null?xe.memoizedState:Nt.next;if(o!==null)Nt=o,tt=i;else{if(i===null)throw xe.alternate===null?Error(s(467)):Error(s(310));tt=i,i={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Nt===null?xe.memoizedState=Nt=i:Nt=Nt.next=i}return Nt}function Vu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ya(i){var o=za;return za+=1,Er===null&&(Er=[]),i=Lp(Er,i,o),o=xe,(Nt===null?o.memoizedState:Nt.next)===null&&(o=o.alternate,Y.H=o===null||o.memoizedState===null?wg:gd),i}function Pu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ya(i);if(i.$$typeof===j)return Yt(i)}throw Error(s(438,String(i)))}function od(i){var o=null,a=xe.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var u=xe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=Vu(),xe.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(i),u=0;u<i;u++)a[u]=U;return o.index++,a}function Fi(i,o){return typeof o=="function"?o(i):o}function Uu(i){var o=Tt();return rd(o,tt,i)}function rd(i,o,a){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var g=i.baseQueue,_=u.pending;if(_!==null){if(g!==null){var A=g.next;g.next=_.next,_.next=A}o.baseQueue=g=_,u.pending=null}if(_=i.baseState,g===null)i.memoizedState=_;else{o=g.next;var R=A=null,V=null,z=o,$=!1;do{var te=z.lane&-536870913;if(te!==z.lane?(Ue&te)===te:(Bi&te)===te){var J=z.revertLane;if(J===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),te===pr&&($=!0);else if((Bi&J)===J){z=z.next,J===pr&&($=!0);continue}else te={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},V===null?(R=V=te,A=_):V=V.next=te,xe.lanes|=J,xs|=J;te=z.action,bo&&a(_,te),_=z.hasEagerState?z.eagerState:a(_,te)}else J={lane:te,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},V===null?(R=V=J,A=_):V=V.next=J,xe.lanes|=te,xs|=te;z=z.next}while(z!==null&&z!==o);if(V===null?A=_:V.next=R,!_n(_,i.memoizedState)&&(Mt=!0,$&&(a=gr,a!==null)))throw a;i.memoizedState=_,i.baseState=A,i.baseQueue=V,u.lastRenderedState=_}return g===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function ad(i){var o=Tt(),a=o.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var u=a.dispatch,g=a.pending,_=o.memoizedState;if(g!==null){a.pending=null;var A=g=g.next;do _=i(_,A.action),A=A.next;while(A!==g);_n(_,o.memoizedState)||(Mt=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),a.lastRenderedState=_}return[_,u]}function Kp(i,o,a){var u=xe,g=Tt(),_=Be;if(_){if(a===void 0)throw Error(s(407));a=a()}else a=o();var A=!_n((tt||g).memoizedState,a);if(A&&(g.memoizedState=a,Mt=!0),g=g.queue,cd($p.bind(null,u,g,i),[i]),g.getSnapshot!==o||A||Nt!==null&&Nt.memoizedState.tag&1){if(u.flags|=2048,Sr(9,{destroy:void 0},Xp.bind(null,u,g,a,o),null),st===null)throw Error(s(349));_||(Bi&127)!==0||Qp(u,o,a)}return a}function Qp(i,o,a){i.flags|=16384,i={getSnapshot:o,value:a},o=xe.updateQueue,o===null?(o=Vu(),xe.updateQueue=o,o.stores=[i]):(a=o.stores,a===null?o.stores=[i]:a.push(i))}function Xp(i,o,a,u){o.value=a,o.getSnapshot=u,Zp(o)&&Wp(i)}function $p(i,o,a){return a(function(){Zp(o)&&Wp(i)})}function Zp(i){var o=i.getSnapshot;i=i.value;try{var a=o();return!_n(i,a)}catch{return!0}}function Wp(i){var o=Ao(i,2);o!==null&&hn(o,i,2)}function ld(i){var o=on();if(typeof i=="function"){var a=i;if(i=a(),bo){wn(!0);try{a()}finally{wn(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:i},o}function jp(i,o,a,u){return i.baseState=a,rd(i,tt,typeof u=="function"?u:Fi)}function fA(i,o,a,u,g){if(qu(i))throw Error(s(485));if(i=o.action,i!==null){var _={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};Y.T!==null?a(!0):_.isTransition=!1,u(_),a=o.pending,a===null?(_.next=o.pending=_,eg(o,_)):(_.next=a.next,o.pending=a.next=_)}}function eg(i,o){var a=o.action,u=o.payload,g=i.state;if(o.isTransition){var _=Y.T,A={};Y.T=A;try{var R=a(g,u),V=Y.S;V!==null&&V(A,R),tg(i,o,R)}catch(z){ud(i,o,z)}finally{_!==null&&A.types!==null&&(_.types=A.types),Y.T=_}}else try{_=a(g,u),tg(i,o,_)}catch(z){ud(i,o,z)}}function tg(i,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){ng(i,o,u)},function(u){return ud(i,o,u)}):ng(i,o,a)}function ng(i,o,a){o.status="fulfilled",o.value=a,ig(o),i.state=a,o=i.pending,o!==null&&(a=o.next,a===o?i.pending=null:(a=a.next,o.next=a,eg(i,a)))}function ud(i,o,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=a,ig(o),o=o.next;while(o!==u)}i.action=null}function ig(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function sg(i,o){return o}function og(i,o){if(Be){var a=st.formState;if(a!==null){e:{var u=xe;if(Be){if(rt){t:{for(var g=rt,_=Ln;g.nodeType!==8;){if(!_){g=null;break t}if(g=qn(g.nextSibling),g===null){g=null;break t}}_=g.data,g=_==="F!"||_==="F"?g:null}if(g){rt=qn(g.nextSibling),u=g.data==="F!";break e}}Es(u)}u=!1}u&&(o=a[0])}}return a=on(),a.memoizedState=a.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sg,lastRenderedState:o},a.queue=u,a=Cg.bind(null,xe,u),u.dispatch=a,u=ld(!1),_=pd.bind(null,xe,!1,u.queue),u=on(),g={state:o,dispatch:null,action:i,pending:null},u.queue=g,a=fA.bind(null,xe,g,_,a),g.dispatch=a,u.memoizedState=i,[o,a,!1]}function rg(i){var o=Tt();return ag(o,tt,i)}function ag(i,o,a){if(o=rd(i,o,sg)[0],i=Uu(Fi)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=Ya(o)}catch(A){throw A===yr?Ru:A}else u=o;o=Tt();var g=o.queue,_=g.dispatch;return a!==o.memoizedState&&(xe.flags|=2048,Sr(9,{destroy:void 0},dA.bind(null,g,a),null)),[u,_,i]}function dA(i,o){i.action=o}function lg(i){var o=Tt(),a=tt;if(a!==null)return ag(o,a,i);Tt(),o=o.memoizedState,a=Tt();var u=a.queue.dispatch;return a.memoizedState=i,[o,u,!1]}function Sr(i,o,a,u){return i={tag:i,create:a,deps:u,inst:o,next:null},o=xe.updateQueue,o===null&&(o=Vu(),xe.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,o.lastEffect=i),i}function ug(){return Tt().memoizedState}function Lu(i,o,a,u){var g=on();xe.flags|=i,g.memoizedState=Sr(1|o,{destroy:void 0},a,u===void 0?null:u)}function ku(i,o,a,u){var g=Tt();u=u===void 0?null:u;var _=g.memoizedState.inst;tt!==null&&u!==null&&ed(u,tt.memoizedState.deps)?g.memoizedState=Sr(o,_,a,u):(xe.flags|=i,g.memoizedState=Sr(1|o,_,a,u))}function cg(i,o){Lu(8390656,8,i,o)}function cd(i,o){ku(2048,8,i,o)}function hA(i){xe.flags|=4;var o=xe.updateQueue;if(o===null)o=Vu(),xe.updateQueue=o,o.events=[i];else{var a=o.events;a===null?o.events=[i]:a.push(i)}}function fg(i){var o=Tt().memoizedState;return hA({ref:o,nextImpl:i}),function(){if((Xe&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function dg(i,o){return ku(4,2,i,o)}function hg(i,o){return ku(4,4,i,o)}function mg(i,o){if(typeof o=="function"){i=i();var a=o(i);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function pg(i,o,a){a=a!=null?a.concat([i]):null,ku(4,4,mg.bind(null,o,i),a)}function fd(){}function gg(i,o){var a=Tt();o=o===void 0?null:o;var u=a.memoizedState;return o!==null&&ed(o,u[1])?u[0]:(a.memoizedState=[i,o],i)}function yg(i,o){var a=Tt();o=o===void 0?null:o;var u=a.memoizedState;if(o!==null&&ed(o,u[1]))return u[0];if(u=i(),bo){wn(!0);try{i()}finally{wn(!1)}}return a.memoizedState=[u,o],u}function dd(i,o,a){return a===void 0||(Bi&1073741824)!==0&&(Ue&261930)===0?i.memoizedState=o:(i.memoizedState=a,i=_y(),xe.lanes|=i,xs|=i,a)}function _g(i,o,a,u){return _n(a,o)?a:Tr.current!==null?(i=dd(i,a,u),_n(i,o)||(Mt=!0),i):(Bi&42)===0||(Bi&1073741824)!==0&&(Ue&261930)===0?(Mt=!0,i.memoizedState=a):(i=_y(),xe.lanes|=i,xs|=i,o)}function Tg(i,o,a,u,g){var _=oe.p;oe.p=_!==0&&8>_?_:8;var A=Y.T,R={};Y.T=R,pd(i,!1,o,a);try{var V=g(),z=Y.S;if(z!==null&&z(R,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var $=lA(V,u);Ja(i,o,$,Cn(i))}else Ja(i,o,u,Cn(i))}catch(te){Ja(i,o,{then:function(){},status:"rejected",reason:te},Cn())}finally{oe.p=_,A!==null&&R.types!==null&&(A.types=R.types),Y.T=A}}function mA(){}function hd(i,o,a,u){if(i.tag!==5)throw Error(s(476));var g=vg(i).queue;Tg(i,g,o,Te,a===null?mA:function(){return Eg(i),a(u)})}function vg(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:Te},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:a},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function Eg(i){var o=vg(i);o.next===null&&(o=i.alternate.memoizedState),Ja(i,o.next.queue,{},Cn())}function md(){return Yt(ul)}function Sg(){return Tt().memoizedState}function Ag(){return Tt().memoizedState}function pA(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var a=Cn();i=Cs(a);var u=Rs(o,i,a);u!==null&&(hn(u,o,a),Ba(u,o,a)),o={cache:Hf()},i.payload=o;return}o=o.return}}function gA(i,o,a){var u=Cn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},qu(i)?Rg(o,a):(a=bf(i,o,a,u),a!==null&&(hn(a,i,u),Ig(a,o,u)))}function Cg(i,o,a){var u=Cn();Ja(i,o,a,u)}function Ja(i,o,a,u){var g={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(qu(i))Rg(o,g);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var A=o.lastRenderedState,R=_(A,a);if(g.hasEagerState=!0,g.eagerState=R,_n(R,A))return _u(i,o,g,0),st===null&&yu(),!1}catch{}finally{}if(a=bf(i,o,g,u),a!==null)return hn(a,i,u),Ig(a,o,u),!0}return!1}function pd(i,o,a,u){if(u={lane:2,revertLane:Kd(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},qu(i)){if(o)throw Error(s(479))}else o=bf(i,a,u,2),o!==null&&hn(o,i,2)}function qu(i){var o=i.alternate;return i===xe||o!==null&&o===xe}function Rg(i,o){vr=Du=!0;var a=i.pending;a===null?o.next=o:(o.next=a.next,a.next=o),i.pending=o}function Ig(i,o,a){if((a&4194048)!==0){var u=o.lanes;u&=i.pendingLanes,a|=u,o.lanes=a,ma(i,a)}}var Ka={readContext:Yt,use:Pu,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};Ka.useEffectEvent=mt;var wg={readContext:Yt,use:Pu,useCallback:function(i,o){return on().memoizedState=[i,o===void 0?null:o],i},useContext:Yt,useEffect:cg,useImperativeHandle:function(i,o,a){a=a!=null?a.concat([i]):null,Lu(4194308,4,mg.bind(null,o,i),a)},useLayoutEffect:function(i,o){return Lu(4194308,4,i,o)},useInsertionEffect:function(i,o){Lu(4,2,i,o)},useMemo:function(i,o){var a=on();o=o===void 0?null:o;var u=i();if(bo){wn(!0);try{i()}finally{wn(!1)}}return a.memoizedState=[u,o],u},useReducer:function(i,o,a){var u=on();if(a!==void 0){var g=a(o);if(bo){wn(!0);try{a(o)}finally{wn(!1)}}}else g=o;return u.memoizedState=u.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},u.queue=i,i=i.dispatch=gA.bind(null,xe,i),[u.memoizedState,i]},useRef:function(i){var o=on();return i={current:i},o.memoizedState=i},useState:function(i){i=ld(i);var o=i.queue,a=Cg.bind(null,xe,o);return o.dispatch=a,[i.memoizedState,a]},useDebugValue:fd,useDeferredValue:function(i,o){var a=on();return dd(a,i,o)},useTransition:function(){var i=ld(!1);return i=Tg.bind(null,xe,i.queue,!0,!1),on().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,a){var u=xe,g=on();if(Be){if(a===void 0)throw Error(s(407));a=a()}else{if(a=o(),st===null)throw Error(s(349));(Ue&127)!==0||Qp(u,o,a)}g.memoizedState=a;var _={value:a,getSnapshot:o};return g.queue=_,cg($p.bind(null,u,_,i),[i]),u.flags|=2048,Sr(9,{destroy:void 0},Xp.bind(null,u,_,a,o),null),a},useId:function(){var i=on(),o=st.identifierPrefix;if(Be){var a=Ai,u=Si;a=(u&~(1<<32-gt(u)-1)).toString(32)+a,o="_"+o+"R_"+a,a=bu++,0<a&&(o+="H"+a.toString(32)),o+="_"}else a=uA++,o="_"+o+"r_"+a.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:md,useFormState:og,useActionState:og,useOptimistic:function(i){var o=on();o.memoizedState=o.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=pd.bind(null,xe,!0,a),a.dispatch=o,[i,o]},useMemoCache:od,useCacheRefresh:function(){return on().memoizedState=pA.bind(null,xe)},useEffectEvent:function(i){var o=on(),a={impl:i};return o.memoizedState=a,function(){if((Xe&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},gd={readContext:Yt,use:Pu,useCallback:gg,useContext:Yt,useEffect:cd,useImperativeHandle:pg,useInsertionEffect:dg,useLayoutEffect:hg,useMemo:yg,useReducer:Uu,useRef:ug,useState:function(){return Uu(Fi)},useDebugValue:fd,useDeferredValue:function(i,o){var a=Tt();return _g(a,tt.memoizedState,i,o)},useTransition:function(){var i=Uu(Fi)[0],o=Tt().memoizedState;return[typeof i=="boolean"?i:Ya(i),o]},useSyncExternalStore:Kp,useId:Sg,useHostTransitionStatus:md,useFormState:rg,useActionState:rg,useOptimistic:function(i,o){var a=Tt();return jp(a,tt,i,o)},useMemoCache:od,useCacheRefresh:Ag};gd.useEffectEvent=fg;var Ng={readContext:Yt,use:Pu,useCallback:gg,useContext:Yt,useEffect:cd,useImperativeHandle:pg,useInsertionEffect:dg,useLayoutEffect:hg,useMemo:yg,useReducer:ad,useRef:ug,useState:function(){return ad(Fi)},useDebugValue:fd,useDeferredValue:function(i,o){var a=Tt();return tt===null?dd(a,i,o):_g(a,tt.memoizedState,i,o)},useTransition:function(){var i=ad(Fi)[0],o=Tt().memoizedState;return[typeof i=="boolean"?i:Ya(i),o]},useSyncExternalStore:Kp,useId:Sg,useHostTransitionStatus:md,useFormState:lg,useActionState:lg,useOptimistic:function(i,o){var a=Tt();return tt!==null?jp(a,tt,i,o):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:od,useCacheRefresh:Ag};Ng.useEffectEvent=fg;function yd(i,o,a,u){o=i.memoizedState,a=a(u,o),a=a==null?o:E({},o,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var _d={enqueueSetState:function(i,o,a){i=i._reactInternals;var u=Cn(),g=Cs(u);g.payload=o,a!=null&&(g.callback=a),o=Rs(i,g,u),o!==null&&(hn(o,i,u),Ba(o,i,u))},enqueueReplaceState:function(i,o,a){i=i._reactInternals;var u=Cn(),g=Cs(u);g.tag=1,g.payload=o,a!=null&&(g.callback=a),o=Rs(i,g,u),o!==null&&(hn(o,i,u),Ba(o,i,u))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var a=Cn(),u=Cs(a);u.tag=2,o!=null&&(u.callback=o),o=Rs(i,u,a),o!==null&&(hn(o,i,a),Ba(o,i,a))}};function Mg(i,o,a,u,g,_,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,_,A):o.prototype&&o.prototype.isPureReactComponent?!Va(a,u)||!Va(g,_):!0}function xg(i,o,a,u){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,u),o.state!==i&&_d.enqueueReplaceState(o,o.state,null)}function Vo(i,o){var a=o;if("ref"in o){a={};for(var u in o)u!=="ref"&&(a[u]=o[u])}if(i=i.defaultProps){a===o&&(a=E({},a));for(var g in i)a[g]===void 0&&(a[g]=i[g])}return a}function Dg(i){gu(i)}function bg(i){console.error(i)}function Vg(i){gu(i)}function Ou(i,o){try{var a=i.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function Pg(i,o,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Td(i,o,a){return a=Cs(a),a.tag=3,a.payload={element:null},a.callback=function(){Ou(i,o)},a}function Ug(i){return i=Cs(i),i.tag=3,i}function Lg(i,o,a,u){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var _=u.value;i.payload=function(){return g(_)},i.callback=function(){Pg(o,a,u)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){Pg(o,a,u),typeof g!="function"&&(Ds===null?Ds=new Set([this]):Ds.add(this));var R=u.stack;this.componentDidCatch(u.value,{componentStack:R!==null?R:""})})}function yA(i,o,a,u,g){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=a.alternate,o!==null&&mr(o,a,g,!0),a=vn.current,a!==null){switch(a.tag){case 31:case 13:return kn===null?Zu():a.alternate===null&&pt===0&&(pt=3),a.flags&=-257,a.flags|=65536,a.lanes=g,u===Iu?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([u]):o.add(u),zd(i,u,g)),!1;case 22:return a.flags|=65536,u===Iu?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([u]):a.add(u)),zd(i,u,g)),!1}throw Error(s(435,a.tag))}return zd(i,u,g),Zu(),!1}if(Be)return o=vn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,u!==qf&&(i=Error(s(422),{cause:u}),La(Vn(i,a)))):(u!==qf&&(o=Error(s(423),{cause:u}),La(Vn(o,a))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,u=Vn(u,a),g=Td(i.stateNode,u,g),Xf(i,g),pt!==4&&(pt=2)),!1;var _=Error(s(520),{cause:u});if(_=Vn(_,a),tl===null?tl=[_]:tl.push(_),pt!==4&&(pt=2),o===null)return!0;u=Vn(u,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,i=g&-g,a.lanes|=i,i=Td(a.stateNode,u,i),Xf(a,i),!1;case 1:if(o=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ds===null||!Ds.has(_))))return a.flags|=65536,g&=-g,a.lanes|=g,g=Ug(g),Lg(g,i,a,u),Xf(a,g),!1}a=a.return}while(a!==null);return!1}var vd=Error(s(461)),Mt=!1;function Jt(i,o,a,u){o.child=i===null?Gp(o,null,a,u):Do(o,i.child,a,u)}function kg(i,o,a,u,g){a=a.render;var _=o.ref;if("ref"in u){var A={};for(var R in u)R!=="ref"&&(A[R]=u[R])}else A=u;return wo(o),u=td(i,o,a,A,_,g),R=nd(),i!==null&&!Mt?(id(i,o,g),Hi(i,o,g)):(Be&&R&&Lf(o),o.flags|=1,Jt(i,o,u,g),o.child)}function qg(i,o,a,u,g){if(i===null){var _=a.type;return typeof _=="function"&&!Vf(_)&&_.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=_,Og(i,o,_,u,g)):(i=vu(a.type,null,u,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(_=i.child,!Nd(i,g)){var A=_.memoizedProps;if(a=a.compare,a=a!==null?a:Va,a(A,u)&&i.ref===o.ref)return Hi(i,o,g)}return o.flags|=1,i=ki(_,u),i.ref=o.ref,i.return=o,o.child=i}function Og(i,o,a,u,g){if(i!==null){var _=i.memoizedProps;if(Va(_,u)&&i.ref===o.ref)if(Mt=!1,o.pendingProps=u=_,Nd(i,g))(i.flags&131072)!==0&&(Mt=!0);else return o.lanes=i.lanes,Hi(i,o,g)}return Ed(i,o,a,u,g)}function Gg(i,o,a,u){var g=u.children,_=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(u=o.child=i.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~_}else u=0,o.child=null;return Bg(i,o,_,a,u)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Cu(o,_!==null?_.cachePool:null),_!==null?Hp(o,_):Zf(),zp(o);else return u=o.lanes=536870912,Bg(i,o,_!==null?_.baseLanes|a:a,a,u)}else _!==null?(Cu(o,_.cachePool),Hp(o,_),ws(),o.memoizedState=null):(i!==null&&Cu(o,null),Zf(),ws());return Jt(i,o,g,a),o.child}function Qa(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Bg(i,o,a,u,g){var _=Yf();return _=_===null?null:{parent:wt._currentValue,pool:_},o.memoizedState={baseLanes:a,cachePool:_},i!==null&&Cu(o,null),Zf(),zp(o),i!==null&&mr(i,o,u,!0),o.childLanes=g,null}function Gu(i,o){return o=Fu({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function Fg(i,o,a){return Do(o,i.child,null,a),i=Gu(o,o.pendingProps),i.flags|=2,En(o),o.memoizedState=null,i}function _A(i,o,a){var u=o.pendingProps,g=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(Be){if(u.mode==="hidden")return i=Gu(o,u),o.lanes=536870912,Qa(null,i);if(jf(o),(i=rt)?(i=e_(i,Ln),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Ts!==null?{id:Si,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},a=Rp(i),a.return=o,o.child=a,zt=o,rt=null)):i=null,i===null)throw Es(o);return o.lanes=536870912,null}return Gu(o,u)}var _=i.memoizedState;if(_!==null){var A=_.dehydrated;if(jf(o),g)if(o.flags&256)o.flags&=-257,o=Fg(i,o,a);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(s(558));else if(Mt||mr(i,o,a,!1),g=(a&i.childLanes)!==0,Mt||g){if(u=st,u!==null&&(A=pa(u,a),A!==0&&A!==_.retryLane))throw _.retryLane=A,Ao(i,A),hn(u,i,A),vd;Zu(),o=Fg(i,o,a)}else i=_.treeContext,rt=qn(A.nextSibling),zt=o,Be=!0,vs=null,Ln=!1,i!==null&&Np(o,i),o=Gu(o,u),o.flags|=4096;return o}return i=ki(i.child,{mode:u.mode,children:u.children}),i.ref=o.ref,o.child=i,i.return=o,i}function Bu(i,o){var a=o.ref;if(a===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(o.flags|=4194816)}}function Ed(i,o,a,u,g){return wo(o),a=td(i,o,a,u,void 0,g),u=nd(),i!==null&&!Mt?(id(i,o,g),Hi(i,o,g)):(Be&&u&&Lf(o),o.flags|=1,Jt(i,o,a,g),o.child)}function Hg(i,o,a,u,g,_){return wo(o),o.updateQueue=null,a=Jp(o,u,a,g),Yp(i),u=nd(),i!==null&&!Mt?(id(i,o,_),Hi(i,o,_)):(Be&&u&&Lf(o),o.flags|=1,Jt(i,o,a,_),o.child)}function zg(i,o,a,u,g){if(wo(o),o.stateNode===null){var _=cr,A=a.contextType;typeof A=="object"&&A!==null&&(_=Yt(A)),_=new a(u,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=_d,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=u,_.state=o.memoizedState,_.refs={},Kf(o),A=a.contextType,_.context=typeof A=="object"&&A!==null?Yt(A):cr,_.state=o.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(yd(o,a,A,u),_.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&_d.enqueueReplaceState(_,_.state,null),Ha(o,u,_,g),Fa(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(i===null){_=o.stateNode;var R=o.memoizedProps,V=Vo(a,R);_.props=V;var z=_.context,$=a.contextType;A=cr,typeof $=="object"&&$!==null&&(A=Yt($));var te=a.getDerivedStateFromProps;$=typeof te=="function"||typeof _.getSnapshotBeforeUpdate=="function",R=o.pendingProps!==R,$||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R||z!==A)&&xg(o,_,u,A),As=!1;var J=o.memoizedState;_.state=J,Ha(o,u,_,g),Fa(),z=o.memoizedState,R||J!==z||As?(typeof te=="function"&&(yd(o,a,te,u),z=o.memoizedState),(V=As||Mg(o,a,V,u,J,z,A))?($||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=z),_.props=u,_.state=z,_.context=A,u=V):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{_=o.stateNode,Qf(i,o),A=o.memoizedProps,$=Vo(a,A),_.props=$,te=o.pendingProps,J=_.context,z=a.contextType,V=cr,typeof z=="object"&&z!==null&&(V=Yt(z)),R=a.getDerivedStateFromProps,(z=typeof R=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==te||J!==V)&&xg(o,_,u,V),As=!1,J=o.memoizedState,_.state=J,Ha(o,u,_,g),Fa();var X=o.memoizedState;A!==te||J!==X||As||i!==null&&i.dependencies!==null&&Su(i.dependencies)?(typeof R=="function"&&(yd(o,a,R,u),X=o.memoizedState),($=As||Mg(o,a,$,u,J,X,V)||i!==null&&i.dependencies!==null&&Su(i.dependencies))?(z||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,X,V),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,X,V)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=X),_.props=u,_.state=X,_.context=V,u=$):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(o.flags|=1024),u=!1)}return _=u,Bu(i,o),u=(o.flags&128)!==0,_||u?(_=o.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,i!==null&&u?(o.child=Do(o,i.child,null,g),o.child=Do(o,null,a,g)):Jt(i,o,a,g),o.memoizedState=_.state,i=o.child):i=Hi(i,o,g),i}function Yg(i,o,a,u){return Ro(),o.flags|=256,Jt(i,o,a,u),o.child}var Sd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ad(i){return{baseLanes:i,cachePool:Pp()}}function Cd(i,o,a){return i=i!==null?i.childLanes&~a:0,o&&(i|=An),i}function Jg(i,o,a){var u=o.pendingProps,g=!1,_=(o.flags&128)!==0,A;if((A=_)||(A=i!==null&&i.memoizedState===null?!1:(_t.current&2)!==0),A&&(g=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,i===null){if(Be){if(g?Is(o):ws(),(i=rt)?(i=e_(i,Ln),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Ts!==null?{id:Si,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},a=Rp(i),a.return=o,o.child=a,zt=o,rt=null)):i=null,i===null)throw Es(o);return rh(i)?o.lanes=32:o.lanes=536870912,null}var R=u.children;return u=u.fallback,g?(ws(),g=o.mode,R=Fu({mode:"hidden",children:R},g),u=Co(u,g,a,null),R.return=o,u.return=o,R.sibling=u,o.child=R,u=o.child,u.memoizedState=Ad(a),u.childLanes=Cd(i,A,a),o.memoizedState=Sd,Qa(null,u)):(Is(o),Rd(o,R))}var V=i.memoizedState;if(V!==null&&(R=V.dehydrated,R!==null)){if(_)o.flags&256?(Is(o),o.flags&=-257,o=Id(i,o,a)):o.memoizedState!==null?(ws(),o.child=i.child,o.flags|=128,o=null):(ws(),R=u.fallback,g=o.mode,u=Fu({mode:"visible",children:u.children},g),R=Co(R,g,a,null),R.flags|=2,u.return=o,R.return=o,u.sibling=R,o.child=u,Do(o,i.child,null,a),u=o.child,u.memoizedState=Ad(a),u.childLanes=Cd(i,A,a),o.memoizedState=Sd,o=Qa(null,u));else if(Is(o),rh(R)){if(A=R.nextSibling&&R.nextSibling.dataset,A)var z=A.dgst;A=z,u=Error(s(419)),u.stack="",u.digest=A,La({value:u,source:null,stack:null}),o=Id(i,o,a)}else if(Mt||mr(i,o,a,!1),A=(a&i.childLanes)!==0,Mt||A){if(A=st,A!==null&&(u=pa(A,a),u!==0&&u!==V.retryLane))throw V.retryLane=u,Ao(i,u),hn(A,i,u),vd;oh(R)||Zu(),o=Id(i,o,a)}else oh(R)?(o.flags|=192,o.child=i.child,o=null):(i=V.treeContext,rt=qn(R.nextSibling),zt=o,Be=!0,vs=null,Ln=!1,i!==null&&Np(o,i),o=Rd(o,u.children),o.flags|=4096);return o}return g?(ws(),R=u.fallback,g=o.mode,V=i.child,z=V.sibling,u=ki(V,{mode:"hidden",children:u.children}),u.subtreeFlags=V.subtreeFlags&65011712,z!==null?R=ki(z,R):(R=Co(R,g,a,null),R.flags|=2),R.return=o,u.return=o,u.sibling=R,o.child=u,Qa(null,u),u=o.child,R=i.child.memoizedState,R===null?R=Ad(a):(g=R.cachePool,g!==null?(V=wt._currentValue,g=g.parent!==V?{parent:V,pool:V}:g):g=Pp(),R={baseLanes:R.baseLanes|a,cachePool:g}),u.memoizedState=R,u.childLanes=Cd(i,A,a),o.memoizedState=Sd,Qa(i.child,u)):(Is(o),a=i.child,i=a.sibling,a=ki(a,{mode:"visible",children:u.children}),a.return=o,a.sibling=null,i!==null&&(A=o.deletions,A===null?(o.deletions=[i],o.flags|=16):A.push(i)),o.child=a,o.memoizedState=null,a)}function Rd(i,o){return o=Fu({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Fu(i,o){return i=Tn(22,i,null,o),i.lanes=0,i}function Id(i,o,a){return Do(o,i.child,null,a),i=Rd(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Kg(i,o,a){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o),Bf(i.return,o,a)}function wd(i,o,a,u,g,_){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:g,treeForkCount:_}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=u,A.tail=a,A.tailMode=g,A.treeForkCount=_)}function Qg(i,o,a){var u=o.pendingProps,g=u.revealOrder,_=u.tail;u=u.children;var A=_t.current,R=(A&2)!==0;if(R?(A=A&1|2,o.flags|=128):A&=1,ce(_t,A),Jt(i,o,u,a),u=Be?Ua:0,!R&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Kg(i,a,o);else if(i.tag===19)Kg(i,a,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(a=o.child,g=null;a!==null;)i=a.alternate,i!==null&&xu(i)===null&&(g=a),a=a.sibling;a=g,a===null?(g=o.child,o.child=null):(g=a.sibling,a.sibling=null),wd(o,!1,g,a,_,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&xu(i)===null){o.child=g;break}i=g.sibling,g.sibling=a,a=g,g=i}wd(o,!0,a,null,_,u);break;case"together":wd(o,!1,null,null,void 0,u);break;default:o.memoizedState=null}return o.child}function Hi(i,o,a){if(i!==null&&(o.dependencies=i.dependencies),xs|=o.lanes,(a&o.childLanes)===0)if(i!==null){if(mr(i,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,a=ki(i,i.pendingProps),o.child=a,a.return=o;i.sibling!==null;)i=i.sibling,a=a.sibling=ki(i,i.pendingProps),a.return=o;a.sibling=null}return o.child}function Nd(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Su(i)))}function TA(i,o,a){switch(o.tag){case 3:Pt(o,o.stateNode.containerInfo),Ss(o,wt,i.memoizedState.cache),Ro();break;case 27:case 5:so(o);break;case 4:Pt(o,o.stateNode.containerInfo);break;case 10:Ss(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,jf(o),null;break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(Is(o),o.flags|=128,null):(a&o.child.childLanes)!==0?Jg(i,o,a):(Is(o),i=Hi(i,o,a),i!==null?i.sibling:null);Is(o);break;case 19:var g=(i.flags&128)!==0;if(u=(a&o.childLanes)!==0,u||(mr(i,o,a,!1),u=(a&o.childLanes)!==0),g){if(u)return Qg(i,o,a);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ce(_t,_t.current),u)break;return null;case 22:return o.lanes=0,Gg(i,o,a,o.pendingProps);case 24:Ss(o,wt,i.memoizedState.cache)}return Hi(i,o,a)}function Xg(i,o,a){if(i!==null)if(i.memoizedProps!==o.pendingProps)Mt=!0;else{if(!Nd(i,a)&&(o.flags&128)===0)return Mt=!1,TA(i,o,a);Mt=(i.flags&131072)!==0}else Mt=!1,Be&&(o.flags&1048576)!==0&&wp(o,Ua,o.index);switch(o.lanes=0,o.tag){case 16:e:{var u=o.pendingProps;if(i=Mo(o.elementType),o.type=i,typeof i=="function")Vf(i)?(u=Vo(i,u),o.tag=1,o=zg(null,o,i,u,a)):(o.tag=0,o=Ed(null,o,i,u,a));else{if(i!=null){var g=i.$$typeof;if(g===ue){o.tag=11,o=kg(null,o,i,u,a);break e}else if(g===x){o.tag=14,o=qg(null,o,i,u,a);break e}}throw o=re(i)||i,Error(s(306,o,""))}}return o;case 0:return Ed(i,o,o.type,o.pendingProps,a);case 1:return u=o.type,g=Vo(u,o.pendingProps),zg(i,o,u,g,a);case 3:e:{if(Pt(o,o.stateNode.containerInfo),i===null)throw Error(s(387));u=o.pendingProps;var _=o.memoizedState;g=_.element,Qf(i,o),Ha(o,u,null,a);var A=o.memoizedState;if(u=A.cache,Ss(o,wt,u),u!==_.cache&&Ff(o,[wt],a,!0),Fa(),u=A.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=Yg(i,o,u,a);break e}else if(u!==g){g=Vn(Error(s(424)),o),La(g),o=Yg(i,o,u,a);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(rt=qn(i.firstChild),zt=o,Be=!0,vs=null,Ln=!0,a=Gp(o,null,u,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ro(),u===g){o=Hi(i,o,a);break e}Jt(i,o,u,a)}o=o.child}return o;case 26:return Bu(i,o),i===null?(a=r_(o.type,null,o.pendingProps,null))?o.memoizedState=a:Be||(a=o.type,i=o.pendingProps,u=sc(Re.current).createElement(a),u[Ct]=o,u[qt]=i,Kt(u,a,i),Rt(u),o.stateNode=u):o.memoizedState=r_(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return so(o),i===null&&Be&&(u=o.stateNode=i_(o.type,o.pendingProps,Re.current),zt=o,Ln=!0,g=rt,Us(o.type)?(ah=g,rt=qn(u.firstChild)):rt=g),Jt(i,o,o.pendingProps.children,a),Bu(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&Be&&((g=u=rt)&&(u=XA(u,o.type,o.pendingProps,Ln),u!==null?(o.stateNode=u,zt=o,rt=qn(u.firstChild),Ln=!1,g=!0):g=!1),g||Es(o)),so(o),g=o.type,_=o.pendingProps,A=i!==null?i.memoizedProps:null,u=_.children,nh(g,_)?u=null:A!==null&&nh(g,A)&&(o.flags|=32),o.memoizedState!==null&&(g=td(i,o,cA,null,null,a),ul._currentValue=g),Bu(i,o),Jt(i,o,u,a),o.child;case 6:return i===null&&Be&&((i=a=rt)&&(a=$A(a,o.pendingProps,Ln),a!==null?(o.stateNode=a,zt=o,rt=null,i=!0):i=!1),i||Es(o)),null;case 13:return Jg(i,o,a);case 4:return Pt(o,o.stateNode.containerInfo),u=o.pendingProps,i===null?o.child=Do(o,null,u,a):Jt(i,o,u,a),o.child;case 11:return kg(i,o,o.type,o.pendingProps,a);case 7:return Jt(i,o,o.pendingProps,a),o.child;case 8:return Jt(i,o,o.pendingProps.children,a),o.child;case 12:return Jt(i,o,o.pendingProps.children,a),o.child;case 10:return u=o.pendingProps,Ss(o,o.type,u.value),Jt(i,o,u.children,a),o.child;case 9:return g=o.type._context,u=o.pendingProps.children,wo(o),g=Yt(g),u=u(g),o.flags|=1,Jt(i,o,u,a),o.child;case 14:return qg(i,o,o.type,o.pendingProps,a);case 15:return Og(i,o,o.type,o.pendingProps,a);case 19:return Qg(i,o,a);case 31:return _A(i,o,a);case 22:return Gg(i,o,a,o.pendingProps);case 24:return wo(o),u=Yt(wt),i===null?(g=Yf(),g===null&&(g=st,_=Hf(),g.pooledCache=_,_.refCount++,_!==null&&(g.pooledCacheLanes|=a),g=_),o.memoizedState={parent:u,cache:g},Kf(o),Ss(o,wt,g)):((i.lanes&a)!==0&&(Qf(i,o),Ha(o,null,null,a),Fa()),g=i.memoizedState,_=o.memoizedState,g.parent!==u?(g={parent:u,cache:u},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),Ss(o,wt,u)):(u=_.cache,Ss(o,wt,u),u!==g.cache&&Ff(o,[wt],a,!0))),Jt(i,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function zi(i){i.flags|=4}function Md(i,o,a,u,g){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(Sy())i.flags|=8192;else throw xo=Iu,Jf}else i.flags&=-16777217}function $g(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!f_(o))if(Sy())i.flags|=8192;else throw xo=Iu,Jf}function Hu(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Xl():536870912,i.lanes|=o,Ir|=o)}function Xa(i,o){if(!Be)switch(i.tailMode){case"hidden":o=i.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function at(i){var o=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(o)for(var g=i.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=u,i.childLanes=a,o}function vA(i,o,a){var u=o.pendingProps;switch(kf(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(o),null;case 1:return at(o),null;case 3:return a=o.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Gi(wt),ct(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(hr(o)?zi(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Of())),at(o),null;case 26:var g=o.type,_=o.memoizedState;return i===null?(zi(o),_!==null?(at(o),$g(o,_)):(at(o),Md(o,g,null,u,a))):_?_!==i.memoizedState?(zi(o),at(o),$g(o,_)):(at(o),o.flags&=-16777217):(i=i.memoizedProps,i!==u&&zi(o),at(o),Md(o,g,i,u,a)),null;case 27:if(Yo(o),a=Re.current,g=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==u&&zi(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return at(o),null}i=pe.current,hr(o)?Mp(o):(i=i_(g,u,a),o.stateNode=i,zi(o))}return at(o),null;case 5:if(Yo(o),g=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==u&&zi(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return at(o),null}if(_=pe.current,hr(o))Mp(o);else{var A=sc(Re.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?A.createElement("select",{is:u.is}):A.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?A.createElement(g,{is:u.is}):A.createElement(g)}}_[Ct]=o,_[qt]=u;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=_;e:switch(Kt(_,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&zi(o)}}return at(o),Md(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,a),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==u&&zi(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(s(166));if(i=Re.current,hr(o)){if(i=o.stateNode,a=o.memoizedProps,u=null,g=zt,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}i[Ct]=o,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||Jy(i.nodeValue,a)),i||Es(o,!0)}else i=sc(i).createTextNode(u),i[Ct]=o,o.stateNode=i}return at(o),null;case 31:if(a=o.memoizedState,i===null||i.memoizedState!==null){if(u=hr(o),a!==null){if(i===null){if(!u)throw Error(s(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Ct]=o}else Ro(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;at(o),i=!1}else a=Of(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return o.flags&256?(En(o),o):(En(o),null);if((o.flags&128)!==0)throw Error(s(558))}return at(o),null;case 13:if(u=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=hr(o),u!==null&&u.dehydrated!==null){if(i===null){if(!g)throw Error(s(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[Ct]=o}else Ro(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;at(o),g=!1}else g=Of(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(En(o),o):(En(o),null)}return En(o),(o.flags&128)!==0?(o.lanes=a,o):(a=u!==null,i=i!==null&&i.memoizedState!==null,a&&(u=o.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==g&&(u.flags|=2048)),a!==i&&a&&(o.child.flags|=8192),Hu(o,o.updateQueue),at(o),null);case 4:return ct(),i===null&&Zd(o.stateNode.containerInfo),at(o),null;case 10:return Gi(o.type),at(o),null;case 19:if(ee(_t),u=o.memoizedState,u===null)return at(o),null;if(g=(o.flags&128)!==0,_=u.rendering,_===null)if(g)Xa(u,!1);else{if(pt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(_=xu(i),_!==null){for(o.flags|=128,Xa(u,!1),i=_.updateQueue,o.updateQueue=i,Hu(o,i),o.subtreeFlags=0,i=a,a=o.child;a!==null;)Cp(a,i),a=a.sibling;return ce(_t,_t.current&1|2),Be&&qi(o,u.treeForkCount),o.child}i=i.sibling}u.tail!==null&&nn()>Qu&&(o.flags|=128,g=!0,Xa(u,!1),o.lanes=4194304)}else{if(!g)if(i=xu(_),i!==null){if(o.flags|=128,g=!0,i=i.updateQueue,o.updateQueue=i,Hu(o,i),Xa(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!Be)return at(o),null}else 2*nn()-u.renderingStartTime>Qu&&a!==536870912&&(o.flags|=128,g=!0,Xa(u,!1),o.lanes=4194304);u.isBackwards?(_.sibling=o.child,o.child=_):(i=u.last,i!==null?i.sibling=_:o.child=_,u.last=_)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=nn(),i.sibling=null,a=_t.current,ce(_t,g?a&1|2:a&1),Be&&qi(o,u.treeForkCount),i):(at(o),null);case 22:case 23:return En(o),Wf(),u=o.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(a&536870912)!==0&&(o.flags&128)===0&&(at(o),o.subtreeFlags&6&&(o.flags|=8192)):at(o),a=o.updateQueue,a!==null&&Hu(o,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==a&&(o.flags|=2048),i!==null&&ee(No),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),Gi(wt),at(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function EA(i,o){switch(kf(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Gi(wt),ct(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return Yo(o),null;case 31:if(o.memoizedState!==null){if(En(o),o.alternate===null)throw Error(s(340));Ro()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(En(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Ro()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return ee(_t),null;case 4:return ct(),null;case 10:return Gi(o.type),null;case 22:case 23:return En(o),Wf(),i!==null&&ee(No),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Gi(wt),null;case 25:return null;default:return null}}function Zg(i,o){switch(kf(o),o.tag){case 3:Gi(wt),ct();break;case 26:case 27:case 5:Yo(o);break;case 4:ct();break;case 31:o.memoizedState!==null&&En(o);break;case 13:En(o);break;case 19:ee(_t);break;case 10:Gi(o.type);break;case 22:case 23:En(o),Wf(),i!==null&&ee(No);break;case 24:Gi(wt)}}function $a(i,o){try{var a=o.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var g=u.next;a=g;do{if((a.tag&i)===i){u=void 0;var _=a.create,A=a.inst;u=_(),A.destroy=u}a=a.next}while(a!==g)}}catch(R){je(o,o.return,R)}}function Ns(i,o,a){try{var u=o.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var _=g.next;u=_;do{if((u.tag&i)===i){var A=u.inst,R=A.destroy;if(R!==void 0){A.destroy=void 0,g=o;var V=a,z=R;try{z()}catch($){je(g,V,$)}}}u=u.next}while(u!==_)}}catch($){je(o,o.return,$)}}function Wg(i){var o=i.updateQueue;if(o!==null){var a=i.stateNode;try{Fp(o,a)}catch(u){je(i,i.return,u)}}}function jg(i,o,a){a.props=Vo(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){je(i,o,u)}}function Za(i,o){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(g){je(i,o,g)}}function Ci(i,o){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(g){je(i,o,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){je(i,o,g)}else a.current=null}function ey(i){var o=i.type,a=i.memoizedProps,u=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(g){je(i,i.return,g)}}function xd(i,o,a){try{var u=i.stateNode;HA(u,i.type,a,o),u[qt]=o}catch(g){je(i,i.return,g)}}function ty(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Us(i.type)||i.tag===4}function Dd(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||ty(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Us(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function bd(i,o,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(i),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=Qn));else if(u!==4&&(u===27&&Us(i.type)&&(a=i.stateNode,o=null),i=i.child,i!==null))for(bd(i,o,a),i=i.sibling;i!==null;)bd(i,o,a),i=i.sibling}function zu(i,o,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,o?a.insertBefore(i,o):a.appendChild(i);else if(u!==4&&(u===27&&Us(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(zu(i,o,a),i=i.sibling;i!==null;)zu(i,o,a),i=i.sibling}function ny(i){var o=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);Kt(o,u,a),o[Ct]=i,o[qt]=a}catch(_){je(i,i.return,_)}}var Yi=!1,xt=!1,Vd=!1,iy=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function SA(i,o){if(i=i.containerInfo,eh=fc,i=pp(i),If(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var g=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var A=0,R=-1,V=-1,z=0,$=0,te=i,J=null;t:for(;;){for(var X;te!==a||g!==0&&te.nodeType!==3||(R=A+g),te!==_||u!==0&&te.nodeType!==3||(V=A+u),te.nodeType===3&&(A+=te.nodeValue.length),(X=te.firstChild)!==null;)J=te,te=X;for(;;){if(te===i)break t;if(J===a&&++z===g&&(R=A),J===_&&++$===u&&(V=A),(X=te.nextSibling)!==null)break;te=J,J=te.parentNode}te=X}a=R===-1||V===-1?null:{start:R,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(th={focusedElem:i,selectionRange:a},fc=!1,Gt=o;Gt!==null;)if(o=Gt,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Gt=i;else for(;Gt!==null;){switch(o=Gt,_=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)g=i[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=o,g=_.memoizedProps,_=_.memoizedState,u=a.stateNode;try{var ye=Vo(a.type,g);i=u.getSnapshotBeforeUpdate(ye,_),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ae){je(a,a.return,Ae)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,a=i.nodeType,a===9)sh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":sh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,Gt=i;break}Gt=o.return}}function sy(i,o,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Ki(i,a),u&4&&$a(5,a);break;case 1:if(Ki(i,a),u&4)if(i=a.stateNode,o===null)try{i.componentDidMount()}catch(A){je(a,a.return,A)}else{var g=Vo(a.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(g,o,i.__reactInternalSnapshotBeforeUpdate)}catch(A){je(a,a.return,A)}}u&64&&Wg(a),u&512&&Za(a,a.return);break;case 3:if(Ki(i,a),u&64&&(i=a.updateQueue,i!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{Fp(i,o)}catch(A){je(a,a.return,A)}}break;case 27:o===null&&u&4&&ny(a);case 26:case 5:Ki(i,a),o===null&&u&4&&ey(a),u&512&&Za(a,a.return);break;case 12:Ki(i,a);break;case 31:Ki(i,a),u&4&&ay(i,a);break;case 13:Ki(i,a),u&4&&ly(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=DA.bind(null,a),ZA(i,a))));break;case 22:if(u=a.memoizedState!==null||Yi,!u){o=o!==null&&o.memoizedState!==null||xt,g=Yi;var _=xt;Yi=u,(xt=o)&&!_?Qi(i,a,(a.subtreeFlags&8772)!==0):Ki(i,a),Yi=g,xt=_}break;case 30:break;default:Ki(i,a)}}function oy(i){var o=i.alternate;o!==null&&(i.alternate=null,oy(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&$o(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var dt=null,un=!1;function Ji(i,o,a){for(a=a.child;a!==null;)ry(i,o,a),a=a.sibling}function ry(i,o,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(zn,a)}catch{}switch(a.tag){case 26:xt||Ci(a,o),Ji(i,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:xt||Ci(a,o);var u=dt,g=un;Us(a.type)&&(dt=a.stateNode,un=!1),Ji(i,o,a),rl(a.stateNode),dt=u,un=g;break;case 5:xt||Ci(a,o);case 6:if(u=dt,g=un,dt=null,Ji(i,o,a),dt=u,un=g,dt!==null)if(un)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(a.stateNode)}catch(_){je(a,o,_)}else try{dt.removeChild(a.stateNode)}catch(_){je(a,o,_)}break;case 18:dt!==null&&(un?(i=dt,Wy(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Pr(i)):Wy(dt,a.stateNode));break;case 4:u=dt,g=un,dt=a.stateNode.containerInfo,un=!0,Ji(i,o,a),dt=u,un=g;break;case 0:case 11:case 14:case 15:Ns(2,a,o),xt||Ns(4,a,o),Ji(i,o,a);break;case 1:xt||(Ci(a,o),u=a.stateNode,typeof u.componentWillUnmount=="function"&&jg(a,o,u)),Ji(i,o,a);break;case 21:Ji(i,o,a);break;case 22:xt=(u=xt)||a.memoizedState!==null,Ji(i,o,a),xt=u;break;default:Ji(i,o,a)}}function ay(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Pr(i)}catch(a){je(o,o.return,a)}}}function ly(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Pr(i)}catch(a){je(o,o.return,a)}}function AA(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new iy),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new iy),o;default:throw Error(s(435,i.tag))}}function Yu(i,o){var a=AA(i);o.forEach(function(u){if(!a.has(u)){a.add(u);var g=bA.bind(null,i,u);u.then(g,g)}})}function cn(i,o){var a=o.deletions;if(a!==null)for(var u=0;u<a.length;u++){var g=a[u],_=i,A=o,R=A;e:for(;R!==null;){switch(R.tag){case 27:if(Us(R.type)){dt=R.stateNode,un=!1;break e}break;case 5:dt=R.stateNode,un=!1;break e;case 3:case 4:dt=R.stateNode.containerInfo,un=!0;break e}R=R.return}if(dt===null)throw Error(s(160));ry(_,A,g),dt=null,un=!1,_=g.alternate,_!==null&&(_.return=null),g.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)uy(o,i),o=o.sibling}var ei=null;function uy(i,o){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:cn(o,i),fn(i),u&4&&(Ns(3,i,i.return),$a(3,i),Ns(5,i,i.return));break;case 1:cn(o,i),fn(i),u&512&&(xt||a===null||Ci(a,a.return)),u&64&&Yi&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var g=ei;if(cn(o,i),fn(i),u&512&&(xt||a===null||Ci(a,a.return)),u&4){var _=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){e:{u=i.type,a=i.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":_=g.getElementsByTagName("title")[0],(!_||_[ci]||_[Ct]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=g.createElement(u),g.head.insertBefore(_,g.querySelector("head > title"))),Kt(_,u,a),_[Ct]=i,Rt(_),u=_;break e;case"link":var A=u_("link","href",g).get(u+(a.href||""));if(A){for(var R=0;R<A.length;R++)if(_=A[R],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(R,1);break t}}_=g.createElement(u),Kt(_,u,a),g.head.appendChild(_);break;case"meta":if(A=u_("meta","content",g).get(u+(a.content||""))){for(R=0;R<A.length;R++)if(_=A[R],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(R,1);break t}}_=g.createElement(u),Kt(_,u,a),g.head.appendChild(_);break;default:throw Error(s(468,u))}_[Ct]=i,Rt(_),u=_}i.stateNode=u}else c_(g,i.type,i.stateNode);else i.stateNode=l_(g,u,i.memoizedProps);else _!==u?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,u===null?c_(g,i.type,i.stateNode):l_(g,u,i.memoizedProps)):u===null&&i.stateNode!==null&&xd(i,i.memoizedProps,a.memoizedProps)}break;case 27:cn(o,i),fn(i),u&512&&(xt||a===null||Ci(a,a.return)),a!==null&&u&4&&xd(i,i.memoizedProps,a.memoizedProps);break;case 5:if(cn(o,i),fn(i),u&512&&(xt||a===null||Ci(a,a.return)),i.flags&32){g=i.stateNode;try{ln(g,"")}catch(ye){je(i,i.return,ye)}}u&4&&i.stateNode!=null&&(g=i.memoizedProps,xd(i,g,a!==null?a.memoizedProps:g)),u&1024&&(Vd=!0);break;case 6:if(cn(o,i),fn(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(ye){je(i,i.return,ye)}}break;case 3:if(ac=null,g=ei,ei=oc(o.containerInfo),cn(o,i),ei=g,fn(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Pr(o.containerInfo)}catch(ye){je(i,i.return,ye)}Vd&&(Vd=!1,cy(i));break;case 4:u=ei,ei=oc(i.stateNode.containerInfo),cn(o,i),fn(i),ei=u;break;case 12:cn(o,i),fn(i);break;case 31:cn(o,i),fn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Yu(i,u)));break;case 13:cn(o,i),fn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ku=nn()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Yu(i,u)));break;case 22:g=i.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,z=Yi,$=xt;if(Yi=z||g,xt=$||V,cn(o,i),xt=$,Yi=z,fn(i),u&8192)e:for(o=i.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(a===null||V||Yi||xt||Po(i)),a=null,o=i;;){if(o.tag===5||o.tag===26){if(a===null){V=a=o;try{if(_=V.stateNode,g)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{R=V.stateNode;var te=V.memoizedProps.style,J=te!=null&&te.hasOwnProperty("display")?te.display:null;R.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(ye){je(V,V.return,ye)}}}else if(o.tag===6){if(a===null){V=o;try{V.stateNode.nodeValue=g?"":V.memoizedProps}catch(ye){je(V,V.return,ye)}}}else if(o.tag===18){if(a===null){V=o;try{var X=V.stateNode;g?jy(X,!0):jy(V.stateNode,!1)}catch(ye){je(V,V.return,ye)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Yu(i,a))));break;case 19:cn(o,i),fn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Yu(i,u)));break;case 30:break;case 21:break;default:cn(o,i),fn(i)}}function fn(i){var o=i.flags;if(o&2){try{for(var a,u=i.return;u!==null;){if(ty(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var g=a.stateNode,_=Dd(i);zu(i,_,g);break;case 5:var A=a.stateNode;a.flags&32&&(ln(A,""),a.flags&=-33);var R=Dd(i);zu(i,R,A);break;case 3:case 4:var V=a.stateNode.containerInfo,z=Dd(i);bd(i,z,V);break;default:throw Error(s(161))}}catch($){je(i,i.return,$)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function cy(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;cy(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function Ki(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)sy(i,o.alternate,o),o=o.sibling}function Po(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Ns(4,o,o.return),Po(o);break;case 1:Ci(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&jg(o,o.return,a),Po(o);break;case 27:rl(o.stateNode);case 26:case 5:Ci(o,o.return),Po(o);break;case 22:o.memoizedState===null&&Po(o);break;case 30:Po(o);break;default:Po(o)}i=i.sibling}}function Qi(i,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,g=i,_=o,A=_.flags;switch(_.tag){case 0:case 11:case 15:Qi(g,_,a),$a(4,_);break;case 1:if(Qi(g,_,a),u=_,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(z){je(u,u.return,z)}if(u=_,g=u.updateQueue,g!==null){var R=u.stateNode;try{var V=g.shared.hiddenCallbacks;if(V!==null)for(g.shared.hiddenCallbacks=null,g=0;g<V.length;g++)Bp(V[g],R)}catch(z){je(u,u.return,z)}}a&&A&64&&Wg(_),Za(_,_.return);break;case 27:ny(_);case 26:case 5:Qi(g,_,a),a&&u===null&&A&4&&ey(_),Za(_,_.return);break;case 12:Qi(g,_,a);break;case 31:Qi(g,_,a),a&&A&4&&ay(g,_);break;case 13:Qi(g,_,a),a&&A&4&&ly(g,_);break;case 22:_.memoizedState===null&&Qi(g,_,a),Za(_,_.return);break;case 30:break;default:Qi(g,_,a)}o=o.sibling}}function Pd(i,o){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&ka(a))}function Ud(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&ka(i))}function ti(i,o,a,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)fy(i,o,a,u),o=o.sibling}function fy(i,o,a,u){var g=o.flags;switch(o.tag){case 0:case 11:case 15:ti(i,o,a,u),g&2048&&$a(9,o);break;case 1:ti(i,o,a,u);break;case 3:ti(i,o,a,u),g&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&ka(i)));break;case 12:if(g&2048){ti(i,o,a,u),i=o.stateNode;try{var _=o.memoizedProps,A=_.id,R=_.onPostCommit;typeof R=="function"&&R(A,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(V){je(o,o.return,V)}}else ti(i,o,a,u);break;case 31:ti(i,o,a,u);break;case 13:ti(i,o,a,u);break;case 23:break;case 22:_=o.stateNode,A=o.alternate,o.memoizedState!==null?_._visibility&2?ti(i,o,a,u):Wa(i,o):_._visibility&2?ti(i,o,a,u):(_._visibility|=2,Ar(i,o,a,u,(o.subtreeFlags&10256)!==0||!1)),g&2048&&Pd(A,o);break;case 24:ti(i,o,a,u),g&2048&&Ud(o.alternate,o);break;default:ti(i,o,a,u)}}function Ar(i,o,a,u,g){for(g=g&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=i,A=o,R=a,V=u,z=A.flags;switch(A.tag){case 0:case 11:case 15:Ar(_,A,R,V,g),$a(8,A);break;case 23:break;case 22:var $=A.stateNode;A.memoizedState!==null?$._visibility&2?Ar(_,A,R,V,g):Wa(_,A):($._visibility|=2,Ar(_,A,R,V,g)),g&&z&2048&&Pd(A.alternate,A);break;case 24:Ar(_,A,R,V,g),g&&z&2048&&Ud(A.alternate,A);break;default:Ar(_,A,R,V,g)}o=o.sibling}}function Wa(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=i,u=o,g=u.flags;switch(u.tag){case 22:Wa(a,u),g&2048&&Pd(u.alternate,u);break;case 24:Wa(a,u),g&2048&&Ud(u.alternate,u);break;default:Wa(a,u)}o=o.sibling}}var ja=8192;function Cr(i,o,a){if(i.subtreeFlags&ja)for(i=i.child;i!==null;)dy(i,o,a),i=i.sibling}function dy(i,o,a){switch(i.tag){case 26:Cr(i,o,a),i.flags&ja&&i.memoizedState!==null&&uC(a,ei,i.memoizedState,i.memoizedProps);break;case 5:Cr(i,o,a);break;case 3:case 4:var u=ei;ei=oc(i.stateNode.containerInfo),Cr(i,o,a),ei=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=ja,ja=16777216,Cr(i,o,a),ja=u):Cr(i,o,a));break;default:Cr(i,o,a)}}function hy(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function el(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];Gt=u,py(u,i)}hy(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)my(i),i=i.sibling}function my(i){switch(i.tag){case 0:case 11:case 15:el(i),i.flags&2048&&Ns(9,i,i.return);break;case 3:el(i);break;case 12:el(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Ju(i)):el(i);break;default:el(i)}}function Ju(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];Gt=u,py(u,i)}hy(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Ns(8,o,o.return),Ju(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,Ju(o));break;default:Ju(o)}i=i.sibling}}function py(i,o){for(;Gt!==null;){var a=Gt;switch(a.tag){case 0:case 11:case 15:Ns(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ka(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Gt=u;else e:for(a=i;Gt!==null;){u=Gt;var g=u.sibling,_=u.return;if(oy(u),u===a){Gt=null;break e}if(g!==null){g.return=_,Gt=g;break e}Gt=_}}}var CA={getCacheForType:function(i){var o=Yt(wt),a=o.data.get(i);return a===void 0&&(a=i(),o.data.set(i,a)),a},cacheSignal:function(){return Yt(wt).controller.signal}},RA=typeof WeakMap=="function"?WeakMap:Map,Xe=0,st=null,be=null,Ue=0,We=0,Sn=null,Ms=!1,Rr=!1,Ld=!1,Xi=0,pt=0,xs=0,Uo=0,kd=0,An=0,Ir=0,tl=null,dn=null,qd=!1,Ku=0,gy=0,Qu=1/0,Xu=null,Ds=null,Lt=0,bs=null,wr=null,$i=0,Od=0,Gd=null,yy=null,nl=0,Bd=null;function Cn(){return(Xe&2)!==0&&Ue!==0?Ue&-Ue:Y.T!==null?Kd():$l()}function _y(){if(An===0)if((Ue&536870912)===0||Be){var i=ao;ao<<=1,(ao&3932160)===0&&(ao=262144),An=i}else An=536870912;return i=vn.current,i!==null&&(i.flags|=32),An}function hn(i,o,a){(i===st&&(We===2||We===9)||i.cancelPendingCommit!==null)&&(Nr(i,0),Vs(i,Ue,An,!1)),lo(i,a),((Xe&2)===0||i!==st)&&(i===st&&((Xe&2)===0&&(Uo|=a),pt===4&&Vs(i,Ue,An,!1)),Ri(i))}function Ty(i,o,a){if((Xe&6)!==0)throw Error(s(327));var u=!a&&(o&127)===0&&(o&i.expiredLanes)===0||Yn(i,o),g=u?NA(i,o):Hd(i,o,!0),_=u;do{if(g===0){Rr&&!u&&Vs(i,o,0,!1);break}else{if(a=i.current.alternate,_&&!IA(a)){g=Hd(i,o,!1),_=!1;continue}if(g===2){if(_=o,i.errorRecoveryDisabledLanes&_)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var R=i;g=tl;var V=R.current.memoizedState.isDehydrated;if(V&&(Nr(R,A).flags|=256),A=Hd(R,A,!1),A!==2){if(Ld&&!V){R.errorRecoveryDisabledLanes|=_,Uo|=_,g=4;break e}_=dn,dn=g,_!==null&&(dn===null?dn=_:dn.push.apply(dn,_))}g=A}if(_=!1,g!==2)continue}}if(g===1){Nr(i,0),Vs(i,o,0,!0);break}e:{switch(u=i,_=g,_){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:Vs(u,o,An,!Ms);break e;case 2:dn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(g=Ku+300-nn(),10<g)){if(Vs(u,o,An,!Ms),ai(u,0,!0)!==0)break e;$i=o,u.timeoutHandle=$y(vy.bind(null,u,a,dn,Xu,qd,o,An,Uo,Ir,Ms,_,"Throttled",-0,0),g);break e}vy(u,a,dn,Xu,qd,o,An,Uo,Ir,Ms,_,null,-0,0)}}break}while(!0);Ri(i)}function vy(i,o,a,u,g,_,A,R,V,z,$,te,J,X){if(i.timeoutHandle=-1,te=o.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qn},dy(o,_,te);var ye=(_&62914560)===_?Ku-nn():(_&4194048)===_?gy-nn():0;if(ye=cC(te,ye),ye!==null){$i=_,i.cancelPendingCommit=ye(Ny.bind(null,i,o,_,a,u,g,A,R,V,$,te,null,J,X)),Vs(i,_,A,!z);return}}Ny(i,o,_,a,u,g,A,R,V)}function IA(i){for(var o=i;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var g=a[u],_=g.getSnapshot;g=g.value;try{if(!_n(_(),g))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Vs(i,o,a,u){o&=~kd,o&=~Uo,i.suspendedLanes|=o,i.pingedLanes&=~o,u&&(i.warmLanes|=o),u=i.expirationTimes;for(var g=o;0<g;){var _=31-gt(g),A=1<<_;u[_]=-1,g&=~A}a!==0&&uo(i,a,o)}function $u(){return(Xe&6)===0?(il(0),!1):!0}function Fd(){if(be!==null){if(We===0)var i=be.return;else i=be,Oi=Io=null,sd(i),_r=null,Oa=0,i=be;for(;i!==null;)Zg(i.alternate,i),i=i.return;be=null}}function Nr(i,o){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,JA(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),$i=0,Fd(),st=i,be=a=ki(i.current,null),Ue=o,We=0,Sn=null,Ms=!1,Rr=Yn(i,o),Ld=!1,Ir=An=kd=Uo=xs=pt=0,dn=tl=null,qd=!1,(o&8)!==0&&(o|=o&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=o;0<u;){var g=31-gt(u),_=1<<g;o|=i[g],u&=~_}return Xi=o,yu(),a}function Ey(i,o){xe=null,Y.H=Ka,o===yr||o===Ru?(o=kp(),We=3):o===Jf?(o=kp(),We=4):We=o===vd?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Sn=o,be===null&&(pt=1,Ou(i,Vn(o,i.current)))}function Sy(){var i=vn.current;return i===null?!0:(Ue&4194048)===Ue?kn===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?i===kn:!1}function Ay(){var i=Y.H;return Y.H=Ka,i===null?Ka:i}function Cy(){var i=Y.A;return Y.A=CA,i}function Zu(){pt=4,Ms||(Ue&4194048)!==Ue&&vn.current!==null||(Rr=!0),(xs&134217727)===0&&(Uo&134217727)===0||st===null||Vs(st,Ue,An,!1)}function Hd(i,o,a){var u=Xe;Xe|=2;var g=Ay(),_=Cy();(st!==i||Ue!==o)&&(Xu=null,Nr(i,o)),o=!1;var A=pt;e:do try{if(We!==0&&be!==null){var R=be,V=Sn;switch(We){case 8:Fd(),A=6;break e;case 3:case 2:case 9:case 6:vn.current===null&&(o=!0);var z=We;if(We=0,Sn=null,Mr(i,R,V,z),a&&Rr){A=0;break e}break;default:z=We,We=0,Sn=null,Mr(i,R,V,z)}}wA(),A=pt;break}catch($){Ey(i,$)}while(!0);return o&&i.shellSuspendCounter++,Oi=Io=null,Xe=u,Y.H=g,Y.A=_,be===null&&(st=null,Ue=0,yu()),A}function wA(){for(;be!==null;)Ry(be)}function NA(i,o){var a=Xe;Xe|=2;var u=Ay(),g=Cy();st!==i||Ue!==o?(Xu=null,Qu=nn()+500,Nr(i,o)):Rr=Yn(i,o);e:do try{if(We!==0&&be!==null){o=be;var _=Sn;t:switch(We){case 1:We=0,Sn=null,Mr(i,o,_,1);break;case 2:case 9:if(Up(_)){We=0,Sn=null,Iy(o);break}o=function(){We!==2&&We!==9||st!==i||(We=7),Ri(i)},_.then(o,o);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:Up(_)?(We=0,Sn=null,Iy(o)):(We=0,Sn=null,Mr(i,o,_,7));break;case 5:var A=null;switch(be.tag){case 26:A=be.memoizedState;case 5:case 27:var R=be;if(A?f_(A):R.stateNode.complete){We=0,Sn=null;var V=R.sibling;if(V!==null)be=V;else{var z=R.return;z!==null?(be=z,Wu(z)):be=null}break t}}We=0,Sn=null,Mr(i,o,_,5);break;case 6:We=0,Sn=null,Mr(i,o,_,6);break;case 8:Fd(),pt=6;break e;default:throw Error(s(462))}}MA();break}catch($){Ey(i,$)}while(!0);return Oi=Io=null,Y.H=u,Y.A=g,Xe=a,be!==null?0:(st=null,Ue=0,yu(),pt)}function MA(){for(;be!==null&&!Tf();)Ry(be)}function Ry(i){var o=Xg(i.alternate,i,Xi);i.memoizedProps=i.pendingProps,o===null?Wu(i):be=o}function Iy(i){var o=i,a=o.alternate;switch(o.tag){case 15:case 0:o=Hg(a,o,o.pendingProps,o.type,void 0,Ue);break;case 11:o=Hg(a,o,o.pendingProps,o.type.render,o.ref,Ue);break;case 5:sd(o);default:Zg(a,o),o=be=Cp(o,Xi),o=Xg(a,o,Xi)}i.memoizedProps=i.pendingProps,o===null?Wu(i):be=o}function Mr(i,o,a,u){Oi=Io=null,sd(o),_r=null,Oa=0;var g=o.return;try{if(yA(i,g,o,a,Ue)){pt=1,Ou(i,Vn(a,i.current)),be=null;return}}catch(_){if(g!==null)throw be=g,_;pt=1,Ou(i,Vn(a,i.current)),be=null;return}o.flags&32768?(Be||u===1?i=!0:Rr||(Ue&536870912)!==0?i=!1:(Ms=i=!0,(u===2||u===9||u===3||u===6)&&(u=vn.current,u!==null&&u.tag===13&&(u.flags|=16384))),wy(o,i)):Wu(o)}function Wu(i){var o=i;do{if((o.flags&32768)!==0){wy(o,Ms);return}i=o.return;var a=vA(o.alternate,o,Xi);if(a!==null){be=a;return}if(o=o.sibling,o!==null){be=o;return}be=o=i}while(o!==null);pt===0&&(pt=5)}function wy(i,o){do{var a=EA(i.alternate,i);if(a!==null){a.flags&=32767,be=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(i=i.sibling,i!==null)){be=i;return}be=i=a}while(i!==null);pt=6,be=null}function Ny(i,o,a,u,g,_,A,R,V){i.cancelPendingCommit=null;do ju();while(Lt!==0);if((Xe&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(_=o.lanes|o.childLanes,_|=Df,Sf(i,a,_,A,R,V),i===st&&(be=st=null,Ue=0),wr=o,bs=i,$i=a,Od=_,Gd=g,yy=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,VA(us,function(){return Vy(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=Y.T,Y.T=null,g=oe.p,oe.p=2,A=Xe,Xe|=4;try{SA(i,o,a)}finally{Xe=A,oe.p=g,Y.T=u}}Lt=1,My(),xy(),Dy()}}function My(){if(Lt===1){Lt=0;var i=bs,o=wr,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var u=oe.p;oe.p=2;var g=Xe;Xe|=4;try{uy(o,i);var _=th,A=pp(i.containerInfo),R=_.focusedElem,V=_.selectionRange;if(A!==R&&R&&R.ownerDocument&&mp(R.ownerDocument.documentElement,R)){if(V!==null&&If(R)){var z=V.start,$=V.end;if($===void 0&&($=z),"selectionStart"in R)R.selectionStart=z,R.selectionEnd=Math.min($,R.value.length);else{var te=R.ownerDocument||document,J=te&&te.defaultView||window;if(J.getSelection){var X=J.getSelection(),ye=R.textContent.length,Ae=Math.min(V.start,ye),it=V.end===void 0?Ae:Math.min(V.end,ye);!X.extend&&Ae>it&&(A=it,it=Ae,Ae=A);var O=hp(R,Ae),L=hp(R,it);if(O&&L&&(X.rangeCount!==1||X.anchorNode!==O.node||X.anchorOffset!==O.offset||X.focusNode!==L.node||X.focusOffset!==L.offset)){var H=te.createRange();H.setStart(O.node,O.offset),X.removeAllRanges(),Ae>it?(X.addRange(H),X.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),X.addRange(H))}}}}for(te=[],X=R;X=X.parentNode;)X.nodeType===1&&te.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<te.length;R++){var Z=te[R];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}fc=!!eh,th=eh=null}finally{Xe=g,oe.p=u,Y.T=a}}i.current=o,Lt=2}}function xy(){if(Lt===2){Lt=0;var i=bs,o=wr,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var u=oe.p;oe.p=2;var g=Xe;Xe|=4;try{sy(i,o.alternate,o)}finally{Xe=g,oe.p=u,Y.T=a}}Lt=3}}function Dy(){if(Lt===4||Lt===3){Lt=0,Hl();var i=bs,o=wr,a=$i,u=yy;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Lt=5:(Lt=0,wr=bs=null,by(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Ds=null),Vi(a),o=o.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(zn,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=Y.T,g=oe.p,oe.p=2,Y.T=null;try{for(var _=i.onRecoverableError,A=0;A<u.length;A++){var R=u[A];_(R.value,{componentStack:R.stack})}}finally{Y.T=o,oe.p=g}}($i&3)!==0&&ju(),Ri(i),g=i.pendingLanes,(a&261930)!==0&&(g&42)!==0?i===Bd?nl++:(nl=0,Bd=i):nl=0,il(0)}}function by(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,ka(o)))}function ju(){return My(),xy(),Dy(),Vy()}function Vy(){if(Lt!==5)return!1;var i=bs,o=Od;Od=0;var a=Vi($i),u=Y.T,g=oe.p;try{oe.p=32>a?32:a,Y.T=null,a=Gd,Gd=null;var _=bs,A=$i;if(Lt=0,wr=bs=null,$i=0,(Xe&6)!==0)throw Error(s(331));var R=Xe;if(Xe|=4,my(_.current),fy(_,_.current,A,a),Xe=R,il(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(zn,_)}catch{}return!0}finally{oe.p=g,Y.T=u,by(i,o)}}function Py(i,o,a){o=Vn(a,o),o=Td(i.stateNode,o,2),i=Rs(i,o,2),i!==null&&(lo(i,2),Ri(i))}function je(i,o,a){if(i.tag===3)Py(i,i,a);else for(;o!==null;){if(o.tag===3){Py(o,i,a);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ds===null||!Ds.has(u))){i=Vn(a,i),a=Ug(2),u=Rs(o,a,2),u!==null&&(Lg(a,u,o,i),lo(u,2),Ri(u));break}}o=o.return}}function zd(i,o,a){var u=i.pingCache;if(u===null){u=i.pingCache=new RA;var g=new Set;u.set(o,g)}else g=u.get(o),g===void 0&&(g=new Set,u.set(o,g));g.has(a)||(Ld=!0,g.add(a),i=xA.bind(null,i,o,a),o.then(i,i))}function xA(i,o,a){var u=i.pingCache;u!==null&&u.delete(o),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,st===i&&(Ue&a)===a&&(pt===4||pt===3&&(Ue&62914560)===Ue&&300>nn()-Ku?(Xe&2)===0&&Nr(i,0):kd|=a,Ir===Ue&&(Ir=0)),Ri(i)}function Uy(i,o){o===0&&(o=Xl()),i=Ao(i,o),i!==null&&(lo(i,o),Ri(i))}function DA(i){var o=i.memoizedState,a=0;o!==null&&(a=o.retryLane),Uy(i,a)}function bA(i,o){var a=0;switch(i.tag){case 31:case 13:var u=i.stateNode,g=i.memoizedState;g!==null&&(a=g.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(o),Uy(i,a)}function VA(i,o){return Ut(i,o)}var ec=null,xr=null,Yd=!1,tc=!1,Jd=!1,Ps=0;function Ri(i){i!==xr&&i.next===null&&(xr===null?ec=xr=i:xr=xr.next=i),tc=!0,Yd||(Yd=!0,UA())}function il(i,o){if(!Jd&&tc){Jd=!0;do for(var a=!1,u=ec;u!==null;){if(i!==0){var g=u.pendingLanes;if(g===0)var _=0;else{var A=u.suspendedLanes,R=u.pingedLanes;_=(1<<31-gt(42|i)+1)-1,_&=g&~(A&~R),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,Oy(u,_))}else _=Ue,_=ai(u,u===st?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||Yn(u,_)||(a=!0,Oy(u,_));u=u.next}while(a);Jd=!1}}function PA(){Ly()}function Ly(){tc=Yd=!1;var i=0;Ps!==0&&YA()&&(i=Ps);for(var o=nn(),a=null,u=ec;u!==null;){var g=u.next,_=ky(u,o);_===0?(u.next=null,a===null?ec=g:a.next=g,g===null&&(xr=a)):(a=u,(i!==0||(_&3)!==0)&&(tc=!0)),u=g}Lt!==0&&Lt!==5||il(i),Ps!==0&&(Ps=0)}function ky(i,o){for(var a=i.suspendedLanes,u=i.pingedLanes,g=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var A=31-gt(_),R=1<<A,V=g[A];V===-1?((R&a)===0||(R&u)!==0)&&(g[A]=Ef(R,o)):V<=o&&(i.expiredLanes|=R),_&=~R}if(o=st,a=Ue,a=ai(i,i===o?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===o&&(We===2||We===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&ls(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Yn(i,a)){if(o=a&-a,o===i.callbackPriority)return o;switch(u!==null&&ls(u),Vi(a)){case 2:case 8:a=ha;break;case 32:a=us;break;case 268435456:a=zl;break;default:a=us}return u=qy.bind(null,i),a=Ut(a,u),i.callbackPriority=o,i.callbackNode=a,o}return u!==null&&u!==null&&ls(u),i.callbackPriority=2,i.callbackNode=null,2}function qy(i,o){if(Lt!==0&&Lt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(ju()&&i.callbackNode!==a)return null;var u=Ue;return u=ai(i,i===st?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(Ty(i,u,o),ky(i,nn()),i.callbackNode!=null&&i.callbackNode===a?qy.bind(null,i):null)}function Oy(i,o){if(ju())return null;Ty(i,o,!0)}function UA(){KA(function(){(Xe&6)!==0?Ut(da,PA):Ly()})}function Kd(){if(Ps===0){var i=pr;i===0&&(i=oi,oi<<=1,(oi&261888)===0&&(oi=256)),Ps=i}return Ps}function Gy(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:er(""+i)}function By(i,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,i.id&&a.setAttribute("form",i.id),o.parentNode.insertBefore(a,o),i=new FormData(i),a.parentNode.removeChild(a),i}function LA(i,o,a,u,g){if(o==="submit"&&a&&a.stateNode===g){var _=Gy((g[qt]||null).action),A=u.submitter;A&&(o=(o=A[qt]||null)?Gy(o.formAction):A.getAttribute("formAction"),o!==null&&(_=o,A=null));var R=new _i("action","action",null,u,g);i.push({event:R,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ps!==0){var V=A?By(g,A):new FormData(g);hd(a,{pending:!0,data:V,method:g.method,action:_},null,V)}}else typeof _=="function"&&(R.preventDefault(),V=A?By(g,A):new FormData(g),hd(a,{pending:!0,data:V,method:g.method,action:_},_,V))},currentTarget:g}]})}}for(var Qd=0;Qd<xf.length;Qd++){var Xd=xf[Qd],kA=Xd.toLowerCase(),qA=Xd[0].toUpperCase()+Xd.slice(1);jn(kA,"on"+qA)}jn(_p,"onAnimationEnd"),jn(Tp,"onAnimationIteration"),jn(vp,"onAnimationStart"),jn("dblclick","onDoubleClick"),jn("focusin","onFocus"),jn("focusout","onBlur"),jn(eA,"onTransitionRun"),jn(tA,"onTransitionStart"),jn(nA,"onTransitionCancel"),jn(Ep,"onTransitionEnd"),mi("onMouseEnter",["mouseout","mouseover"]),mi("onMouseLeave",["mouseout","mouseover"]),mi("onPointerEnter",["pointerout","pointerover"]),mi("onPointerLeave",["pointerout","pointerover"]),hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hi("onBeforeInput",["compositionend","keypress","textInput","paste"]),hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sl));function Fy(i,o){o=(o&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],g=u.event;u=u.listeners;e:{var _=void 0;if(o)for(var A=u.length-1;0<=A;A--){var R=u[A],V=R.instance,z=R.currentTarget;if(R=R.listener,V!==_&&g.isPropagationStopped())break e;_=R,g.currentTarget=z;try{_(g)}catch($){gu($)}g.currentTarget=null,_=V}else for(A=0;A<u.length;A++){if(R=u[A],V=R.instance,z=R.currentTarget,R=R.listener,V!==_&&g.isPropagationStopped())break e;_=R,g.currentTarget=z;try{_(g)}catch($){gu($)}g.currentTarget=null,_=V}}}}function Ve(i,o){var a=o[Xo];a===void 0&&(a=o[Xo]=new Set);var u=i+"__bubble";a.has(u)||(Hy(o,i,2,!1),a.add(u))}function $d(i,o,a){var u=0;o&&(u|=4),Hy(a,i,u,o)}var nc="_reactListening"+Math.random().toString(36).slice(2);function Zd(i){if(!i[nc]){i[nc]=!0,ga.forEach(function(a){a!=="selectionchange"&&(OA.has(a)||$d(a,!1,i),$d(a,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[nc]||(o[nc]=!0,$d("selectionchange",!1,o))}}function Hy(i,o,a,u){switch(__(o)){case 2:var g=hC;break;case 8:g=mC;break;default:g=dh}a=g.bind(null,o,a,i),g=void 0,!po||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),u?g!==void 0?i.addEventListener(o,a,{capture:!0,passive:g}):i.addEventListener(o,a,!0):g!==void 0?i.addEventListener(o,a,{passive:g}):i.addEventListener(o,a,!1)}function Wd(i,o,a,u,g){var _=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var A=u.tag;if(A===3||A===4){var R=u.stateNode.containerInfo;if(R===g)break;if(A===4)for(A=u.return;A!==null;){var V=A.tag;if((V===3||V===4)&&A.stateNode.containerInfo===g)return;A=A.return}for(;R!==null;){if(A=fi(R),A===null)return;if(V=A.tag,V===5||V===6||V===26||V===27){u=_=A;continue e}R=R.parentNode}}u=u.return}ps(function(){var z=_,$=Mn(a),te=[];e:{var J=Sp.get(i);if(J!==void 0){var X=_i,ye=i;switch(i){case"keypress":if(yo(a)===0)break e;case"keydown":case"keyup":X=hu;break;case"focusin":ye="focus",X=To;break;case"focusout":ye="blur",X=To;break;case"beforeblur":case"afterblur":X=To;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Ma;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=su;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=v;break;case _p:case Tp:case vp:X=ru;break;case Ep:X=I;break;case"scroll":case"scrollend":X=Na;break;case"wheel":X=Q;break;case"copy":case"cut":case"paste":X=au;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Li;break;case"toggle":case"beforetoggle":X=Me}var Ae=(o&4)!==0,it=!Ae&&(i==="scroll"||i==="scrollend"),O=Ae?J!==null?J+"Capture":null:J;Ae=[];for(var L=z,H;L!==null;){var Z=L;if(H=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||H===null||O===null||(Z=Xn(L,O),Z!=null&&Ae.push(ol(L,Z,H))),it)break;L=L.return}0<Ae.length&&(J=new X(J,ye,null,a,$),te.push({event:J,listeners:Ae}))}}if((o&7)===0){e:{if(J=i==="mouseover"||i==="pointerover",X=i==="mouseout"||i==="pointerout",J&&a!==Ra&&(ye=a.relatedTarget||a.fromElement)&&(fi(ye)||ye[ui]))break e;if((X||J)&&(J=$.window===$?$:(J=$.ownerDocument)?J.defaultView||J.parentWindow:window,X?(ye=a.relatedTarget||a.toElement,X=z,ye=ye?fi(ye):null,ye!==null&&(it=l(ye),Ae=ye.tag,ye!==it||Ae!==5&&Ae!==27&&Ae!==6)&&(ye=null)):(X=null,ye=z),X!==ye)){if(Ae=Ma,Z="onMouseLeave",O="onMouseEnter",L="mouse",(i==="pointerout"||i==="pointerover")&&(Ae=Li,Z="onPointerLeave",O="onPointerEnter",L="pointer"),it=X==null?J:gn(X),H=ye==null?J:gn(ye),J=new Ae(Z,L+"leave",X,a,$),J.target=it,J.relatedTarget=H,Z=null,fi($)===z&&(Ae=new Ae(O,L+"enter",ye,a,$),Ae.target=H,Ae.relatedTarget=it,Z=Ae),it=Z,X&&ye)t:{for(Ae=GA,O=X,L=ye,H=0,Z=O;Z;Z=Ae(Z))H++;Z=0;for(var ve=L;ve;ve=Ae(ve))Z++;for(;0<H-Z;)O=Ae(O),H--;for(;0<Z-H;)L=Ae(L),Z--;for(;H--;){if(O===L||L!==null&&O===L.alternate){Ae=O;break t}O=Ae(O),L=Ae(L)}Ae=null}else Ae=null;X!==null&&zy(te,J,X,Ae,!1),ye!==null&&it!==null&&zy(te,it,ye,Ae,!0)}}e:{if(J=z?gn(z):window,X=J.nodeName&&J.nodeName.toLowerCase(),X==="select"||X==="input"&&J.type==="file")var ze=ap;else if(op(J))if(lp)ze=ZS;else{ze=XS;var _e=QS}else X=J.nodeName,!X||X.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?z&&jo(z.elementType)&&(ze=ap):ze=$S;if(ze&&(ze=ze(i,z))){rp(te,ze,a,$);break e}_e&&_e(i,J,z),i==="focusout"&&z&&J.type==="number"&&z.memoizedProps.value!=null&&Sa(J,"number",J.value)}switch(_e=z?gn(z):window,i){case"focusin":(op(_e)||_e.contentEditable==="true")&&(ar=_e,wf=z,Pa=null);break;case"focusout":Pa=wf=ar=null;break;case"mousedown":Nf=!0;break;case"contextmenu":case"mouseup":case"dragend":Nf=!1,gp(te,a,$);break;case"selectionchange":if(jS)break;case"keydown":case"keyup":gp(te,a,$)}var De;if(Qe)e:{switch(i){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else rr?vo(i,a)&&(Le="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Le="onCompositionStart");Le&&(Ei&&a.locale!=="ko"&&(rr||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&rr&&(De=wa()):(yi=$,Ia="value"in yi?yi.value:yi.textContent,rr=!0)),_e=ic(z,Le),0<_e.length&&(Le=new vi(Le,i,null,a,$),te.push({event:Le,listeners:_e}),De?Le.data=De:(De=or(a),De!==null&&(Le.data=De)))),(De=Dn?zS(i,a):YS(i,a))&&(Le=ic(z,"onBeforeInput"),0<Le.length&&(_e=new vi("onBeforeInput","beforeinput",null,a,$),te.push({event:_e,listeners:Le}),_e.data=De)),LA(te,i,z,a,$)}Fy(te,o)})}function ol(i,o,a){return{instance:i,listener:o,currentTarget:a}}function ic(i,o){for(var a=o+"Capture",u=[];i!==null;){var g=i,_=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||_===null||(g=Xn(i,a),g!=null&&u.unshift(ol(i,g,_)),g=Xn(i,o),g!=null&&u.push(ol(i,g,_))),i.tag===3)return u;i=i.return}return[]}function GA(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function zy(i,o,a,u,g){for(var _=o._reactName,A=[];a!==null&&a!==u;){var R=a,V=R.alternate,z=R.stateNode;if(R=R.tag,V!==null&&V===u)break;R!==5&&R!==26&&R!==27||z===null||(V=z,g?(z=Xn(a,_),z!=null&&A.unshift(ol(a,z,V))):g||(z=Xn(a,_),z!=null&&A.push(ol(a,z,V)))),a=a.return}A.length!==0&&i.push({event:o,listeners:A})}var BA=/\r\n?/g,FA=/\u0000|\uFFFD/g;function Yy(i){return(typeof i=="string"?i:""+i).replace(BA,`
`).replace(FA,"")}function Jy(i,o){return o=Yy(o),Yy(i)===o}function nt(i,o,a,u,g,_){switch(a){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||ln(i,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&ln(i,""+u);break;case"className":yn(i,"class",u);break;case"tabIndex":yn(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":yn(i,a,u);break;case"style":Ca(i,u,_);break;case"data":if(o!=="object"){yn(i,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=er(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(o!=="input"&&nt(i,o,"name",g.name,g,null),nt(i,o,"formEncType",g.formEncType,g,null),nt(i,o,"formMethod",g.formMethod,g,null),nt(i,o,"formTarget",g.formTarget,g,null)):(nt(i,o,"encType",g.encType,g,null),nt(i,o,"method",g.method,g,null),nt(i,o,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=er(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=Qn);break;case"onScroll":u!=null&&Ve("scroll",i);break;case"onScrollEnd":u!=null&&Ve("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=er(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":Ve("beforetoggle",i),Ve("toggle",i),Zo(i,"popover",u);break;case"xlinkActuate":It(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":It(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":It(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":It(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":It(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":It(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":It(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":It(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":It(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Zo(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=iu.get(a)||a,Zo(i,a,u))}}function jd(i,o,a,u,g,_){switch(a){case"style":Ca(i,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof u=="string"?ln(i,u):(typeof u=="number"||typeof u=="bigint")&&ln(i,""+u);break;case"onScroll":u!=null&&Ve("scroll",i);break;case"onScrollEnd":u!=null&&Ve("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Qn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ya.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),o=a.slice(2,g?a.length-7:void 0),_=i[qt]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(o,_,g),typeof u=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(o,u,g);break e}a in i?i[a]=u:u===!0?i.setAttribute(a,""):Zo(i,a,u)}}}function Kt(i,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",i),Ve("load",i);var u=!1,g=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var A=a[_];if(A!=null)switch(_){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:nt(i,o,_,A,a,null)}}g&&nt(i,o,"srcSet",a.srcSet,a,null),u&&nt(i,o,"src",a.src,a,null);return;case"input":Ve("invalid",i);var R=_=A=g=null,V=null,z=null;for(u in a)if(a.hasOwnProperty(u)){var $=a[u];if($!=null)switch(u){case"name":g=$;break;case"type":A=$;break;case"checked":V=$;break;case"defaultChecked":z=$;break;case"value":_=$;break;case"defaultValue":R=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,o));break;default:nt(i,o,u,$,a,null)}}eu(i,_,R,V,z,A,g,!1);return;case"select":Ve("invalid",i),u=A=_=null;for(g in a)if(a.hasOwnProperty(g)&&(R=a[g],R!=null))switch(g){case"value":_=R;break;case"defaultValue":A=R;break;case"multiple":u=R;default:nt(i,o,g,R,a,null)}o=_,a=A,i.multiple=!!u,o!=null?fs(i,!!u,o,!1):a!=null&&fs(i,!!u,a,!0);return;case"textarea":Ve("invalid",i),_=g=u=null;for(A in a)if(a.hasOwnProperty(A)&&(R=a[A],R!=null))switch(A){case"value":u=R;break;case"defaultValue":g=R;break;case"children":_=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(s(91));break;default:nt(i,o,A,R,a,null)}ds(i,u,g,_);return;case"option":for(V in a)if(a.hasOwnProperty(V)&&(u=a[V],u!=null))switch(V){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:nt(i,o,V,u,a,null)}return;case"dialog":Ve("beforetoggle",i),Ve("toggle",i),Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":Ve("load",i);break;case"video":case"audio":for(u=0;u<sl.length;u++)Ve(sl[u],i);break;case"image":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"embed":case"source":case"link":Ve("error",i),Ve("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(u=a[z],u!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:nt(i,o,z,u,a,null)}return;default:if(jo(o)){for($ in a)a.hasOwnProperty($)&&(u=a[$],u!==void 0&&jd(i,o,$,u,a,void 0));return}}for(R in a)a.hasOwnProperty(R)&&(u=a[R],u!=null&&nt(i,o,R,u,a,null))}function HA(i,o,a,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,_=null,A=null,R=null,V=null,z=null,$=null;for(X in a){var te=a[X];if(a.hasOwnProperty(X)&&te!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":V=te;default:u.hasOwnProperty(X)||nt(i,o,X,null,u,te)}}for(var J in u){var X=u[J];if(te=a[J],u.hasOwnProperty(J)&&(X!=null||te!=null))switch(J){case"type":_=X;break;case"name":g=X;break;case"checked":z=X;break;case"defaultChecked":$=X;break;case"value":A=X;break;case"defaultValue":R=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,o));break;default:X!==te&&nt(i,o,J,X,u,te)}}Wo(i,A,R,V,z,$,_,g);return;case"select":X=A=R=J=null;for(_ in a)if(V=a[_],a.hasOwnProperty(_)&&V!=null)switch(_){case"value":break;case"multiple":X=V;default:u.hasOwnProperty(_)||nt(i,o,_,null,u,V)}for(g in u)if(_=u[g],V=a[g],u.hasOwnProperty(g)&&(_!=null||V!=null))switch(g){case"value":J=_;break;case"defaultValue":R=_;break;case"multiple":A=_;default:_!==V&&nt(i,o,g,_,u,V)}o=R,a=A,u=X,J!=null?fs(i,!!a,J,!1):!!u!=!!a&&(o!=null?fs(i,!!a,o,!0):fs(i,!!a,a?[]:"",!1));return;case"textarea":X=J=null;for(R in a)if(g=a[R],a.hasOwnProperty(R)&&g!=null&&!u.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:nt(i,o,R,null,u,g)}for(A in u)if(g=u[A],_=a[A],u.hasOwnProperty(A)&&(g!=null||_!=null))switch(A){case"value":J=g;break;case"defaultValue":X=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==_&&nt(i,o,A,g,u,_)}tu(i,J,X);return;case"option":for(var ye in a)if(J=a[ye],a.hasOwnProperty(ye)&&J!=null&&!u.hasOwnProperty(ye))switch(ye){case"selected":i.selected=!1;break;default:nt(i,o,ye,null,u,J)}for(V in u)if(J=u[V],X=a[V],u.hasOwnProperty(V)&&J!==X&&(J!=null||X!=null))switch(V){case"selected":i.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:nt(i,o,V,J,u,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in a)J=a[Ae],a.hasOwnProperty(Ae)&&J!=null&&!u.hasOwnProperty(Ae)&&nt(i,o,Ae,null,u,J);for(z in u)if(J=u[z],X=a[z],u.hasOwnProperty(z)&&J!==X&&(J!=null||X!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,o));break;default:nt(i,o,z,J,u,X)}return;default:if(jo(o)){for(var it in a)J=a[it],a.hasOwnProperty(it)&&J!==void 0&&!u.hasOwnProperty(it)&&jd(i,o,it,void 0,u,J);for($ in u)J=u[$],X=a[$],!u.hasOwnProperty($)||J===X||J===void 0&&X===void 0||jd(i,o,$,J,u,X);return}}for(var O in a)J=a[O],a.hasOwnProperty(O)&&J!=null&&!u.hasOwnProperty(O)&&nt(i,o,O,null,u,J);for(te in u)J=u[te],X=a[te],!u.hasOwnProperty(te)||J===X||J==null&&X==null||nt(i,o,te,J,u,X)}function Ky(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function zA(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var g=a[u],_=g.transferSize,A=g.initiatorType,R=g.duration;if(_&&R&&Ky(A)){for(A=0,R=g.responseEnd,u+=1;u<a.length;u++){var V=a[u],z=V.startTime;if(z>R)break;var $=V.transferSize,te=V.initiatorType;$&&Ky(te)&&(V=V.responseEnd,A+=$*(V<R?1:(R-z)/(V-z)))}if(--u,o+=8*(_+A)/(g.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var eh=null,th=null;function sc(i){return i.nodeType===9?i:i.ownerDocument}function Qy(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xy(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function nh(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ih=null;function YA(){var i=window.event;return i&&i.type==="popstate"?i===ih?!1:(ih=i,!0):(ih=null,!1)}var $y=typeof setTimeout=="function"?setTimeout:void 0,JA=typeof clearTimeout=="function"?clearTimeout:void 0,Zy=typeof Promise=="function"?Promise:void 0,KA=typeof queueMicrotask=="function"?queueMicrotask:typeof Zy<"u"?function(i){return Zy.resolve(null).then(i).catch(QA)}:$y;function QA(i){setTimeout(function(){throw i})}function Us(i){return i==="head"}function Wy(i,o){var a=o,u=0;do{var g=a.nextSibling;if(i.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(u===0){i.removeChild(g),Pr(o);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")rl(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,rl(a);for(var _=a.firstChild;_;){var A=_.nextSibling,R=_.nodeName;_[ci]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=A}}else a==="body"&&rl(i.ownerDocument.body);a=g}while(a);Pr(o)}function jy(i,o){var a=i;i=0;do{var u=a.nextSibling;if(a.nodeType===1?o?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(o?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=u}while(a)}function sh(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":sh(a),$o(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function XA(i,o,a,u){for(;i.nodeType===1;){var g=a;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[ci])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var _=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=qn(i.nextSibling),i===null)break}return null}function $A(i,o,a){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=qn(i.nextSibling),i===null))return null;return i}function e_(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=qn(i.nextSibling),i===null))return null;return i}function oh(i){return i.data==="$?"||i.data==="$~"}function rh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function ZA(i,o){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||a.readyState!=="loading")o();else{var u=function(){o(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function qn(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var ah=null;function t_(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(o===0)return qn(i.nextSibling);o--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||o++}i=i.nextSibling}return null}function n_(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(o===0)return i;o--}else a!=="/$"&&a!=="/&"||o++}i=i.previousSibling}return null}function i_(i,o,a){switch(o=sc(a),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function rl(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);$o(i)}var On=new Map,s_=new Set;function oc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Zi=oe.d;oe.d={f:WA,r:jA,D:eC,C:tC,L:nC,m:iC,X:oC,S:sC,M:rC};function WA(){var i=Zi.f(),o=$u();return i||o}function jA(i){var o=Nn(i);o!==null&&o.tag===5&&o.type==="form"?Eg(o):Zi.r(i)}var Dr=typeof document>"u"?null:document;function o_(i,o,a){var u=Dr;if(u&&typeof o=="string"&&o){var g=an(o);g='link[rel="'+i+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),s_.has(g)||(s_.add(g),i={rel:i,crossOrigin:a,href:o},u.querySelector(g)===null&&(o=u.createElement("link"),Kt(o,"link",i),Rt(o),u.head.appendChild(o)))}}function eC(i){Zi.D(i),o_("dns-prefetch",i,null)}function tC(i,o){Zi.C(i,o),o_("preconnect",i,o)}function nC(i,o,a){Zi.L(i,o,a);var u=Dr;if(u&&i&&o){var g='link[rel="preload"][as="'+an(o)+'"]';o==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+an(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+an(a.imageSizes)+'"]')):g+='[href="'+an(i)+'"]';var _=g;switch(o){case"style":_=br(i);break;case"script":_=Vr(i)}On.has(_)||(i=E({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:i,as:o},a),On.set(_,i),u.querySelector(g)!==null||o==="style"&&u.querySelector(al(_))||o==="script"&&u.querySelector(ll(_))||(o=u.createElement("link"),Kt(o,"link",i),Rt(o),u.head.appendChild(o)))}}function iC(i,o){Zi.m(i,o);var a=Dr;if(a&&i){var u=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+an(u)+'"][href="'+an(i)+'"]',_=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Vr(i)}if(!On.has(_)&&(i=E({rel:"modulepreload",href:i},o),On.set(_,i),a.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ll(_)))return}u=a.createElement("link"),Kt(u,"link",i),Rt(u),a.head.appendChild(u)}}}function sC(i,o,a){Zi.S(i,o,a);var u=Dr;if(u&&i){var g=di(u).hoistableStyles,_=br(i);o=o||"default";var A=g.get(_);if(!A){var R={loading:0,preload:null};if(A=u.querySelector(al(_)))R.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":o},a),(a=On.get(_))&&lh(i,a);var V=A=u.createElement("link");Rt(V),Kt(V,"link",i),V._p=new Promise(function(z,$){V.onload=z,V.onerror=$}),V.addEventListener("load",function(){R.loading|=1}),V.addEventListener("error",function(){R.loading|=2}),R.loading|=4,rc(A,o,u)}A={type:"stylesheet",instance:A,count:1,state:R},g.set(_,A)}}}function oC(i,o){Zi.X(i,o);var a=Dr;if(a&&i){var u=di(a).hoistableScripts,g=Vr(i),_=u.get(g);_||(_=a.querySelector(ll(g)),_||(i=E({src:i,async:!0},o),(o=On.get(g))&&uh(i,o),_=a.createElement("script"),Rt(_),Kt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function rC(i,o){Zi.M(i,o);var a=Dr;if(a&&i){var u=di(a).hoistableScripts,g=Vr(i),_=u.get(g);_||(_=a.querySelector(ll(g)),_||(i=E({src:i,async:!0,type:"module"},o),(o=On.get(g))&&uh(i,o),_=a.createElement("script"),Rt(_),Kt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function r_(i,o,a,u){var g=(g=Re.current)?oc(g):null;if(!g)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=br(a.href),a=di(g).hoistableStyles,u=a.get(o),u||(u={type:"style",instance:null,count:0,state:null},a.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=br(a.href);var _=di(g).hoistableStyles,A=_.get(i);if(A||(g=g.ownerDocument||g,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,A),(_=g.querySelector(al(i)))&&!_._p&&(A.instance=_,A.state.loading=5),On.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},On.set(i,a),_||aC(g,i,a,A.state))),o&&u===null)throw Error(s(528,""));return A}if(o&&u!==null)throw Error(s(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Vr(a),a=di(g).hoistableScripts,u=a.get(o),u||(u={type:"script",instance:null,count:0,state:null},a.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function br(i){return'href="'+an(i)+'"'}function al(i){return'link[rel="stylesheet"]['+i+"]"}function a_(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function aC(i,o,a,u){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=i.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),Kt(o,"link",a),Rt(o),i.head.appendChild(o))}function Vr(i){return'[src="'+an(i)+'"]'}function ll(i){return"script[async]"+i}function l_(i,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var u=i.querySelector('style[data-href~="'+an(a.href)+'"]');if(u)return o.instance=u,Rt(u),u;var g=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Rt(u),Kt(u,"style",g),rc(u,a.precedence,i),o.instance=u;case"stylesheet":g=br(a.href);var _=i.querySelector(al(g));if(_)return o.state.loading|=4,o.instance=_,Rt(_),_;u=a_(a),(g=On.get(g))&&lh(u,g),_=(i.ownerDocument||i).createElement("link"),Rt(_);var A=_;return A._p=new Promise(function(R,V){A.onload=R,A.onerror=V}),Kt(_,"link",u),o.state.loading|=4,rc(_,a.precedence,i),o.instance=_;case"script":return _=Vr(a.src),(g=i.querySelector(ll(_)))?(o.instance=g,Rt(g),g):(u=a,(g=On.get(_))&&(u=E({},a),uh(u,g)),i=i.ownerDocument||i,g=i.createElement("script"),Rt(g),Kt(g,"link",u),i.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,rc(u,a.precedence,i));return o.instance}function rc(i,o,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,_=g,A=0;A<u.length;A++){var R=u[A];if(R.dataset.precedence===o)_=R;else if(_!==g)break}_?_.parentNode.insertBefore(i,_.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(i,o.firstChild))}function lh(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function uh(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var ac=null;function u_(i,o,a){if(ac===null){var u=new Map,g=ac=new Map;g.set(a,u)}else g=ac,u=g.get(a),u||(u=new Map,g.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),g=0;g<a.length;g++){var _=a[g];if(!(_[ci]||_[Ct]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(o)||"";A=i+A;var R=u.get(A);R?R.push(_):u.set(A,[_])}}return u}function c_(i,o,a){i=i.ownerDocument||i,i.head.insertBefore(a,o==="title"?i.querySelector("head > title"):null)}function lC(i,o,a){if(a===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function f_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function uC(i,o,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=br(u.href),_=o.querySelector(al(g));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=lc.bind(i),o.then(i,i)),a.state.loading|=4,a.instance=_,Rt(_);return}_=o.ownerDocument||o,u=a_(u),(g=On.get(g))&&lh(u,g),_=_.createElement("link"),Rt(_);var A=_;A._p=new Promise(function(R,V){A.onload=R,A.onerror=V}),Kt(_,"link",u),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,o),(o=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=lc.bind(i),o.addEventListener("load",a),o.addEventListener("error",a))}}var ch=0;function cC(i,o){return i.stylesheets&&i.count===0&&cc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var u=setTimeout(function(){if(i.stylesheets&&cc(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+o);0<i.imgBytes&&ch===0&&(ch=62500*zA());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&cc(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>ch?50:800)+o);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function lc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)cc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var uc=null;function cc(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,uc=new Map,o.forEach(fC,i),uc=null,lc.call(i))}function fC(i,o){if(!(o.state.loading&4)){var a=uc.get(i);if(a)var u=a.get(null);else{a=new Map,uc.set(i,a);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<g.length;_++){var A=g[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),u=A)}u&&a.set(null,u)}g=o.instance,A=g.getAttribute("data-precedence"),_=a.get(A)||u,_===u&&a.set(null,g),a.set(A,g),this.count++,u=lc.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),_?_.parentNode.insertBefore(g,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),o.state.loading|=4}}var ul={$$typeof:j,Provider:null,Consumer:null,_currentValue:Te,_currentValue2:Te,_threadCount:0};function dC(i,o,a,u,g,_,A,R,V){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=li(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=li(0),this.hiddenUpdates=li(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function d_(i,o,a,u,g,_,A,R,V,z,$,te){return i=new dC(i,o,a,A,V,z,$,te,R),o=1,_===!0&&(o|=24),_=Tn(3,null,null,o),i.current=_,_.stateNode=i,o=Hf(),o.refCount++,i.pooledCache=o,o.refCount++,_.memoizedState={element:u,isDehydrated:a,cache:o},Kf(_),i}function h_(i){return i?(i=cr,i):cr}function m_(i,o,a,u,g,_){g=h_(g),u.context===null?u.context=g:u.pendingContext=g,u=Cs(o),u.payload={element:a},_=_===void 0?null:_,_!==null&&(u.callback=_),a=Rs(i,u,o),a!==null&&(hn(a,i,o),Ba(a,i,o))}function p_(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<o?a:o}}function fh(i,o){p_(i,o),(i=i.alternate)&&p_(i,o)}function g_(i){if(i.tag===13||i.tag===31){var o=Ao(i,67108864);o!==null&&hn(o,i,67108864),fh(i,67108864)}}function y_(i){if(i.tag===13||i.tag===31){var o=Cn();o=co(o);var a=Ao(i,o);a!==null&&hn(a,i,o),fh(i,o)}}var fc=!0;function hC(i,o,a,u){var g=Y.T;Y.T=null;var _=oe.p;try{oe.p=2,dh(i,o,a,u)}finally{oe.p=_,Y.T=g}}function mC(i,o,a,u){var g=Y.T;Y.T=null;var _=oe.p;try{oe.p=8,dh(i,o,a,u)}finally{oe.p=_,Y.T=g}}function dh(i,o,a,u){if(fc){var g=hh(u);if(g===null)Wd(i,o,u,dc,a),T_(i,u);else if(gC(g,i,o,a,u))u.stopPropagation();else if(T_(i,u),o&4&&-1<pC.indexOf(i)){for(;g!==null;){var _=Nn(g);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=ri(_.pendingLanes);if(A!==0){var R=_;for(R.pendingLanes|=2,R.entangledLanes|=2;A;){var V=1<<31-gt(A);R.entanglements[1]|=V,A&=~V}Ri(_),(Xe&6)===0&&(Qu=nn()+500,il(0))}}break;case 31:case 13:R=Ao(_,2),R!==null&&hn(R,_,2),$u(),fh(_,2)}if(_=hh(u),_===null&&Wd(i,o,u,dc,a),_===g)break;g=_}g!==null&&u.stopPropagation()}else Wd(i,o,u,null,a)}}function hh(i){return i=Mn(i),mh(i)}var dc=null;function mh(i){if(dc=null,i=fi(i),i!==null){var o=l(i);if(o===null)i=null;else{var a=o.tag;if(a===13){if(i=c(o),i!==null)return i;i=null}else if(a===31){if(i=m(o),i!==null)return i;i=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return dc=i,null}function __(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ro()){case da:return 2;case ha:return 8;case us:case vf:return 32;case zl:return 268435456;default:return 32}default:return 32}}var ph=!1,Ls=null,ks=null,qs=null,cl=new Map,fl=new Map,Os=[],pC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function T_(i,o){switch(i){case"focusin":case"focusout":Ls=null;break;case"dragenter":case"dragleave":ks=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":cl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":fl.delete(o.pointerId)}}function dl(i,o,a,u,g,_){return i===null||i.nativeEvent!==_?(i={blockedOn:o,domEventName:a,eventSystemFlags:u,nativeEvent:_,targetContainers:[g]},o!==null&&(o=Nn(o),o!==null&&g_(o)),i):(i.eventSystemFlags|=u,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function gC(i,o,a,u,g){switch(o){case"focusin":return Ls=dl(Ls,i,o,a,u,g),!0;case"dragenter":return ks=dl(ks,i,o,a,u,g),!0;case"mouseover":return qs=dl(qs,i,o,a,u,g),!0;case"pointerover":var _=g.pointerId;return cl.set(_,dl(cl.get(_)||null,i,o,a,u,g)),!0;case"gotpointercapture":return _=g.pointerId,fl.set(_,dl(fl.get(_)||null,i,o,a,u,g)),!0}return!1}function v_(i){var o=fi(i.target);if(o!==null){var a=l(o);if(a!==null){if(o=a.tag,o===13){if(o=c(a),o!==null){i.blockedOn=o,Jn(i.priority,function(){y_(a)});return}}else if(o===31){if(o=m(a),o!==null){i.blockedOn=o,Jn(i.priority,function(){y_(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function hc(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var a=hh(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);Ra=u,a.target.dispatchEvent(u),Ra=null}else return o=Nn(a),o!==null&&g_(o),i.blockedOn=a,!1;o.shift()}return!0}function E_(i,o,a){hc(i)&&a.delete(o)}function yC(){ph=!1,Ls!==null&&hc(Ls)&&(Ls=null),ks!==null&&hc(ks)&&(ks=null),qs!==null&&hc(qs)&&(qs=null),cl.forEach(E_),fl.forEach(E_)}function mc(i,o){i.blockedOn===o&&(i.blockedOn=null,ph||(ph=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,yC)))}var pc=null;function S_(i){pc!==i&&(pc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){pc===i&&(pc=null);for(var o=0;o<i.length;o+=3){var a=i[o],u=i[o+1],g=i[o+2];if(typeof u!="function"){if(mh(u||a)===null)continue;break}var _=Nn(a);_!==null&&(i.splice(o,3),o-=3,hd(_,{pending:!0,data:g,method:a.method,action:u},u,g))}}))}function Pr(i){function o(V){return mc(V,i)}Ls!==null&&mc(Ls,i),ks!==null&&mc(ks,i),qs!==null&&mc(qs,i),cl.forEach(o),fl.forEach(o);for(var a=0;a<Os.length;a++){var u=Os[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Os.length&&(a=Os[0],a.blockedOn===null);)v_(a),a.blockedOn===null&&Os.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var g=a[u],_=a[u+1],A=g[qt]||null;if(typeof _=="function")A||S_(a);else if(A){var R=null;if(_&&_.hasAttribute("formAction")){if(g=_,A=_[qt]||null)R=A.formAction;else if(mh(g)!==null)continue}else R=A.action;typeof R=="function"?a[u+1]=R:(a.splice(u,3),u-=3),S_(a)}}}function A_(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return g=A})},focusReset:"manual",scroll:"manual"})}function o(){g!==null&&(g(),g=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),g!==null&&(g(),g=null)}}}function gh(i){this._internalRoot=i}gc.prototype.render=gh.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var a=o.current,u=Cn();m_(a,u,i,o,null,null)},gc.prototype.unmount=gh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;m_(i.current,2,null,i,null,null),$u(),o[ui]=null}};function gc(i){this._internalRoot=i}gc.prototype.unstable_scheduleHydration=function(i){if(i){var o=$l();i={blockedOn:null,target:i,priority:o};for(var a=0;a<Os.length&&o!==0&&o<Os[a].priority;a++);Os.splice(a,0,i),a===0&&v_(i)}};var C_=e.version;if(C_!=="19.2.1")throw Error(s(527,C_,"19.2.1"));oe.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=p(o),i=i!==null?T(i):null,i=i===null?null:i.stateNode,i};var _C={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yc.isDisabled&&yc.supportsFiber)try{zn=yc.inject(_C),Ft=yc}catch{}}return ml.createRoot=function(i,o){if(!r(i))throw Error(s(299));var a=!1,u="",g=Dg,_=bg,A=Vg;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=d_(i,1,!1,null,null,a,u,null,g,_,A,A_),i[ui]=o.current,Zd(i),new gh(o)},ml.hydrateRoot=function(i,o,a){if(!r(i))throw Error(s(299));var u=!1,g="",_=Dg,A=bg,R=Vg,V=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(R=a.onRecoverableError),a.formState!==void 0&&(V=a.formState)),o=d_(i,1,!0,o,a??null,u,g,V,_,A,R,A_),o.context=h_(null),a=o.current,u=Cn(),u=co(u),g=Cs(u),g.callback=null,Rs(a,g,u),a=u,o.current.lanes=a,lo(o,a),Ri(o),i[ui]=o.current,Zd(i),new gc(o)},ml.version="19.2.1",ml}var P_;function MC(){if(P_)return Th.exports;P_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Th.exports=NC(),Th.exports}var xC=MC();const DC=TE(xC);var Wi=(n=>(n.LOGIN="LOGIN",n.REGISTER="REGISTER",n.DASHBOARD="DASHBOARD",n.ADMIN="ADMIN",n))(Wi||{});const Bn=()=>{const e=new Date().toLocaleString("en-US",{timeZone:"Africa/Cairo"});return new Date(e)},bC=()=>{const n=Bn();return new Intl.DateTimeFormat("ar-SA-u-ca-islamic",{day:"numeric",month:"long",year:"numeric"}).format(n)},VC=()=>{const n=Bn();return new Intl.DateTimeFormat("ar-EG",{day:"numeric",month:"long",year:"numeric"}).format(n)},PC=5,UC=10,U_=()=>{const n=Bn(),e=new Date(n);e.setHours(PC,UC,0,0);const t=new Date(e.getTime()-1800*1e3),s=new Date(e.getTime()+3600*1e3),r=l=>l.toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit",hour12:!0});if(n>=t&&n<=s)return{isOpen:!0,message:`     .    ${r(s)}`,fajrTime:r(e),nextFajrCountdown:""};if(n<t){const l=t.getTime()-n.getTime(),c=Math.ceil(l/6e4),m=Math.floor(c/60),y=c%60;return{isOpen:!1,message:`    .       (${r(t)}).`,fajrTime:r(e),nextFajrCountdown:`${m>0?m+"   ":""}${y} `}}else return{isOpen:!1,message:"      .       .",fajrTime:r(e),nextFajrCountdown:" "}},Jr=(n,e)=>n.getFullYear()===e.getFullYear()&&n.getMonth()===e.getMonth()&&n.getDate()===e.getDate(),vE=(n,e)=>{const t=new Date(n);return t.setDate(t.getDate()-1),Jr(t,e)},LC=()=>{};var L_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},kC=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const r=n[t++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const l=n[t++];e[s++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=n[t++],c=n[t++],m=n[t++],y=((r&7)<<18|(l&63)<<12|(c&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((r&15)<<12|(l&63)<<6|c&63)}}return e.join("")},SE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const l=n[r],c=r+1<n.length,m=c?n[r+1]:0,y=r+2<n.length,p=y?n[r+2]:0,T=l>>2,E=(l&3)<<4|m>>4;let S=(m&15)<<2|p>>6,w=p&63;y||(w=64,c||(S=64)),s.push(t[T],t[E],t[S],t[w])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(EE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):kC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const l=t[n.charAt(r++)],m=r<n.length?t[n.charAt(r)]:0;++r;const p=r<n.length?t[n.charAt(r)]:64;++r;const E=r<n.length?t[n.charAt(r)]:64;if(++r,l==null||m==null||p==null||E==null)throw new qC;const S=l<<2|m>>4;if(s.push(S),p!==64){const w=m<<4&240|p>>2;if(s.push(w),E!==64){const G=p<<6&192|E;s.push(G)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class qC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OC=function(n){const e=EE(n);return SE.encodeByteArray(e,!0)},bc=function(n){return OC(n).replace(/\./g,"")},GC=function(n){try{return SE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=()=>BC().__FIREBASE_DEFAULTS__,HC=()=>{if(typeof process>"u"||typeof L_>"u")return;const n=L_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},zC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&GC(n[1]);return e&&JSON.parse(e)},fm=()=>{try{return LC()||FC()||HC()||zC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},YC=n=>{var e,t;return(t=(e=fm())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},JC=n=>{const e=YC(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},AE=()=>{var n;return(n=fm())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function QC(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",r=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[bc(JSON.stringify(t)),bc(JSON.stringify(c)),""].join(".")}const vl={};function $C(){const n={prod:[],emulator:[]};for(const e of Object.keys(vl))vl[e]?n.emulator.push(e):n.prod.push(e);return n}function ZC(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let k_=!1;function WC(n,e){if(typeof window>"u"||typeof document>"u"||!dm(window.location.host)||vl[n]===e||vl[n]||k_)return;vl[n]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",l=$C().prod.length>0;function c(){const S=document.getElementById(s);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function y(S,w){S.setAttribute("width","24"),S.setAttribute("id",w),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{k_=!0,c()},S}function T(S,w){S.setAttribute("id",w),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=ZC(s),w=t("text"),G=document.getElementById(w)||document.createElement("span"),B=t("learnmore"),K=document.getElementById(B)||document.createElement("a"),W=t("preprendIcon"),ie=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const j=S.element;m(j),T(K,B);const ue=p();y(ie,W),j.append(ie,G,K,ue),document.body.appendChild(j)}l?(G.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eR(){var e;const n=(e=fm())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tR(){return!eR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nR(){try{return typeof indexedDB=="object"}catch{return!1}}function iR(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var l;e(((l=r.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="FirebaseError";class jr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=sR,Object.setPrototypeOf(this,jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,CE.prototype.create)}}class CE{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},r=`${this.service}/${e}`,l=this.errors[e],c=l?oR(l,s):"Error",m=`${this.serviceName}: ${c} (${r}).`;return new jr(r,m,s)}}function oR(n,e){return n.replace(rR,(t,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const rR=/\{\$([^}]+)}/g;function Vc(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const r of t){if(!s.includes(r))return!1;const l=n[r],c=e[r];if(q_(l)&&q_(c)){if(!Vc(l,c))return!1}else if(l!==c)return!1}for(const r of s)if(!t.includes(r))return!1;return!0}function q_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(n){return n&&n._delegate?n._delegate:n}class Il{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new KC;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uR(e))try{this.getOrInitializeService({instanceIdentifier:Lo})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:r});s.resolve(l)}catch{}}}}clearInstance(e=Lo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Lo){return this.instances.has(e)}getOptions(e=Lo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);s===m&&c.resolve(r)}return r}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const l=this.instances.get(s);return l&&e(l,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const r of s)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:lR(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Lo){return this.component?this.component.multipleInstances?e:Lo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lR(n){return n===Lo?void 0:n}function uR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new aR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(He||(He={}));const fR={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},dR=He.INFO,hR={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},mR=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),r=hR[e];if(r)console[r](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class RE{constructor(e){this.name=e,this._logLevel=dR,this._logHandler=mR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const pR=(n,e)=>e.some(t=>n instanceof t);let O_,G_;function gR(){return O_||(O_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yR(){return G_||(G_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const IE=new WeakMap,bh=new WeakMap,wE=new WeakMap,Ah=new WeakMap,hm=new WeakMap;function _R(n){const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Hs(n.result)),r()},c=()=>{s(n.error),r()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&IE.set(t,n)}).catch(()=>{}),hm.set(e,n),e}function TR(n){if(bh.has(n))return;const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),r()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});bh.set(n,e)}let Vh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return bh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||wE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Hs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function vR(n){Vh=n(Vh)}function ER(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Ch(this),e,...t);return wE.set(s,e.sort?e.sort():[e]),Hs(s)}:yR().includes(n)?function(...e){return n.apply(Ch(this),e),Hs(IE.get(this))}:function(...e){return Hs(n.apply(Ch(this),e))}}function SR(n){return typeof n=="function"?ER(n):(n instanceof IDBTransaction&&TR(n),pR(n,gR())?new Proxy(n,Vh):n)}function Hs(n){if(n instanceof IDBRequest)return _R(n);if(Ah.has(n))return Ah.get(n);const e=SR(n);return e!==n&&(Ah.set(n,e),hm.set(e,n)),e}const Ch=n=>hm.get(n);function AR(n,e,{blocked:t,upgrade:s,blocking:r,terminated:l}={}){const c=indexedDB.open(n,e),m=Hs(c);return s&&c.addEventListener("upgradeneeded",y=>{s(Hs(c.result),y.oldVersion,y.newVersion,Hs(c.transaction),y)}),t&&c.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),m.then(y=>{l&&y.addEventListener("close",()=>l()),r&&y.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const CR=["get","getKey","getAll","getAllKeys","count"],RR=["put","add","delete","clear"],Rh=new Map;function B_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Rh.get(e))return Rh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,r=RR.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(r||CR.includes(t)))return;const l=async function(c,...m){const y=this.transaction(c,r?"readwrite":"readonly");let p=y.store;return s&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),r&&y.done]))[0]};return Rh.set(e,l),l}vR(n=>({...n,get:(e,t,s)=>B_(e,t)||n.get(e,t,s),has:(e,t)=>!!B_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(wR(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function wR(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ph="@firebase/app",F_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts=new RE("@firebase/app"),NR="@firebase/app-compat",MR="@firebase/analytics-compat",xR="@firebase/analytics",DR="@firebase/app-check-compat",bR="@firebase/app-check",VR="@firebase/auth",PR="@firebase/auth-compat",UR="@firebase/database",LR="@firebase/data-connect",kR="@firebase/database-compat",qR="@firebase/functions",OR="@firebase/functions-compat",GR="@firebase/installations",BR="@firebase/installations-compat",FR="@firebase/messaging",HR="@firebase/messaging-compat",zR="@firebase/performance",YR="@firebase/performance-compat",JR="@firebase/remote-config",KR="@firebase/remote-config-compat",QR="@firebase/storage",XR="@firebase/storage-compat",$R="@firebase/firestore",ZR="@firebase/ai",WR="@firebase/firestore-compat",jR="firebase",eI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh="[DEFAULT]",tI={[Ph]:"fire-core",[NR]:"fire-core-compat",[xR]:"fire-analytics",[MR]:"fire-analytics-compat",[bR]:"fire-app-check",[DR]:"fire-app-check-compat",[VR]:"fire-auth",[PR]:"fire-auth-compat",[UR]:"fire-rtdb",[LR]:"fire-data-connect",[kR]:"fire-rtdb-compat",[qR]:"fire-fn",[OR]:"fire-fn-compat",[GR]:"fire-iid",[BR]:"fire-iid-compat",[FR]:"fire-fcm",[HR]:"fire-fcm-compat",[zR]:"fire-perf",[YR]:"fire-perf-compat",[JR]:"fire-rc",[KR]:"fire-rc-compat",[QR]:"fire-gcs",[XR]:"fire-gcs-compat",[$R]:"fire-fst",[WR]:"fire-fst-compat",[ZR]:"fire-vertex","fire-js":"fire-js",[jR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=new Map,nI=new Map,Lh=new Map;function H_(n,e){try{n.container.addComponent(e)}catch(t){ts.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Uc(n){const e=n.name;if(Lh.has(e))return ts.debug(`There were multiple attempts to register component ${e}.`),!1;Lh.set(e,n);for(const t of Pc.values())H_(t,n);for(const t of nI.values())H_(t,n);return!0}function iI(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function sI(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zs=new CE("app","Firebase",oI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Il("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=eI;function NE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Uh,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw zs.create("bad-app-name",{appName:String(r)});if(t||(t=AE()),!t)throw zs.create("no-options");const l=Pc.get(r);if(l){if(Vc(t,l.options)&&Vc(s,l.config))return l;throw zs.create("duplicate-app",{appName:r})}const c=new cR(r);for(const y of Lh.values())c.addComponent(y);const m=new rI(t,s,c);return Pc.set(r,m),m}function lI(n=Uh){const e=Pc.get(n);if(!e&&n===Uh&&AE())return NE();if(!e)throw zs.create("no-app",{appName:n});return e}function Gr(n,e,t){let s=tI[n]??n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),l=e.match(/\s|\//);if(r||l){const c=[`Unable to register library "${s}" with version "${e}":`];r&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ts.warn(c.join(" "));return}Uc(new Il(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="firebase-heartbeat-database",cI=1,wl="firebase-heartbeat-store";let Ih=null;function ME(){return Ih||(Ih=AR(uI,cI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(wl)}catch(t){console.warn(t)}}}}).catch(n=>{throw zs.create("idb-open",{originalErrorMessage:n.message})})),Ih}async function fI(n){try{const t=(await ME()).transaction(wl),s=await t.objectStore(wl).get(xE(n));return await t.done,s}catch(e){if(e instanceof jr)ts.warn(e.message);else{const t=zs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ts.warn(t.message)}}}async function z_(n,e){try{const s=(await ME()).transaction(wl,"readwrite");await s.objectStore(wl).put(e,xE(n)),await s.done}catch(t){if(t instanceof jr)ts.warn(t.message);else{const s=zs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ts.warn(s.message)}}}function xE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=1024,hI=30;class mI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new gI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Y_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats.length>hI){const c=yI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ts.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Y_(),{heartbeatsToSend:s,unsentEntries:r}=pI(this._heartbeatsCache.heartbeats),l=bc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ts.warn(t),""}}}function Y_(){return new Date().toISOString().substring(0,10)}function pI(n,e=dI){const t=[];let s=n.slice();for(const r of n){const l=t.find(c=>c.agent===r.agent);if(l){if(l.dates.push(r.date),J_(t)>e){l.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),J_(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class gI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nR()?iR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await fI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return z_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return z_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function J_(n){return bc(JSON.stringify({version:2,heartbeats:n})).length}function yI(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(n){Uc(new Il("platform-logger",e=>new IR(e),"PRIVATE")),Uc(new Il("heartbeat",e=>new mI(e),"PRIVATE")),Gr(Ph,F_,n),Gr(Ph,F_,"esm2020"),Gr("fire-js","")}_I("");var K_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ys,DE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,M){function N(){}N.prototype=M.prototype,x.F=M.prototype,x.prototype=new N,x.prototype.constructor=x,x.D=function(U,P,k){for(var b=Array(arguments.length-2),re=2;re<arguments.length;re++)b[re-2]=arguments[re];return M.prototype[P].apply(U,b)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(x,M,N){N||(N=0);const U=Array(16);if(typeof M=="string")for(var P=0;P<16;++P)U[P]=M.charCodeAt(N++)|M.charCodeAt(N++)<<8|M.charCodeAt(N++)<<16|M.charCodeAt(N++)<<24;else for(P=0;P<16;++P)U[P]=M[N++]|M[N++]<<8|M[N++]<<16|M[N++]<<24;M=x.g[0],N=x.g[1],P=x.g[2];let k=x.g[3],b;b=M+(k^N&(P^k))+U[0]+3614090360&4294967295,M=N+(b<<7&4294967295|b>>>25),b=k+(P^M&(N^P))+U[1]+3905402710&4294967295,k=M+(b<<12&4294967295|b>>>20),b=P+(N^k&(M^N))+U[2]+606105819&4294967295,P=k+(b<<17&4294967295|b>>>15),b=N+(M^P&(k^M))+U[3]+3250441966&4294967295,N=P+(b<<22&4294967295|b>>>10),b=M+(k^N&(P^k))+U[4]+4118548399&4294967295,M=N+(b<<7&4294967295|b>>>25),b=k+(P^M&(N^P))+U[5]+1200080426&4294967295,k=M+(b<<12&4294967295|b>>>20),b=P+(N^k&(M^N))+U[6]+2821735955&4294967295,P=k+(b<<17&4294967295|b>>>15),b=N+(M^P&(k^M))+U[7]+4249261313&4294967295,N=P+(b<<22&4294967295|b>>>10),b=M+(k^N&(P^k))+U[8]+1770035416&4294967295,M=N+(b<<7&4294967295|b>>>25),b=k+(P^M&(N^P))+U[9]+2336552879&4294967295,k=M+(b<<12&4294967295|b>>>20),b=P+(N^k&(M^N))+U[10]+4294925233&4294967295,P=k+(b<<17&4294967295|b>>>15),b=N+(M^P&(k^M))+U[11]+2304563134&4294967295,N=P+(b<<22&4294967295|b>>>10),b=M+(k^N&(P^k))+U[12]+1804603682&4294967295,M=N+(b<<7&4294967295|b>>>25),b=k+(P^M&(N^P))+U[13]+4254626195&4294967295,k=M+(b<<12&4294967295|b>>>20),b=P+(N^k&(M^N))+U[14]+2792965006&4294967295,P=k+(b<<17&4294967295|b>>>15),b=N+(M^P&(k^M))+U[15]+1236535329&4294967295,N=P+(b<<22&4294967295|b>>>10),b=M+(P^k&(N^P))+U[1]+4129170786&4294967295,M=N+(b<<5&4294967295|b>>>27),b=k+(N^P&(M^N))+U[6]+3225465664&4294967295,k=M+(b<<9&4294967295|b>>>23),b=P+(M^N&(k^M))+U[11]+643717713&4294967295,P=k+(b<<14&4294967295|b>>>18),b=N+(k^M&(P^k))+U[0]+3921069994&4294967295,N=P+(b<<20&4294967295|b>>>12),b=M+(P^k&(N^P))+U[5]+3593408605&4294967295,M=N+(b<<5&4294967295|b>>>27),b=k+(N^P&(M^N))+U[10]+38016083&4294967295,k=M+(b<<9&4294967295|b>>>23),b=P+(M^N&(k^M))+U[15]+3634488961&4294967295,P=k+(b<<14&4294967295|b>>>18),b=N+(k^M&(P^k))+U[4]+3889429448&4294967295,N=P+(b<<20&4294967295|b>>>12),b=M+(P^k&(N^P))+U[9]+568446438&4294967295,M=N+(b<<5&4294967295|b>>>27),b=k+(N^P&(M^N))+U[14]+3275163606&4294967295,k=M+(b<<9&4294967295|b>>>23),b=P+(M^N&(k^M))+U[3]+4107603335&4294967295,P=k+(b<<14&4294967295|b>>>18),b=N+(k^M&(P^k))+U[8]+1163531501&4294967295,N=P+(b<<20&4294967295|b>>>12),b=M+(P^k&(N^P))+U[13]+2850285829&4294967295,M=N+(b<<5&4294967295|b>>>27),b=k+(N^P&(M^N))+U[2]+4243563512&4294967295,k=M+(b<<9&4294967295|b>>>23),b=P+(M^N&(k^M))+U[7]+1735328473&4294967295,P=k+(b<<14&4294967295|b>>>18),b=N+(k^M&(P^k))+U[12]+2368359562&4294967295,N=P+(b<<20&4294967295|b>>>12),b=M+(N^P^k)+U[5]+4294588738&4294967295,M=N+(b<<4&4294967295|b>>>28),b=k+(M^N^P)+U[8]+2272392833&4294967295,k=M+(b<<11&4294967295|b>>>21),b=P+(k^M^N)+U[11]+1839030562&4294967295,P=k+(b<<16&4294967295|b>>>16),b=N+(P^k^M)+U[14]+4259657740&4294967295,N=P+(b<<23&4294967295|b>>>9),b=M+(N^P^k)+U[1]+2763975236&4294967295,M=N+(b<<4&4294967295|b>>>28),b=k+(M^N^P)+U[4]+1272893353&4294967295,k=M+(b<<11&4294967295|b>>>21),b=P+(k^M^N)+U[7]+4139469664&4294967295,P=k+(b<<16&4294967295|b>>>16),b=N+(P^k^M)+U[10]+3200236656&4294967295,N=P+(b<<23&4294967295|b>>>9),b=M+(N^P^k)+U[13]+681279174&4294967295,M=N+(b<<4&4294967295|b>>>28),b=k+(M^N^P)+U[0]+3936430074&4294967295,k=M+(b<<11&4294967295|b>>>21),b=P+(k^M^N)+U[3]+3572445317&4294967295,P=k+(b<<16&4294967295|b>>>16),b=N+(P^k^M)+U[6]+76029189&4294967295,N=P+(b<<23&4294967295|b>>>9),b=M+(N^P^k)+U[9]+3654602809&4294967295,M=N+(b<<4&4294967295|b>>>28),b=k+(M^N^P)+U[12]+3873151461&4294967295,k=M+(b<<11&4294967295|b>>>21),b=P+(k^M^N)+U[15]+530742520&4294967295,P=k+(b<<16&4294967295|b>>>16),b=N+(P^k^M)+U[2]+3299628645&4294967295,N=P+(b<<23&4294967295|b>>>9),b=M+(P^(N|~k))+U[0]+4096336452&4294967295,M=N+(b<<6&4294967295|b>>>26),b=k+(N^(M|~P))+U[7]+1126891415&4294967295,k=M+(b<<10&4294967295|b>>>22),b=P+(M^(k|~N))+U[14]+2878612391&4294967295,P=k+(b<<15&4294967295|b>>>17),b=N+(k^(P|~M))+U[5]+4237533241&4294967295,N=P+(b<<21&4294967295|b>>>11),b=M+(P^(N|~k))+U[12]+1700485571&4294967295,M=N+(b<<6&4294967295|b>>>26),b=k+(N^(M|~P))+U[3]+2399980690&4294967295,k=M+(b<<10&4294967295|b>>>22),b=P+(M^(k|~N))+U[10]+4293915773&4294967295,P=k+(b<<15&4294967295|b>>>17),b=N+(k^(P|~M))+U[1]+2240044497&4294967295,N=P+(b<<21&4294967295|b>>>11),b=M+(P^(N|~k))+U[8]+1873313359&4294967295,M=N+(b<<6&4294967295|b>>>26),b=k+(N^(M|~P))+U[15]+4264355552&4294967295,k=M+(b<<10&4294967295|b>>>22),b=P+(M^(k|~N))+U[6]+2734768916&4294967295,P=k+(b<<15&4294967295|b>>>17),b=N+(k^(P|~M))+U[13]+1309151649&4294967295,N=P+(b<<21&4294967295|b>>>11),b=M+(P^(N|~k))+U[4]+4149444226&4294967295,M=N+(b<<6&4294967295|b>>>26),b=k+(N^(M|~P))+U[11]+3174756917&4294967295,k=M+(b<<10&4294967295|b>>>22),b=P+(M^(k|~N))+U[2]+718787259&4294967295,P=k+(b<<15&4294967295|b>>>17),b=N+(k^(P|~M))+U[9]+3951481745&4294967295,x.g[0]=x.g[0]+M&4294967295,x.g[1]=x.g[1]+(P+(b<<21&4294967295|b>>>11))&4294967295,x.g[2]=x.g[2]+P&4294967295,x.g[3]=x.g[3]+k&4294967295}s.prototype.v=function(x,M){M===void 0&&(M=x.length);const N=M-this.blockSize,U=this.C;let P=this.h,k=0;for(;k<M;){if(P==0)for(;k<=N;)r(this,x,k),k+=this.blockSize;if(typeof x=="string"){for(;k<M;)if(U[P++]=x.charCodeAt(k++),P==this.blockSize){r(this,U),P=0;break}}else for(;k<M;)if(U[P++]=x[k++],P==this.blockSize){r(this,U),P=0;break}}this.h=P,this.o+=M},s.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var M=1;M<x.length-8;++M)x[M]=0;M=this.o*8;for(var N=x.length-8;N<x.length;++N)x[N]=M&255,M/=256;for(this.v(x),x=Array(16),M=0,N=0;N<4;++N)for(let U=0;U<32;U+=8)x[M++]=this.g[N]>>>U&255;return x};function l(x,M){var N=m;return Object.prototype.hasOwnProperty.call(N,x)?N[x]:N[x]=M(x)}function c(x,M){this.h=M;const N=[];let U=!0;for(let P=x.length-1;P>=0;P--){const k=x[P]|0;U&&k==M||(N[P]=k,U=!1)}this.g=N}var m={};function y(x){return-128<=x&&x<128?l(x,function(M){return new c([M|0],M<0?-1:0)}):new c([x|0],x<0?-1:0)}function p(x){if(isNaN(x)||!isFinite(x))return E;if(x<0)return K(p(-x));const M=[];let N=1;for(let U=0;x>=N;U++)M[U]=x/N|0,N*=4294967296;return new c(M,0)}function T(x,M){if(x.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(x.charAt(0)=="-")return K(T(x.substring(1),M));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=p(Math.pow(M,8));let U=E;for(let k=0;k<x.length;k+=8){var P=Math.min(8,x.length-k);const b=parseInt(x.substring(k,k+P),M);P<8?(P=p(Math.pow(M,P)),U=U.j(P).add(p(b))):(U=U.j(N),U=U.add(p(b)))}return U}var E=y(0),S=y(1),w=y(16777216);n=c.prototype,n.m=function(){if(B(this))return-K(this).m();let x=0,M=1;for(let N=0;N<this.g.length;N++){const U=this.i(N);x+=(U>=0?U:4294967296+U)*M,M*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(G(this))return"0";if(B(this))return"-"+K(this).toString(x);const M=p(Math.pow(x,6));var N=this;let U="";for(;;){const P=ue(N,M).g;N=W(N,P.j(M));let k=((N.g.length>0?N.g[0]:N.h)>>>0).toString(x);if(N=P,G(N))return k+U;for(;k.length<6;)k="0"+k;U=k+U}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function G(x){if(x.h!=0)return!1;for(let M=0;M<x.g.length;M++)if(x.g[M]!=0)return!1;return!0}function B(x){return x.h==-1}n.l=function(x){return x=W(this,x),B(x)?-1:G(x)?0:1};function K(x){const M=x.g.length,N=[];for(let U=0;U<M;U++)N[U]=~x.g[U];return new c(N,~x.h).add(S)}n.abs=function(){return B(this)?K(this):this},n.add=function(x){const M=Math.max(this.g.length,x.g.length),N=[];let U=0;for(let P=0;P<=M;P++){let k=U+(this.i(P)&65535)+(x.i(P)&65535),b=(k>>>16)+(this.i(P)>>>16)+(x.i(P)>>>16);U=b>>>16,k&=65535,b&=65535,N[P]=b<<16|k}return new c(N,N[N.length-1]&-2147483648?-1:0)};function W(x,M){return x.add(K(M))}n.j=function(x){if(G(this)||G(x))return E;if(B(this))return B(x)?K(this).j(K(x)):K(K(this).j(x));if(B(x))return K(this.j(K(x)));if(this.l(w)<0&&x.l(w)<0)return p(this.m()*x.m());const M=this.g.length+x.g.length,N=[];for(var U=0;U<2*M;U++)N[U]=0;for(U=0;U<this.g.length;U++)for(let P=0;P<x.g.length;P++){const k=this.i(U)>>>16,b=this.i(U)&65535,re=x.i(P)>>>16,Se=x.i(P)&65535;N[2*U+2*P]+=b*Se,ie(N,2*U+2*P),N[2*U+2*P+1]+=k*Se,ie(N,2*U+2*P+1),N[2*U+2*P+1]+=b*re,ie(N,2*U+2*P+1),N[2*U+2*P+2]+=k*re,ie(N,2*U+2*P+2)}for(x=0;x<M;x++)N[x]=N[2*x+1]<<16|N[2*x];for(x=M;x<2*M;x++)N[x]=0;return new c(N,0)};function ie(x,M){for(;(x[M]&65535)!=x[M];)x[M+1]+=x[M]>>>16,x[M]&=65535,M++}function j(x,M){this.g=x,this.h=M}function ue(x,M){if(G(M))throw Error("division by zero");if(G(x))return new j(E,E);if(B(x))return M=ue(K(x),M),new j(K(M.g),K(M.h));if(B(M))return M=ue(x,K(M)),new j(K(M.g),M.h);if(x.g.length>30){if(B(x)||B(M))throw Error("slowDivide_ only works with positive integers.");for(var N=S,U=M;U.l(x)<=0;)N=he(N),U=he(U);var P=fe(N,1),k=fe(U,1);for(U=fe(U,2),N=fe(N,2);!G(U);){var b=k.add(U);b.l(x)<=0&&(P=P.add(N),k=b),U=fe(U,1),N=fe(N,1)}return M=W(x,P.j(M)),new j(P,M)}for(P=E;x.l(M)>=0;){for(N=Math.max(1,Math.floor(x.m()/M.m())),U=Math.ceil(Math.log(N)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),k=p(N),b=k.j(M);B(b)||b.l(x)>0;)N-=U,k=p(N),b=k.j(M);G(k)&&(k=S),P=P.add(k),x=W(x,b)}return new j(P,x)}n.B=function(x){return ue(this,x).h},n.and=function(x){const M=Math.max(this.g.length,x.g.length),N=[];for(let U=0;U<M;U++)N[U]=this.i(U)&x.i(U);return new c(N,this.h&x.h)},n.or=function(x){const M=Math.max(this.g.length,x.g.length),N=[];for(let U=0;U<M;U++)N[U]=this.i(U)|x.i(U);return new c(N,this.h|x.h)},n.xor=function(x){const M=Math.max(this.g.length,x.g.length),N=[];for(let U=0;U<M;U++)N[U]=this.i(U)^x.i(U);return new c(N,this.h^x.h)};function he(x){const M=x.g.length+1,N=[];for(let U=0;U<M;U++)N[U]=x.i(U)<<1|x.i(U-1)>>>31;return new c(N,x.h)}function fe(x,M){const N=M>>5;M%=32;const U=x.g.length-N,P=[];for(let k=0;k<U;k++)P[k]=M>0?x.i(k+N)>>>M|x.i(k+N+1)<<32-M:x.i(k+N);return new c(P,x.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,DE=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=T,Ys=c}).apply(typeof K_<"u"?K_:typeof self<"u"?self:typeof window<"u"?window:{});var _c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bE,gl,VE,Cc,kh,PE,UE,LE;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof _c=="object"&&_c];for(var v=0;v<h.length;++v){var C=h[v];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var s=t(this);function r(h,v){if(v)e:{var C=s;h=h.split(".");for(var I=0;I<h.length-1;I++){var F=h[I];if(!(F in C))break e;C=C[F]}h=h[h.length-1],I=C[h],v=v(I),v!=I&&v!=null&&e(C,h,{configurable:!0,writable:!0,value:v})}}r("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(h){return h||function(v){var C=[],I;for(I in v)Object.prototype.hasOwnProperty.call(v,I)&&C.push([I,v[I]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function m(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function y(h,v,C){return h.call.apply(h.bind,arguments)}function p(h,v,C){return p=y,p.apply(null,arguments)}function T(h,v){var C=Array.prototype.slice.call(arguments,1);return function(){var I=C.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function E(h,v){function C(){}C.prototype=v.prototype,h.Z=v.prototype,h.prototype=new C,h.prototype.constructor=h,h.Ob=function(I,F,Q){for(var le=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)le[Me-2]=arguments[Me];return v.prototype[F].apply(I,le)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function w(h){const v=h.length;if(v>0){const C=Array(v);for(let I=0;I<v;I++)C[I]=h[I];return C}return[]}function G(h,v){for(let I=1;I<arguments.length;I++){const F=arguments[I];var C=typeof F;if(C=C!="object"?C:F?Array.isArray(F)?"array":C:"null",C=="array"||C=="object"&&typeof F.length=="number"){C=h.length||0;const Q=F.length||0;h.length=C+Q;for(let le=0;le<Q;le++)h[C+le]=F[le]}else h.push(F)}}class B{constructor(v,C){this.i=v,this.j=C,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function K(h){c.setTimeout(()=>{throw h},0)}function W(){var h=x;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class ie{constructor(){this.h=this.g=null}add(v,C){const I=j.get();I.set(v,C),this.h?this.h.next=I:this.g=I,this.h=I}}var j=new B(()=>new ue,h=>h.reset());class ue{constructor(){this.next=this.g=this.h=null}set(v,C){this.h=v,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let he,fe=!1,x=new ie,M=()=>{const h=Promise.resolve(void 0);he=()=>{h.then(N)}};function N(){for(var h;h=W();){try{h.h.call(h.g)}catch(C){K(C)}var v=j;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}fe=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const C=()=>{};c.addEventListener("test",C,v),c.removeEventListener("test",C,v)}catch{}return h})();function b(h){return/^[\s\xa0]*$/.test(h)}function re(h,v){P.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}E(re,P),re.prototype.init=function(h,v){const C=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(C=="mouseover"?v=h.fromElement:C=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&re.Z.h.call(this)},re.prototype.h=function(){re.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Se="closure_listenable_"+(Math.random()*1e6|0),Y=0;function oe(h,v,C,I,F){this.listener=h,this.proxy=null,this.src=v,this.type=C,this.capture=!!I,this.ha=F,this.key=++Y,this.da=this.fa=!1}function Te(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ge(h,v,C){for(const I in h)v.call(C,h[I],I,h)}function Ke(h,v){for(const C in h)v.call(void 0,h[C],C,h)}function q(h){const v={};for(const C in h)v[C]=h[C];return v}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(h,v){let C,I;for(let F=1;F<arguments.length;F++){I=arguments[F];for(C in I)h[C]=I[C];for(let Q=0;Q<ee.length;Q++)C=ee[Q],Object.prototype.hasOwnProperty.call(I,C)&&(h[C]=I[C])}}function pe(h){this.src=h,this.g={},this.h=0}pe.prototype.add=function(h,v,C,I,F){const Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);const le=Re(h,v,I,F);return le>-1?(v=h[le],C||(v.fa=!1)):(v=new oe(v,this.src,Q,!!I,F),v.fa=C,h.push(v)),v};function ae(h,v){const C=v.type;if(C in h.g){var I=h.g[C],F=Array.prototype.indexOf.call(I,v,void 0),Q;(Q=F>=0)&&Array.prototype.splice.call(I,F,1),Q&&(Te(v),h.g[C].length==0&&(delete h.g[C],h.h--))}}function Re(h,v,C,I){for(let F=0;F<h.length;++F){const Q=h[F];if(!Q.da&&Q.listener==v&&Q.capture==!!C&&Q.ha==I)return F}return-1}var Pe="closure_lm_"+(Math.random()*1e6|0),Pt={};function ct(h,v,C,I,F){if(Array.isArray(v)){for(let Q=0;Q<v.length;Q++)ct(h,v[Q],C,I,F);return null}return C=fa(C),h&&h[Se]?h.J(v,C,m(I)?!!I.capture:!1,F):so(h,v,C,!1,I,F)}function so(h,v,C,I,F,Q){if(!v)throw Error("Invalid event type");const le=m(F)?!!F.capture:!!F;let Me=oo(h);if(Me||(h[Pe]=Me=new pe(h)),C=Me.add(v,C,I,le,Q),C.proxy)return C;if(I=Yo(),C.proxy=I,I.src=h,I.listener=C,h.addEventListener)k||(F=le),F===void 0&&(F=!1),h.addEventListener(v.toString(),I,F);else if(h.attachEvent)h.attachEvent(si(v.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Yo(){function h(C){return v.call(h.src,h.listener,C)}const v=ua;return h}function Jo(h,v,C,I,F){if(Array.isArray(v))for(var Q=0;Q<v.length;Q++)Jo(h,v[Q],C,I,F);else I=m(I)?!!I.capture:!!I,C=fa(C),h&&h[Se]?(h=h.i,Q=String(v).toString(),Q in h.g&&(v=h.g[Q],C=Re(v,C,I,F),C>-1&&(Te(v[C]),Array.prototype.splice.call(v,C,1),v.length==0&&(delete h.g[Q],h.h--)))):h&&(h=oo(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Re(v,C,I,F)),(C=h>-1?v[h]:null)&&Ko(C))}function Ko(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Se])ae(v.i,h);else{var C=h.type,I=h.proxy;v.removeEventListener?v.removeEventListener(C,I,h.capture):v.detachEvent?v.detachEvent(si(C),I):v.addListener&&v.removeListener&&v.removeListener(I),(C=oo(v))?(ae(C,h),C.h==0&&(C.src=null,v[Pe]=null)):Te(h)}}}function si(h){return h in Pt?Pt[h]:Pt[h]="on"+h}function ua(h,v){if(h.da)h=!0;else{v=new re(v,this);const C=h.listener,I=h.ha||h.src;h.fa&&Ko(h),h=C.call(I,v)}return h}function oo(h){return h=h[Pe],h instanceof pe?h:null}var ca="__closure_events_fn_"+(Math.random()*1e9>>>0);function fa(h){return typeof h=="function"?h:(h[ca]||(h[ca]=function(v){return h.handleEvent(v)}),h[ca])}function St(){U.call(this),this.i=new pe(this),this.M=this,this.G=null}E(St,U),St.prototype[Se]=!0,St.prototype.removeEventListener=function(h,v,C,I){Jo(this,h,v,C,I)};function Ut(h,v){var C,I=h.G;if(I)for(C=[];I;I=I.G)C.push(I);if(h=h.M,I=v.type||v,typeof v=="string")v=new P(v,h);else if(v instanceof P)v.target=v.target||h;else{var F=v;v=new P(I,h),ce(v,F)}F=!0;let Q,le;if(C)for(le=C.length-1;le>=0;le--)Q=v.g=C[le],F=ls(Q,I,!0,v)&&F;if(Q=v.g=h,F=ls(Q,I,!0,v)&&F,F=ls(Q,I,!1,v)&&F,C)for(le=0;le<C.length;le++)Q=v.g=C[le],F=ls(Q,I,!1,v)&&F}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const C=h.g[v];for(let I=0;I<C.length;I++)Te(C[I]);delete h.g[v],h.h--}}this.G=null},St.prototype.J=function(h,v,C,I){return this.i.add(String(h),v,!1,C,I)},St.prototype.K=function(h,v,C,I){return this.i.add(String(h),v,!0,C,I)};function ls(h,v,C,I){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let F=!0;for(let Q=0;Q<v.length;++Q){const le=v[Q];if(le&&!le.da&&le.capture==C){const Me=le.listener,yt=le.ha||le.src;le.fa&&ae(h.i,le),F=Me.call(yt,I)!==!1&&F}}return F&&!I.defaultPrevented}function Tf(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:c.setTimeout(h,v||0)}function Hl(h){h.g=Tf(()=>{h.g=null,h.i&&(h.i=!1,Hl(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class nn extends U{constructor(v,C){super(),this.m=v,this.l=C,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Hl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ro(h){U.call(this),this.h=h,this.g={}}E(ro,U);var da=[];function ha(h){Ge(h.g,function(v,C){this.g.hasOwnProperty(C)&&Ko(v)},h),h.g={}}ro.prototype.N=function(){ro.Z.N.call(this),ha(this)},ro.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var us=c.JSON.stringify,vf=c.JSON.parse,zl=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Yl(){}function Jl(){}var zn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ft(){P.call(this,"d")}E(Ft,P);function wn(){P.call(this,"c")}E(wn,P);var gt={},Kl=null;function Qo(){return Kl=Kl||new St}gt.Ia="serverreachability";function Ql(h){P.call(this,gt.Ia,h)}E(Ql,P);function oi(h){const v=Qo();Ut(v,new Ql(v))}gt.STAT_EVENT="statevent";function ao(h,v){P.call(this,gt.STAT_EVENT,h),this.stat=v}E(ao,P);function At(h){const v=Qo();Ut(v,new ao(v,h))}gt.Ja="timingevent";function ri(h,v){P.call(this,gt.Ja,h),this.size=v}E(ri,P);function ai(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},v)}function Yn(){this.g=!0}Yn.prototype.ua=function(){this.g=!1};function Ef(h,v,C,I,F,Q){h.info(function(){if(h.g)if(Q){var le="",Me=Q.split("&");for(let Qe=0;Qe<Me.length;Qe++){var yt=Me[Qe].split("=");if(yt.length>1){const ft=yt[0];yt=yt[1];const Dn=ft.split("_");le=Dn.length>=2&&Dn[1]=="type"?le+(ft+"="+yt+"&"):le+(ft+"=redacted&")}}}else le=null;else le=Q;return"XMLHTTP REQ ("+I+") [attempt "+F+"]: "+v+`
`+C+`
`+le})}function Xl(h,v,C,I,F,Q,le){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+F+"]: "+v+`
`+C+`
`+Q+" "+le})}function li(h,v,C,I){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Sf(h,C)+(I?" "+I:"")})}function lo(h,v){h.info(function(){return"TIMEOUT: "+v})}Yn.prototype.info=function(){};function Sf(h,v){if(!h.g)return v;if(!v)return null;try{const Q=JSON.parse(v);if(Q){for(h=0;h<Q.length;h++)if(Array.isArray(Q[h])){var C=Q[h];if(!(C.length<2)){var I=C[1];if(Array.isArray(I)&&!(I.length<1)){var F=I[0];if(F!="noop"&&F!="stop"&&F!="close")for(let le=1;le<I.length;le++)I[le]=""}}}}return us(Q)}catch{return v}}var uo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ma={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},pa;function co(){}E(co,Yl),co.prototype.g=function(){return new XMLHttpRequest},pa=new co;function Vi(h){return encodeURIComponent(String(h))}function $l(h){var v=1;h=h.split(":");const C=[];for(;v>0&&h.length;)C.push(h.shift()),v--;return h.length&&C.push(h.join(":")),C}function Jn(h,v,C,I){this.j=h,this.i=v,this.l=C,this.S=I||1,this.V=new ro(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Kn}function Kn(){this.i=null,this.g="",this.h=!1}var Ct={},qt={};function ui(h,v,C){h.M=1,h.A=fo(It(v)),h.u=C,h.R=!0,Xo(h,null)}function Xo(h,v){h.F=Date.now(),ci(h),h.B=It(h.A);var C=h.B,I=h.S;Array.isArray(I)||(I=[String(I)]),jo(C.i,"t",I),h.C=0,C=h.j.L,h.h=new Kn,h.g=fu(h.j,C?v:null,!h.u),h.P>0&&(h.O=new nn(p(h.Y,h,h.g),h.P)),v=h.V,C=h.g,I=h.ba;var F="readystatechange";Array.isArray(F)||(F&&(da[0]=F.toString()),F=da);for(let Q=0;Q<F.length;Q++){const le=ct(C,F[Q],I||v.handleEvent,!1,v.h||v);if(!le)break;v.g[le.key]=le}v=h.J?q(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),oi(),Ef(h.i,h.v,h.B,h.l,h.S,h.u)}Jn.prototype.ba=function(h){h=h.target;const v=this.O;v&&$n(h)==3?v.j():this.Y(h)},Jn.prototype.Y=function(h){try{if(h==this.g)e:{const Me=$n(this.g),yt=this.g.ya(),Qe=this.g.ca();if(!(Me<3)&&(Me!=3||this.g&&(this.h.h||this.g.la()||Ht(this.g)))){this.K||Me!=4||yt==7||(yt==8||Qe<=0?oi(3):oi(2)),fi(this);var v=this.g.ca();this.X=v;var C=Af(this);if(this.o=v==200,Xl(this.i,this.v,this.B,this.l,this.S,Me,v),this.o){if(this.U&&!this.L){t:{if(this.g){var I,F=this.g;if((I=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(I)){var Q=I;break t}}Q=null}if(h=Q)li(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,di(this,h);else{this.o=!1,this.m=3,At(12),gn(this),Nn(this);break e}}if(this.R){h=!0;let ft;for(;!this.K&&this.C<C.length;)if(ft=Wl(this,C),ft==qt){Me==4&&(this.m=4,At(14),h=!1),li(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==Ct){this.m=4,At(15),li(this.i,this.l,C,"[Invalid Chunk]"),h=!1;break}else li(this.i,this.l,ft,null),di(this,ft);if(Zl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||C.length!=0||this.h.h||(this.m=1,At(16),h=!1),this.o=this.o&&h,!h)li(this.i,this.l,C,"[Invalid Chunked Response]"),gn(this),Nn(this);else if(C.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),xa(le),le.P=!0,At(11))}}else li(this.i,this.l,C,null),di(this,C);Me==4&&gn(this),this.o&&!this.K&&(Me==4?au(this.j,this):(this.o=!1,ci(this)))}else Ui(this.g),v==400&&C.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),gn(this),Nn(this)}}}catch{}finally{}};function Af(h){if(!Zl(h))return h.g.la();const v=Ht(h.g);if(v==="")return"";let C="";const I=v.length,F=$n(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return gn(h),Nn(h),"";h.h.i=new c.TextDecoder}for(let Q=0;Q<I;Q++)h.h.h=!0,C+=h.h.i.decode(v[Q],{stream:!(F&&Q==I-1)});return v.length=0,h.h.g+=C,h.C=0,h.h.g}function Zl(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Wl(h,v){var C=h.C,I=v.indexOf(`
`,C);return I==-1?qt:(C=Number(v.substring(C,I)),isNaN(C)?Ct:(I+=1,I+C>v.length?qt:(v=v.slice(I,I+C),h.C=I+C,v)))}Jn.prototype.cancel=function(){this.K=!0,gn(this)};function ci(h){h.T=Date.now()+h.H,$o(h,h.H)}function $o(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=ai(p(h.aa,h),v)}function fi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Jn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(lo(this.i,this.B),this.M!=2&&(oi(),At(17)),gn(this),this.m=2,Nn(this)):$o(this,this.T-h)};function Nn(h){h.j.I==0||h.K||au(h.j,h)}function gn(h){fi(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,ha(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function di(h,v){try{var C=h.j;if(C.I!=0&&(C.g==h||mi(C.h,h))){if(!h.L&&mi(C.h,h)&&C.I==3){try{var I=C.Ba.g.parse(v)}catch{I=null}if(Array.isArray(I)&&I.length==3){var F=I;if(F[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<h.F)sr(C),ys(C);else break e;To(C),At(18)}}else C.xa=F[1],0<C.xa-C.K&&F[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=ai(p(C.Va,C),6e3));hi(C.h)<=1&&C.ta&&(C.ta=void 0)}else vi(C,11)}else if((h.L||C.g==h)&&sr(C),!b(v))for(F=C.Ba.g.parse(v),v=0;v<F.length;v++){let Qe=F[v];const ft=Qe[0];if(!(ft<=C.K))if(C.K=ft,Qe=Qe[1],C.I==2)if(Qe[0]=="c"){C.M=Qe[1],C.ba=Qe[2];const Dn=Qe[3];Dn!=null&&(C.ka=Dn,C.j.info("VER="+C.ka));const Ei=Qe[4];Ei!=null&&(C.za=Ei,C.j.info("SVER="+C.za));const Zn=Qe[5];Zn!=null&&typeof Zn=="number"&&Zn>0&&(I=1.5*Zn,C.O=I,C.j.info("backChannelRequestTimeoutMs_="+I)),I=C;const Wn=h.g;if(Wn){const vo=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vo){var Q=I.h;Q.g||vo.indexOf("spdy")==-1&&vo.indexOf("quic")==-1&&vo.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(_a(Q,Q.h),Q.h=null))}if(I.G){const or=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;or&&(I.wa=or,Ze(I.J,I.G,or))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-h.F,C.j.info("Handshake RTT: "+C.T+"ms")),I=C;var le=h;if(I.na=cu(I,I.L?I.ba:null,I.W),le.L){Ta(I.h,le);var Me=le,yt=I.O;yt&&(Me.H=yt),Me.D&&(fi(Me),ci(Me)),I.g=le}else ou(I);C.i.length>0&&Ti(C)}else Qe[0]!="stop"&&Qe[0]!="close"||vi(C,7);else C.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?vi(C,7):Na(C):Qe[0]!="noop"&&C.l&&C.l.qa(Qe),C.A=0)}}oi(4)}catch{}}var Rt=class{constructor(h,v){this.g=h,this.map=v}};function ga(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ya(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function hi(h){return h.h?1:h.g?h.g.size:0}function mi(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function _a(h,v){h.g?h.g.add(v):h.h=v}function Ta(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}ga.prototype.cancel=function(){if(this.i=va(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function va(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const C of h.g.values())v=v.concat(C.G);return v}return w(h.i)}var jl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zo(h,v){if(h){h=h.split("&");for(let C=0;C<h.length;C++){const I=h[C].indexOf("=");let F,Q=null;I>=0?(F=h[C].substring(0,I),Q=h[C].substring(I+1)):F=h[C],v(F,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function yn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof yn?(this.l=h.l,Ot(this,h.j),this.o=h.o,this.g=h.g,cs(this,h.u),this.h=h.h,Ea(this,iu(h.i)),this.m=h.m):h&&(v=String(h).match(jl))?(this.l=!1,Ot(this,v[1]||"",!0),this.o=pi(v[2]||""),this.g=pi(v[3]||"",!0),cs(this,v[4]),this.h=pi(v[5]||"",!0),Ea(this,v[6]||"",!0),this.m=pi(v[7]||"")):(this.l=!1,this.i=new ds(null,this.l))}yn.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(ho(v,Wo,!0),":");var C=this.g;return(C||v=="file")&&(h.push("//"),(v=this.o)&&h.push(ho(v,Wo,!0),"@"),h.push(Vi(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&h.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&h.push("/"),h.push(ho(C,C.charAt(0)=="/"?Sa:eu,!0))),(C=this.i.toString())&&h.push("?",C),(C=this.m)&&h.push("#",ho(C,tu)),h.join("")},yn.prototype.resolve=function(h){const v=It(this);let C=!!h.j;C?Ot(v,h.j):C=!!h.o,C?v.o=h.o:C=!!h.g,C?v.g=h.g:C=h.u!=null;var I=h.h;if(C)cs(v,h.u);else if(C=!!h.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var F=v.h.lastIndexOf("/");F!=-1&&(I=v.h.slice(0,F+1)+I)}if(F=I,F==".."||F==".")I="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){I=F.lastIndexOf("/",0)==0,F=F.split("/");const Q=[];for(let le=0;le<F.length;){const Me=F[le++];Me=="."?I&&le==F.length&&Q.push(""):Me==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),I&&le==F.length&&Q.push("")):(Q.push(Me),I=!0)}I=Q.join("/")}else I=F}return C?v.h=I:C=h.i.toString()!=="",C?Ea(v,iu(h.i)):C=!!h.m,C&&(v.m=h.m),v};function It(h){return new yn(h)}function Ot(h,v,C){h.j=C?pi(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function cs(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function Ea(h,v,C){v instanceof ds?(h.i=v,er(h.i,h.l)):(C||(v=ho(v,fs)),h.i=new ds(v,h.l))}function Ze(h,v,C){h.i.set(v,C)}function fo(h){return Ze(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function pi(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ho(h,v,C){return typeof h=="string"?(h=encodeURI(h).replace(v,an),C&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function an(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Wo=/[#\/\?@]/g,eu=/[#\?:]/g,Sa=/[#\?]/g,fs=/[#\?@]/g,tu=/#/g;function ds(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function ln(h){h.g||(h.g=new Map,h.h=0,h.i&&Zo(h.i,function(v,C){h.add(decodeURIComponent(v.replace(/\+/g," ")),C)}))}n=ds.prototype,n.add=function(h,v){ln(this),this.i=null,h=hs(this,h);let C=this.g.get(h);return C||this.g.set(h,C=[]),C.push(v),this.h+=1,this};function nu(h,v){ln(h),v=hs(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Aa(h,v){return ln(h),v=hs(h,v),h.g.has(v)}n.forEach=function(h,v){ln(this),this.g.forEach(function(C,I){C.forEach(function(F){h.call(v,F,I,this)},this)},this)};function Ca(h,v){ln(h);let C=[];if(typeof v=="string")Aa(h,v)&&(C=C.concat(h.g.get(hs(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)C=C.concat(h[v]);return C}n.set=function(h,v){return ln(this),this.i=null,h=hs(this,h),Aa(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},n.get=function(h,v){return h?(h=Ca(this,h),h.length>0?String(h[0]):v):v};function jo(h,v,C){nu(h,v),C.length>0&&(h.i=null,h.g.set(hs(h,v),w(C)),h.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let I=0;I<v.length;I++){var C=v[I];const F=Vi(C);C=Ca(this,C);for(let Q=0;Q<C.length;Q++){let le=F;C[Q]!==""&&(le+="="+Vi(C[Q])),h.push(le)}}return this.i=h.join("&")};function iu(h){const v=new ds;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function hs(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function er(h,v){v&&!h.j&&(ln(h),h.i=null,h.g.forEach(function(C,I){const F=I.toLowerCase();I!=F&&(nu(this,I),jo(this,F,C))},h)),h.j=v}function Qn(h,v){const C=new Yn;if(c.Image){const I=new Image;I.onload=T(Mn,C,"TestLoadImage: loaded",!0,v,I),I.onerror=T(Mn,C,"TestLoadImage: error",!1,v,I),I.onabort=T(Mn,C,"TestLoadImage: abort",!1,v,I),I.ontimeout=T(Mn,C,"TestLoadImage: timeout",!1,v,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else v(!1)}function Ra(h,v){const C=new Yn,I=new AbortController,F=setTimeout(()=>{I.abort(),Mn(C,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:I.signal}).then(Q=>{clearTimeout(F),Q.ok?Mn(C,"TestPingServer: ok",!0,v):Mn(C,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(F),Mn(C,"TestPingServer: error",!1,v)})}function Mn(h,v,C,I,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),I(C)}catch{}}function ms(){this.g=new zl}function gi(h){this.i=h.Sb||null,this.h=h.ab||!1}E(gi,Yl),gi.prototype.g=function(){return new mo(this.i,this.h)};function mo(h,v){St.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(mo,St),n=mo.prototype,n.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,Xn(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||c).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ps(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Xn(this)),this.g&&(this.readyState=3,Xn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;tr(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function tr(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?ps(this):Xn(this),this.readyState==3&&tr(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,ps(this))},n.Na=function(h){this.g&&(this.response=h,ps(this))},n.ga=function(){this.g&&ps(this)};function ps(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Xn(h)}n.setRequestHeader=function(h,v){this.A.append(h,v)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var C=v.next();!C.done;)C=C.value,h.push(C[0]+": "+C[1]),C=v.next();return h.join(`\r
`)};function Xn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(mo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function xn(h){let v="";return Ge(h,function(C,I){v+=I,v+=":",v+=C,v+=`\r
`}),v}function po(h,v,C){e:{for(I in C){var I=!1;break e}I=!0}I||(C=xn(C),typeof h=="string"?C!=null&&Vi(C):Ze(h,v,C))}function et(h){St.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(et,St);var yi=/^https?$/i,Ia=["POST","PUT"];n=et.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,v,C,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():pa.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(Q){go(this,Q);return}if(h=C||"",C=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var F in I)C.set(F,I[F]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const Q of I.keys())C.set(Q,I.get(Q));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(C.keys()).find(Q=>Q.toLowerCase()=="content-type"),F=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Ia,v,void 0)>=0)||I||F||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,le]of C)this.g.setRequestHeader(Q,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Q){go(this,Q)}};function go(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,wa(h),Pi(h)}function wa(h){h.A||(h.A=!0,Ut(h,"complete"),Ut(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ut(this,"complete"),Ut(this,"abort"),Pi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pi(this,!0)),et.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?yo(this):this.Xa())},n.Xa=function(){yo(this)};function yo(h){if(h.h&&typeof l<"u"){if(h.v&&$n(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ut(h,"readystatechange"),$n(h)==4){h.h=!1;try{const Q=h.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var C;if(!(C=v)){var I;if(I=Q===0){let le=String(h.D).match(jl)[1]||null;!le&&c.self&&c.self.location&&(le=c.self.location.protocol.slice(0,-1)),I=!yi.test(le?le.toLowerCase():"")}C=I}if(C)Ut(h,"complete"),Ut(h,"success");else{h.o=6;try{var F=$n(h)>2?h.g.statusText:""}catch{F=""}h.l=F+" ["+h.ca()+"]",wa(h)}}finally{Pi(h)}}}}function Pi(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const C=h.g;h.g=null,v||Ut(h,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function $n(h){return h.g?h.g.readyState:0}n.ca=function(){try{return $n(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),vf(v)}};function Ht(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ui(h){const v={};h=(h.g&&$n(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(b(h[I]))continue;var C=$l(h[I]);const F=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const Q=v[F]||[];v[F]=Q,Q.push(C)}Ke(v,function(I){return I.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function _i(h,v,C){return C&&C.internalChannelParams&&C.internalChannelParams[h]||v}function gs(h){this.za=0,this.i=[],this.j=new Yn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=_i("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=_i("baseRetryDelayMs",5e3,h),this.Za=_i("retryDelaySeedMs",1e4,h),this.Ta=_i("forwardChannelMaxRetries",2,h),this.va=_i("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new ga(h&&h.concurrentRequestLimit),this.Ba=new ms,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=gs.prototype,n.ka=8,n.I=1,n.connect=function(h,v,C,I){At(0),this.W=h,this.H=v||{},C&&I!==void 0&&(this.H.OSID=C,this.H.OAID=I),this.F=this.X,this.J=cu(this,null,this.W),Ti(this)};function Na(h){if(nr(h),h.I==3){var v=h.V++,C=It(h.J);if(Ze(C,"SID",h.M),Ze(C,"RID",v),Ze(C,"TYPE","terminate"),_o(h,C),v=new Jn(h,h.j,v),v.M=2,v.A=fo(It(C)),C=!1,c.navigator&&c.navigator.sendBeacon)try{C=c.navigator.sendBeacon(v.A.toString(),"")}catch{}!C&&c.Image&&(new Image().src=v.A,C=!0),C||(v.g=fu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),ci(v)}uu(h)}function ys(h){h.g&&(xa(h),h.g.cancel(),h.g=null)}function nr(h){ys(h),h.v&&(c.clearTimeout(h.v),h.v=null),sr(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Ti(h){if(!ya(h.h)&&!h.m){h.m=!0;var v=h.Ea;he||M(),fe||(he(),fe=!0),x.add(v,h),h.D=0}}function ir(h,v){return hi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=ai(p(h.Ea,h,v),lu(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const F=new Jn(this,this.j,h);let Q=this.o;if(this.U&&(Q?(Q=q(Q),ce(Q,this.U)):Q=this.U),this.u!==null||this.R||(F.J=Q,Q=null),this.S)e:{for(var v=0,C=0;C<this.i.length;C++){t:{var I=this.i[C];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(v+=I,v>4096){v=C;break e}if(v===4096||C===this.i.length-1){v=C+1;break e}}v=1e3}else v=1e3;v=su(this,F,v),C=It(this.J),Ze(C,"RID",h),Ze(C,"CVER",22),this.G&&Ze(C,"X-HTTP-Session-Id",this.G),_o(this,C),Q&&(this.R?v="headers="+Vi(xn(Q))+"&"+v:this.u&&po(C,this.u,Q)),_a(this.h,F),this.Ra&&Ze(C,"TYPE","init"),this.S?(Ze(C,"$req",v),Ze(C,"SID","null"),F.U=!0,ui(F,C,null)):ui(F,C,v),this.I=2}}else this.I==3&&(h?Ma(this,h):this.i.length==0||ya(this.h)||Ma(this))};function Ma(h,v){var C;v?C=v.l:C=h.V++;const I=It(h.J);Ze(I,"SID",h.M),Ze(I,"RID",C),Ze(I,"AID",h.K),_o(h,I),h.u&&h.o&&po(I,h.u,h.o),C=new Jn(h,h.j,C,h.D+1),h.u===null&&(C.J=h.o),v&&(h.i=v.G.concat(h.i)),v=su(h,C,1e3),C.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),_a(h.h,C),ui(C,I,v)}function _o(h,v){h.H&&Ge(h.H,function(C,I){Ze(v,I,C)}),h.l&&Ge({},function(C,I){Ze(v,I,C)})}function su(h,v,C){C=Math.min(h.i.length,C);const I=h.l?p(h.l.Ka,h.l,h):null;e:{var F=h.i;let Me=-1;for(;;){const yt=["count="+C];Me==-1?C>0?(Me=F[0].g,yt.push("ofs="+Me)):Me=0:yt.push("ofs="+Me);let Qe=!0;for(let ft=0;ft<C;ft++){var Q=F[ft].g;const Dn=F[ft].map;if(Q-=Me,Q<0)Me=Math.max(0,F[ft].g-100),Qe=!1;else try{Q="req"+Q+"_"||"";try{var le=Dn instanceof Map?Dn:Object.entries(Dn);for(const[Ei,Zn]of le){let Wn=Zn;m(Zn)&&(Wn=us(Zn)),yt.push(Q+Ei+"="+encodeURIComponent(Wn))}}catch(Ei){throw yt.push(Q+"type="+encodeURIComponent("_badmap")),Ei}}catch{I&&I(Dn)}}if(Qe){le=yt.join("&");break e}}le=void 0}return h=h.i.splice(0,C),v.G=h,le}function ou(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;he||M(),fe||(he(),fe=!0),x.add(v,h),h.A=0}}function To(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=ai(p(h.Da,h),lu(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,ru(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=ai(p(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),ys(this),ru(this))};function xa(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function ru(h){h.g=new Jn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=It(h.na);Ze(v,"RID","rpc"),Ze(v,"SID",h.M),Ze(v,"AID",h.K),Ze(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ze(v,"TO",h.ia),Ze(v,"TYPE","xmlhttp"),_o(h,v),h.u&&h.o&&po(v,h.u,h.o),h.O&&(h.g.H=h.O);var C=h.g;h=h.ba,C.M=1,C.A=fo(It(v)),C.u=null,C.R=!0,Xo(C,h)}n.Va=function(){this.C!=null&&(this.C=null,ys(this),To(this),At(19))};function sr(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function au(h,v){var C=null;if(h.g==v){sr(h),xa(h),h.g=null;var I=2}else if(mi(h.h,v))C=v.G,Ta(h.h,v),I=1;else return;if(h.I!=0){if(v.o)if(I==1){C=v.u?v.u.length:0,v=Date.now()-v.F;var F=h.D;I=Qo(),Ut(I,new ri(I,C)),Ti(h)}else ou(h);else if(F=v.m,F==3||F==0&&v.X>0||!(I==1&&ir(h,v)||I==2&&To(h)))switch(C&&C.length>0&&(v=h.h,v.i=v.i.concat(C)),F){case 1:vi(h,5);break;case 4:vi(h,10);break;case 3:vi(h,6);break;default:vi(h,2)}}}function lu(h,v){let C=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(C*=2),C*v}function vi(h,v){if(h.j.info("Error code "+v),v==2){var C=p(h.bb,h),I=h.Ua;const F=!I;I=new yn(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ot(I,"https"),fo(I),F?Qn(I.toString(),C):Ra(I.toString(),C)}else At(2);h.I=0,h.l&&h.l.pa(v),uu(h),nr(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function uu(h){if(h.I=0,h.ja=[],h.l){const v=va(h.h);(v.length!=0||h.i.length!=0)&&(G(h.ja,v),G(h.ja,h.i),h.h.i.length=0,w(h.i),h.i.length=0),h.l.oa()}}function cu(h,v,C){var I=C instanceof yn?It(C):new yn(C);if(I.g!="")v&&(I.g=v+"."+I.g),cs(I,I.u);else{var F=c.location;I=F.protocol,v=v?v+"."+F.hostname:F.hostname,F=+F.port;const Q=new yn(null);I&&Ot(Q,I),v&&(Q.g=v),F&&cs(Q,F),C&&(Q.h=C),I=Q}return C=h.G,v=h.wa,C&&v&&Ze(I,C,v),Ze(I,"VER",h.ka),_o(h,I),I}function fu(h,v,C){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new et(new gi({ab:C})):new et(h.ma),v.Fa(h.L),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function du(){}n=du.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function _s(){}_s.prototype.g=function(h,v){return new sn(h,v)};function sn(h,v){St.call(this),this.g=new gs(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!b(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!b(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Li(this)}E(sn,St),sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){Na(this.g)},sn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var C={};C.__data__=h,h=C}else this.v&&(C={},C.__data__=us(h),h=C);v.i.push(new Rt(v.Ya++,h)),v.I==3&&Ti(v)},sn.prototype.N=function(){this.g.l=null,delete this.j,Na(this.g),delete this.g,sn.Z.N.call(this)};function hu(h){Ft.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const C in v){h=C;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}E(hu,Ft);function mu(){wn.call(this),this.status=1}E(mu,wn);function Li(h){this.g=h}E(Li,du),Li.prototype.ra=function(){Ut(this.g,"a")},Li.prototype.qa=function(h){Ut(this.g,new hu(h))},Li.prototype.pa=function(h){Ut(this.g,new mu)},Li.prototype.oa=function(){Ut(this.g,"b")},_s.prototype.createWebChannel=_s.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,LE=function(){return new _s},UE=function(){return Qo()},PE=gt,kh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},uo.NO_ERROR=0,uo.TIMEOUT=8,uo.HTTP_ERROR=6,Cc=uo,ma.COMPLETE="complete",VE=ma,Jl.EventType=zn,zn.OPEN="a",zn.CLOSE="b",zn.ERROR="c",zn.MESSAGE="d",St.prototype.listen=St.prototype.J,gl=Jl,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,bE=et}).apply(typeof _c<"u"?_c:typeof self<"u"?self:typeof window<"u"?window:{});const Q_="@firebase/firestore",X_="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jt.UNAUTHENTICATED=new jt(null),jt.GOOGLE_CREDENTIALS=new jt("google-credentials-uid"),jt.FIRST_PARTY=new jt("first-party-uid"),jt.MOCK_USER=new jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ea="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=new RE("@firebase/firestore");function Ur(){return Oo.logLevel}function ge(n,...e){if(Oo.logLevel<=He.DEBUG){const t=e.map(mm);Oo.debug(`Firestore (${ea}): ${n}`,...t)}}function ns(n,...e){if(Oo.logLevel<=He.ERROR){const t=e.map(mm);Oo.error(`Firestore (${ea}): ${n}`,...t)}}function Kr(n,...e){if(Oo.logLevel<=He.WARN){const t=e.map(mm);Oo.warn(`Firestore (${ea}): ${n}`,...t)}}function mm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,kE(n,s,t)}function kE(n,e,t){let s=`FIRESTORE (${ea}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ns(s),new Error(s)}function $e(n,e,t,s){let r="Unexpected state";typeof t=="string"?r=t:s=t,n||kE(e,r,s)}function Ne(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends jr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(jt.UNAUTHENTICATED)))}shutdown(){}}class vI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class EI{constructor(e){this.t=e,this.currentUser=jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0,42304);let s=this.i;const r=y=>this.i!==s?(s=this.i,t(y)):Promise.resolve();let l=new ji;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ji,e.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await r(this.currentUser)}))},m=y=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((y=>m(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ji)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?($e(typeof s.accessToken=="string",31837,{l:s}),new qE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new jt(e)}}class SI{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class AI{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new SI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(jt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sI(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$e(this.o===void 0,3512);const s=l=>{l.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ge("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const r=l=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new $_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?($e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new $_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=RI(40);for(let l=0;l<r.length;++l)s.length<20&&r[l]<t&&(s+=e.charAt(r[l]%62))}return s}}function qe(n,e){return n<e?-1:n>e?1:0}function qh(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const r=n.charAt(s),l=e.charAt(s);if(r!==l)return wh(r)===wh(l)?qe(r,l):wh(r)?1:-1}return qe(n.length,e.length)}const II=55296,wI=57343;function wh(n){const e=n.charCodeAt(0);return e>=II&&e<=wI}function Qr(n,e,t){return n.length===e.length&&n.every(((s,r)=>t(s,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="__name__";class Ii{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ce(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Ii.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ii?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let r=0;r<s;r++){const l=Ii.compareSegments(e.get(r),t.get(r));if(l!==0)return l}return qe(e.length,t.length)}static compareSegments(e,t){const s=Ii.isNumericId(e),r=Ii.isNumericId(t);return s&&!r?-1:!s&&r?1:s&&r?Ii.extractNumericId(e).compare(Ii.extractNumericId(t)):qh(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ys.fromString(e.substring(4,e.length-2))}}class ot extends Ii{construct(e,t,s){return new ot(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new me(ne.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((r=>r.length>0)))}return new ot(t)}static emptyPath(){return new ot([])}}const NI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends Ii{construct(e,t,s){return new Xt(e,t,s)}static isValidIdentifier(e){return NI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Z_}static keyField(){return new Xt([Z_])}static fromServerFormat(e){const t=[];let s="",r=0;const l=()=>{if(s.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;r<e.length;){const m=e[r];if(m==="\\"){if(r+1===e.length)throw new me(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[r+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new me(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,r+=2}else m==="`"?(c=!c,r++):m!=="."||c?(s+=m,r++):(l(),r++)}if(l(),c)throw new me(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(t)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ot.fromString(e))}static fromName(e){return new Ee(ot.fromString(e).popFirst(5))}static empty(){return new Ee(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ot.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(n,e,t){if(!t)throw new me(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function MI(n,e,t,s){if(e===!0&&s===!0)throw new me(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function W_(n){if(!Ee.isDocumentKey(n))throw new me(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function j_(n){if(Ee.isDocumentKey(n))throw new me(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function GE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Wc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ce(12329,{type:typeof n})}function is(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new me(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wc(n);throw new me(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ul(n,e){if(!GE(n))throw new me(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const r=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(r&&typeof c!==r){t=`JSON field '${s}' must be a ${r}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new me(ne.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT=-62135596800,tT=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*tT);return new ut(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<eT)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tT}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ul(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-eT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:Vt("string",ut._jsonSchemaVersion),seconds:Vt("number"),nanoseconds:Vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new ut(0,0))}static max(){return new Ie(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl=-1;function xI(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=Ie.fromTimestamp(s===1e9?new ut(t+1,0):new ut(t,s));return new Ks(r,Ee.empty(),e)}function DI(n){return new Ks(n.readTime,n.key,Nl)}class Ks{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ks(Ie.min(),Ee.empty(),Nl)}static max(){return new Ks(Ie.max(),Ee.empty(),Nl)}}function bI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==VI)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((s,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,r)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,s)=>{t(e)}))}static reject(e){return new se(((t,s)=>{s(e)}))}static waitFor(e){return new se(((t,s)=>{let r=0,l=0,c=!1;e.forEach((m=>{++r,m.next((()=>{++l,c&&l===r&&t()}),(y=>s(y)))})),c=!0,l===r&&t()}))}static or(e){let t=se.resolve(!1);for(const s of e)t=t.next((r=>r?se.resolve(r):s()));return t}static forEach(e,t){const s=[];return e.forEach(((r,l)=>{s.push(t.call(this,r,l))})),this.waitFor(s)}static mapArray(e,t){return new se(((s,r)=>{const l=e.length,c=new Array(l);let m=0;for(let y=0;y<l;y++){const p=y;t(e[p]).next((T=>{c[p]=T,++m,m===l&&s(c)}),(T=>r(T)))}}))}static doWhile(e,t){return new se(((s,r)=>{const l=()=>{e()===!0?t().next((()=>{l()}),r):s()};l()}))}}function UI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function na(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm=-1;function ef(n){return n==null}function Lc(n){return n===0&&1/n==-1/0}function LI(n){return typeof n=="number"&&Number.isInteger(n)&&!Lc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="";function kI(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=nT(e)),e=qI(n.get(t),e);return nT(e)}function qI(n,e){let t=e;const s=n.length;for(let r=0;r<s;r++){const l=n.charAt(r);switch(l){case"\0":t+="";break;case BE:t+="";break;default:t+=l}}return t}function nT(n){return n+BE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function js(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function FE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,t){this.comparator=e,this.root=t||Qt.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return t+s.left.size;r<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tc(this.root,e,this.comparator,!0)}}class Tc{constructor(e,t,s,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,t,s,r,l){this.key=e,this.value=t,this.color=s??Qt.RED,this.left=r??Qt.EMPTY,this.right=l??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,r,l){return new Qt(e??this.key,t??this.value,s??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let r=this;const l=s(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,t,s),null):l===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Qt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,s,r,l){return this}insert(e,t,s){return new Qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sT(this.data.getIterator())}getIteratorFrom(e){return new sT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=s.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new kt(this.comparator);return t.data=e,t}}class sT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new Rn([])}unionWith(e){let t=new kt(Xt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Rn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qr(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new HE("Invalid base64 string: "+l):l}})(e);return new $t(t)}static fromUint8Array(e){const t=(function(r){let l="";for(let c=0;c<r.length;++c)l+=String.fromCharCode(r[c]);return l})(e);return new $t(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const OI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qs(n){if($e(!!n,39018),typeof n=="string"){let e=0;const t=OI.exec(n);if($e(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:vt(n.seconds),nanos:vt(n.nanos)}}function vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Xs(n){return typeof n=="string"?$t.fromBase64String(n):$t.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="server_timestamp",YE="__type__",JE="__previous_value__",KE="__local_write_time__";function ym(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[YE])==null?void 0:s.stringValue)===zE}function tf(n){const e=n.mapValue.fields[JE];return ym(e)?tf(e):e}function Ml(n){const e=Qs(n.mapValue.fields[KE].timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,t,s,r,l,c,m,y,p,T){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=r,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=p,this.isUsingEmulator=T}}const kc="(default)";class xl{constructor(e,t){this.projectId=e,this.database=t||kc}static empty(){return new xl("","")}get isDefaultDatabase(){return this.database===kc}isEqual(e){return e instanceof xl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="__type__",BI="__max__",vc={mapValue:{}},XE="__vector__",qc="value";function $s(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ym(n)?4:HI(n)?9007199254740991:FI(n)?10:11:Ce(28295,{value:n})}function bi(n,e){if(n===e)return!0;const t=$s(n);if(t!==$s(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ml(n).isEqual(Ml(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const c=Qs(r.timestampValue),m=Qs(l.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,l){return Xs(r.bytesValue).isEqual(Xs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,l){return vt(r.geoPointValue.latitude)===vt(l.geoPointValue.latitude)&&vt(r.geoPointValue.longitude)===vt(l.geoPointValue.longitude)})(n,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return vt(r.integerValue)===vt(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const c=vt(r.doubleValue),m=vt(l.doubleValue);return c===m?Lc(c)===Lc(m):isNaN(c)&&isNaN(m)}return!1})(n,e);case 9:return Qr(n.arrayValue.values||[],e.arrayValue.values||[],bi);case 10:case 11:return(function(r,l){const c=r.mapValue.fields||{},m=l.mapValue.fields||{};if(iT(c)!==iT(m))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(m[y]===void 0||!bi(c[y],m[y])))return!1;return!0})(n,e);default:return Ce(52216,{left:n})}}function Dl(n,e){return(n.values||[]).find((t=>bi(t,e)))!==void 0}function Xr(n,e){if(n===e)return 0;const t=$s(n),s=$s(e);if(t!==s)return qe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const m=vt(l.integerValue||l.doubleValue),y=vt(c.integerValue||c.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1})(n,e);case 3:return oT(n.timestampValue,e.timestampValue);case 4:return oT(Ml(n),Ml(e));case 5:return qh(n.stringValue,e.stringValue);case 6:return(function(l,c){const m=Xs(l),y=Xs(c);return m.compareTo(y)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const m=l.split("/"),y=c.split("/");for(let p=0;p<m.length&&p<y.length;p++){const T=qe(m[p],y[p]);if(T!==0)return T}return qe(m.length,y.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const m=qe(vt(l.latitude),vt(c.latitude));return m!==0?m:qe(vt(l.longitude),vt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return rT(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var S,w,G,B;const m=l.fields||{},y=c.fields||{},p=(S=m[qc])==null?void 0:S.arrayValue,T=(w=y[qc])==null?void 0:w.arrayValue,E=qe(((G=p==null?void 0:p.values)==null?void 0:G.length)||0,((B=T==null?void 0:T.values)==null?void 0:B.length)||0);return E!==0?E:rT(p,T)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===vc.mapValue&&c===vc.mapValue)return 0;if(l===vc.mapValue)return 1;if(c===vc.mapValue)return-1;const m=l.fields||{},y=Object.keys(m),p=c.fields||{},T=Object.keys(p);y.sort(),T.sort();for(let E=0;E<y.length&&E<T.length;++E){const S=qh(y[E],T[E]);if(S!==0)return S;const w=Xr(m[y[E]],p[T[E]]);if(w!==0)return w}return qe(y.length,T.length)})(n.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function oT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return qe(n,e);const t=Qs(n),s=Qs(e),r=qe(t.seconds,s.seconds);return r!==0?r:qe(t.nanos,s.nanos)}function rT(n,e){const t=n.values||[],s=e.values||[];for(let r=0;r<t.length&&r<s.length;++r){const l=Xr(t[r],s[r]);if(l)return l}return qe(t.length,s.length)}function $r(n){return Oh(n)}function Oh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Qs(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Xs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",r=!0;for(const l of t.values||[])r?r=!1:s+=",",s+=Oh(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let r="{",l=!0;for(const c of s)l?l=!1:r+=",",r+=`${c}:${Oh(t.fields[c])}`;return r+"}"})(n.mapValue):Ce(61005,{value:n})}function Rc(n){switch($s(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tf(n);return e?16+Rc(e):16;case 5:return 2*n.stringValue.length;case 6:return Xs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,l)=>r+Rc(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let r=0;return js(s.fields,((l,c)=>{r+=l.length+Rc(c)})),r})(n.mapValue);default:throw Ce(13486,{value:n})}}function aT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gh(n){return!!n&&"integerValue"in n}function _m(n){return!!n&&"arrayValue"in n}function lT(n){return!!n&&"nullValue"in n}function uT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ic(n){return!!n&&"mapValue"in n}function FI(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[QE])==null?void 0:s.stringValue)===XE}function El(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return js(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=El(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=El(n.arrayValue.values[t]);return e}return{...n}}function HI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===BI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.value=e}static empty(){return new pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Ic(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=El(t)}setAll(e){let t=Xt.emptyPath(),s={},r=[];e.forEach(((c,m)=>{if(!t.isImmediateParentOf(m)){const y=this.getFieldsMap(t);this.applyChanges(y,s,r),s={},r=[],t=m.popLast()}c?s[m.lastSegment()]=El(c):r.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,r)}delete(e){const t=this.field(e.popLast());Ic(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=t.mapValue.fields[e.get(s)];Ic(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,s){js(t,((r,l)=>e[r]=l));for(const r of s)delete e[r]}clone(){return new pn(El(this.value))}}function $E(n){const e=[];return js(n.fields,((t,s)=>{const r=new Xt([t]);if(Ic(s)){const l=$E(s.mapValue).fields;if(l.length===0)e.push(r);else for(const c of l)e.push(r.child(c))}else e.push(r)})),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,t,s,r,l,c,m){this.key=e,this.documentType=t,this.version=s,this.readTime=r,this.createTime=l,this.data=c,this.documentState=m}static newInvalidDocument(e){return new en(e,0,Ie.min(),Ie.min(),Ie.min(),pn.empty(),0)}static newFoundDocument(e,t,s,r){return new en(e,1,t,Ie.min(),s,r,0)}static newNoDocument(e,t){return new en(e,2,t,Ie.min(),Ie.min(),pn.empty(),0)}static newUnknownDocument(e,t){return new en(e,3,t,Ie.min(),Ie.min(),pn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,t){this.position=e,this.inclusive=t}}function cT(n,e,t){let s=0;for(let r=0;r<n.position.length;r++){const l=e[r],c=n.position[r];if(l.field.isKeyField()?s=Ee.comparator(Ee.fromName(c.referenceValue),t.key):s=Xr(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function fT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!bi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,t="asc"){this.field=e,this.dir=t}}function zI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{}class bt extends ZE{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new JI(e,t,s):t==="array-contains"?new XI(e,s):t==="in"?new $I(e,s):t==="not-in"?new ZI(e,s):t==="array-contains-any"?new WI(e,s):new bt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new KI(e,s):new QI(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Xr(t,this.value)):t!==null&&$s(this.value)===$s(t)&&this.matchesComparison(Xr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ni extends ZE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ni(e,t)}matches(e){return WE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function WE(n){return n.op==="and"}function jE(n){return YI(n)&&WE(n)}function YI(n){for(const e of n.filters)if(e instanceof ni)return!1;return!0}function Bh(n){if(n instanceof bt)return n.field.canonicalString()+n.op.toString()+$r(n.value);if(jE(n))return n.filters.map((e=>Bh(e))).join(",");{const e=n.filters.map((t=>Bh(t))).join(",");return`${n.op}(${e})`}}function e0(n,e){return n instanceof bt?(function(s,r){return r instanceof bt&&s.op===r.op&&s.field.isEqual(r.field)&&bi(s.value,r.value)})(n,e):n instanceof ni?(function(s,r){return r instanceof ni&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((l,c,m)=>l&&e0(c,r.filters[m])),!0):!1})(n,e):void Ce(19439)}function t0(n){return n instanceof bt?(function(t){return`${t.field.canonicalString()} ${t.op} ${$r(t.value)}`})(n):n instanceof ni?(function(t){return t.op.toString()+" {"+t.getFilters().map(t0).join(" ,")+"}"})(n):"Filter"}class JI extends bt{constructor(e,t,s){super(e,t,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class KI extends bt{constructor(e,t){super(e,"in",t),this.keys=n0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class QI extends bt{constructor(e,t){super(e,"not-in",t),this.keys=n0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function n0(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Ee.fromName(s.referenceValue)))}class XI extends bt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _m(t)&&Dl(t.arrayValue,this.value)}}class $I extends bt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Dl(this.value.arrayValue,t)}}class ZI extends bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Dl(this.value.arrayValue,t)}}class WI extends bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_m(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Dl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,t=null,s=[],r=[],l=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=r,this.limit=l,this.startAt=c,this.endAt=m,this.Te=null}}function dT(n,e=null,t=[],s=[],r=null,l=null,c=null){return new jI(n,e,t,s,r,l,c)}function Tm(n){const e=Ne(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Bh(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),ef(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>$r(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>$r(s))).join(",")),e.Te=t}return e.Te}function vm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!zI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!e0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!fT(n.startAt,e.startAt)&&fT(n.endAt,e.endAt)}function Fh(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,t=null,s=[],r=[],l=null,c="F",m=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=r,this.limit=l,this.limitType=c,this.startAt=m,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ew(n,e,t,s,r,l,c,m){return new Ll(n,e,t,s,r,l,c,m)}function Em(n){return new Ll(n)}function hT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function i0(n){return n.collectionGroup!==null}function Sl(n){const e=Ne(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new kt(Xt.comparator);return c.filters.forEach((y=>{y.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Gc(l,s))})),t.has(Xt.keyField().canonicalString())||e.Ie.push(new Gc(Xt.keyField(),s))}return e.Ie}function wi(n){const e=Ne(n);return e.Ee||(e.Ee=tw(e,Sl(n))),e.Ee}function tw(n,e){if(n.limitType==="F")return dT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new Gc(r.field,l)}));const t=n.endAt?new Oc(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Oc(n.startAt.position,n.startAt.inclusive):null;return dT(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Hh(n,e){const t=n.filters.concat([e]);return new Ll(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function zh(n,e,t){return new Ll(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function nf(n,e){return vm(wi(n),wi(e))&&n.limitType===e.limitType}function s0(n){return`${Tm(wi(n))}|lt:${n.limitType}`}function Lr(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((r=>t0(r))).join(", ")}]`),ef(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((r=>$r(r))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((r=>$r(r))).join(",")),`Target(${s})`})(wi(n))}; limitType=${n.limitType})`}function sf(n,e){return e.isFoundDocument()&&(function(s,r){const l=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ee.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,r){for(const l of Sl(s))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,r){for(const l of s.filters)if(!l.matches(r))return!1;return!0})(n,e)&&(function(s,r){return!(s.startAt&&!(function(c,m,y){const p=cT(c,m,y);return c.inclusive?p<=0:p<0})(s.startAt,Sl(s),r)||s.endAt&&!(function(c,m,y){const p=cT(c,m,y);return c.inclusive?p>=0:p>0})(s.endAt,Sl(s),r))})(n,e)}function nw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function o0(n){return(e,t)=>{let s=!1;for(const r of Sl(n)){const l=iw(r,e,t);if(l!==0)return l;s=s||r.field.isKeyField()}return 0}}function iw(n,e,t){const s=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(l,c,m){const y=c.data.field(l),p=m.data.field(l);return y!==null&&p!==null?Xr(y,p):Ce(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ce(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[r,l]of s)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[t]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){js(this.inner,((t,s)=>{for(const[r,l]of s)e(r,l)}))}isEmpty(){return FE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw=new ht(Ee.comparator);function ss(){return sw}const r0=new ht(Ee.comparator);function yl(...n){let e=r0;for(const t of n)e=e.insert(t.key,t);return e}function a0(n){let e=r0;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function ko(){return Al()}function l0(){return Al()}function Al(){return new Fo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const ow=new ht(Ee.comparator),rw=new kt(Ee.comparator);function Oe(...n){let e=rw;for(const t of n)e=e.add(t);return e}const aw=new kt(qe);function lw(){return aw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lc(e)?"-0":e}}function u0(n){return{integerValue:""+n}}function uw(n,e){return LI(e)?u0(e):Sm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(){this._=void 0}}function cw(n,e,t){return n instanceof Bc?(function(r,l){const c={fields:{[YE]:{stringValue:zE},[KE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&ym(l)&&(l=tf(l)),l&&(c.fields[JE]=l),{mapValue:c}})(t,e):n instanceof bl?f0(n,e):n instanceof Vl?d0(n,e):(function(r,l){const c=c0(r,l),m=mT(c)+mT(r.Ae);return Gh(c)&&Gh(r.Ae)?u0(m):Sm(r.serializer,m)})(n,e)}function fw(n,e,t){return n instanceof bl?f0(n,e):n instanceof Vl?d0(n,e):t}function c0(n,e){return n instanceof Fc?(function(s){return Gh(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Bc extends of{}class bl extends of{constructor(e){super(),this.elements=e}}function f0(n,e){const t=h0(e);for(const s of n.elements)t.some((r=>bi(r,s)))||t.push(s);return{arrayValue:{values:t}}}class Vl extends of{constructor(e){super(),this.elements=e}}function d0(n,e){let t=h0(e);for(const s of n.elements)t=t.filter((r=>!bi(r,s)));return{arrayValue:{values:t}}}class Fc extends of{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function mT(n){return vt(n.integerValue||n.doubleValue)}function h0(n){return _m(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function dw(n,e){return n.field.isEqual(e.field)&&(function(s,r){return s instanceof bl&&r instanceof bl||s instanceof Vl&&r instanceof Vl?Qr(s.elements,r.elements,bi):s instanceof Fc&&r instanceof Fc?bi(s.Ae,r.Ae):s instanceof Bc&&r instanceof Bc})(n.transform,e.transform)}class hw{constructor(e,t){this.version=e,this.transformResults=t}}class Ni{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ni}static exists(e){return new Ni(void 0,e)}static updateTime(e){return new Ni(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class rf{}function m0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new g0(n.key,Ni.none()):new kl(n.key,n.data,Ni.none());{const t=n.data,s=pn.empty();let r=new kt(Xt.comparator);for(let l of e.fields)if(!r.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),r=r.add(l)}return new eo(n.key,s,new Rn(r.toArray()),Ni.none())}}function mw(n,e,t){n instanceof kl?(function(r,l,c){const m=r.value.clone(),y=gT(r.fieldTransforms,l,c.transformResults);m.setAll(y),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):n instanceof eo?(function(r,l,c){if(!wc(r.precondition,l))return void l.convertToUnknownDocument(c.version);const m=gT(r.fieldTransforms,l,c.transformResults),y=l.data;y.setAll(p0(r)),y.setAll(m),l.convertToFoundDocument(c.version,y).setHasCommittedMutations()})(n,e,t):(function(r,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Cl(n,e,t,s){return n instanceof kl?(function(l,c,m,y){if(!wc(l.precondition,c))return m;const p=l.value.clone(),T=yT(l.fieldTransforms,y,c);return p.setAll(T),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(n,e,t,s):n instanceof eo?(function(l,c,m,y){if(!wc(l.precondition,c))return m;const p=yT(l.fieldTransforms,y,c),T=c.data;return T.setAll(p0(l)),T.setAll(p),c.convertToFoundDocument(c.version,T).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,s):(function(l,c,m){return wc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(n,e,t)}function pw(n,e){let t=null;for(const s of n.fieldTransforms){const r=e.data.field(s.field),l=c0(s.transform,r||null);l!=null&&(t===null&&(t=pn.empty()),t.set(s.field,l))}return t||null}function pT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Qr(s,r,((l,c)=>dw(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class kl extends rf{constructor(e,t,s,r=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class eo extends rf{constructor(e,t,s,r,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function p0(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function gT(n,e,t){const s=new Map;$e(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const l=n[r],c=l.transform,m=e.data.field(l.field);s.set(l.field,fw(c,m,t[r]))}return s}function yT(n,e,t){const s=new Map;for(const r of n){const l=r.transform,c=t.data.field(r.field);s.set(r.field,cw(l,c,e))}return s}class g0 extends rf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gw extends rf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,t,s,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&mw(l,e,s[r])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Cl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Cl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=l0();return this.mutations.forEach((r=>{const l=e.get(r.key),c=l.overlayedDocument;let m=this.applyToLocalView(c,l.mutatedFields);m=t.has(r.key)?null:m;const y=m0(c,m);y!==null&&s.set(r.key,y),c.isValidDocument()||c.convertToNoDocument(Ie.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Oe())}isEqual(e){return this.batchId===e.batchId&&Qr(this.mutations,e.mutations,((t,s)=>pT(t,s)))&&Qr(this.baseMutations,e.baseMutations,((t,s)=>pT(t,s)))}}class Am{constructor(e,t,s,r){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=r}static from(e,t,s){$e(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return ow})();const l=e.mutations;for(let c=0;c<l.length;c++)r=r.insert(l[c].key,s[c].version);return new Am(e,t,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,Fe;function vw(n){switch(n){case ne.OK:return Ce(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Ce(15467,{code:n})}}function y0(n){if(n===void 0)return ns("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Dt.OK:return ne.OK;case Dt.CANCELLED:return ne.CANCELLED;case Dt.UNKNOWN:return ne.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return ne.INTERNAL;case Dt.UNAVAILABLE:return ne.UNAVAILABLE;case Dt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Dt.NOT_FOUND:return ne.NOT_FOUND;case Dt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Dt.ABORTED:return ne.ABORTED;case Dt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Dt.DATA_LOSS:return ne.DATA_LOSS;default:return Ce(39323,{code:n})}}(Fe=Dt||(Dt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=new Ys([4294967295,4294967295],0);function _T(n){const e=Ew().encode(n),t=new DE;return t.update(e),new Uint8Array(t.digest())}function TT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ys([t,s],0),new Ys([r,l],0)]}class Cm{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new _l(`Invalid padding: ${t}`);if(s<0)throw new _l(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new _l(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new _l(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ys.fromNumber(this.ge)}ye(e,t,s){let r=e.add(t.multiply(Ys.fromNumber(s)));return r.compare(Sw)===1&&(r=new Ys([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=_T(e),[s,r]=TT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,r,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Cm(l,r,t);return s.forEach((m=>c.insert(m))),c}insert(e){if(this.ge===0)return;const t=_T(e),[s,r]=TT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,r,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class _l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,t,s,r,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const r=new Map;return r.set(e,ql.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new af(Ie.min(),r,new ht(qe),ss(),Oe())}}class ql{constructor(e,t,s,r,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new ql(s,t,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,t,s,r){this.be=e,this.removedTargetIds=t,this.key=s,this.De=r}}class _0{constructor(e,t){this.targetId=e,this.Ce=t}}class T0{constructor(e,t,s=$t.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=r}}class vT{constructor(){this.ve=0,this.Fe=ET(),this.Me=$t.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),t=Oe(),s=Oe();return this.Fe.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:s=s.add(r);break;default:Ce(38017,{changeType:l})}})),new ql(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=ET()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Aw{constructor(e){this.Ge=e,this.ze=new Map,this.je=ss(),this.Je=Ec(),this.He=Ec(),this.Ye=new ht(qe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,s=e.Ce.count,r=this.ot(t);if(r){const l=r.target;if(Fh(l))if(s===0){const c=new Ee(l.path);this.et(t,c,en.newNoDocument(c,Ie.min()))}else $e(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const m=this.ut(e),y=m?this.ct(m,e,c):1;if(y!==0){this.it(t);const p=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:l=0}=t;let c,m;try{c=Xs(s).toUint8Array()}catch(y){if(y instanceof HE)return Kr("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Cm(c,r,l)}catch(y){return Kr(y instanceof _l?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.ge===0?null:m}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let r=0;return s.forEach((l=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const m=this.ot(c);if(m){if(l.current&&Fh(m.target)){const y=new Ee(m.target.path);this.It(y).has(c)||this.Et(c,y)||this.et(c,y,en.newNoDocument(y,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=Oe();this.He.forEach(((l,c)=>{let m=!0;c.forEachWhile((y=>{const p=this.ot(y);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const r=new af(e,t,this.Ye,this.je,s);return this.je=ss(),this.Je=Ec(),this.He=Ec(),this.Ye=new ht(qe),r}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new vT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new kt(qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new kt(qe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new vT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ec(){return new ht(Ee.comparator)}function ET(){return new ht(Ee.comparator)}const Cw={asc:"ASCENDING",desc:"DESCENDING"},Rw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Iw={and:"AND",or:"OR"};class ww{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yh(n,e){return n.useProto3Json||ef(e)?e:{value:e}}function Hc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function v0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Nw(n,e){return Hc(n,e.toTimestamp())}function Mi(n){return $e(!!n,49232),Ie.fromTimestamp((function(t){const s=Qs(t);return new ut(s.seconds,s.nanos)})(n))}function Rm(n,e){return Jh(n,e).canonicalString()}function Jh(n,e){const t=(function(r){return new ot(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function E0(n){const e=ot.fromString(n);return $e(I0(e),10190,{key:e.toString()}),e}function Kh(n,e){return Rm(n.databaseId,e.path)}function Nh(n,e){const t=E0(e);if(t.get(1)!==n.databaseId.projectId)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(A0(t))}function S0(n,e){return Rm(n.databaseId,e)}function Mw(n){const e=E0(n);return e.length===4?ot.emptyPath():A0(e)}function Qh(n){return new ot(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function A0(n){return $e(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ST(n,e,t){return{name:Kh(n,e),fields:t.value.mapValue.fields}}function xw(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ce(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(p,T){return p.useProto3Json?($e(T===void 0||typeof T=="string",58123),$t.fromBase64String(T||"")):($e(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),$t.fromUint8Array(T||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&(function(p){const T=p.code===void 0?ne.UNKNOWN:y0(p.code);return new me(T,p.message||"")})(c);t=new T0(s,r,l,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Nh(n,s.document.name),l=Mi(s.document.updateTime),c=s.document.createTime?Mi(s.document.createTime):Ie.min(),m=new pn({mapValue:{fields:s.document.fields}}),y=en.newFoundDocument(r,l,c,m),p=s.targetIds||[],T=s.removedTargetIds||[];t=new Nc(p,T,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Nh(n,s.document),l=s.readTime?Mi(s.readTime):Ie.min(),c=en.newNoDocument(r,l),m=s.removedTargetIds||[];t=new Nc([],m,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Nh(n,s.document),l=s.removedTargetIds||[];t=new Nc([],l,r,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:l}=s,c=new Tw(r,l),m=s.targetId;t=new _0(m,c)}}return t}function Dw(n,e){let t;if(e instanceof kl)t={update:ST(n,e.key,e.value)};else if(e instanceof g0)t={delete:Kh(n,e.key)};else if(e instanceof eo)t={update:ST(n,e.key,e.data),updateMask:Gw(e.fieldMask)};else{if(!(e instanceof gw))return Ce(16599,{Vt:e.type});t={verify:Kh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const m=c.transform;if(m instanceof Bc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof bl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Vl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Fc)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw Ce(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:Nw(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ce(27497)})(n,e.precondition)),t}function bw(n,e){return n&&n.length>0?($e(e!==void 0,14353),n.map((t=>(function(r,l){let c=r.updateTime?Mi(r.updateTime):Mi(l);return c.isEqual(Ie.min())&&(c=Mi(l)),new hw(c,r.transformResults||[])})(t,e)))):[]}function Vw(n,e){return{documents:[S0(n,e.path)]}}function Pw(n,e){const t={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=S0(n,r);const l=(function(p){if(p.length!==0)return R0(ni.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((T=>(function(S){return{field:kr(S.field),direction:kw(S.dir)}})(T)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const m=Yh(n,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:r}}function Uw(n){let e=Mw(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let r=null;if(s>0){$e(s===1,65062);const T=t.from[0];T.allDescendants?r=T.collectionId:e=e.child(T.collectionId)}let l=[];t.where&&(l=(function(E){const S=C0(E);return S instanceof ni&&jE(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((S=>(function(G){return new Gc(qr(G.field),(function(K){switch(K){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(G.direction))})(S)))})(t.orderBy));let m=null;t.limit&&(m=(function(E){let S;return S=typeof E=="object"?E.value:E,ef(S)?null:S})(t.limit));let y=null;t.startAt&&(y=(function(E){const S=!!E.before,w=E.values||[];return new Oc(w,S)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const S=!E.before,w=E.values||[];return new Oc(w,S)})(t.endAt)),ew(e,r,c,l,m,"F",y,p)}function Lw(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function C0(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=qr(t.unaryFilter.field);return bt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=qr(t.unaryFilter.field);return bt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=qr(t.unaryFilter.field);return bt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=qr(t.unaryFilter.field);return bt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(n):n.fieldFilter!==void 0?(function(t){return bt.create(qr(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ni.create(t.compositeFilter.filters.map((s=>C0(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(t.compositeFilter.op))})(n):Ce(30097,{filter:n})}function kw(n){return Cw[n]}function qw(n){return Rw[n]}function Ow(n){return Iw[n]}function kr(n){return{fieldPath:n.canonicalString()}}function qr(n){return Xt.fromServerFormat(n.fieldPath)}function R0(n){return n instanceof bt?(function(t){if(t.op==="=="){if(uT(t.value))return{unaryFilter:{field:kr(t.field),op:"IS_NAN"}};if(lT(t.value))return{unaryFilter:{field:kr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(uT(t.value))return{unaryFilter:{field:kr(t.field),op:"IS_NOT_NAN"}};if(lT(t.value))return{unaryFilter:{field:kr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kr(t.field),op:qw(t.op),value:t.value}}})(n):n instanceof ni?(function(t){const s=t.getFilters().map((r=>R0(r)));return s.length===1?s[0]:{compositeFilter:{op:Ow(t.op),filters:s}}})(n):Ce(54877,{filter:n})}function Gw(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function I0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,t,s,r,l=Ie.min(),c=Ie.min(),m=$t.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new Bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e){this.yt=e}}function Fw(n){const e=Uw({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?zh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.Cn=new zw}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Ks.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Ks.min())}updateCollectionGroup(e,t,s){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class zw{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t]||new kt(ot.comparator),l=!r.has(s);return this.index[t]=r.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t];return r&&r.has(s)}getEntries(e){return(this.index[e]||new kt(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},w0=41943040;class mn{static withCacheSize(e){return new mn(e,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mn.DEFAULT_COLLECTION_PERCENTILE=10,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mn.DEFAULT=new mn(w0,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mn.DISABLED=new mn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Zr(0)}static cr(){return new Zr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="LruGarbageCollector",Yw=1048576;function RT([n,e],[t,s]){const r=qe(n,t);return r===0?qe(e,s):r}class Jw{constructor(e){this.Ir=e,this.buffer=new kt(RT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();RT(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Kw{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(CT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){na(t)?ge(CT,"Ignoring IndexedDB error during garbage collection: ",t):await ta(t)}await this.Vr(3e5)}))}}class Qw{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(jc.ce);const s=new Jw(t);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(AT)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),AT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,r,l,c,m,y,p;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),r=this.params.maximumSequenceNumbersToCollect):r=E,c=Date.now(),this.nthSequenceNumber(e,r)))).next((E=>(s=E,m=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,y=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(p=Date.now(),Ur()<=He.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-T}ms
	Determined least recently used ${r} in `+(m-c)+`ms
	Removed ${l} targets in `+(y-m)+`ms
	Removed ${E} documents in `+(p-y)+`ms
Total Duration: ${p-T}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:E}))))}}function Xw(n,e){return new Qw(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(){this.changes=new Fo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?se.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,t,s,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(s!==null&&Cl(s.mutation,r,Rn.empty(),ut.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Oe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Oe()){const r=ko();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,s).next((l=>{let c=yl();return l.forEach(((m,y)=>{c=c.insert(m,y.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=ko();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Oe())))}populateOverlays(e,t,s){const r=[];return s.forEach((l=>{t.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((c,m)=>{t.set(c,m)}))}))}computeViews(e,t,s,r){let l=ss();const c=Al(),m=(function(){return Al()})();return t.forEach(((y,p)=>{const T=s.get(p.key);r.has(p.key)&&(T===void 0||T.mutation instanceof eo)?l=l.insert(p.key,p):T!==void 0?(c.set(p.key,T.mutation.getFieldMask()),Cl(T.mutation,p,T.mutation.getFieldMask(),ut.now())):c.set(p.key,Rn.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((p,T)=>c.set(p,T))),t.forEach(((p,T)=>m.set(p,new Zw(T,c.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,t){const s=Al();let r=new ht(((c,m)=>c-m)),l=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const m of c)m.keys().forEach((y=>{const p=t.get(y);if(p===null)return;let T=s.get(y)||Rn.empty();T=m.applyToLocalView(p,T),s.set(y,T);const E=(r.get(m.batchId)||Oe()).add(y);r=r.insert(m.batchId,E)}))})).next((()=>{const c=[],m=r.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),p=y.key,T=y.value,E=l0();T.forEach((S=>{if(!l.has(S)){const w=m0(t.get(S),s.get(S));w!==null&&E.set(S,w),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,E))}return se.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,r){return(function(c){return Ee.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):i0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,r):this.getDocumentsMatchingCollectionQuery(e,t,s,r)}getNextDocuments(e,t,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,r).next((l=>{const c=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,r-l.size):se.resolve(ko());let m=Nl,y=l;return c.next((p=>se.forEach(p,((T,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),l.get(T)?se.resolve():this.remoteDocumentCache.getEntry(e,T).next((S=>{y=y.insert(T,S)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,y,p,Oe()))).next((T=>({batchId:m,changes:a0(T)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((s=>{let r=yl();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,r){const l=t.collectionGroup;let c=yl();return this.indexManager.getCollectionParents(e,l).next((m=>se.forEach(m,(y=>{const p=(function(E,S){return new Ll(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,s,r).next((T=>{T.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,r)))).next((c=>{l.forEach(((y,p)=>{const T=p.getKey();c.get(T)===null&&(c=c.insert(T,en.newInvalidDocument(T)))}));let m=yl();return c.forEach(((y,p)=>{const T=l.get(y);T!==void 0&&Cl(T.mutation,p,Rn.empty(),ut.now()),sf(t,p)&&(m=m.insert(y,p))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Mi(r.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:Fw(r.bundledQuery),readTime:Mi(r.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this.overlays=new ht(Ee.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ko();return se.forEach(t,(r=>this.getOverlay(e,r).next((l=>{l!==null&&s.set(r,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((r,l)=>{this.St(e,t,l)})),se.resolve()}removeOverlaysForBatchId(e,t,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),se.resolve()}getOverlaysForCollection(e,t,s){const r=ko(),l=t.length+1,c=new Ee(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const y=m.getNext().value,p=y.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&y.largestBatchId>s&&r.set(y.getKey(),y)}return se.resolve(r)}getOverlaysForCollectionGroup(e,t,s,r){let l=new ht(((p,T)=>p-T));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let T=l.get(p.largestBatchId);T===null&&(T=ko(),l=l.insert(p.largestBatchId,T)),T.set(p.getKey(),p)}}const m=ko(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((p,T)=>m.set(p,T))),!(m.size()>=r)););return se.resolve(m)}St(e,t,s){const r=this.overlays.get(s.key);if(r!==null){const c=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new _w(t,s));let l=this.qr.get(t);l===void 0&&(l=Oe(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(){this.Qr=new kt(Bt.$r),this.Ur=new kt(Bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Bt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Bt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ee(new ot([])),s=new Bt(t,e),r=new Bt(t,e+1),l=[];return this.Ur.forEachInRange([s,r],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ee(new ot([])),s=new Bt(t,e),r=new Bt(t,e+1);let l=Oe();return this.Ur.forEachInRange([s,r],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Bt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Bt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ee.comparator(e.key,t.key)||qe(e.Yr,t.Yr)}static Kr(e,t){return qe(e.Yr,t.Yr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new kt(Bt.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,r){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new yw(l,t,s,r);this.mutationQueue.push(c);for(const m of r)this.Zr=this.Zr.add(new Bt(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return se.resolve(c)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,r=this.ei(s),l=r<0?0:r;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?gm:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Bt(t,0),r=new Bt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,r],(c=>{const m=this.Xr(c.Yr);l.push(m)})),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new kt(qe);return t.forEach((r=>{const l=new Bt(r,0),c=new Bt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(m=>{s=s.add(m.Yr)}))})),se.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,r=s.length+1;let l=s;Ee.isDocumentKey(l)||(l=l.child(""));const c=new Bt(new Ee(l),0);let m=new kt(qe);return this.Zr.forEachWhile((y=>{const p=y.key.path;return!!s.isPrefixOf(p)&&(p.length===r&&(m=m.add(y.Yr)),!0)}),c),se.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){$e(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return se.forEach(t.mutations,(r=>{const l=new Bt(r.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Bt(t,0),r=this.Zr.firstAfterOrEqual(s);return se.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e){this.ri=e,this.docs=(function(){return new ht(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,r=this.docs.get(s),l=r?r.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return se.resolve(s?s.document.mutableCopy():en.newInvalidDocument(t))}getEntries(e,t){let s=ss();return t.forEach((r=>{const l=this.docs.get(r);s=s.insert(r,l?l.document.mutableCopy():en.newInvalidDocument(r))})),se.resolve(s)}getDocumentsMatchingQuery(e,t,s,r){let l=ss();const c=t.path,m=new Ee(c.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:p,value:{document:T}}=y.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||bI(DI(T),s)<=0||(r.has(T.key)||sf(t,T))&&(l=l.insert(T.key,T.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,t,s,r){Ce(9500)}ii(e,t){return se.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new sN(this)}getSize(e){return se.resolve(this.size)}}class sN extends $w{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.persistence=e,this.si=new Fo((t=>Tm(t)),vm),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.oi=0,this._i=new Im,this.targetCount=0,this.ai=Zr.ur()}forEachTarget(e,t){return this.si.forEach(((s,r)=>t(r))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Zr(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,s){let r=0;const l=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),r++)})),se.waitFor(l).next((()=>r))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return se.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),se.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const r=this.persistence.referenceDelegate,l=[];return r&&t.forEach((c=>{l.push(r.markPotentiallyOrphaned(e,c))})),se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return se.resolve(s)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,t){this.ui={},this.overlays={},this.ci=new jc(0),this.li=!1,this.li=!0,this.hi=new tN,this.referenceDelegate=e(this),this.Pi=new oN(this),this.indexManager=new Hw,this.remoteDocumentCache=(function(r){return new iN(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new Bw(t),this.Ii=new jw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new nN(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ge("MemoryPersistence","Starting transaction:",e);const r=new rN(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((l=>this.referenceDelegate.di(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Ai(e,t){return se.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class rN extends PI{constructor(e){super(),this.currentSequenceNumber=e}}class wm{constructor(e){this.persistence=e,this.Ri=new Im,this.Vi=null}static mi(e){return new wm(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),se.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(s=>{const r=Ee.fromPath(s);return this.gi(e,r).next((l=>{l||t.removeEntry(r,Ie.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class zc{constructor(e,t){this.persistence=e,this.pi=new Fo((s=>kI(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=Xw(this,t)}static mi(e,t){return new zc(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((r=>s+r))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return se.forEach(this.pi,((s,r)=>this.br(e,s,r).next((l=>l?se.resolve():t(r)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.ii(e,(c=>this.br(e,c,t).next((m=>{m||(s++,l.removeEntry(c,Ie.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),se.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Rc(e.data.value)),t}br(e,t,s){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return se.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,t,s,r){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=r}static As(e,t){let s=Oe(),r=Oe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new Nm(e,t.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return tR()?8:UI(jC())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,r){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,r,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new aN;return this.Ss(e,t,c).next((m=>{if(l.result=m,this.Vs)return this.bs(e,t,c,m.size)}))})).next((()=>l.result))}bs(e,t,s,r){return s.documentReadCount<this.fs?(Ur()<=He.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Lr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(Ur()<=He.DEBUG&&ge("QueryEngine","Query:",Lr(t),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Ur()<=He.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Lr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wi(t))):se.resolve())}ys(e,t){if(hT(t))return se.resolve(null);let s=wi(t);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=zh(t,null,"F"),s=wi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=Oe(...l);return this.ps.getDocuments(e,c).next((m=>this.indexManager.getMinOffset(e,s).next((y=>{const p=this.Ds(t,m);return this.Cs(t,p,c,y.readTime)?this.ys(e,zh(t,null,"F")):this.vs(e,p,t,y)}))))})))))}ws(e,t,s,r){return hT(t)||r.isEqual(Ie.min())?se.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,r)?se.resolve(null):(Ur()<=He.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Lr(t)),this.vs(e,c,t,xI(r,Nl)).next((m=>m)))}))}Ds(e,t){let s=new kt(o0(e));return t.forEach(((r,l)=>{sf(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,r){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Ss(e,t,s){return Ur()<=He.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Lr(t)),this.ps.getDocumentsMatchingQuery(e,t,Ks.min(),s)}vs(e,t,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="LocalStore",uN=3e8;class cN{constructor(e,t,s,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new ht(qe),this.xs=new Fo((l=>Tm(l)),vm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ww(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function fN(n,e,t,s){return new cN(n,e,t,s)}async function M0(n,e){const t=Ne(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return t.mutationQueue.getAllMutationBatches(s).next((l=>(r=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],m=[];let y=Oe();for(const p of r){c.push(p.batchId);for(const T of p.mutations)y=y.add(T.key)}for(const p of l){m.push(p.batchId);for(const T of p.mutations)y=y.add(T.key)}return t.localDocuments.getDocuments(s,y).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:m})))}))}))}function dN(n,e){const t=Ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,y,p,T){const E=p.batch,S=E.keys();let w=se.resolve();return S.forEach((G=>{w=w.next((()=>T.getEntry(y,G))).next((B=>{const K=p.docVersions.get(G);$e(K!==null,48541),B.version.compareTo(K)<0&&(E.applyToRemoteDocument(B,p),B.isValidDocument()&&(B.setReadTime(p.commitVersion),T.addEntry(B)))}))})),w.next((()=>m.mutationQueue.removeMutationBatch(y,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let y=Oe();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(y=y.add(m.batch.mutations[p].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(s,r)))}))}function x0(n){const e=Ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function hN(n,e){const t=Ne(n),s=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const m=[];e.targetChanges.forEach(((T,E)=>{const S=r.get(E);if(!S)return;m.push(t.Pi.removeMatchingKeys(l,T.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,T.addedDocuments,E))));let w=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken($t.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):T.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(T.resumeToken,s)),r=r.insert(E,w),(function(B,K,W){return B.resumeToken.approximateByteSize()===0||K.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=uN?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(S,w,T)&&m.push(t.Pi.updateTargetData(l,w))}));let y=ss(),p=Oe();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,T))})),m.push(mN(l,c,e.documentUpdates).next((T=>{y=T.ks,p=T.qs}))),!s.isEqual(Ie.min())){const T=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));m.push(T)}return se.waitFor(m).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,y,p))).next((()=>y))})).then((l=>(t.Ms=r,l)))}function mN(n,e,t){let s=Oe(),r=Oe();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=ss();return t.forEach(((m,y)=>{const p=l.get(m);y.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(m)),y.isNoDocument()&&y.version.isEqual(Ie.min())?(e.removeEntry(m,y.readTime),c=c.insert(m,y)):!p.isValidDocument()||y.version.compareTo(p.version)>0||y.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(y),c=c.insert(m,y)):ge(Mm,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",y.version)})),{ks:c,qs:r}}))}function pN(n,e){const t=Ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=gm),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function gN(n,e){const t=Ne(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return t.Pi.getTargetData(s,e).next((l=>l?(r=l,se.resolve(r)):t.Pi.allocateTargetId(s).next((c=>(r=new Bs(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=t.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Xh(n,e,t){const s=Ne(n),r=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!na(c))throw c;ge(Mm,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function IT(n,e,t){const s=Ne(n);let r=Ie.min(),l=Oe();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(y,p,T){const E=Ne(y),S=E.xs.get(T);return S!==void 0?se.resolve(E.Ms.get(S)):E.Pi.getTargetData(p,T)})(s,c,wi(e)).next((m=>{if(m)return r=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,m.targetId).next((y=>{l=y}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?r:Ie.min(),t?l:Oe()))).next((m=>(yN(s,nw(e),m),{documents:m,Qs:l})))))}function yN(n,e,t){let s=n.Os.get(e)||Ie.min();t.forEach(((r,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class wT{constructor(){this.activeTargetIds=lw()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _N{constructor(){this.Mo=new wT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wT,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="ConnectivityMonitor";class MT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(NT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(NT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sc=null;function $h(){return Sc===null?Sc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Sc++,"0x"+Sc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh="RestConnection",vN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class EN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===kc?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,t,s,r,l){const c=$h(),m=this.zo(e,t.toUriEncodedString());ge(Mh,`Sending RPC '${e}' ${c}:`,m,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,r,l);const{host:p}=new URL(m),T=dm(p);return this.Jo(e,m,y,s,T).then((E=>(ge(Mh,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Kr(Mh,`RPC '${e}' ${c} failed with error: `,E,"url: ",m,"request:",s),E}))}Ho(e,t,s,r,l,c){return this.Go(e,t,s,r,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ea})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,l)=>e[l]=r)),s&&s.headers.forEach(((r,l)=>e[l]=r))}zo(e,t){const s=vN[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class AN extends EN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,r,l){const c=$h();return new Promise(((m,y)=>{const p=new bE;p.setWithCredentials(!0),p.listenOnce(VE.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Cc.NO_ERROR:const E=p.getResponseJson();ge(Wt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),m(E);break;case Cc.TIMEOUT:ge(Wt,`RPC '${e}' ${c} timed out`),y(new me(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Cc.HTTP_ERROR:const S=p.getStatus();if(ge(Wt,`RPC '${e}' ${c} failed with status:`,S,"response text:",p.getResponseText()),S>0){let w=p.getResponseJson();Array.isArray(w)&&(w=w[0]);const G=w==null?void 0:w.error;if(G&&G.status&&G.message){const B=(function(W){const ie=W.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(ie)>=0?ie:ne.UNKNOWN})(G.status);y(new me(B,G.message))}else y(new me(ne.UNKNOWN,"Server responded with status "+p.getStatus()))}else y(new me(ne.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ge(Wt,`RPC '${e}' ${c} completed.`)}}));const T=JSON.stringify(r);ge(Wt,`RPC '${e}' ${c} sending request:`,r),p.send(t,"POST",T,s,15)}))}T_(e,t,s){const r=$h(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=LE(),m=UE(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(y.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,t,s),y.encodeInitMessageHeaders=!0;const T=l.join("");ge(Wt,`Creating RPC '${e}' stream ${r}: ${T}`,y);const E=c.createWebChannel(T,y);this.I_(E);let S=!1,w=!1;const G=new SN({Yo:K=>{w?ge(Wt,`Not sending because RPC '${e}' stream ${r} is closed:`,K):(S||(ge(Wt,`Opening RPC '${e}' stream ${r} transport.`),E.open(),S=!0),ge(Wt,`RPC '${e}' stream ${r} sending:`,K),E.send(K))},Zo:()=>E.close()}),B=(K,W,ie)=>{K.listen(W,(j=>{try{ie(j)}catch(ue){setTimeout((()=>{throw ue}),0)}}))};return B(E,gl.EventType.OPEN,(()=>{w||(ge(Wt,`RPC '${e}' stream ${r} transport opened.`),G.o_())})),B(E,gl.EventType.CLOSE,(()=>{w||(w=!0,ge(Wt,`RPC '${e}' stream ${r} transport closed`),G.a_(),this.E_(E))})),B(E,gl.EventType.ERROR,(K=>{w||(w=!0,Kr(Wt,`RPC '${e}' stream ${r} transport errored. Name:`,K.name,"Message:",K.message),G.a_(new me(ne.UNAVAILABLE,"The operation could not be completed")))})),B(E,gl.EventType.MESSAGE,(K=>{var W;if(!w){const ie=K.data[0];$e(!!ie,16349);const j=ie,ue=(j==null?void 0:j.error)||((W=j[0])==null?void 0:W.error);if(ue){ge(Wt,`RPC '${e}' stream ${r} received error:`,ue);const he=ue.status;let fe=(function(N){const U=Dt[N];if(U!==void 0)return y0(U)})(he),x=ue.message;fe===void 0&&(fe=ne.INTERNAL,x="Unknown error status: "+he+" with message "+ue.message),w=!0,G.a_(new me(fe,x)),E.close()}else ge(Wt,`RPC '${e}' stream ${r} received:`,ie),G.u_(ie)}})),B(m,PE.STAT_EVENT,(K=>{K.stat===kh.PROXY?ge(Wt,`RPC '${e}' stream ${r} detected buffering proxy`):K.stat===kh.NOPROXY&&ge(Wt,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{G.__()}),0),G}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function xh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(n){return new ww(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e,t,s=1e3,r=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=r,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-s);r>0&&ge("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="PersistentStream";class b0{constructor(e,t,s,r,l,c,m,y){this.Mi=e,this.S_=s,this.b_=r,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new D0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(ns(t.toString()),ns("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===t&&this.G_(s,r)}),(s=>{e((()=>{const r=new me(ne.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(xT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ge(xT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class CN extends b0{constructor(e,t,s,r,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,r,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=xw(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Ie.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ie.min():c.readTime?Mi(c.readTime):Ie.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Qh(this.serializer),t.addTarget=(function(l,c){let m;const y=c.target;if(m=Fh(y)?{documents:Vw(l,y)}:{query:Pw(l,y).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=v0(l,c.resumeToken);const p=Yh(l,c.expectedCount);p!==null&&(m.expectedCount=p)}else if(c.snapshotVersion.compareTo(Ie.min())>0){m.readTime=Hc(l,c.snapshotVersion.toTimestamp());const p=Yh(l,c.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const s=Lw(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Qh(this.serializer),t.removeTarget=e,this.q_(t)}}class RN extends b0{constructor(e,t,s,r,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,r,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=bw(e.writeResults,e.commitTime),s=Mi(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Qh(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>Dw(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{}class wN extends IN{constructor(e,t,s,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Jh(t,s),r,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new me(ne.UNKNOWN,l.toString())}))}Ho(e,t,s,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(e,Jh(t,s),r,c,m,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new me(ne.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class NN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ns(t),this.aa=!1):ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="RemoteStore";class MN{constructor(e,t,s,r,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Ho(this)&&(ge(Go,"Restarting streams for network reachability change."),await(async function(y){const p=Ne(y);p.Ea.add(4),await Ol(p),p.Ra.set("Unknown"),p.Ea.delete(4),await uf(p)})(this))}))})),this.Ra=new NN(s,r)}}async function uf(n){if(Ho(n))for(const e of n.da)await e(!0)}async function Ol(n){for(const e of n.da)await e(!1)}function V0(n,e){const t=Ne(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Vm(t)?bm(t):ia(t).O_()&&Dm(t,e))}function xm(n,e){const t=Ne(n),s=ia(t);t.Ia.delete(e),s.O_()&&P0(t,e),t.Ia.size===0&&(s.O_()?s.L_():Ho(t)&&t.Ra.set("Unknown"))}function Dm(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ia(n).Y_(e)}function P0(n,e){n.Va.Ue(e),ia(n).Z_(e)}function bm(n){n.Va=new Aw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ia(n).start(),n.Ra.ua()}function Vm(n){return Ho(n)&&!ia(n).x_()&&n.Ia.size>0}function Ho(n){return Ne(n).Ea.size===0}function U0(n){n.Va=void 0}async function xN(n){n.Ra.set("Online")}async function DN(n){n.Ia.forEach(((e,t)=>{Dm(n,e)}))}async function bN(n,e){U0(n),Vm(n)?(n.Ra.ha(e),bm(n)):n.Ra.set("Unknown")}async function VN(n,e,t){if(n.Ra.set("Online"),e instanceof T0&&e.state===2&&e.cause)try{await(async function(r,l){const c=l.cause;for(const m of l.targetIds)r.Ia.has(m)&&(await r.remoteSyncer.rejectListen(m,c),r.Ia.delete(m),r.Va.removeTarget(m))})(n,e)}catch(s){ge(Go,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Yc(n,s)}else if(e instanceof Nc?n.Va.Ze(e):e instanceof _0?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ie.min()))try{const s=await x0(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const m=l.Va.Tt(c);return m.targetChanges.forEach(((y,p)=>{if(y.resumeToken.approximateByteSize()>0){const T=l.Ia.get(p);T&&l.Ia.set(p,T.withResumeToken(y.resumeToken,c))}})),m.targetMismatches.forEach(((y,p)=>{const T=l.Ia.get(y);if(!T)return;l.Ia.set(y,T.withResumeToken($t.EMPTY_BYTE_STRING,T.snapshotVersion)),P0(l,y);const E=new Bs(T.target,y,p,T.sequenceNumber);Dm(l,E)})),l.remoteSyncer.applyRemoteEvent(m)})(n,t)}catch(s){ge(Go,"Failed to raise snapshot:",s),await Yc(n,s)}}async function Yc(n,e,t){if(!na(e))throw e;n.Ea.add(1),await Ol(n),n.Ra.set("Offline"),t||(t=()=>x0(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ge(Go,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await uf(n)}))}function L0(n,e){return e().catch((t=>Yc(n,t,e)))}async function cf(n){const e=Ne(n),t=Zs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:gm;for(;PN(e);)try{const r=await pN(e.localStore,s);if(r===null){e.Ta.length===0&&t.L_();break}s=r.batchId,UN(e,r)}catch(r){await Yc(e,r)}k0(e)&&q0(e)}function PN(n){return Ho(n)&&n.Ta.length<10}function UN(n,e){n.Ta.push(e);const t=Zs(n);t.O_()&&t.X_&&t.ea(e.mutations)}function k0(n){return Ho(n)&&!Zs(n).x_()&&n.Ta.length>0}function q0(n){Zs(n).start()}async function LN(n){Zs(n).ra()}async function kN(n){const e=Zs(n);for(const t of n.Ta)e.ea(t.mutations)}async function qN(n,e,t){const s=n.Ta.shift(),r=Am.from(s,e,t);await L0(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await cf(n)}async function ON(n,e){e&&Zs(n).X_&&await(async function(s,r){if((function(c){return vw(c)&&c!==ne.ABORTED})(r.code)){const l=s.Ta.shift();Zs(s).B_(),await L0(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,r))),await cf(s)}})(n,e),k0(n)&&q0(n)}async function DT(n,e){const t=Ne(n);t.asyncQueue.verifyOperationInProgress(),ge(Go,"RemoteStore received new credentials");const s=Ho(t);t.Ea.add(3),await Ol(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await uf(t)}async function GN(n,e){const t=Ne(n);e?(t.Ea.delete(2),await uf(t)):e||(t.Ea.add(2),await Ol(t),t.Ra.set("Unknown"))}function ia(n){return n.ma||(n.ma=(function(t,s,r){const l=Ne(t);return l.sa(),new CN(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:xN.bind(null,n),t_:DN.bind(null,n),r_:bN.bind(null,n),H_:VN.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Vm(n)?bm(n):n.Ra.set("Unknown")):(await n.ma.stop(),U0(n))}))),n.ma}function Zs(n){return n.fa||(n.fa=(function(t,s,r){const l=Ne(t);return l.sa(),new RN(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:LN.bind(null,n),r_:ON.bind(null,n),ta:kN.bind(null,n),na:qN.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await cf(n)):(await n.fa.stop(),n.Ta.length>0&&(ge(Go,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,t,s,r,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=r,this.removalCallback=l,this.deferred=new ji,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,r,l){const c=Date.now()+s,m=new Pm(e,t,c,r,l);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Um(n,e){if(ns("AsyncQueue",`${e}: ${n}`),na(n))return new me(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{static emptySet(e){return new Br(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ee.comparator(t.key,s.key):(t,s)=>Ee.comparator(t.key,s.key),this.keyedMap=yl(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Br)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=s.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Br;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(){this.ga=new ht(Ee.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Wr{constructor(e,t,s,r,l,c,m,y,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,r,l){const c=[];return t.forEach((m=>{c.push({type:0,doc:m})})),new Wr(e,t,Br.emptySet(t),c,s,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==s[r].type||!t[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class FN{constructor(){this.queries=VT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const r=Ne(t),l=r.queries;r.queries=VT(),l.forEach(((c,m)=>{for(const y of m.Sa)y.onError(s)}))})(this,new me(ne.ABORTED,"Firestore shutting down"))}}function VT(){return new Fo((n=>s0(n)),nf)}async function O0(n,e){const t=Ne(n);let s=3;const r=e.query;let l=t.queries.get(r);l?!l.ba()&&e.Da()&&(s=2):(l=new BN,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(r,!0);break;case 1:l.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(c){const m=Um(c,`Initialization of query '${Lr(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Lm(t)}async function G0(n,e){const t=Ne(n),s=e.query;let r=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?r=e.Da()?0:1:!l.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function HN(n,e){const t=Ne(n);let s=!1;for(const r of e){const l=r.query,c=t.queries.get(l);if(c){for(const m of c.Sa)m.Fa(r)&&(s=!0);c.wa=r}}s&&Lm(t)}function zN(n,e,t){const s=Ne(n),r=s.queries.get(e);if(r)for(const l of r.Sa)l.onError(t);s.queries.delete(e)}function Lm(n){n.Ca.forEach((e=>{e.next()}))}var Zh,PT;(PT=Zh||(Zh={})).Ma="default",PT.Cache="cache";class B0{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Wr(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Wr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Zh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e){this.key=e}}class H0{constructor(e){this.key=e}}class YN{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Oe(),this.mutatedKeys=Oe(),this.eu=o0(e),this.tu=new Br(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new bT,r=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=r,m=!1;const y=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((T,E)=>{const S=r.get(T),w=sf(this.query,E)?E:null,G=!!S&&this.mutatedKeys.has(S.key),B=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let K=!1;S&&w?S.data.isEqual(w.data)?G!==B&&(s.track({type:3,doc:w}),K=!0):this.su(S,w)||(s.track({type:2,doc:w}),K=!0,(y&&this.eu(w,y)>0||p&&this.eu(w,p)<0)&&(m=!0)):!S&&w?(s.track({type:0,doc:w}),K=!0):S&&!w&&(s.track({type:1,doc:S}),K=!0,(y||p)&&(m=!0)),K&&(w?(c=c.add(w),l=B?l.add(T):l.delete(T)):(c=c.delete(T),l=l.delete(T)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const T=this.query.limitType==="F"?c.last():c.first();c=c.delete(T.key),l=l.delete(T.key),s.track({type:1,doc:T})}return{tu:c,iu:s,Cs:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,r){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((T,E)=>(function(w,G){const B=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:K})}};return B(w)-B(G)})(T.type,E.type)||this.eu(T.doc,E.doc))),this.ou(s),r=r??!1;const m=t&&!r?this._u():[],y=this.Xa.size===0&&this.current&&!r?1:0,p=y!==this.Za;return this.Za=y,c.length!==0||p?{snapshot:new Wr(this.query,e.tu,l,c,e.mutatedKeys,y===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new bT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Oe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new H0(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new F0(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Oe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Wr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const km="SyncEngine";class JN{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class KN{constructor(e){this.key=e,this.hu=!1}}class QN{constructor(e,t,s,r,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Fo((m=>s0(m)),nf),this.Iu=new Map,this.Eu=new Set,this.du=new ht(Ee.comparator),this.Au=new Map,this.Ru=new Im,this.Vu={},this.mu=new Map,this.fu=Zr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function XN(n,e,t=!0){const s=X0(n);let r;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.lu()):r=await z0(s,e,t,!0),r}async function $N(n,e){const t=X0(n);await z0(t,e,!0,!1)}async function z0(n,e,t,s){const r=await gN(n.localStore,wi(e)),l=r.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let m;return s&&(m=await ZN(n,e,l,c==="current",r.resumeToken)),n.isPrimaryClient&&t&&V0(n.remoteStore,r),m}async function ZN(n,e,t,s,r){n.pu=(E,S,w)=>(async function(B,K,W,ie){let j=K.view.ru(W);j.Cs&&(j=await IT(B.localStore,K.query,!1).then((({documents:x})=>K.view.ru(x,j))));const ue=ie&&ie.targetChanges.get(K.targetId),he=ie&&ie.targetMismatches.get(K.targetId)!=null,fe=K.view.applyChanges(j,B.isPrimaryClient,ue,he);return LT(B,K.targetId,fe.au),fe.snapshot})(n,E,S,w);const l=await IT(n.localStore,e,!0),c=new YN(e,l.Qs),m=c.ru(l.documents),y=ql.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",r),p=c.applyChanges(m,n.isPrimaryClient,y);LT(n,t,p.au);const T=new JN(e,t,c);return n.Tu.set(e,T),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function WN(n,e,t){const s=Ne(n),r=s.Tu.get(e),l=s.Iu.get(r.targetId);if(l.length>1)return s.Iu.set(r.targetId,l.filter((c=>!nf(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Xh(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),t&&xm(s.remoteStore,r.targetId),Wh(s,r.targetId)})).catch(ta)):(Wh(s,r.targetId),await Xh(s.localStore,r.targetId,!0))}async function jN(n,e){const t=Ne(n),s=t.Tu.get(e),r=t.Iu.get(s.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),xm(t.remoteStore,s.targetId))}async function e1(n,e,t){const s=a1(n);try{const r=await(function(c,m){const y=Ne(c),p=ut.now(),T=m.reduce(((w,G)=>w.add(G.key)),Oe());let E,S;return y.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let G=ss(),B=Oe();return y.Ns.getEntries(w,T).next((K=>{G=K,G.forEach(((W,ie)=>{ie.isValidDocument()||(B=B.add(W))}))})).next((()=>y.localDocuments.getOverlayedDocuments(w,G))).next((K=>{E=K;const W=[];for(const ie of m){const j=pw(ie,E.get(ie.key).overlayedDocument);j!=null&&W.push(new eo(ie.key,j,$E(j.value.mapValue),Ni.exists(!0)))}return y.mutationQueue.addMutationBatch(w,p,W,m)})).next((K=>{S=K;const W=K.applyToLocalDocumentSet(E,B);return y.documentOverlayCache.saveOverlays(w,K.batchId,W)}))})).then((()=>({batchId:S.batchId,changes:a0(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(c,m,y){let p=c.Vu[c.currentUser.toKey()];p||(p=new ht(qe)),p=p.insert(m,y),c.Vu[c.currentUser.toKey()]=p})(s,r.batchId,t),await Gl(s,r.changes),await cf(s.remoteStore)}catch(r){const l=Um(r,"Failed to persist write");t.reject(l)}}async function Y0(n,e){const t=Ne(n);try{const s=await hN(t.localStore,e);e.targetChanges.forEach(((r,l)=>{const c=t.Au.get(l);c&&($e(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.hu=!0:r.modifiedDocuments.size>0?$e(c.hu,14607):r.removedDocuments.size>0&&($e(c.hu,42227),c.hu=!1))})),await Gl(t,s,e)}catch(s){await ta(s)}}function UT(n,e,t){const s=Ne(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const r=[];s.Tu.forEach(((l,c)=>{const m=c.view.va(e);m.snapshot&&r.push(m.snapshot)})),(function(c,m){const y=Ne(c);y.onlineState=m;let p=!1;y.queries.forEach(((T,E)=>{for(const S of E.Sa)S.va(m)&&(p=!0)})),p&&Lm(y)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function t1(n,e,t){const s=Ne(n);s.sharedClientState.updateQueryState(e,"rejected",t);const r=s.Au.get(e),l=r&&r.key;if(l){let c=new ht(Ee.comparator);c=c.insert(l,en.newNoDocument(l,Ie.min()));const m=Oe().add(l),y=new af(Ie.min(),new Map,new ht(qe),c,m);await Y0(s,y),s.du=s.du.remove(l),s.Au.delete(e),qm(s)}else await Xh(s.localStore,e,!1).then((()=>Wh(s,e,t))).catch(ta)}async function n1(n,e){const t=Ne(n),s=e.batch.batchId;try{const r=await dN(t.localStore,e);K0(t,s,null),J0(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Gl(t,r)}catch(r){await ta(r)}}async function i1(n,e,t){const s=Ne(n);try{const r=await(function(c,m){const y=Ne(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let T;return y.mutationQueue.lookupMutationBatch(p,m).next((E=>($e(E!==null,37113),T=E.keys(),y.mutationQueue.removeMutationBatch(p,E)))).next((()=>y.mutationQueue.performConsistencyCheck(p))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(p,T,m))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,T))).next((()=>y.localDocuments.getDocuments(p,T)))}))})(s.localStore,e);K0(s,e,t),J0(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Gl(s,r)}catch(r){await ta(r)}}function J0(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function K0(n,e,t){const s=Ne(n);let r=s.Vu[s.currentUser.toKey()];if(r){const l=r.get(e);l&&(t?l.reject(t):l.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Wh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||Q0(n,s)}))}function Q0(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(xm(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),qm(n))}function LT(n,e,t){for(const s of t)s instanceof F0?(n.Ru.addReference(s.key,e),s1(n,s)):s instanceof H0?(ge(km,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||Q0(n,s.key)):Ce(19791,{wu:s})}function s1(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(ge(km,"New document in limbo: "+t),n.Eu.add(s),qm(n))}function qm(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ee(ot.fromString(e)),s=n.fu.next();n.Au.set(s,new KN(t)),n.du=n.du.insert(t,s),V0(n.remoteStore,new Bs(wi(Em(t.path)),s,"TargetPurposeLimboResolution",jc.ce))}}async function Gl(n,e,t){const s=Ne(n),r=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,y)=>{c.push(s.pu(y,e,t).then((p=>{var T;if((p||t)&&s.isPrimaryClient){const E=p?!p.fromCache:(T=t==null?void 0:t.targetChanges.get(y.targetId))==null?void 0:T.current;s.sharedClientState.updateQueryState(y.targetId,E?"current":"not-current")}if(p){r.push(p);const E=Nm.As(y.targetId,p);l.push(E)}})))})),await Promise.all(c),s.Pu.H_(r),await(async function(y,p){const T=Ne(y);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>se.forEach(p,(S=>se.forEach(S.Es,(w=>T.persistence.referenceDelegate.addReference(E,S.targetId,w))).next((()=>se.forEach(S.ds,(w=>T.persistence.referenceDelegate.removeReference(E,S.targetId,w)))))))))}catch(E){if(!na(E))throw E;ge(Mm,"Failed to update sequence numbers: "+E)}for(const E of p){const S=E.targetId;if(!E.fromCache){const w=T.Ms.get(S),G=w.snapshotVersion,B=w.withLastLimboFreeSnapshotVersion(G);T.Ms=T.Ms.insert(S,B)}}})(s.localStore,l))}async function o1(n,e){const t=Ne(n);if(!t.currentUser.isEqual(e)){ge(km,"User change. New user:",e.toKey());const s=await M0(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((m=>{m.forEach((y=>{y.reject(new me(ne.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Gl(t,s.Ls)}}function r1(n,e){const t=Ne(n),s=t.Au.get(e);if(s&&s.hu)return Oe().add(s.key);{let r=Oe();const l=t.Iu.get(e);if(!l)return r;for(const c of l){const m=t.Tu.get(c);r=r.unionWith(m.view.nu)}return r}}function X0(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Y0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=r1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=t1.bind(null,e),e.Pu.H_=HN.bind(null,e.eventManager),e.Pu.yu=zN.bind(null,e.eventManager),e}function a1(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=n1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=i1.bind(null,e),e}class Jc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return fN(this.persistence,new lN,e.initialUser,this.serializer)}Cu(e){return new N0(wm.mi,this.serializer)}Du(e){return new _N}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jc.provider={build:()=>new Jc};class l1 extends Jc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){$e(this.persistence.referenceDelegate instanceof zc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Kw(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?mn.withCacheSize(this.cacheSizeBytes):mn.DEFAULT;return new N0((s=>zc.mi(s,t)),this.serializer)}}class jh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>UT(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=o1.bind(null,this.syncEngine),await GN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new FN})()}createDatastore(e){const t=lf(e.databaseInfo.databaseId),s=(function(l){return new AN(l)})(e.databaseInfo);return(function(l,c,m,y){return new wN(l,c,m,y)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,r,l,c,m){return new MN(s,r,l,c,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>UT(this.syncEngine,t,0)),(function(){return MT.v()?new MT:new TN})())}createSyncEngine(e,t){return(function(r,l,c,m,y,p,T){const E=new QN(r,l,c,m,y,p);return T&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const l=Ne(r);ge(Go,"RemoteStore shutting down."),l.Ea.add(5),await Ol(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}jh.provider={build:()=>new jh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ns("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="FirestoreClient";class u1{constructor(e,t,s,r,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=r,this.user=jt.UNAUTHENTICATED,this.clientId=pm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{ge(Ws,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(ge(Ws,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ji;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Um(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Dh(n,e){n.asyncQueue.verifyOperationInProgress(),ge(Ws,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async r=>{s.isEqual(r)||(await M0(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function kT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await c1(n);ge(Ws,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>DT(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,r)=>DT(e.remoteStore,r))),n._onlineComponents=e}async function c1(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge(Ws,"Using user provided OfflineComponentProvider");try{await Dh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ne.FAILED_PRECONDITION||r.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Kr("Error using user provided cache. Falling back to memory cache: "+t),await Dh(n,new Jc)}}else ge(Ws,"Using default OfflineComponentProvider"),await Dh(n,new l1(void 0));return n._offlineComponents}async function Z0(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge(Ws,"Using user provided OnlineComponentProvider"),await kT(n,n._uninitializedComponentsProvider._online)):(ge(Ws,"Using default OnlineComponentProvider"),await kT(n,new jh))),n._onlineComponents}function f1(n){return Z0(n).then((e=>e.syncEngine))}async function W0(n){const e=await Z0(n),t=e.eventManager;return t.onListen=XN.bind(null,e.syncEngine),t.onUnlisten=WN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$N.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jN.bind(null,e.syncEngine),t}function d1(n,e,t={}){const s=new ji;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,m,y,p){const T=new $0({next:S=>{T.Nu(),c.enqueueAndForget((()=>G0(l,E)));const w=S.docs.has(m);!w&&S.fromCache?p.reject(new me(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&S.fromCache&&y&&y.source==="server"?p.reject(new me(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),E=new B0(Em(m.path),T,{includeMetadataChanges:!0,qa:!0});return O0(l,E)})(await W0(n),n.asyncQueue,e,t,s))),s.promise}function h1(n,e,t={}){const s=new ji;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,m,y,p){const T=new $0({next:S=>{T.Nu(),c.enqueueAndForget((()=>G0(l,E))),S.fromCache&&y.source==="server"?p.reject(new me(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),E=new B0(m,T,{includeMetadataChanges:!0,qa:!0});return O0(l,E)})(await W0(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="firestore.googleapis.com",OT=!0;class GT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new me(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eS,this.ssl=OT}else this.host=e.host,this.ssl=e.ssl??OT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=w0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Yw)throw new me(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=j0(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ff{constructor(e,t,s,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new TI;switch(s.type){case"firstParty":return new AI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new me(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=qT.get(t);s&&(ge("ComponentProvider","Removing Datastore"),qT.delete(t),s.terminate())})(this),Promise.resolve()}}function m1(n,e,t,s={}){var p;n=is(n,ff);const r=dm(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},m=`${e}:${t}`;r&&(QC(`https://${m}`),WC("Firestore",!0)),l.host!==eS&&l.host!==m&&Kr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...l,host:m,ssl:r,emulatorOptions:s};if(!Vc(y,c)&&(n._setSettings(y),s.mockUserToken)){let T,E;if(typeof s.mockUserToken=="string")T=s.mockUserToken,E=jt.MOCK_USER;else{T=XC(s.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new me(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new jt(S)}n._authCredentials=new vI(new qE(T,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new sa(this.firestore,e,this._query)}}class Et{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Js(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Et(this.firestore,e,this._key)}toJSON(){return{type:Et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Ul(t,Et._jsonSchema))return new Et(e,s||null,new Ee(ot.fromString(t.referencePath)))}}Et._jsonSchemaVersion="firestore/documentReference/1.0",Et._jsonSchema={type:Vt("string",Et._jsonSchemaVersion),referencePath:Vt("string")};class Js extends sa{constructor(e,t,s){super(e,t,Em(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new Ee(e))}withConverter(e){return new Js(this.firestore,e,this._path)}}function Om(n,e,...t){if(n=es(n),OE("collection","path",e),n instanceof ff){const s=ot.fromString(e,...t);return j_(s),new Js(n,null,s)}{if(!(n instanceof Et||n instanceof Js))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(ot.fromString(e,...t));return j_(s),new Js(n.firestore,null,s)}}function Hn(n,e,...t){if(n=es(n),arguments.length===1&&(e=pm.newId()),OE("doc","path",e),n instanceof ff){const s=ot.fromString(e,...t);return W_(s),new Et(n,null,new Ee(s))}{if(!(n instanceof Et||n instanceof Js))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(ot.fromString(e,...t));return W_(s),new Et(n.firestore,n instanceof Js?n.converter:null,new Ee(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="AsyncQueue";class FT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new D0(this,"async_queue_retry"),this._c=()=>{const s=xh();s&&ge(BT,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=xh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=xh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ji;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!na(e))throw e;ge(BT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ns("INTERNAL UNHANDLED ERROR: ",HT(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Pm.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(r),r}uc(){this.nc&&Ce(47125,{Pc:HT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function HT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Bl extends ff{constructor(e,t,s,r){super(e,t,s,r),this.type="firestore",this._queue=new FT,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new FT(e),this._firestoreClient=void 0,await e}}}function p1(n,e){const t=typeof n=="object"?n:lI(),s=typeof n=="string"?n:kc,r=iI(t,"firestore").getImmediate({identifier:s});if(!r._initialized){const l=JC("firestore");l&&m1(r,...l)}return r}function Gm(n){if(n._terminated)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||g1(n),n._firestoreClient}function g1(n){var s,r,l;const e=n._freezeSettings(),t=(function(m,y,p,T){return new GI(m,y,p,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,j0(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new u1(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gn($t.fromBase64String(e))}catch(t){throw new me(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Gn($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ul(e,Gn._jsonSchema))return Gn.fromBase64String(e.bytes)}}Gn._jsonSchemaVersion="firestore/bytes/1.0",Gn._jsonSchema={type:Vt("string",Gn._jsonSchemaVersion),bytes:Vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xi._jsonSchemaVersion}}static fromJSON(e){if(Ul(e,xi._jsonSchema))return new xi(e.latitude,e.longitude)}}xi._jsonSchemaVersion="firestore/geoPoint/1.0",xi._jsonSchema={type:Vt("string",xi._jsonSchemaVersion),latitude:Vt("number"),longitude:Vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==r[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Di._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ul(e,Di._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Di(e.vectorValues);throw new me(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Di._jsonSchemaVersion="firestore/vectorValue/1.0",Di._jsonSchema={type:Vt("string",Di._jsonSchemaVersion),vectorValues:Vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=/^__.*__$/;class _1{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new eo(e,this.data,this.fieldMask,t,this.fieldTransforms):new kl(e,this.data,t,this.fieldTransforms)}}class tS{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new eo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function nS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:n})}}class Fm{constructor(e,t,s,r,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=r,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Fm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Kc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(nS(this.Ac)&&y1.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class T1{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||lf(e)}Cc(e,t,s,r=!1){return new Fm({Ac:e,methodName:t,Dc:s,path:Xt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hm(n){const e=n._freezeSettings(),t=lf(n._databaseId);return new T1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function v1(n,e,t,s,r,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,r);zm("Data must be an object, but it was:",c,s);const m=iS(s,c);let y,p;if(l.merge)y=new Rn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const T=[];for(const E of l.mergeFields){const S=em(e,E,t);if(!c.contains(S))throw new me(ne.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);oS(T,S)||T.push(S)}y=new Rn(T),p=c.fieldTransforms.filter((E=>y.covers(E.field)))}else y=null,p=c.fieldTransforms;return new _1(new pn(m),y,p)}class hf extends Bm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hf}}function E1(n,e,t,s){const r=n.Cc(1,e,t);zm("Data must be an object, but it was:",r,s);const l=[],c=pn.empty();js(s,((y,p)=>{const T=Ym(e,y,t);p=es(p);const E=r.yc(T);if(p instanceof hf)l.push(T);else{const S=Fl(p,E);S!=null&&(l.push(T),c.set(T,S))}}));const m=new Rn(l);return new tS(c,m,r.fieldTransforms)}function S1(n,e,t,s,r,l){const c=n.Cc(1,e,t),m=[em(e,s,t)],y=[r];if(l.length%2!=0)throw new me(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)m.push(em(e,l[S])),y.push(l[S+1]);const p=[],T=pn.empty();for(let S=m.length-1;S>=0;--S)if(!oS(p,m[S])){const w=m[S];let G=y[S];G=es(G);const B=c.yc(w);if(G instanceof hf)p.push(w);else{const K=Fl(G,B);K!=null&&(p.push(w),T.set(w,K))}}const E=new Rn(p);return new tS(T,E,c.fieldTransforms)}function A1(n,e,t,s=!1){return Fl(t,n.Cc(s?4:3,e))}function Fl(n,e){if(sS(n=es(n)))return zm("Unsupported field value:",e,n),iS(n,e);if(n instanceof Bm)return(function(s,r){if(!nS(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const l=[];let c=0;for(const m of s){let y=Fl(m,r.wc(c));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,r){if((s=es(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return uw(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=ut.fromDate(s);return{timestampValue:Hc(r.serializer,l)}}if(s instanceof ut){const l=new ut(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Hc(r.serializer,l)}}if(s instanceof xi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Gn)return{bytesValue:v0(r.serializer,s._byteString)};if(s instanceof Et){const l=r.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw r.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Rm(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Di)return(function(c,m){return{mapValue:{fields:{[QE]:{stringValue:XE},[qc]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return Sm(m.serializer,p)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${Wc(s)}`)})(n,e)}function iS(n,e){const t={};return FE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):js(n,((s,r)=>{const l=Fl(r,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function sS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ut||n instanceof xi||n instanceof Gn||n instanceof Et||n instanceof Bm||n instanceof Di)}function zm(n,e,t){if(!sS(t)||!GE(t)){const s=Wc(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function em(n,e,t){if((e=es(e))instanceof df)return e._internalPath;if(typeof e=="string")return Ym(n,e);throw Kc("Field path arguments must be of type string or ",n,!1,void 0,t)}const C1=new RegExp("[~\\*/\\[\\]]");function Ym(n,e,t){if(e.search(C1)>=0)throw Kc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new df(...e.split("."))._internalPath}catch{throw Kc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Kc(n,e,t,s,r){const l=s&&!s.isEmpty(),c=r!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(l||c)&&(y+=" (found",l&&(y+=` in field ${s}`),c&&(y+=` in document ${r}`),y+=")"),new me(ne.INVALID_ARGUMENT,m+n+y)}function oS(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,t,s,r,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new R1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Jm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class R1 extends rS{data(){return super.data()}}function Jm(n,e){return typeof e=="string"?Ym(n,e):e instanceof df?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new me(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Km{}class w1 extends Km{}function aS(n,e,...t){let s=[];e instanceof Km&&s.push(e),s=s.concat(t),(function(l){const c=l.filter((y=>y instanceof Qm)).length,m=l.filter((y=>y instanceof mf)).length;if(c>1||c>0&&m>0)throw new me(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const r of s)n=r._apply(n);return n}class mf extends w1{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new mf(e,t,s)}_apply(e){const t=this._parse(e);return uS(e._query,t),new sa(e.firestore,e.converter,Hh(e._query,t))}_parse(e){const t=Hm(e.firestore);return(function(l,c,m,y,p,T,E){let S;if(p.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new me(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){YT(E,T);const G=[];for(const B of E)G.push(zT(y,l,B));S={arrayValue:{values:G}}}else S=zT(y,l,E)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||YT(E,T),S=A1(m,c,E,T==="in"||T==="not-in");return bt.create(p,T,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function lS(n,e,t){const s=e,r=Jm("where",n);return mf._create(r,s,t)}class Qm extends Km{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Qm(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:ni.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,l){let c=r;const m=l.getFlattenedFilters();for(const y of m)uS(c,y),c=Hh(c,y)})(e._query,t),new sa(e.firestore,e.converter,Hh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function zT(n,e,t){if(typeof(t=es(t))=="string"){if(t==="")throw new me(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!i0(e)&&t.indexOf("/")!==-1)throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(ot.fromString(t));if(!Ee.isDocumentKey(s))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return aT(n,new Ee(s))}if(t instanceof Et)return aT(n,t._key);throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wc(t)}.`)}function YT(n,e){if(!Array.isArray(n)||n.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uS(n,e){const t=(function(r,l){for(const c of r)for(const m of c.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class N1{convertValue(e,t="none"){switch($s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return js(e,((r,l)=>{s[r]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,r,l;const t=(l=(r=(s=e.fields)==null?void 0:s[qc].arrayValue)==null?void 0:r.values)==null?void 0:l.map((c=>vt(c.doubleValue)));return new Di(t)}convertGeoPoint(e){return new xi(vt(e.latitude),vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=tf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Ml(e));default:return null}}convertTimestamp(e){const t=Qs(e);return new ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ot.fromString(e);$e(I0(s),9688,{name:e});const r=new xl(s.get(1),s.get(3)),l=new Ee(s.popFirst(5));return r.isEqual(t)||ns(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class Tl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qo extends rS{constructor(e,t,s,r,l,c){super(e,t,s,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Jm("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=qo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}qo._jsonSchemaVersion="firestore/documentSnapshot/1.0",qo._jsonSchema={type:Vt("string",qo._jsonSchemaVersion),bundleSource:Vt("string","DocumentSnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class Mc extends qo{data(e={}){return super.data(e)}}class Fr{constructor(e,t,s,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Tl(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Mc(this._firestore,this._userDataWriter,s.key,s,new Tl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((m=>{const y=new Mc(r._firestore,r._userDataWriter,m.doc.key,m.doc,new Tl(r._snapshot.mutatedKeys.has(m.doc.key),r._snapshot.fromCache),r.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const y=new Mc(r._firestore,r._userDataWriter,m.doc.key,m.doc,new Tl(r._snapshot.mutatedKeys.has(m.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,T=-1;return m.type!==0&&(p=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),T=c.indexOf(m.doc.key)),{type:x1(m.type),doc:y,oldIndex:p,newIndex:T}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],r=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),r.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function x1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(n){n=is(n,Et);const e=is(n.firestore,Bl);return d1(Gm(e),n._key).then((t=>D1(e,n,t)))}Fr._jsonSchemaVersion="firestore/querySnapshot/1.0",Fr._jsonSchema={type:Vt("string",Fr._jsonSchemaVersion),bundleSource:Vt("string","QuerySnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class cS extends N1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,t)}}function Xm(n){n=is(n,sa);const e=is(n.firestore,Bl),t=Gm(e),s=new cS(e);return I1(n._query),h1(t,n._query).then((r=>new Fr(e,s,n,r)))}function $m(n,e,t){n=is(n,Et);const s=is(n.firestore,Bl),r=M1(n.converter,e,t);return fS(s,[v1(Hm(s),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Ni.none())])}function no(n,e,t,...s){n=is(n,Et);const r=is(n.firestore,Bl),l=Hm(r);let c;return c=typeof(e=es(e))=="string"||e instanceof df?S1(l,"updateDoc",n._key,e,t,s):E1(l,"updateDoc",n._key,e),fS(r,[c.toMutation(n._key,Ni.exists(!0))])}function fS(n,e){return(function(s,r){const l=new ji;return s.asyncQueue.enqueueAndForget((async()=>e1(await f1(s),r,l))),l.promise})(Gm(n),e)}function D1(n,e,t){const s=t.docs.get(e._key),r=new cS(n);return new qo(n,r,e._key,s,new Tl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){ea=r})(aI),Uc(new Il("firestore",((s,{instanceIdentifier:r,options:l})=>{const c=s.getProvider("app").getImmediate(),m=new Bl(new EI(s.getProvider("auth-internal")),new CI(c,s.getProvider("app-check-internal")),(function(p,T){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new me(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xl(p.options.projectId,T)})(c,r),c);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),Gr(Q_,X_,e),Gr(Q_,X_,"esm2020")})();var b1="firebase",V1="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gr(b1,V1,"app");const P1={apiKey:"AIzaSyAu7UMwYdwMWs12NoEn0ICvrNDVAu2wrug",authDomain:"fazarah-5182e.firebaseapp.com",projectId:"fazarah-5182e",storageBucket:"fazarah-5182e.firebasestorage.app",messagingSenderId:"437928741348",appId:"1:437928741348:web:d25a4ee91b8a5af020dff1",measurementId:"G-9K313Y6QXY"},U1=NE(P1),rn=p1(U1),Pl="fazara_current_user_id",Ac="Faioumy9954",In="users",dS="config",hS="admin_settings",oa=(n,e)=>(console.error(`Error in ${e}:`,n),n.code==="not-found"||n.message&&n.message.includes("database")?":    .     Firestore Database  Firebase Console.":n.code==="unavailable"||n.message&&n.message.includes("offline")?"     .":"   .   ."),L1=async(n,e,t)=>{try{const s=Om(rn,In),r=aS(s,lS("phoneNumber","==",e));if(!(await Xm(r)).empty)return{success:!1,message:"   "};const c=Date.now().toString(),m={id:c,fullName:n,phoneNumber:e,password:t,streak:0,lastCheckIn:null,history:[],attendanceLog:[],claimedReward:!1,messages:[]};return await $m(Hn(rn,In,c),m),localStorage.setItem(Pl,m.id),{success:!0,message:"  ",user:m}}catch(s){return{success:!1,message:oa(s,"registerUser")}}},k1=async(n,e)=>{try{const t=Om(rn,In),s=aS(t,lS("phoneNumber","==",n)),r=await Xm(s);if(r.empty)return{success:!1,message:"   "};const c=r.docs[0].data();if(c.password!==e)return{success:!1,message:"   "};const m=await mS(c);return localStorage.setItem(Pl,m.id),{success:!0,message:"  ",user:m}}catch(t){return{success:!1,message:oa(t,"loginUser")}}},q1=async()=>{const n=localStorage.getItem(Pl);if(!n)return null;try{const e=Hn(rn,In,n),t=await to(e);if(t.exists()){const s=t.data();return await mS(s)}else return localStorage.removeItem(Pl),null}catch(e){return oa(e,"getCurrentUser"),null}},O1=()=>{localStorage.removeItem(Pl)},G1=async(n,e)=>{try{const t=Hn(rn,In,n);return await no(t,{password:e}),!0}catch(t){return console.error("Error changing password:",t),!1}},B1=async n=>{try{const e=Hn(rn,dS,hS),t=await to(e);let s=Ac;if(t.exists()){const r=t.data();s=(r==null?void 0:r.password)||Ac}else try{await $m(e,{password:Ac})}catch{console.warn("Could not create admin config, using default")}return s===n}catch(e){return console.error("Error checking admin pass:",e),n===Ac}},F1=async n=>{try{const e=Hn(rn,dS,hS);await $m(e,{password:n},{merge:!0})}catch(e){console.error("Error changing admin password:",e),alert(oa(e,"changeAdminPassword"))}},H1=async(n,e,t)=>{try{const s=Hn(rn,In,n),r=await to(s);if(!r.exists())return{success:!1,message:"  "};let l=r.data();const c=Bn();if(l.lastCheckIn&&Jr(new Date(l.lastCheckIn),c))return{success:!1,message:"     "};let m=l.streak;l.lastCheckIn&&vE(c,new Date(l.lastCheckIn))?m+=1:m=1;const y=c.toISOString(),p={streak:m,lastCheckIn:y,history:[...l.history||[],y],attendanceLog:[...l.attendanceLog||[],{date:y,mosque:e,imam:t}]};return await no(s,p),l={...l,...p},{success:!0,message:" !    ",user:l}}catch(s){return{success:!1,message:oa(s,"checkInUser")}}},z1=async n=>{try{const e=Hn(rn,In,n);await no(e,{claimedReward:!0});const t=await to(e);return t.exists()?t.data():null}catch(e){return console.error("Error claiming reward:",e),null}},Y1=async(n,e)=>{try{const t=Hn(rn,In,n),s=await to(t);if(s.exists()){const r=s.data(),l={id:Date.now().toString(),date:Bn().toISOString(),content:`   :   .
: ${e}`},c={streak:0,lastCheckIn:null,history:[],claimedReward:!1,messages:[l,...r.messages||[]]};await no(t,c)}return await Bo()}catch(t){return console.error("Error resetting streak:",t),await Bo()}},J1=async(n,e)=>{try{const t=Hn(rn,In,n),s=await to(t);if(s.exists()){const r=s.data(),l={id:Date.now().toString(),date:Bn().toISOString(),content:e},c=[...r.messages||[],l];return await no(t,{messages:c}),{...r,messages:c}}return null}catch(t){return console.error("Error sending message:",t),null}},K1=async(n,e)=>{try{const t=Hn(rn,In,n),s=await to(t);if(s.exists()){const r=s.data(),c=[{id:Date.now().toString(),date:Bn().toISOString(),content:`   :
${e}`},...r.messages||[]];await no(t,{messages:c})}return await Bo()}catch(t){return console.error(t),await Bo()}},Q1=async(n,e)=>{try{const t=Hn(rn,In,n),s=await to(t);if(s.exists()){const l=(s.data().messages||[]).filter(c=>c.id!==e);await no(t,{messages:l})}return await Bo()}catch(t){return console.error("Error deleting message:",t),await Bo()}},Bo=async()=>{try{const n=Om(rn,In),e=await Xm(n),t=[];return e.forEach(s=>{t.push(s.data())}),t}catch(n){return oa(n,"getAllUsersForAdmin"),[]}},mS=async n=>{if(!n.lastCheckIn)return n;const e=Bn(),t=new Date(n.lastCheckIn);if(Jr(e,t)||vE(e,t))return n;const s=new Date(e);s.setDate(s.getDate()-1),s.setHours(0,0,0,0);const r=new Date(t);if(r.setHours(0,0,0,0),r<s&&n.streak!==0)try{const l=Hn(rn,In,n.id);await no(l,{streak:0}),n.streak=0}catch(l){console.error("Error auto-updating streak:",l)}return n},X1=({onLoginSuccess:n,onAdminClick:e})=>{const[t,s]=ke.useState(!1),[r,l]=ke.useState(!1),[c,m]=ke.useState(""),[y,p]=ke.useState(""),[T,E]=ke.useState(""),[S,w]=ke.useState(""),[G,B]=ke.useState(""),K=async W=>{if(W.preventDefault(),B(""),l(!0),t){if(c.trim().split(" ").length<4){B("   "),l(!1);return}if(T!==S){B("   "),l(!1);return}if(y.length<10){B("    "),l(!1);return}const ie=await L1(c,y,T);ie.success&&ie.user?n(ie.user):B(ie.message)}else{const ie=await k1(y,T);ie.success&&ie.user?n(ie.user):B(ie.message)}l(!1)};return D.jsx("div",{className:"max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden md:max-w-lg mt-4",children:D.jsx("div",{className:"md:flex",children:D.jsxs("div",{className:"w-full p-8",children:[D.jsx("div",{className:"uppercase tracking-wide text-sm text-islamic-accent font-semibold mb-1",children:t?"  ":" "}),D.jsx("h2",{className:"block mt-1 text-lg leading-tight font-medium text-black",children:"      "}),D.jsxs("form",{onSubmit:K,className:"mt-6 grid grid-cols-1 gap-y-4",children:[t&&D.jsxs("div",{children:[D.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-sm",children:" "}),D.jsx("input",{type:"text",value:c,onChange:W=>m(W.target.value),className:"w-full border border-gray-300 px-3 py-2 rounded-lg shadow-sm focus:outline-none focus:border-islamic-accent focus:ring-1 focus:ring-islamic-accent",placeholder:"    ",required:t})]}),D.jsxs("div",{children:[D.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-sm",children:" "}),D.jsx("input",{type:"tel",value:y,onChange:W=>p(W.target.value),className:"w-full border border-gray-300 px-3 py-2 rounded-lg shadow-sm focus:outline-none focus:border-islamic-accent focus:ring-1 focus:ring-islamic-accent",placeholder:"01xxxxxxxxx",required:!0})]}),D.jsxs("div",{children:[D.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-sm",children:" "}),D.jsx("input",{type:"password",value:T,onChange:W=>E(W.target.value),className:"w-full border border-gray-300 px-3 py-2 rounded-lg shadow-sm focus:outline-none focus:border-islamic-accent focus:ring-1 focus:ring-islamic-accent",required:!0})]}),t&&D.jsxs("div",{children:[D.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-sm",children:"  "}),D.jsx("input",{type:"password",value:S,onChange:W=>w(W.target.value),className:"w-full border border-gray-300 px-3 py-2 rounded-lg shadow-sm focus:outline-none focus:border-islamic-accent focus:ring-1 focus:ring-islamic-accent",required:t})]}),G&&D.jsx("p",{className:"text-red-500 text-sm mt-2",children:G}),D.jsx("button",{type:"submit",disabled:r,className:`bg-islamic-dark text-white font-bold py-3 px-4 rounded-lg transition duration-300 shadow-lg mt-2 ${r?"opacity-50 cursor-not-allowed":"hover:bg-teal-900"}`,children:r?" ...":t?" ":""})]}),D.jsx("div",{className:"mt-6 text-center border-t pt-4",children:D.jsx("button",{onClick:()=>{s(!t),B("")},className:"text-islamic-dark hover:underline text-sm font-semibold",children:t?"    ":"    "})}),D.jsx("div",{className:"mt-8 text-center",children:D.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-xs",children:" "})})]})})})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let $1,Z1;function W1(){return{geminiUrl:$1,vertexUrl:Z1}}function j1(n,e,t,s){var r,l;if(!(n!=null&&n.baseUrl)){const c=W1();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:t:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rs{}function de(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function d(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const m=c.slice(0,-2);if(!(m in n))if(Array.isArray(t))n[m]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[m])){const y=n[m];if(Array.isArray(t))for(let p=0;p<y.length;p++){const T=y[p];d(T,e.slice(l+1),t[p])}else for(const p of y)d(p,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const m=c.slice(0,-3);m in n||(n[m]=[{}]);const y=n[m];d(y[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],r=n[s];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const r=e[s];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(m=>f(m,e.slice(s+1),t)):t}else return t}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function eM(n,e){for(const[t,s]of Object.entries(e)){const r=t.split("."),l=s.split("."),c=new Set;let m=-1;for(let y=0;y<r.length;y++)if(r[y]==="*"){m=y;break}if(m!==-1&&l.length>m)for(let y=m;y<l.length;y++){const p=l[y];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&c.add(p)}tm(n,r,l,0,c)}}function tm(n,e,t,s,r){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const c=l.slice(0,-2),m=n;if(c in m&&Array.isArray(m[c]))for(const y of m[c])tm(y,e,t,s+1,r)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,m=Object.keys(c).filter(p=>!p.startsWith("_")&&!r.has(p)),y={};for(const p of m)y[p]=c[p];for(const[p,T]of Object.entries(y)){const E=[];for(const S of t.slice(s))S==="*"?E.push(p):E.push(S);d(c,E,T)}for(const p of m)delete c[p]}}else{const c=n;l in c&&tm(c[l],e,t,s+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tM(n){const e={},t=f(n,["operationName"]);t!=null&&d(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&d(e,["_url","resourceName"],s),e}function nM(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const s=f(n,["metadata"]);s!=null&&d(e,["metadata"],s);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&d(e,["response"],sM(c)),e}function iM(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const s=f(n,["metadata"]);s!=null&&d(e,["metadata"],s);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["response"]);return c!=null&&d(e,["response"],oM(c)),e}function sM(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>rM(c))),d(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&d(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function oM(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>aM(c))),d(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&d(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function rM(n){const e={},t=f(n,["video"]);return t!=null&&d(e,["video"],hM(t)),e}function aM(n){const e={},t=f(n,["_self"]);return t!=null&&d(e,["video"],mM(t)),e}function lM(n){const e={},t=f(n,["operationName"]);return t!=null&&d(e,["_url","operationName"],t),e}function uM(n){const e={},t=f(n,["operationName"]);return t!=null&&d(e,["_url","operationName"],t),e}function cM(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const s=f(n,["metadata"]);s!=null&&d(e,["metadata"],s);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["response"]);return c!=null&&d(e,["response"],fM(c)),e}function fM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&d(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function pS(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const s=f(n,["metadata"]);s!=null&&d(e,["metadata"],s);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["response"]);return c!=null&&d(e,["response"],dM(c)),e}function dM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&d(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function hM(n){const e={},t=f(n,["uri"]);t!=null&&d(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&d(e,["videoBytes"],Zm(s));const r=f(n,["encoding"]);return r!=null&&d(e,["mimeType"],r),e}function mM(n){const e={},t=f(n,["gcsUri"]);t!=null&&d(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&d(e,["videoBytes"],Zm(s));const r=f(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var JT;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(JT||(JT={}));var KT;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(KT||(KT={}));var QT;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(QT||(QT={}));var Fs;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Fs||(Fs={}));var XT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(XT||(XT={}));var $T;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})($T||($T={}));var ZT;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(ZT||(ZT={}));var WT;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(WT||(WT={}));var jT;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(jT||(jT={}));var ev;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(ev||(ev={}));var tv;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(tv||(tv={}));var nv;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(nv||(nv={}));var iv;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(iv||(iv={}));var sv;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(sv||(sv={}));var ov;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(ov||(ov={}));var rv;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(rv||(rv={}));var av;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(av||(av={}));var lv;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(lv||(lv={}));var uv;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(uv||(uv={}));var Qc;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Qc||(Qc={}));var cv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(cv||(cv={}));var fv;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(fv||(fv={}));var dv;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(dv||(dv={}));var nm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(nm||(nm={}));var hv;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(hv||(hv={}));var mv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(mv||(mv={}));var pv;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(pv||(pv={}));var gv;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(gv||(gv={}));var yv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(yv||(yv={}));var _v;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(_v||(_v={}));var Tv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Tv||(Tv={}));var vv;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(vv||(vv={}));var Ev;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Ev||(Ev={}));var Sv;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Sv||(Sv={}));var Av;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Av||(Av={}));var Cv;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Cv||(Cv={}));var Rv;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Rv||(Rv={}));var Iv;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Iv||(Iv={}));var wv;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(wv||(wv={}));var Nv;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(Nv||(Nv={}));var Mv;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Mv||(Mv={}));var xv;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(xv||(xv={}));var Dv;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Dv||(Dv={}));var bv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(bv||(bv={}));var Vv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Vv||(Vv={}));var Pv;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Pv||(Pv={}));var Uv;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Uv||(Uv={}));var Lv;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Lv||(Lv={}));var kv;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(kv||(kv={}));var qv;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(qv||(qv={}));var Ov;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Ov||(Ov={}));var Gv;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Gv||(Gv={}));var Bv;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Bv||(Bv={}));var Fv;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Fv||(Fv={}));var Or;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Or||(Or={}));class im{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class pl{get text(){var e,t,s,r,l,c,m,y;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",T=!1;const E=[];for(const S of(y=(m=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||m===void 0?void 0:m.parts)!==null&&y!==void 0?y:[]){for(const[w,G]of Object.entries(S))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(G!==null||G!==void 0)&&E.push(w);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;T=!0,p+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),T?p:void 0}get data(){var e,t,s,r,l,c,m,y;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const T=[];for(const E of(y=(m=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||m===void 0?void 0:m.parts)!==null&&y!==void 0?y:[]){for(const[S,w]of Object.entries(E))S!=="inlineData"&&(w!==null||w!==void 0)&&T.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(p+=atob(E.inlineData.data))}return T.length>0&&console.warn(`there are non-data parts ${T} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,s,r,l,c,m,y;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(y=(m=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||m===void 0?void 0:m.parts)===null||y===void 0?void 0:y.filter(T=>T.functionCall).map(T=>T.functionCall).filter(T=>T!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,t,s,r,l,c,m,y,p;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const T=(y=(m=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||m===void 0?void 0:m.parts)===null||y===void 0?void 0:y.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((T==null?void 0:T.length)!==0)return(p=T==null?void 0:T[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,s,r,l,c,m,y,p;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const T=(y=(m=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||m===void 0?void 0:m.parts)===null||y===void 0?void 0:y.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((T==null?void 0:T.length)!==0)return(p=T==null?void 0:T[0])===null||p===void 0?void 0:p.output}}class Hv{}class zv{}class pM{}class gM{}class yM{}class _M{}class Yv{}class Jv{}class Kv{}class TM{}class Xc{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Xc;let r;const l=e;return t?r=iM(l):r=nM(l),Object.assign(s,r),s}}class Qv{}class Xv{}class $v{}class Zv{}class vM{}class EM{}class SM{}class Wm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Wm,l=cM(e);return Object.assign(s,l),s}}class AM{}class CM{}class RM{}class Wv{}class IM{get text(){var e,t,s;let r="",l=!1;const c=[];for(const m of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[y,p]of Object.entries(m))y!=="text"&&y!=="thought"&&p!==null&&c.push(y);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;l=!0,r+=m.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,s;let r="";const l=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[m,y]of Object.entries(c))m!=="inlineData"&&y!==null&&l.push(m);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class wM{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class jm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new jm,l=pS(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Je(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function gS(n,e){const t=Je(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function yS(n){return Array.isArray(n)?n.map(e=>$c(e)):[$c(n)]}function $c(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function _S(n){const e=$c(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function TS(n){const e=$c(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function jv(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function vS(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>jv(e)):[jv(n)]}function sm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function eE(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function tE(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function tn(n){if(n==null)throw new Error("ContentUnion is required");return sm(n)?n:{role:"user",parts:vS(n)}}function ep(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=tn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=tn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>tn(t)):[tn(e)]}function Fn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(eE(n)||tE(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[tn(n)]}const e=[],t=[],s=sm(n[0]);for(const r of n){const l=sm(r);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(eE(r)||tE(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return s||e.push({role:"user",parts:vS(t)}),e}function NM(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(Fs).includes(t[0].toUpperCase())?t[0].toUpperCase():Fs.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(Fs).includes(s.toUpperCase())?s.toUpperCase():Fs.TYPE_UNSPECIFIED})}}function Hr(n){const e={},t=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&NM(n.type,e);for(const[c,m]of Object.entries(n))if(m!=null)if(c=="type"){if(m==="null")throw new Error("type: null can not be the only possible type for the field.");if(m instanceof Array)continue;e.type=Object.values(Fs).includes(m.toUpperCase())?m.toUpperCase():Fs.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=Hr(m);else if(s.includes(c)){const y=[];for(const p of m){if(p.type=="null"){e.nullable=!0;continue}y.push(Hr(p))}e[c]=y}else if(r.includes(c)){const y={};for(const[p,T]of Object.entries(m))y[p]=Hr(T);e[c]=y}else{if(c==="additionalProperties")continue;e[c]=m}return e}function tp(n){return Hr(n)}function np(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function ip(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ra(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Hr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Hr(e.response));return n}function aa(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function MM(n,e,t,s=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function as(n,e){if(typeof e!="string")throw new Error("name must be a string");return MM(n,e,"cachedContents")}function ES(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function io(n){return Zm(n)}function xM(n){return n!=null&&typeof n=="object"&&"name"in n}function DM(n){return n!=null&&typeof n=="object"&&"video"in n}function bM(n){return n!=null&&typeof n=="object"&&"uri"in n}function SS(n){var e;let t;if(xM(n)&&(t=n.name),!(bM(n)&&(t=n.uri,t===void 0))&&!(DM(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function AS(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function CS(n){for(const e of["models","tunedModels","publisherModels"])if(VM(n,e))return n[e];return[]}function VM(n,e){return n!==null&&typeof n=="object"&&e in n}function PM(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function UM(n,e={}){const t=[],s=new Set;for(const r of n){const l=r.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=PM(r,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function RS(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function LM(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function IS(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const y=c.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function la(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function wS(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kM(n){const e={},t=f(n,["responsesFile"]);t!=null&&d(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>yx(c))),d(e,["inlinedResponses"],l)}const r=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["inlinedEmbedContentResponses"],l)}return e}function qM(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&d(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&d(e,["gcsUri"],s);const r=f(n,["bigqueryDestination","outputUri"]);return r!=null&&d(e,["bigqueryUri"],r),e}function OM(n){const e={},t=f(n,["format"]);t!=null&&d(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&d(e,["gcsDestination","outputUriPrefix"],s);const r=f(n,["bigqueryUri"]);if(r!=null&&d(e,["bigqueryDestination","outputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function xc(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&d(e,["displayName"],s);const r=f(n,["metadata","state"]);r!=null&&d(e,["state"],wS(r));const l=f(n,["metadata","createTime"]);l!=null&&d(e,["createTime"],l);const c=f(n,["metadata","endTime"]);c!=null&&d(e,["endTime"],c);const m=f(n,["metadata","updateTime"]);m!=null&&d(e,["updateTime"],m);const y=f(n,["metadata","model"]);y!=null&&d(e,["model"],y);const p=f(n,["metadata","output"]);return p!=null&&d(e,["dest"],kM(IS(p))),e}function om(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const s=f(n,["displayName"]);s!=null&&d(e,["displayName"],s);const r=f(n,["state"]);r!=null&&d(e,["state"],wS(r));const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["createTime"]);c!=null&&d(e,["createTime"],c);const m=f(n,["startTime"]);m!=null&&d(e,["startTime"],m);const y=f(n,["endTime"]);y!=null&&d(e,["endTime"],y);const p=f(n,["updateTime"]);p!=null&&d(e,["updateTime"],p);const T=f(n,["model"]);T!=null&&d(e,["model"],T);const E=f(n,["inputConfig"]);E!=null&&d(e,["src"],GM(E));const S=f(n,["outputConfig"]);S!=null&&d(e,["dest"],qM(IS(S)));const w=f(n,["completionStats"]);return w!=null&&d(e,["completionStats"],w),e}function GM(n){const e={},t=f(n,["instancesFormat"]);t!=null&&d(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&d(e,["gcsUri"],s);const r=f(n,["bigquerySource","inputUri"]);return r!=null&&d(e,["bigqueryUri"],r),e}function BM(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&d(t,["fileName"],s);const r=f(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>gx(n,c))),d(t,["requests","requests"],l)}return t}function FM(n){const e={},t=f(n,["format"]);t!=null&&d(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&d(e,["gcsSource","uris"],s);const r=f(n,["bigqueryUri"]);if(r!=null&&d(e,["bigquerySource","inputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function HM(n){const e={},t=f(n,["data"]);if(t!=null&&d(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function zM(n,e){const t={},s=f(e,["name"]);return s!=null&&d(t,["_url","name"],la(n,s)),t}function YM(n,e){const t={},s=f(e,["name"]);return s!=null&&d(t,["_url","name"],la(n,s)),t}function JM(n){const e={},t=f(n,["content"]);t!=null&&d(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&d(e,["citationMetadata"],KM(s));const r=f(n,["tokenCount"]);r!=null&&d(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&d(e,["finishReason"],l);const c=f(n,["avgLogprobs"]);c!=null&&d(e,["avgLogprobs"],c);const m=f(n,["groundingMetadata"]);m!=null&&d(e,["groundingMetadata"],m);const y=f(n,["index"]);y!=null&&d(e,["index"],y);const p=f(n,["logprobsResult"]);p!=null&&d(e,["logprobsResult"],p);const T=f(n,["safetyRatings"]);if(T!=null){let S=T;Array.isArray(S)&&(S=S.map(w=>w)),d(e,["safetyRatings"],S)}const E=f(n,["urlContextMetadata"]);return E!=null&&d(e,["urlContextMetadata"],E),e}function KM(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),d(e,["citations"],s)}return e}function NS(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Cx(l))),d(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&d(e,["role"],s),e}function QM(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&d(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function XM(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&d(e,["displayName"],s);const r=f(n,["dest"]);return e!==void 0&&r!=null&&d(e,["outputConfig"],OM(LM(r))),t}function nE(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Je(n,s));const r=f(e,["src"]);r!=null&&d(t,["batch","inputConfig"],BM(n,RS(n,r)));const l=f(e,["config"]);return l!=null&&QM(l,t),t}function $M(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["model"],Je(n,s));const r=f(e,["src"]);r!=null&&d(t,["inputConfig"],FM(RS(n,r)));const l=f(e,["config"]);return l!=null&&XM(l,t),t}function ZM(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&d(e,["batch","displayName"],s),t}function WM(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Je(n,s));const r=f(e,["src"]);r!=null&&d(t,["batch","inputConfig"],ox(n,r));const l=f(e,["config"]);return l!=null&&ZM(l,t),t}function jM(n,e){const t={},s=f(e,["name"]);return s!=null&&d(t,["_url","name"],la(n,s)),t}function ex(n,e){const t={},s=f(e,["name"]);return s!=null&&d(t,["_url","name"],la(n,s)),t}function tx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&d(e,["name"],s);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);return l!=null&&d(e,["error"],l),e}function nx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&d(e,["name"],s);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);return l!=null&&d(e,["error"],l),e}function ix(n,e){const t={},s=f(e,["contents"]);if(s!=null){let l=ep(n,s);Array.isArray(l)&&(l=l.map(c=>c)),d(t,["requests[]","request","content"],l)}const r=f(e,["config"]);return r!=null&&(d(t,["_self"],sx(r,t)),eM(t,{"requests[].*":"requests[].request.*"})),t}function sx(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&d(e,["requests[]","taskType"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&d(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&d(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function ox(n,e){const t={},s=f(e,["fileName"]);s!=null&&d(t,["file_name"],s);const r=f(e,["inlinedRequests"]);return r!=null&&d(t,["requests"],ix(n,r)),t}function rx(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&d(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function ax(n){const e={},t=f(n,["id"]);t!=null&&d(e,["id"],t);const s=f(n,["args"]);s!=null&&d(e,["args"],s);const r=f(n,["name"]);if(r!=null&&d(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function lx(n){const e={},t=f(n,["mode"]);t!=null&&d(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&d(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ux(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&d(t,["systemInstruction"],NS(tn(r)));const l=f(e,["temperature"]);l!=null&&d(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&d(s,["topP"],c);const m=f(e,["topK"]);m!=null&&d(s,["topK"],m);const y=f(e,["candidateCount"]);y!=null&&d(s,["candidateCount"],y);const p=f(e,["maxOutputTokens"]);p!=null&&d(s,["maxOutputTokens"],p);const T=f(e,["stopSequences"]);T!=null&&d(s,["stopSequences"],T);const E=f(e,["responseLogprobs"]);E!=null&&d(s,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&d(s,["logprobs"],S);const w=f(e,["presencePenalty"]);w!=null&&d(s,["presencePenalty"],w);const G=f(e,["frequencyPenalty"]);G!=null&&d(s,["frequencyPenalty"],G);const B=f(e,["seed"]);B!=null&&d(s,["seed"],B);const K=f(e,["responseMimeType"]);K!=null&&d(s,["responseMimeType"],K);const W=f(e,["responseSchema"]);W!=null&&d(s,["responseSchema"],tp(W));const ie=f(e,["responseJsonSchema"]);if(ie!=null&&d(s,["responseJsonSchema"],ie),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=f(e,["safetySettings"]);if(t!==void 0&&j!=null){let k=j;Array.isArray(k)&&(k=k.map(b=>Rx(b))),d(t,["safetySettings"],k)}const ue=f(e,["tools"]);if(t!==void 0&&ue!=null){let k=aa(ue);Array.isArray(k)&&(k=k.map(b=>wx(ra(b)))),d(t,["tools"],k)}const he=f(e,["toolConfig"]);if(t!==void 0&&he!=null&&d(t,["toolConfig"],Ix(he)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const fe=f(e,["cachedContent"]);t!==void 0&&fe!=null&&d(t,["cachedContent"],as(n,fe));const x=f(e,["responseModalities"]);x!=null&&d(s,["responseModalities"],x);const M=f(e,["mediaResolution"]);M!=null&&d(s,["mediaResolution"],M);const N=f(e,["speechConfig"]);if(N!=null&&d(s,["speechConfig"],np(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=f(e,["thinkingConfig"]);U!=null&&d(s,["thinkingConfig"],U);const P=f(e,["imageConfig"]);return P!=null&&d(s,["imageConfig"],px(P)),s}function cx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(p=>JM(p))),d(e,["candidates"],y)}const r=f(n,["modelVersion"]);r!=null&&d(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&d(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&d(e,["responseId"],c);const m=f(n,["usageMetadata"]);return m!=null&&d(e,["usageMetadata"],m),e}function fx(n,e){const t={},s=f(e,["name"]);return s!=null&&d(t,["_url","name"],la(n,s)),t}function dx(n,e){const t={},s=f(e,["name"]);return s!=null&&d(t,["_url","name"],la(n,s)),t}function hx(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&d(e,["enableWidget"],t),e}function mx(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&d(e,["timeRangeFilter"],t),e}function px(n){const e={},t=f(n,["aspectRatio"]);t!=null&&d(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&d(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function gx(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["request","model"],Je(n,s));const r=f(e,["contents"]);if(r!=null){let m=Fn(r);Array.isArray(m)&&(m=m.map(y=>NS(y))),d(t,["request","contents"],m)}const l=f(e,["metadata"]);l!=null&&d(t,["metadata"],l);const c=f(e,["config"]);return c!=null&&d(t,["request","generationConfig"],ux(n,c,f(t,["request"],{}))),t}function yx(n){const e={},t=f(n,["response"]);t!=null&&d(e,["response"],cx(t));const s=f(n,["error"]);return s!=null&&d(e,["error"],s),e}function _x(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);if(e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function Tx(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);e!==void 0&&r!=null&&d(e,["_query","pageToken"],r);const l=f(n,["filter"]);return e!==void 0&&l!=null&&d(e,["_query","filter"],l),t}function vx(n){const e={},t=f(n,["config"]);return t!=null&&_x(t,e),e}function Ex(n){const e={},t=f(n,["config"]);return t!=null&&Tx(t,e),e}function Sx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=f(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>xc(c))),d(e,["batchJobs"],l)}return e}function Ax(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=f(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>om(c))),d(e,["batchJobs"],l)}return e}function Cx(n){const e={},t=f(n,["mediaResolution"]);t!=null&&d(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&d(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&d(e,["fileData"],rx(l));const c=f(n,["functionCall"]);c!=null&&d(e,["functionCall"],ax(c));const m=f(n,["functionResponse"]);m!=null&&d(e,["functionResponse"],m);const y=f(n,["inlineData"]);y!=null&&d(e,["inlineData"],HM(y));const p=f(n,["text"]);p!=null&&d(e,["text"],p);const T=f(n,["thought"]);T!=null&&d(e,["thought"],T);const E=f(n,["thoughtSignature"]);E!=null&&d(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function Rx(n){const e={},t=f(n,["category"]);if(t!=null&&d(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&d(e,["threshold"],s),e}function Ix(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&d(e,["functionCallingConfig"],lx(t));const s=f(n,["retrievalConfig"]);return s!=null&&d(e,["retrievalConfig"],s),e}function wx(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(E=>E)),d(e,["functionDeclarations"],T)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&d(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&d(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&d(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const m=f(n,["googleMaps"]);m!=null&&d(e,["googleMaps"],hx(m));const y=f(n,["googleSearch"]);y!=null&&d(e,["googleSearch"],mx(y));const p=f(n,["urlContext"]);return p!=null&&d(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var os;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(os||(os={}));class zo{constructor(e,t,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,r)}init(e,t,s){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nx extends rs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new zo(os.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=nE(this.apiClient,e),s=t._url,r=de("{model}:batchGenerateContent",s),m=t.batch.inputConfig.requests,y=m.requests,p=[];for(const T of y){const E=Object.assign({},T);if(E.systemInstruction){const S=E.systemInstruction;delete E.systemInstruction;const w=E.request;w.systemInstruction=S,E.request=w}p.push(E)}return m.requests=p,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${r}`;else if(c)s.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=$M(this.apiClient,e);return m=de("batchPredictionJobs",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>om(T))}else{const p=nE(this.apiClient,e);return m=de("{model}:batchGenerateContent",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>xc(T))}}async createEmbeddingsInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=WM(this.apiClient,e);return l=de("{model}:asyncBatchEmbedContent",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>xc(y))}}async get(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=dx(this.apiClient,e);return m=de("batchPredictionJobs/{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>om(T))}else{const p=fx(this.apiClient,e);return m=de("batches/{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>xc(T))}}async cancel(e){var t,s,r,l;let c="",m={};if(this.apiClient.isVertexAI()){const y=YM(this.apiClient,e);c=de("batchPredictionJobs/{name}:cancel",y._url),m=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const y=zM(this.apiClient,e);c=de("batches/{name}:cancel",y._url),m=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=Ex(e);return m=de("batchPredictionJobs",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=Ax(T),S=new Wv;return Object.assign(S,E),S})}else{const p=vx(e);return m=de("batches",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=Sx(T),S=new Wv;return Object.assign(S,E),S})}}async delete(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=ex(this.apiClient,e);return m=de("batchPredictionJobs/{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>nx(T))}else{const p=jM(this.apiClient,e);return m=de("batches/{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>tx(T))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mx(n){const e={},t=f(n,["data"]);if(t!=null&&d(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function iE(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Wx(l))),d(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&d(e,["role"],s),e}function xx(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&d(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&d(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let T=Fn(c);Array.isArray(T)&&(T=T.map(E=>iE(E))),d(e,["contents"],T)}const m=f(n,["systemInstruction"]);e!==void 0&&m!=null&&d(e,["systemInstruction"],iE(tn(m)));const y=f(n,["tools"]);if(e!==void 0&&y!=null){let T=y;Array.isArray(T)&&(T=T.map(E=>eD(E))),d(e,["tools"],T)}const p=f(n,["toolConfig"]);if(e!==void 0&&p!=null&&d(e,["toolConfig"],jx(p)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function Dx(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&d(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&d(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let E=Fn(c);Array.isArray(E)&&(E=E.map(S=>S)),d(e,["contents"],E)}const m=f(n,["systemInstruction"]);e!==void 0&&m!=null&&d(e,["systemInstruction"],tn(m));const y=f(n,["tools"]);if(e!==void 0&&y!=null){let E=y;Array.isArray(E)&&(E=E.map(S=>tD(S))),d(e,["tools"],E)}const p=f(n,["toolConfig"]);e!==void 0&&p!=null&&d(e,["toolConfig"],p);const T=f(n,["kmsKeyName"]);return e!==void 0&&T!=null&&d(e,["encryption_spec","kmsKeyName"],T),t}function bx(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["model"],gS(n,s));const r=f(e,["config"]);return r!=null&&xx(r,t),t}function Vx(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["model"],gS(n,s));const r=f(e,["config"]);return r!=null&&Dx(r,t),t}function Px(n,e){const t={},s=f(e,["name"]);return s!=null&&d(t,["_url","name"],as(n,s)),t}function Ux(n,e){const t={},s=f(e,["name"]);return s!=null&&d(t,["_url","name"],as(n,s)),t}function Lx(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function kx(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function qx(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&d(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function Ox(n){const e={},t=f(n,["id"]);t!=null&&d(e,["id"],t);const s=f(n,["args"]);s!=null&&d(e,["args"],s);const r=f(n,["name"]);if(r!=null&&d(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Gx(n){const e={},t=f(n,["mode"]);t!=null&&d(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&d(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Bx(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&d(e,["description"],t);const s=f(n,["name"]);s!=null&&d(e,["name"],s);const r=f(n,["parameters"]);r!=null&&d(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&d(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&d(e,["response"],c);const m=f(n,["responseJsonSchema"]);return m!=null&&d(e,["responseJsonSchema"],m),e}function Fx(n,e){const t={},s=f(e,["name"]);return s!=null&&d(t,["_url","name"],as(n,s)),t}function Hx(n,e){const t={},s=f(e,["name"]);return s!=null&&d(t,["_url","name"],as(n,s)),t}function zx(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&d(e,["enableWidget"],t),e}function Yx(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&d(e,["timeRangeFilter"],t),e}function Jx(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),t}function Kx(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),t}function Qx(n){const e={},t=f(n,["config"]);return t!=null&&Jx(t,e),e}function Xx(n){const e={},t=f(n,["config"]);return t!=null&&Kx(t,e),e}function $x(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["cachedContents"],l)}return e}function Zx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["cachedContents"],l)}return e}function Wx(n){const e={},t=f(n,["mediaResolution"]);t!=null&&d(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&d(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&d(e,["fileData"],qx(l));const c=f(n,["functionCall"]);c!=null&&d(e,["functionCall"],Ox(c));const m=f(n,["functionResponse"]);m!=null&&d(e,["functionResponse"],m);const y=f(n,["inlineData"]);y!=null&&d(e,["inlineData"],Mx(y));const p=f(n,["text"]);p!=null&&d(e,["text"],p);const T=f(n,["thought"]);T!=null&&d(e,["thought"],T);const E=f(n,["thoughtSignature"]);E!=null&&d(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function jx(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&d(e,["functionCallingConfig"],Gx(t));const s=f(n,["retrievalConfig"]);return s!=null&&d(e,["retrievalConfig"],s),e}function eD(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(E=>E)),d(e,["functionDeclarations"],T)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&d(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&d(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&d(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const m=f(n,["googleMaps"]);m!=null&&d(e,["googleMaps"],zx(m));const y=f(n,["googleSearch"]);y!=null&&d(e,["googleSearch"],Yx(y));const p=f(n,["urlContext"]);return p!=null&&d(e,["urlContext"],p),e}function tD(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>Bx(S))),d(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&d(e,["retrieval"],s);const r=f(n,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);const l=f(n,["computerUse"]);if(l!=null&&d(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(n,["codeExecution"]);c!=null&&d(e,["codeExecution"],c);const m=f(n,["enterpriseWebSearch"]);m!=null&&d(e,["enterpriseWebSearch"],m);const y=f(n,["googleMaps"]);y!=null&&d(e,["googleMaps"],y);const p=f(n,["googleSearch"]);p!=null&&d(e,["googleSearch"],p);const T=f(n,["urlContext"]);return T!=null&&d(e,["urlContext"],T),e}function nD(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&d(e,["expireTime"],r),t}function iD(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&d(e,["expireTime"],r),t}function sD(n,e){const t={},s=f(e,["name"]);s!=null&&d(t,["_url","name"],as(n,s));const r=f(e,["config"]);return r!=null&&nD(r,t),t}function oD(n,e){const t={},s=f(e,["name"]);s!=null&&d(t,["_url","name"],as(n,s));const r=f(e,["config"]);return r!=null&&iD(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rD extends rs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new zo(os.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=Vx(this.apiClient,e);return m=de("cachedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>T)}else{const p=bx(this.apiClient,e);return m=de("cachedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>T)}}async get(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=Hx(this.apiClient,e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>T)}else{const p=Fx(this.apiClient,e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>T)}}async delete(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=Ux(this.apiClient,e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=kx(T),S=new $v;return Object.assign(S,E),S})}else{const p=Px(this.apiClient,e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=Lx(T),S=new $v;return Object.assign(S,E),S})}}async update(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=oD(this.apiClient,e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>T)}else{const p=sD(this.apiClient,e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>T)}}async listInternal(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=Xx(e);return m=de("cachedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=Zx(T),S=new Zv;return Object.assign(S,E),S})}else{const p=Qx(e);return m=de("cachedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=$x(T),S=new Zv;return Object.assign(S,E),S})}}}function sE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function lt(n){return this instanceof lt?(this.v=n,this):new lt(n)}function zr(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),m("next"),m("throw"),m("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(w){return function(G){return Promise.resolve(G).then(w,E)}}function m(w,G){s[w]&&(r[w]=function(B){return new Promise(function(K,W){l.push([w,B,K,W])>1||y(w,B)})},G&&(r[w]=G(r[w])))}function y(w,G){try{p(s[w](G))}catch(B){S(l[0][3],B)}}function p(w){w.value instanceof lt?Promise.resolve(w.value.v).then(T,E):S(l[0][2],w)}function T(w){y("next",w)}function E(w){y("throw",w)}function S(w,G){w(G),l.shift(),l.length&&y(l[0][0],l[0][1])}}function Rl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof sE=="function"?sE(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(c){return new Promise(function(m,y){c=n[l](c),r(m,y,c.done,c.value)})}}function r(l,c,m,y){Promise.resolve(y).then(function(p){l({value:p,done:m})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aD(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:MS(t)}function MS(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function lD(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function oE(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const r=[];let l=!0;for(;s<t&&n[s].role==="model";)r.push(n[s]),l&&!MS(n[s])&&(l=!1),s++;l?e.push(...r):e.pop()}return e}class uD{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new cD(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class cD{constructor(e,t,s,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),lD(l)}async sendMessage(e){var t;await this.sendPromise;const s=tn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,m;const y=await r,p=(c=(l=y.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,T=y.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];T!=null&&(S=(m=T.slice(E))!==null&&m!==void 0?m:[]);const w=p?[p]:[];this.recordHistory(s,w,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const s=tn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?oE(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,r;return zr(this,arguments,function*(){var c,m,y,p;const T=[];try{for(var E=!0,S=Rl(e),w;w=yield lt(S.next()),c=w.done,!c;E=!0){p=w.value,E=!1;const G=p;if(aD(G)){const B=(r=(s=G.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content;B!==void 0&&T.push(B)}yield yield lt(G)}}catch(G){m={error:G}}finally{try{!E&&!c&&(y=S.return)&&(yield lt(y.call(S)))}finally{if(m)throw m.error}}this.recordHistory(t,T)})}recordHistory(e,t,s){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...oE(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,pf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fD(n){const e={},t=f(n,["file"]);return t!=null&&d(e,["file"],t),e}function dD(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function hD(n){const e={},t=f(n,["name"]);return t!=null&&d(e,["_url","file"],SS(t)),e}function mD(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function pD(n){const e={},t=f(n,["name"]);return t!=null&&d(e,["_url","file"],SS(t)),e}function gD(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),t}function yD(n){const e={},t=f(n,["config"]);return t!=null&&gD(t,e),e}function _D(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=f(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TD extends rs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new zo(os.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=yD(e);return l=de("files",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),r.then(y=>{const p=_D(y),T=new AM;return Object.assign(T,p),T})}}async createInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=fD(e);return l=de("upload/v1beta/files",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const p=dD(y),T=new CM;return Object.assign(T,p),T})}}async get(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=pD(e);return l=de("files/{file}",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=hD(e);return l=de("files/{file}",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),r.then(y=>{const p=mD(y),T=new RM;return Object.assign(T,p),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dc(n){const e={},t=f(n,["data"]);if(t!=null&&d(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function vD(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>LD(l))),d(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&d(e,["role"],s),e}function ED(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&d(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function SD(n){const e={},t=f(n,["id"]);t!=null&&d(e,["id"],t);const s=f(n,["args"]);s!=null&&d(e,["args"],s);const r=f(n,["name"]);if(r!=null&&d(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function AD(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&d(e,["description"],t);const s=f(n,["name"]);s!=null&&d(e,["name"],s);const r=f(n,["parameters"]);r!=null&&d(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&d(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&d(e,["response"],c);const m=f(n,["responseJsonSchema"]);return m!=null&&d(e,["responseJsonSchema"],m),e}function CD(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&d(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&d(e,["responseJsonSchema"],s);const r=f(n,["audioTimestamp"]);r!=null&&d(e,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&d(e,["candidateCount"],l);const c=f(n,["enableAffectiveDialog"]);c!=null&&d(e,["enableAffectiveDialog"],c);const m=f(n,["frequencyPenalty"]);m!=null&&d(e,["frequencyPenalty"],m);const y=f(n,["logprobs"]);y!=null&&d(e,["logprobs"],y);const p=f(n,["maxOutputTokens"]);p!=null&&d(e,["maxOutputTokens"],p);const T=f(n,["mediaResolution"]);T!=null&&d(e,["mediaResolution"],T);const E=f(n,["presencePenalty"]);E!=null&&d(e,["presencePenalty"],E);const S=f(n,["responseLogprobs"]);S!=null&&d(e,["responseLogprobs"],S);const w=f(n,["responseMimeType"]);w!=null&&d(e,["responseMimeType"],w);const G=f(n,["responseModalities"]);G!=null&&d(e,["responseModalities"],G);const B=f(n,["responseSchema"]);B!=null&&d(e,["responseSchema"],B);const K=f(n,["routingConfig"]);K!=null&&d(e,["routingConfig"],K);const W=f(n,["seed"]);W!=null&&d(e,["seed"],W);const ie=f(n,["speechConfig"]);ie!=null&&d(e,["speechConfig"],xS(ie));const j=f(n,["stopSequences"]);j!=null&&d(e,["stopSequences"],j);const ue=f(n,["temperature"]);ue!=null&&d(e,["temperature"],ue);const he=f(n,["thinkingConfig"]);he!=null&&d(e,["thinkingConfig"],he);const fe=f(n,["topK"]);fe!=null&&d(e,["topK"],fe);const x=f(n,["topP"]);if(x!=null&&d(e,["topP"],x),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function RD(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&d(e,["enableWidget"],t),e}function ID(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&d(e,["timeRangeFilter"],t),e}function wD(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig"],s);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const m=f(n,["topK"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","topK"],m);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","maxOutputTokens"],y);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","mediaResolution"],p);const T=f(n,["seed"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","seed"],T);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","speechConfig"],ip(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&d(e,["setup","generationConfig","thinkingConfig"],S);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],w);const G=f(n,["systemInstruction"]);e!==void 0&&G!=null&&d(e,["setup","systemInstruction"],vD(tn(G)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let fe=aa(B);Array.isArray(fe)&&(fe=fe.map(x=>qD(ra(x)))),d(e,["setup","tools"],fe)}const K=f(n,["sessionResumption"]);e!==void 0&&K!=null&&d(e,["setup","sessionResumption"],kD(K));const W=f(n,["inputAudioTranscription"]);e!==void 0&&W!=null&&d(e,["setup","inputAudioTranscription"],W);const ie=f(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&d(e,["setup","outputAudioTranscription"],ie);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&d(e,["setup","realtimeInputConfig"],j);const ue=f(n,["contextWindowCompression"]);e!==void 0&&ue!=null&&d(e,["setup","contextWindowCompression"],ue);const he=f(n,["proactivity"]);return e!==void 0&&he!=null&&d(e,["setup","proactivity"],he),t}function ND(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig"],CD(s));const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const m=f(n,["topK"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","topK"],m);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","maxOutputTokens"],y);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","mediaResolution"],p);const T=f(n,["seed"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","seed"],T);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","speechConfig"],xS(ip(E)));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&d(e,["setup","generationConfig","thinkingConfig"],S);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],w);const G=f(n,["systemInstruction"]);e!==void 0&&G!=null&&d(e,["setup","systemInstruction"],tn(G));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let fe=aa(B);Array.isArray(fe)&&(fe=fe.map(x=>OD(ra(x)))),d(e,["setup","tools"],fe)}const K=f(n,["sessionResumption"]);e!==void 0&&K!=null&&d(e,["setup","sessionResumption"],K);const W=f(n,["inputAudioTranscription"]);e!==void 0&&W!=null&&d(e,["setup","inputAudioTranscription"],W);const ie=f(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&d(e,["setup","outputAudioTranscription"],ie);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&d(e,["setup","realtimeInputConfig"],j);const ue=f(n,["contextWindowCompression"]);e!==void 0&&ue!=null&&d(e,["setup","contextWindowCompression"],ue);const he=f(n,["proactivity"]);return e!==void 0&&he!=null&&d(e,["setup","proactivity"],he),t}function MD(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["setup","model"],Je(n,s));const r=f(e,["config"]);return r!=null&&d(t,["config"],wD(r,t)),t}function xD(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["setup","model"],Je(n,s));const r=f(e,["config"]);return r!=null&&d(t,["config"],ND(r,t)),t}function DD(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&d(e,["musicGenerationConfig"],t),e}function bD(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),d(e,["weightedPrompts"],s)}return e}function VD(n){const e={},t=f(n,["media"]);if(t!=null){let p=yS(t);Array.isArray(p)&&(p=p.map(T=>Dc(T))),d(e,["mediaChunks"],p)}const s=f(n,["audio"]);s!=null&&d(e,["audio"],Dc(TS(s)));const r=f(n,["audioStreamEnd"]);r!=null&&d(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&d(e,["video"],Dc(_S(l)));const c=f(n,["text"]);c!=null&&d(e,["text"],c);const m=f(n,["activityStart"]);m!=null&&d(e,["activityStart"],m);const y=f(n,["activityEnd"]);return y!=null&&d(e,["activityEnd"],y),e}function PD(n){const e={},t=f(n,["media"]);if(t!=null){let p=yS(t);Array.isArray(p)&&(p=p.map(T=>T)),d(e,["mediaChunks"],p)}const s=f(n,["audio"]);s!=null&&d(e,["audio"],TS(s));const r=f(n,["audioStreamEnd"]);r!=null&&d(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&d(e,["video"],_S(l));const c=f(n,["text"]);c!=null&&d(e,["text"],c);const m=f(n,["activityStart"]);m!=null&&d(e,["activityStart"],m);const y=f(n,["activityEnd"]);return y!=null&&d(e,["activityEnd"],y),e}function UD(n){const e={},t=f(n,["setupComplete"]);t!=null&&d(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&d(e,["serverContent"],s);const r=f(n,["toolCall"]);r!=null&&d(e,["toolCall"],r);const l=f(n,["toolCallCancellation"]);l!=null&&d(e,["toolCallCancellation"],l);const c=f(n,["usageMetadata"]);c!=null&&d(e,["usageMetadata"],GD(c));const m=f(n,["goAway"]);m!=null&&d(e,["goAway"],m);const y=f(n,["sessionResumptionUpdate"]);return y!=null&&d(e,["sessionResumptionUpdate"],y),e}function LD(n){const e={},t=f(n,["mediaResolution"]);t!=null&&d(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&d(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&d(e,["fileData"],ED(l));const c=f(n,["functionCall"]);c!=null&&d(e,["functionCall"],SD(c));const m=f(n,["functionResponse"]);m!=null&&d(e,["functionResponse"],m);const y=f(n,["inlineData"]);y!=null&&d(e,["inlineData"],Dc(y));const p=f(n,["text"]);p!=null&&d(e,["text"],p);const T=f(n,["thought"]);T!=null&&d(e,["thought"],T);const E=f(n,["thoughtSignature"]);E!=null&&d(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function kD(n){const e={},t=f(n,["handle"]);if(t!=null&&d(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function xS(n){const e={},t=f(n,["languageCode"]);t!=null&&d(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&d(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function qD(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(E=>E)),d(e,["functionDeclarations"],T)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&d(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&d(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&d(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const m=f(n,["googleMaps"]);m!=null&&d(e,["googleMaps"],RD(m));const y=f(n,["googleSearch"]);y!=null&&d(e,["googleSearch"],ID(y));const p=f(n,["urlContext"]);return p!=null&&d(e,["urlContext"],p),e}function OD(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>AD(S))),d(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&d(e,["retrieval"],s);const r=f(n,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);const l=f(n,["computerUse"]);if(l!=null&&d(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(n,["codeExecution"]);c!=null&&d(e,["codeExecution"],c);const m=f(n,["enterpriseWebSearch"]);m!=null&&d(e,["enterpriseWebSearch"],m);const y=f(n,["googleMaps"]);y!=null&&d(e,["googleMaps"],y);const p=f(n,["googleSearch"]);p!=null&&d(e,["googleSearch"],p);const T=f(n,["urlContext"]);return T!=null&&d(e,["urlContext"],T),e}function GD(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&d(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&d(e,["cachedContentTokenCount"],s);const r=f(n,["candidatesTokenCount"]);r!=null&&d(e,["responseTokenCount"],r);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&d(e,["toolUsePromptTokenCount"],l);const c=f(n,["thoughtsTokenCount"]);c!=null&&d(e,["thoughtsTokenCount"],c);const m=f(n,["totalTokenCount"]);m!=null&&d(e,["totalTokenCount"],m);const y=f(n,["promptTokensDetails"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(G=>G)),d(e,["promptTokensDetails"],w)}const p=f(n,["cacheTokensDetails"]);if(p!=null){let w=p;Array.isArray(w)&&(w=w.map(G=>G)),d(e,["cacheTokensDetails"],w)}const T=f(n,["candidatesTokensDetails"]);if(T!=null){let w=T;Array.isArray(w)&&(w=w.map(G=>G)),d(e,["responseTokensDetails"],w)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(G=>G)),d(e,["toolUsePromptTokensDetails"],w)}const S=f(n,["trafficType"]);return S!=null&&d(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BD(n){const e={},t=f(n,["data"]);if(t!=null&&d(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function FD(n){const e={},t=f(n,["content"]);t!=null&&d(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&d(e,["citationMetadata"],HD(s));const r=f(n,["tokenCount"]);r!=null&&d(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&d(e,["finishReason"],l);const c=f(n,["avgLogprobs"]);c!=null&&d(e,["avgLogprobs"],c);const m=f(n,["groundingMetadata"]);m!=null&&d(e,["groundingMetadata"],m);const y=f(n,["index"]);y!=null&&d(e,["index"],y);const p=f(n,["logprobsResult"]);p!=null&&d(e,["logprobsResult"],p);const T=f(n,["safetyRatings"]);if(T!=null){let S=T;Array.isArray(S)&&(S=S.map(w=>w)),d(e,["safetyRatings"],S)}const E=f(n,["urlContextMetadata"]);return E!=null&&d(e,["urlContextMetadata"],E),e}function HD(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),d(e,["citations"],s)}return e}function zD(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Je(n,s));const r=f(e,["contents"]);if(r!=null){let l=Fn(r);Array.isArray(l)&&(l=l.map(c=>c)),d(t,["contents"],l)}return t}function YD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),d(e,["tokensInfo"],r)}return e}function JD(n){const e={},t=f(n,["values"]);t!=null&&d(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&d(e,["statistics"],KD(s)),e}function KD(n){const e={},t=f(n,["truncated"]);t!=null&&d(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&d(e,["tokenCount"],s),e}function gf(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>n2(l))),d(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&d(e,["role"],s),e}function QD(n){const e={},t=f(n,["controlType"]);t!=null&&d(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&d(e,["computeControl"],s),e}function XD(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function $D(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&d(e,["systemInstruction"],tn(s));const r=f(n,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(m=>US(m))),d(e,["tools"],c)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&d(e,["generationConfig"],Bb(l)),t}function ZD(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Je(n,s));const r=f(e,["contents"]);if(r!=null){let c=Fn(r);Array.isArray(c)&&(c=c.map(m=>gf(m))),d(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&XD(l),t}function WD(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Je(n,s));const r=f(e,["contents"]);if(r!=null){let c=Fn(r);Array.isArray(c)&&(c=c.map(m=>m)),d(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&$D(l,t),t}function jD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&d(e,["totalTokens"],s);const r=f(n,["cachedContentTokenCount"]);return r!=null&&d(e,["cachedContentTokenCount"],r),e}function eb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&d(e,["totalTokens"],s),e}function tb(n,e){const t={},s=f(e,["model"]);return s!=null&&d(t,["_url","name"],Je(n,s)),t}function nb(n,e){const t={},s=f(e,["model"]);return s!=null&&d(t,["_url","name"],Je(n,s)),t}function ib(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function sb(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function ob(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&d(e,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&d(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&d(e,["parameters","aspectRatio"],c);const m=f(n,["guidanceScale"]);e!==void 0&&m!=null&&d(e,["parameters","guidanceScale"],m);const y=f(n,["seed"]);e!==void 0&&y!=null&&d(e,["parameters","seed"],y);const p=f(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&d(e,["parameters","safetySetting"],p);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&d(e,["parameters","personGeneration"],T);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&d(e,["parameters","includeSafetyAttributes"],E);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&d(e,["parameters","includeRaiReason"],S);const w=f(n,["language"]);e!==void 0&&w!=null&&d(e,["parameters","language"],w);const G=f(n,["outputMimeType"]);e!==void 0&&G!=null&&d(e,["parameters","outputOptions","mimeType"],G);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&d(e,["parameters","outputOptions","compressionQuality"],B);const K=f(n,["addWatermark"]);e!==void 0&&K!=null&&d(e,["parameters","addWatermark"],K);const W=f(n,["labels"]);e!==void 0&&W!=null&&d(e,["labels"],W);const ie=f(n,["editMode"]);e!==void 0&&ie!=null&&d(e,["parameters","editMode"],ie);const j=f(n,["baseSteps"]);return e!==void 0&&j!=null&&d(e,["parameters","editConfig","baseSteps"],j),t}function rb(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Je(n,s));const r=f(e,["prompt"]);r!=null&&d(t,["instances[0]","prompt"],r);const l=f(e,["referenceImages"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(y=>l2(y))),d(t,["instances[0]","referenceImages"],m)}const c=f(e,["config"]);return c!=null&&ob(c,t),t}function ab(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>yf(l))),d(e,["generatedImages"],r)}return e}function lb(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&d(e,["requests[]","taskType"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&d(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&d(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function ub(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&d(e,["instances[]","task_type"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&d(e,["instances[]","title"],r);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&d(e,["parameters","outputDimensionality"],l);const c=f(n,["mimeType"]);e!==void 0&&c!=null&&d(e,["instances[]","mimeType"],c);const m=f(n,["autoTruncate"]);return e!==void 0&&m!=null&&d(e,["parameters","autoTruncate"],m),t}function cb(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Je(n,s));const r=f(e,["contents"]);if(r!=null){let m=ep(n,r);Array.isArray(m)&&(m=m.map(y=>y)),d(t,["requests[]","content"],m)}const l=f(e,["config"]);l!=null&&lb(l,t);const c=f(e,["model"]);return c!==void 0&&d(t,["requests[]","model"],Je(n,c)),t}function fb(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Je(n,s));const r=f(e,["contents"]);if(r!=null){let c=ep(n,r);Array.isArray(c)&&(c=c.map(m=>m)),d(t,["instances[]","content"],c)}const l=f(e,["config"]);return l!=null&&ub(l,t),t}function db(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&d(e,["metadata"],r),e}function hb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>JD(c))),d(e,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&d(e,["metadata"],r),e}function mb(n){const e={},t=f(n,["endpoint"]);t!=null&&d(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&d(e,["deployedModelId"],s),e}function pb(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&d(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function gb(n){const e={},t=f(n,["id"]);t!=null&&d(e,["id"],t);const s=f(n,["args"]);s!=null&&d(e,["args"],s);const r=f(n,["name"]);if(r!=null&&d(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function yb(n){const e={},t=f(n,["mode"]);t!=null&&d(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&d(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function _b(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&d(e,["description"],t);const s=f(n,["name"]);s!=null&&d(e,["name"],s);const r=f(n,["parameters"]);r!=null&&d(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&d(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&d(e,["response"],c);const m=f(n,["responseJsonSchema"]);return m!=null&&d(e,["responseJsonSchema"],m),e}function Tb(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&d(t,["systemInstruction"],gf(tn(r)));const l=f(e,["temperature"]);l!=null&&d(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&d(s,["topP"],c);const m=f(e,["topK"]);m!=null&&d(s,["topK"],m);const y=f(e,["candidateCount"]);y!=null&&d(s,["candidateCount"],y);const p=f(e,["maxOutputTokens"]);p!=null&&d(s,["maxOutputTokens"],p);const T=f(e,["stopSequences"]);T!=null&&d(s,["stopSequences"],T);const E=f(e,["responseLogprobs"]);E!=null&&d(s,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&d(s,["logprobs"],S);const w=f(e,["presencePenalty"]);w!=null&&d(s,["presencePenalty"],w);const G=f(e,["frequencyPenalty"]);G!=null&&d(s,["frequencyPenalty"],G);const B=f(e,["seed"]);B!=null&&d(s,["seed"],B);const K=f(e,["responseMimeType"]);K!=null&&d(s,["responseMimeType"],K);const W=f(e,["responseSchema"]);W!=null&&d(s,["responseSchema"],tp(W));const ie=f(e,["responseJsonSchema"]);if(ie!=null&&d(s,["responseJsonSchema"],ie),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=f(e,["safetySettings"]);if(t!==void 0&&j!=null){let k=j;Array.isArray(k)&&(k=k.map(b=>u2(b))),d(t,["safetySettings"],k)}const ue=f(e,["tools"]);if(t!==void 0&&ue!=null){let k=aa(ue);Array.isArray(k)&&(k=k.map(b=>g2(ra(b)))),d(t,["tools"],k)}const he=f(e,["toolConfig"]);if(t!==void 0&&he!=null&&d(t,["toolConfig"],p2(he)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const fe=f(e,["cachedContent"]);t!==void 0&&fe!=null&&d(t,["cachedContent"],as(n,fe));const x=f(e,["responseModalities"]);x!=null&&d(s,["responseModalities"],x);const M=f(e,["mediaResolution"]);M!=null&&d(s,["mediaResolution"],M);const N=f(e,["speechConfig"]);if(N!=null&&d(s,["speechConfig"],np(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=f(e,["thinkingConfig"]);U!=null&&d(s,["thinkingConfig"],U);const P=f(e,["imageConfig"]);return P!=null&&d(s,["imageConfig"],Jb(P)),s}function vb(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&d(t,["systemInstruction"],tn(r));const l=f(e,["temperature"]);l!=null&&d(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&d(s,["topP"],c);const m=f(e,["topK"]);m!=null&&d(s,["topK"],m);const y=f(e,["candidateCount"]);y!=null&&d(s,["candidateCount"],y);const p=f(e,["maxOutputTokens"]);p!=null&&d(s,["maxOutputTokens"],p);const T=f(e,["stopSequences"]);T!=null&&d(s,["stopSequences"],T);const E=f(e,["responseLogprobs"]);E!=null&&d(s,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&d(s,["logprobs"],S);const w=f(e,["presencePenalty"]);w!=null&&d(s,["presencePenalty"],w);const G=f(e,["frequencyPenalty"]);G!=null&&d(s,["frequencyPenalty"],G);const B=f(e,["seed"]);B!=null&&d(s,["seed"],B);const K=f(e,["responseMimeType"]);K!=null&&d(s,["responseMimeType"],K);const W=f(e,["responseSchema"]);W!=null&&d(s,["responseSchema"],tp(W));const ie=f(e,["responseJsonSchema"]);ie!=null&&d(s,["responseJsonSchema"],ie);const j=f(e,["routingConfig"]);j!=null&&d(s,["routingConfig"],j);const ue=f(e,["modelSelectionConfig"]);ue!=null&&d(s,["modelConfig"],ue);const he=f(e,["safetySettings"]);if(t!==void 0&&he!=null){let Y=he;Array.isArray(Y)&&(Y=Y.map(oe=>oe)),d(t,["safetySettings"],Y)}const fe=f(e,["tools"]);if(t!==void 0&&fe!=null){let Y=aa(fe);Array.isArray(Y)&&(Y=Y.map(oe=>US(ra(oe)))),d(t,["tools"],Y)}const x=f(e,["toolConfig"]);t!==void 0&&x!=null&&d(t,["toolConfig"],x);const M=f(e,["labels"]);t!==void 0&&M!=null&&d(t,["labels"],M);const N=f(e,["cachedContent"]);t!==void 0&&N!=null&&d(t,["cachedContent"],as(n,N));const U=f(e,["responseModalities"]);U!=null&&d(s,["responseModalities"],U);const P=f(e,["mediaResolution"]);P!=null&&d(s,["mediaResolution"],P);const k=f(e,["speechConfig"]);k!=null&&d(s,["speechConfig"],PS(np(k)));const b=f(e,["audioTimestamp"]);b!=null&&d(s,["audioTimestamp"],b);const re=f(e,["thinkingConfig"]);re!=null&&d(s,["thinkingConfig"],re);const Se=f(e,["imageConfig"]);return Se!=null&&d(s,["imageConfig"],Kb(Se)),s}function rE(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Je(n,s));const r=f(e,["contents"]);if(r!=null){let c=Fn(r);Array.isArray(c)&&(c=c.map(m=>gf(m))),d(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&d(t,["generationConfig"],Tb(n,l,t)),t}function aE(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Je(n,s));const r=f(e,["contents"]);if(r!=null){let c=Fn(r);Array.isArray(c)&&(c=c.map(m=>m)),d(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&d(t,["generationConfig"],vb(n,l,t)),t}function lE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(p=>FD(p))),d(e,["candidates"],y)}const r=f(n,["modelVersion"]);r!=null&&d(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&d(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&d(e,["responseId"],c);const m=f(n,["usageMetadata"]);return m!=null&&d(e,["usageMetadata"],m),e}function uE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(T=>T)),d(e,["candidates"],p)}const r=f(n,["createTime"]);r!=null&&d(e,["createTime"],r);const l=f(n,["modelVersion"]);l!=null&&d(e,["modelVersion"],l);const c=f(n,["promptFeedback"]);c!=null&&d(e,["promptFeedback"],c);const m=f(n,["responseId"]);m!=null&&d(e,["responseId"],m);const y=f(n,["usageMetadata"]);return y!=null&&d(e,["usageMetadata"],y),e}function Eb(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);const r=f(n,["aspectRatio"]);e!==void 0&&r!=null&&d(e,["parameters","aspectRatio"],r);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&d(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&d(e,["parameters","safetySetting"],c);const m=f(n,["personGeneration"]);e!==void 0&&m!=null&&d(e,["parameters","personGeneration"],m);const y=f(n,["includeSafetyAttributes"]);e!==void 0&&y!=null&&d(e,["parameters","includeSafetyAttributes"],y);const p=f(n,["includeRaiReason"]);e!==void 0&&p!=null&&d(e,["parameters","includeRaiReason"],p);const T=f(n,["language"]);e!==void 0&&T!=null&&d(e,["parameters","language"],T);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&d(e,["parameters","outputOptions","mimeType"],E);const S=f(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&d(e,["parameters","outputOptions","compressionQuality"],S),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=f(n,["imageSize"]);if(e!==void 0&&w!=null&&d(e,["parameters","sampleImageSize"],w),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function Sb(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&d(e,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&d(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&d(e,["parameters","aspectRatio"],c);const m=f(n,["guidanceScale"]);e!==void 0&&m!=null&&d(e,["parameters","guidanceScale"],m);const y=f(n,["seed"]);e!==void 0&&y!=null&&d(e,["parameters","seed"],y);const p=f(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&d(e,["parameters","safetySetting"],p);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&d(e,["parameters","personGeneration"],T);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&d(e,["parameters","includeSafetyAttributes"],E);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&d(e,["parameters","includeRaiReason"],S);const w=f(n,["language"]);e!==void 0&&w!=null&&d(e,["parameters","language"],w);const G=f(n,["outputMimeType"]);e!==void 0&&G!=null&&d(e,["parameters","outputOptions","mimeType"],G);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&d(e,["parameters","outputOptions","compressionQuality"],B);const K=f(n,["addWatermark"]);e!==void 0&&K!=null&&d(e,["parameters","addWatermark"],K);const W=f(n,["labels"]);e!==void 0&&W!=null&&d(e,["labels"],W);const ie=f(n,["imageSize"]);e!==void 0&&ie!=null&&d(e,["parameters","sampleImageSize"],ie);const j=f(n,["enhancePrompt"]);return e!==void 0&&j!=null&&d(e,["parameters","enhancePrompt"],j),t}function Ab(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Je(n,s));const r=f(e,["prompt"]);r!=null&&d(t,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&Eb(l,t),t}function Cb(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Je(n,s));const r=f(e,["prompt"]);r!=null&&d(t,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&Sb(l,t),t}function Rb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>kb(c))),d(e,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&d(e,["positivePromptSafetyAttributes"],bS(r)),e}function Ib(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>yf(c))),d(e,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&d(e,["positivePromptSafetyAttributes"],VS(r)),e}function wb(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=f(n,["durationSeconds"]);if(e!==void 0&&r!=null&&d(e,["parameters","durationSeconds"],r),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&d(e,["parameters","aspectRatio"],l);const c=f(n,["resolution"]);e!==void 0&&c!=null&&d(e,["parameters","resolution"],c);const m=f(n,["personGeneration"]);if(e!==void 0&&m!=null&&d(e,["parameters","personGeneration"],m),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=f(n,["negativePrompt"]);e!==void 0&&y!=null&&d(e,["parameters","negativePrompt"],y);const p=f(n,["enhancePrompt"]);if(e!==void 0&&p!=null&&d(e,["parameters","enhancePrompt"],p),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const T=f(n,["lastFrame"]);e!==void 0&&T!=null&&d(e,["instances[0]","lastFrame"],_f(T));const E=f(n,["referenceImages"]);if(e!==void 0&&E!=null){let S=E;Array.isArray(S)&&(S=S.map(w=>M2(w))),d(e,["instances[0]","referenceImages"],S)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function Nb(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);const r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const l=f(n,["fps"]);e!==void 0&&l!=null&&d(e,["parameters","fps"],l);const c=f(n,["durationSeconds"]);e!==void 0&&c!=null&&d(e,["parameters","durationSeconds"],c);const m=f(n,["seed"]);e!==void 0&&m!=null&&d(e,["parameters","seed"],m);const y=f(n,["aspectRatio"]);e!==void 0&&y!=null&&d(e,["parameters","aspectRatio"],y);const p=f(n,["resolution"]);e!==void 0&&p!=null&&d(e,["parameters","resolution"],p);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&d(e,["parameters","personGeneration"],T);const E=f(n,["pubsubTopic"]);e!==void 0&&E!=null&&d(e,["parameters","pubsubTopic"],E);const S=f(n,["negativePrompt"]);e!==void 0&&S!=null&&d(e,["parameters","negativePrompt"],S);const w=f(n,["enhancePrompt"]);e!==void 0&&w!=null&&d(e,["parameters","enhancePrompt"],w);const G=f(n,["generateAudio"]);e!==void 0&&G!=null&&d(e,["parameters","generateAudio"],G);const B=f(n,["lastFrame"]);e!==void 0&&B!=null&&d(e,["instances[0]","lastFrame"],ii(B));const K=f(n,["referenceImages"]);if(e!==void 0&&K!=null){let j=K;Array.isArray(j)&&(j=j.map(ue=>x2(ue))),d(e,["instances[0]","referenceImages"],j)}const W=f(n,["mask"]);e!==void 0&&W!=null&&d(e,["instances[0]","mask"],N2(W));const ie=f(n,["compressionQuality"]);return e!==void 0&&ie!=null&&d(e,["parameters","compressionQuality"],ie),t}function Mb(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const s=f(n,["metadata"]);s!=null&&d(e,["metadata"],s);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&d(e,["response"],Vb(c)),e}function xb(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const s=f(n,["metadata"]);s!=null&&d(e,["metadata"],s);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["response"]);return c!=null&&d(e,["response"],Pb(c)),e}function Db(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Je(n,s));const r=f(e,["prompt"]);r!=null&&d(t,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&d(t,["instances[0]","image"],_f(l));const c=f(e,["video"]);c!=null&&d(t,["instances[0]","video"],LS(c));const m=f(e,["source"]);m!=null&&Ub(m,t);const y=f(e,["config"]);return y!=null&&wb(y,t),t}function bb(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Je(n,s));const r=f(e,["prompt"]);r!=null&&d(t,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&d(t,["instances[0]","image"],ii(l));const c=f(e,["video"]);c!=null&&d(t,["instances[0]","video"],kS(c));const m=f(e,["source"]);m!=null&&Lb(m,t);const y=f(e,["config"]);return y!=null&&Nb(y,t),t}function Vb(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>Ob(c))),d(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&d(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function Pb(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>Gb(c))),d(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&d(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function Ub(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],_f(r));const l=f(n,["video"]);return e!==void 0&&l!=null&&d(e,["instances[0]","video"],LS(l)),t}function Lb(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],ii(r));const l=f(n,["video"]);return e!==void 0&&l!=null&&d(e,["instances[0]","video"],kS(l)),t}function kb(n){const e={},t=f(n,["_self"]);t!=null&&d(e,["image"],Qb(t));const s=f(n,["raiFilteredReason"]);s!=null&&d(e,["raiFilteredReason"],s);const r=f(n,["_self"]);return r!=null&&d(e,["safetyAttributes"],bS(r)),e}function yf(n){const e={},t=f(n,["_self"]);t!=null&&d(e,["image"],DS(t));const s=f(n,["raiFilteredReason"]);s!=null&&d(e,["raiFilteredReason"],s);const r=f(n,["_self"]);r!=null&&d(e,["safetyAttributes"],VS(r));const l=f(n,["prompt"]);return l!=null&&d(e,["enhancedPrompt"],l),e}function qb(n){const e={},t=f(n,["_self"]);t!=null&&d(e,["mask"],DS(t));const s=f(n,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),d(e,["labels"],r)}return e}function Ob(n){const e={},t=f(n,["video"]);return t!=null&&d(e,["video"],I2(t)),e}function Gb(n){const e={},t=f(n,["_self"]);return t!=null&&d(e,["video"],w2(t)),e}function Bb(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&d(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&d(e,["responseJsonSchema"],s);const r=f(n,["audioTimestamp"]);r!=null&&d(e,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&d(e,["candidateCount"],l);const c=f(n,["enableAffectiveDialog"]);c!=null&&d(e,["enableAffectiveDialog"],c);const m=f(n,["frequencyPenalty"]);m!=null&&d(e,["frequencyPenalty"],m);const y=f(n,["logprobs"]);y!=null&&d(e,["logprobs"],y);const p=f(n,["maxOutputTokens"]);p!=null&&d(e,["maxOutputTokens"],p);const T=f(n,["mediaResolution"]);T!=null&&d(e,["mediaResolution"],T);const E=f(n,["presencePenalty"]);E!=null&&d(e,["presencePenalty"],E);const S=f(n,["responseLogprobs"]);S!=null&&d(e,["responseLogprobs"],S);const w=f(n,["responseMimeType"]);w!=null&&d(e,["responseMimeType"],w);const G=f(n,["responseModalities"]);G!=null&&d(e,["responseModalities"],G);const B=f(n,["responseSchema"]);B!=null&&d(e,["responseSchema"],B);const K=f(n,["routingConfig"]);K!=null&&d(e,["routingConfig"],K);const W=f(n,["seed"]);W!=null&&d(e,["seed"],W);const ie=f(n,["speechConfig"]);ie!=null&&d(e,["speechConfig"],PS(ie));const j=f(n,["stopSequences"]);j!=null&&d(e,["stopSequences"],j);const ue=f(n,["temperature"]);ue!=null&&d(e,["temperature"],ue);const he=f(n,["thinkingConfig"]);he!=null&&d(e,["thinkingConfig"],he);const fe=f(n,["topK"]);fe!=null&&d(e,["topK"],fe);const x=f(n,["topP"]);if(x!=null&&d(e,["topP"],x),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Fb(n,e){const t={},s=f(e,["model"]);return s!=null&&d(t,["_url","name"],Je(n,s)),t}function Hb(n,e){const t={},s=f(e,["model"]);return s!=null&&d(t,["_url","name"],Je(n,s)),t}function zb(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&d(e,["enableWidget"],t),e}function Yb(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&d(e,["timeRangeFilter"],t),e}function Jb(n){const e={},t=f(n,["aspectRatio"]);t!=null&&d(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&d(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Kb(n){const e={},t=f(n,["aspectRatio"]);t!=null&&d(e,["aspectRatio"],t);const s=f(n,["imageSize"]);s!=null&&d(e,["imageSize"],s);const r=f(n,["outputMimeType"]);r!=null&&d(e,["imageOutputOptions","mimeType"],r);const l=f(n,["outputCompressionQuality"]);return l!=null&&d(e,["imageOutputOptions","compressionQuality"],l),e}function Qb(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&d(e,["imageBytes"],io(t));const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function DS(n){const e={},t=f(n,["gcsUri"]);t!=null&&d(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&d(e,["imageBytes"],io(s));const r=f(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function _f(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&d(e,["bytesBase64Encoded"],io(t));const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function ii(n){const e={},t=f(n,["gcsUri"]);t!=null&&d(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&d(e,["bytesBase64Encoded"],io(s));const r=f(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Xb(n,e,t){const s={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&d(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&d(t,["_query","filter"],c);const m=f(e,["queryBase"]);return t!==void 0&&m!=null&&d(t,["_url","models_url"],AS(n,m)),s}function $b(n,e,t){const s={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&d(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&d(t,["_query","filter"],c);const m=f(e,["queryBase"]);return t!==void 0&&m!=null&&d(t,["_url","models_url"],AS(n,m)),s}function Zb(n,e){const t={},s=f(e,["config"]);return s!=null&&Xb(n,s,t),t}function Wb(n,e){const t={},s=f(e,["config"]);return s!=null&&$b(n,s,t),t}function jb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=f(n,["_self"]);if(r!=null){let l=CS(r);Array.isArray(l)&&(l=l.map(c=>rm(c))),d(e,["models"],l)}return e}function e2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=f(n,["_self"]);if(r!=null){let l=CS(r);Array.isArray(l)&&(l=l.map(c=>am(c))),d(e,["models"],l)}return e}function t2(n){const e={},t=f(n,["maskMode"]);t!=null&&d(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&d(e,["maskClasses"],s);const r=f(n,["maskDilation"]);return r!=null&&d(e,["dilation"],r),e}function rm(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const s=f(n,["displayName"]);s!=null&&d(e,["displayName"],s);const r=f(n,["description"]);r!=null&&d(e,["description"],r);const l=f(n,["version"]);l!=null&&d(e,["version"],l);const c=f(n,["_self"]);c!=null&&d(e,["tunedModelInfo"],y2(c));const m=f(n,["inputTokenLimit"]);m!=null&&d(e,["inputTokenLimit"],m);const y=f(n,["outputTokenLimit"]);y!=null&&d(e,["outputTokenLimit"],y);const p=f(n,["supportedGenerationMethods"]);p!=null&&d(e,["supportedActions"],p);const T=f(n,["temperature"]);T!=null&&d(e,["temperature"],T);const E=f(n,["maxTemperature"]);E!=null&&d(e,["maxTemperature"],E);const S=f(n,["topP"]);S!=null&&d(e,["topP"],S);const w=f(n,["topK"]);w!=null&&d(e,["topK"],w);const G=f(n,["thinking"]);return G!=null&&d(e,["thinking"],G),e}function am(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const s=f(n,["displayName"]);s!=null&&d(e,["displayName"],s);const r=f(n,["description"]);r!=null&&d(e,["description"],r);const l=f(n,["versionId"]);l!=null&&d(e,["version"],l);const c=f(n,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(S=>mb(S))),d(e,["endpoints"],E)}const m=f(n,["labels"]);m!=null&&d(e,["labels"],m);const y=f(n,["_self"]);y!=null&&d(e,["tunedModelInfo"],_2(y));const p=f(n,["defaultCheckpointId"]);p!=null&&d(e,["defaultCheckpointId"],p);const T=f(n,["checkpoints"]);if(T!=null){let E=T;Array.isArray(E)&&(E=E.map(S=>S)),d(e,["checkpoints"],E)}return e}function n2(n){const e={},t=f(n,["mediaResolution"]);t!=null&&d(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&d(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&d(e,["fileData"],pb(l));const c=f(n,["functionCall"]);c!=null&&d(e,["functionCall"],gb(c));const m=f(n,["functionResponse"]);m!=null&&d(e,["functionResponse"],m);const y=f(n,["inlineData"]);y!=null&&d(e,["inlineData"],BD(y));const p=f(n,["text"]);p!=null&&d(e,["text"],p);const T=f(n,["thought"]);T!=null&&d(e,["thought"],T);const E=f(n,["thoughtSignature"]);E!=null&&d(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function i2(n){const e={},t=f(n,["productImage"]);return t!=null&&d(e,["image"],ii(t)),e}function s2(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);const r=f(n,["baseSteps"]);e!==void 0&&r!=null&&d(e,["parameters","baseSteps"],r);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&d(e,["parameters","storageUri"],l);const c=f(n,["seed"]);e!==void 0&&c!=null&&d(e,["parameters","seed"],c);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&d(e,["parameters","safetySetting"],m);const y=f(n,["personGeneration"]);e!==void 0&&y!=null&&d(e,["parameters","personGeneration"],y);const p=f(n,["addWatermark"]);e!==void 0&&p!=null&&d(e,["parameters","addWatermark"],p);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&d(e,["parameters","outputOptions","mimeType"],T);const E=f(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&d(e,["parameters","outputOptions","compressionQuality"],E);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&d(e,["parameters","enhancePrompt"],S);const w=f(n,["labels"]);return e!==void 0&&w!=null&&d(e,["labels"],w),t}function o2(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Je(n,s));const r=f(e,["source"]);r!=null&&a2(r,t);const l=f(e,["config"]);return l!=null&&s2(l,t),t}function r2(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>yf(r))),d(e,["generatedImages"],s)}return e}function a2(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const r=f(n,["personImage"]);e!==void 0&&r!=null&&d(e,["instances[0]","personImage","image"],ii(r));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(m=>i2(m))),d(e,["instances[0]","productImages"],c)}return t}function l2(n){const e={},t=f(n,["referenceImage"]);t!=null&&d(e,["referenceImage"],ii(t));const s=f(n,["referenceId"]);s!=null&&d(e,["referenceId"],s);const r=f(n,["referenceType"]);r!=null&&d(e,["referenceType"],r);const l=f(n,["maskImageConfig"]);l!=null&&d(e,["maskImageConfig"],t2(l));const c=f(n,["controlImageConfig"]);c!=null&&d(e,["controlImageConfig"],QD(c));const m=f(n,["styleImageConfig"]);m!=null&&d(e,["styleImageConfig"],m);const y=f(n,["subjectImageConfig"]);return y!=null&&d(e,["subjectImageConfig"],y),e}function bS(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&d(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&d(e,["scores"],s);const r=f(n,["contentType"]);return r!=null&&d(e,["contentType"],r),e}function VS(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&d(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&d(e,["scores"],s);const r=f(n,["contentType"]);return r!=null&&d(e,["contentType"],r),e}function u2(n){const e={},t=f(n,["category"]);if(t!=null&&d(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&d(e,["threshold"],s),e}function c2(n){const e={},t=f(n,["image"]);return t!=null&&d(e,["image"],ii(t)),e}function f2(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&d(e,["parameters","mode"],s);const r=f(n,["maxPredictions"]);e!==void 0&&r!=null&&d(e,["parameters","maxPredictions"],r);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&d(e,["parameters","confidenceThreshold"],l);const c=f(n,["maskDilation"]);e!==void 0&&c!=null&&d(e,["parameters","maskDilation"],c);const m=f(n,["binaryColorThreshold"]);e!==void 0&&m!=null&&d(e,["parameters","binaryColorThreshold"],m);const y=f(n,["labels"]);return e!==void 0&&y!=null&&d(e,["labels"],y),t}function d2(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Je(n,s));const r=f(e,["source"]);r!=null&&m2(r,t);const l=f(e,["config"]);return l!=null&&f2(l,t),t}function h2(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>qb(r))),d(e,["generatedMasks"],s)}return e}function m2(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],ii(r));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&d(e,["instances[0]","scribble"],c2(l)),t}function PS(n){const e={},t=f(n,["languageCode"]);t!=null&&d(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&d(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function p2(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&d(e,["functionCallingConfig"],yb(t));const s=f(n,["retrievalConfig"]);return s!=null&&d(e,["retrievalConfig"],s),e}function g2(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(E=>E)),d(e,["functionDeclarations"],T)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&d(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&d(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&d(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const m=f(n,["googleMaps"]);m!=null&&d(e,["googleMaps"],zb(m));const y=f(n,["googleSearch"]);y!=null&&d(e,["googleSearch"],Yb(y));const p=f(n,["urlContext"]);return p!=null&&d(e,["urlContext"],p),e}function US(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>_b(S))),d(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&d(e,["retrieval"],s);const r=f(n,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);const l=f(n,["computerUse"]);if(l!=null&&d(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(n,["codeExecution"]);c!=null&&d(e,["codeExecution"],c);const m=f(n,["enterpriseWebSearch"]);m!=null&&d(e,["enterpriseWebSearch"],m);const y=f(n,["googleMaps"]);y!=null&&d(e,["googleMaps"],y);const p=f(n,["googleSearch"]);p!=null&&d(e,["googleSearch"],p);const T=f(n,["urlContext"]);return T!=null&&d(e,["urlContext"],T),e}function y2(n){const e={},t=f(n,["baseModel"]);t!=null&&d(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&d(e,["createTime"],s);const r=f(n,["updateTime"]);return r!=null&&d(e,["updateTime"],r),e}function _2(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&d(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&d(e,["createTime"],s);const r=f(n,["updateTime"]);return r!=null&&d(e,["updateTime"],r),e}function T2(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&d(e,["displayName"],s);const r=f(n,["description"]);e!==void 0&&r!=null&&d(e,["description"],r);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&d(e,["defaultCheckpointId"],l),t}function v2(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&d(e,["displayName"],s);const r=f(n,["description"]);e!==void 0&&r!=null&&d(e,["description"],r);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&d(e,["defaultCheckpointId"],l),t}function E2(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","name"],Je(n,s));const r=f(e,["config"]);return r!=null&&T2(r,t),t}function S2(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Je(n,s));const r=f(e,["config"]);return r!=null&&v2(r,t),t}function A2(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);const r=f(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&d(e,["parameters","safetySetting"],r);const l=f(n,["personGeneration"]);e!==void 0&&l!=null&&d(e,["parameters","personGeneration"],l);const c=f(n,["includeRaiReason"]);e!==void 0&&c!=null&&d(e,["parameters","includeRaiReason"],c);const m=f(n,["outputMimeType"]);e!==void 0&&m!=null&&d(e,["parameters","outputOptions","mimeType"],m);const y=f(n,["outputCompressionQuality"]);e!==void 0&&y!=null&&d(e,["parameters","outputOptions","compressionQuality"],y);const p=f(n,["enhanceInputImage"]);e!==void 0&&p!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],p);const T=f(n,["imagePreservationFactor"]);e!==void 0&&T!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],T);const E=f(n,["labels"]);e!==void 0&&E!=null&&d(e,["labels"],E);const S=f(n,["numberOfImages"]);e!==void 0&&S!=null&&d(e,["parameters","sampleCount"],S);const w=f(n,["mode"]);return e!==void 0&&w!=null&&d(e,["parameters","mode"],w),t}function C2(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["_url","model"],Je(n,s));const r=f(e,["image"]);r!=null&&d(t,["instances[0]","image"],ii(r));const l=f(e,["upscaleFactor"]);l!=null&&d(t,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(e,["config"]);return c!=null&&A2(c,t),t}function R2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>yf(l))),d(e,["generatedImages"],r)}return e}function I2(n){const e={},t=f(n,["uri"]);t!=null&&d(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&d(e,["videoBytes"],io(s));const r=f(n,["encoding"]);return r!=null&&d(e,["mimeType"],r),e}function w2(n){const e={},t=f(n,["gcsUri"]);t!=null&&d(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&d(e,["videoBytes"],io(s));const r=f(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function N2(n){const e={},t=f(n,["image"]);t!=null&&d(e,["_self"],ii(t));const s=f(n,["maskMode"]);return s!=null&&d(e,["maskMode"],s),e}function M2(n){const e={},t=f(n,["image"]);t!=null&&d(e,["image"],_f(t));const s=f(n,["referenceType"]);return s!=null&&d(e,["referenceType"],s),e}function x2(n){const e={},t=f(n,["image"]);t!=null&&d(e,["image"],ii(t));const s=f(n,["referenceType"]);return s!=null&&d(e,["referenceType"],s),e}function LS(n){const e={},t=f(n,["uri"]);t!=null&&d(e,["uri"],t);const s=f(n,["videoBytes"]);s!=null&&d(e,["encodedVideo"],io(s));const r=f(n,["mimeType"]);return r!=null&&d(e,["encoding"],r),e}function kS(n){const e={},t=f(n,["uri"]);t!=null&&d(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&d(e,["bytesBase64Encoded"],io(s));const r=f(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D2(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&d(e,["displayName"],s),t}function b2(n){const e={},t=f(n,["config"]);return t!=null&&D2(t,e),e}function V2(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&d(e,["_query","force"],s),t}function P2(n){const e={},t=f(n,["name"]);t!=null&&d(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&V2(s,e),e}function U2(n){const e={},t=f(n,["name"]);return t!=null&&d(e,["_url","name"],t),e}function L2(n,e){const t={},s=f(n,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["customMetadata"],l)}const r=f(n,["chunkingConfig"]);return e!==void 0&&r!=null&&d(e,["chunkingConfig"],r),t}function k2(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const s=f(n,["metadata"]);s!=null&&d(e,["metadata"],s);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["response"]);return c!=null&&d(e,["response"],O2(c)),e}function q2(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&d(e,["_url","file_search_store_name"],t);const s=f(n,["fileName"]);s!=null&&d(e,["fileName"],s);const r=f(n,["config"]);return r!=null&&L2(r,e),e}function O2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&d(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function G2(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),t}function B2(n){const e={},t=f(n,["config"]);return t!=null&&G2(t,e),e}function F2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=f(n,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["fileSearchStores"],l)}return e}function qS(n,e){const t={},s=f(n,["mimeType"]);e!==void 0&&s!=null&&d(e,["mimeType"],s);const r=f(n,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const l=f(n,["customMetadata"]);if(e!==void 0&&l!=null){let m=l;Array.isArray(m)&&(m=m.map(y=>y)),d(e,["customMetadata"],m)}const c=f(n,["chunkingConfig"]);return e!==void 0&&c!=null&&d(e,["chunkingConfig"],c),t}function H2(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&d(e,["_url","file_search_store_name"],t);const s=f(n,["config"]);return s!=null&&qS(s,e),e}function z2(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Y2="Content-Type",J2="X-Server-Timeout",K2="User-Agent",lm="x-goog-api-client",Q2="1.31.0",X2=`google-genai-sdk/${Q2}`,$2="v1beta1",Z2="v1beta",cE=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class W2{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:$2,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:Z2,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const r=[this.getRequestUrlInternal(t)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,m]of Object.entries(e.queryParams))r.searchParams.append(c,String(m));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?s[r]=Object.assign(Object.assign({},s[r]),l):l!==void 0&&(s[r]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,r){if(t&&t.timeout||r){const l=new AbortController,c=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const m=setTimeout(()=>l.abort(),t.timeout);m&&typeof m.unref=="function"&&m.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=c}return t&&t.extraBody!==null&&j2(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await fE(r),new im(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await fE(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return zr(this,arguments,function*(){const r=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";for(;;){const{done:m,value:y}=yield lt(r.read());if(m){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=l.decode(y,{stream:!0});try{const E=JSON.parse(p);if("error"in E){const S=JSON.parse(JSON.stringify(E.error)),w=S.status,G=S.code,B=`got status: ${w}. ${JSON.stringify(E)}`;if(G>=400&&G<600)throw new pf({message:B,status:G})}}catch(E){if(E.name==="ApiError")throw E}c+=p;let T=c.match(cE);for(;T;){const E=T[1];try{const S=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield lt(new im(S)),c=c.slice(T[0].length),T=c.match(cE)}catch(S){throw new Error(`exception parsing stream chunk ${E}. ${S}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=X2+" "+this.clientOptions.userAgentExtra;return e[K2]=t,e[lm]=t,e[Y2]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))s.append(r,l);e.timeout&&e.timeout>0&&s.append(J2,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);r.sizeBytes=String(c.size);const m=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:c.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=m;const y={file:r},p=this.getFileName(e),T=de("upload/v1beta/files",y._url),E=await this.fetchUploadUrl(T,r.sizeBytes,r.mimeType,p,y,t==null?void 0:t.httpOptions);return l.upload(e,E,this)}async uploadFileToFileSearchStore(e,t,s){var r;const l=this.clientOptions.uploader,c=await l.stat(t),m=String(c.size),y=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:c.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,T=this.getFileName(t),E={};s!=null&&qS(s,E);const S=await this.fetchUploadUrl(p,m,y,T,E,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,r,l,c){var m;let y={};c?y=c:y={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const p=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:y});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const T=(m=p==null?void 0:p.headers)===null||m===void 0?void 0:m["x-goog-upload-url"];if(T===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return T}}async function fE(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(s);throw t>=400&&t<600?new pf({message:r,status:t}):new Error(r)}}function j2(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const m=Object.assign({},l);for(const y in c)if(Object.prototype.hasOwnProperty.call(c,y)){const p=c[y],T=m[y];p&&typeof p=="object"&&!Array.isArray(p)&&T&&typeof T=="object"&&!Array.isArray(T)?m[y]=s(T,p):(T&&p&&typeof T!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof T}, New type: ${typeof p}. Overwriting.`),m[y]=p)}return m}const r=s(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eV="mcp_used/unknown";let tV=!1;function OS(n){for(const e of n)if(nV(e)||typeof e=="object"&&"inputSchema"in e)return!0;return tV}function GS(n){var e;const t=(e=n[lm])!==null&&e!==void 0?e:"";n[lm]=(t+` ${eV}`).trimStart()}function nV(n){return n!==null&&typeof n=="object"&&n instanceof sp}function iV(n,e=100){return zr(this,arguments,function*(){let s,r=0;for(;r<e;){const l=yield lt(n.listTools({cursor:s}));for(const c of l.tools)yield yield lt(c),r++;if(!l.nextCursor)break;s=l.nextCursor}})}class sp{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new sp(e,t)}async initialize(){var e,t,s,r;if(this.mcpTools.length>0)return;const l={},c=[];for(const T of this.mcpClients)try{for(var m=!0,y=(t=void 0,Rl(iV(T))),p;p=await y.next(),e=p.done,!e;m=!0){r=p.value,m=!1;const E=r;c.push(E);const S=E.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=T}}catch(E){t={error:E}}finally{try{!m&&!e&&(s=y.return)&&await s.call(y)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),UM(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await r.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function sV(n,e,t){const s=new wM;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(s,r),e(s)}class oV{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=lV(this.apiClient.getDefaultHeaders()),m=this.apiClient.getApiKey(),y=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${m}`;let p=()=>{};const T=new Promise(j=>{p=j}),E=e.callbacks,S=function(){p({})},w=this.apiClient,G={onopen:S,onmessage:j=>{sV(w,E.onmessage,j)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(j){},onclose:(s=E==null?void 0:E.onclose)!==null&&s!==void 0?s:function(j){}},B=this.webSocketFactory.create(y,aV(c),G);B.connect(),await T;const ie={setup:{model:Je(this.apiClient,e.model)}};return B.send(JSON.stringify(ie)),new rV(B,this.apiClient)}}class rV{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=bD(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=DD(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Or.PLAY)}pause(){this.sendPlaybackControl(Or.PAUSE)}stop(){this.sendPlaybackControl(Or.STOP)}resetContext(){this.sendPlaybackControl(Or.RESET_CONTEXT)}close(){this.conn.close()}}function aV(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function lV(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uV="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function cV(n,e,t){const s=new IM;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const c=UD(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class fV{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new oV(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,r,l,c,m;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let T;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&OS(e.config.tools)&&GS(E);const S=pV(E);if(this.apiClient.isVertexAI())T=`${y}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,T);else{const N=this.apiClient.getApiKey();let U="BidiGenerateContent",P="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",P="access_token"),T=`${y}/ws/google.ai.generativelanguage.${p}.GenerativeService.${U}?${P}=${N}`}let w=()=>{};const G=new Promise(N=>{w=N}),B=e.callbacks,K=function(){var N;(N=B==null?void 0:B.onopen)===null||N===void 0||N.call(B),w({})},W=this.apiClient,ie={onopen:K,onmessage:N=>{cV(W,B.onmessage,N)},onerror:(t=B==null?void 0:B.onerror)!==null&&t!==void 0?t:function(N){},onclose:(s=B==null?void 0:B.onclose)!==null&&s!==void 0?s:function(N){}},j=this.webSocketFactory.create(T,mV(S),ie);j.connect(),await G;let ue=Je(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ue.startsWith("publishers/")){const N=this.apiClient.getProject(),U=this.apiClient.getLocation();ue=`projects/${N}/locations/${U}/`+ue}let he={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Qc.AUDIO]}:e.config.responseModalities=[Qc.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const fe=(m=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&m!==void 0?m:[],x=[];for(const N of fe)if(this.isCallableTool(N)){const U=N;x.push(await U.tool())}else x.push(N);x.length>0&&(e.config.tools=x);const M={model:ue,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?he=xD(this.apiClient,M):he=MD(this.apiClient,M),delete he.config,j.send(JSON.stringify(he)),new hV(j,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const dV={turnComplete:!0};class hV{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=Fn(t.turns),e.isVertexAI()||(s=s.map(r=>gf(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(uV)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},dV),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:PD(e)}:t={realtimeInput:VD(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function mV(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function pV(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dE=10;function hE(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Yr(c)){r=!0;break}if(!r)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Yr(n){return"callTool"in n&&typeof n.callTool=="function"}function gV(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>Yr(r)))!==null&&s!==void 0?s:!1}function mE(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,r)=>{if(Yr(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(r)}),t}function pE(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yV extends rs{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,r,l,c,m;const y=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!gV(t)||hE(t.config))return await this.generateContentInternal(y);const p=mE(t);if(p.length>0){const B=p.map(K=>`tools[${K}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${B}.`)}let T,E;const S=Fn(y.contents),w=(l=(r=(s=y.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:dE;let G=0;for(;G<w&&(T=await this.generateContentInternal(y),!(!T.functionCalls||T.functionCalls.length===0));){const B=T.candidates[0].content,K=[];for(const W of(m=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&m!==void 0?m:[])if(Yr(W)){const j=await W.callTool(T.functionCalls);K.push(...j)}G++,E={role:"user",parts:K},y.contents=Fn(y.contents),y.contents.push(B),y.contents.push(E),pE(y.config)&&(S.push(B),S.push(E))}return pE(y.config)&&(T.automaticFunctionCallingHistory=S),T},this.generateContentStream=async t=>{var s,r,l,c,m;if(this.maybeMoveToResponseJsonSchem(t),hE(t.config)){const E=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(E)}const y=mE(t);if(y.length>0){const E=y.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(l=(r=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,T=(m=(c=t==null?void 0:t.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||m===void 0?void 0:m.disable;if(p&&!T)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var r;let l;const c=[];if(s!=null&&s.generatedImages)for(const y of s.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((r=y==null?void 0:y.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=y==null?void 0:y.safetyAttributes:c.push(y);let m;return l?m={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:m={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},m}),this.list=async t=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new zo(os.PAGED_ITEM_MODELS,m=>this.listInternal(m),await this.listInternal(c),c)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var s,r,l,c,m,y;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(l=t.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((y=(m=t.source)===null||m===void 0?void 0:m.video)===null||y===void 0)&&y.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async y=>Yr(y)?await y.tool():y)),m={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(m.config.tools=c,e.config&&e.config.tools&&OS(e.config.tools)){const y=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},y);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),GS(p),m.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return m}async initAfcToolsMap(e){var t,s,r;const l=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(Yr(c)){const m=c,y=await m.tool();for(const p of(r=y.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,m)}}return l}async processAfcStream(e){var t,s,r;const l=(r=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:dE;let c=!1,m=0;const y=await this.initAfcToolsMap(e);return(function(p,T,E){var S,w;return zr(this,arguments,function*(){for(var G,B,K,W;m<l;){c&&(m++,c=!1);const he=yield lt(p.processParamsMaybeAddMcpUsage(E)),fe=yield lt(p.generateContentStreamInternal(he)),x=[],M=[];try{for(var ie=!0,j=(B=void 0,Rl(fe)),ue;ue=yield lt(j.next()),G=ue.done,!G;ie=!0){W=ue.value,ie=!1;const N=W;if(yield yield lt(N),N.candidates&&(!((S=N.candidates[0])===null||S===void 0)&&S.content)){M.push(N.candidates[0].content);for(const U of(w=N.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(m<l&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(T.has(U.functionCall.name)){const P=yield lt(T.get(U.functionCall.name).callTool([U.functionCall]));x.push(...P)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${T.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(N){B={error:N}}finally{try{!ie&&!G&&(K=j.return)&&(yield lt(K.call(j)))}finally{if(B)throw B.error}}if(x.length>0){c=!0;const N=new pl;N.candidates=[{content:{role:"user",parts:x}}],yield yield lt(N);const U=[];U.push(...M),U.push({role:"user",parts:x});const P=Fn(E.contents).concat(U);E.contents=P}else break}})})(this,y,e)}async generateContentInternal(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=aE(this.apiClient,e);return m=de("{model}:generateContent",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=uE(T),S=new pl;return Object.assign(S,E),S})}else{const p=rE(this.apiClient,e);return m=de("{model}:generateContent",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=lE(T),S=new pl;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=aE(this.apiClient,e);return m=de("{model}:streamGenerateContent?alt=sse",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(E){return zr(this,arguments,function*(){var S,w,G,B;try{for(var K=!0,W=Rl(E),ie;ie=yield lt(W.next()),S=ie.done,!S;K=!0){B=ie.value,K=!1;const j=B,ue=uE(yield lt(j.json()));ue.sdkHttpResponse={headers:j.headers};const he=new pl;Object.assign(he,ue),yield yield lt(he)}}catch(j){w={error:j}}finally{try{!K&&!S&&(G=W.return)&&(yield lt(G.call(W)))}finally{if(w)throw w.error}}})})}else{const p=rE(this.apiClient,e);return m=de("{model}:streamGenerateContent?alt=sse",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(E){return zr(this,arguments,function*(){var S,w,G,B;try{for(var K=!0,W=Rl(E),ie;ie=yield lt(W.next()),S=ie.done,!S;K=!0){B=ie.value,K=!1;const j=B,ue=lE(yield lt(j.json()));ue.sdkHttpResponse={headers:j.headers};const he=new pl;Object.assign(he,ue),yield yield lt(he)}}catch(j){w={error:j}}finally{try{!K&&!S&&(G=W.return)&&(yield lt(G.call(W)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=fb(this.apiClient,e);return m=de("{model}:predict",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=hb(T),S=new Hv;return Object.assign(S,E),S})}else{const p=cb(this.apiClient,e);return m=de("{model}:batchEmbedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=db(T),S=new Hv;return Object.assign(S,E),S})}}async generateImagesInternal(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=Cb(this.apiClient,e);return m=de("{model}:predict",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=Ib(T),S=new zv;return Object.assign(S,E),S})}else{const p=Ab(this.apiClient,e);return m=de("{model}:predict",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=Rb(T),S=new zv;return Object.assign(S,E),S})}}async editImageInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const m=rb(this.apiClient,e);return l=de("{model}:predict",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),r.then(y=>{const p=ab(y),T=new pM;return Object.assign(T,p),T})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const m=C2(this.apiClient,e);return l=de("{model}:predict",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),r.then(y=>{const p=R2(y),T=new gM;return Object.assign(T,p),T})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const m=o2(this.apiClient,e);return l=de("{model}:predict",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const p=r2(y),T=new yM;return Object.assign(T,p),T})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const m=d2(this.apiClient,e);return l=de("{model}:predict",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const p=h2(y),T=new _M;return Object.assign(T,p),T})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=Hb(this.apiClient,e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>am(T))}else{const p=Fb(this.apiClient,e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>rm(T))}}async listInternal(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=Wb(this.apiClient,e);return m=de("{models_url}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=e2(T),S=new Yv;return Object.assign(S,E),S})}else{const p=Zb(this.apiClient,e);return m=de("{models_url}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=jb(T),S=new Yv;return Object.assign(S,E),S})}}async update(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=S2(this.apiClient,e);return m=de("{model}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>am(T))}else{const p=E2(this.apiClient,e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>rm(T))}}async delete(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=nb(this.apiClient,e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=sb(T),S=new Jv;return Object.assign(S,E),S})}else{const p=tb(this.apiClient,e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=ib(T),S=new Jv;return Object.assign(S,E),S})}}async countTokens(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=WD(this.apiClient,e);return m=de("{model}:countTokens",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=eb(T),S=new Kv;return Object.assign(S,E),S})}else{const p=ZD(this.apiClient,e);return m=de("{model}:countTokens",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=jD(T),S=new Kv;return Object.assign(S,E),S})}}async computeTokens(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const m=zD(this.apiClient,e);return l=de("{model}:computeTokens",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),r.then(y=>{const p=YD(y),T=new TM;return Object.assign(T,p),T})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=bb(this.apiClient,e);return m=de("{model}:predictLongRunning",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>{const E=xb(T),S=new Xc;return Object.assign(S,E),S})}else{const p=Db(this.apiClient,e);return m=de("{model}:predictLongRunning",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>{const E=Mb(T),S=new Xc;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _V extends rs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=uM(e);return m=de("{operationName}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c}else{const p=lM(e);return m=de("{operationName}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const m=tM(e);return l=de("{resourceName}:fetchPredictOperation",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TV(n){const e={},t=f(n,["data"]);if(t!=null&&d(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function vV(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>MV(l))),d(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&d(e,["role"],s),e}function EV(n,e,t){const s={},r=f(e,["expireTime"]);t!==void 0&&r!=null&&d(t,["expireTime"],r);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&d(t,["newSessionExpireTime"],l);const c=f(e,["uses"]);t!==void 0&&c!=null&&d(t,["uses"],c);const m=f(e,["liveConnectConstraints"]);t!==void 0&&m!=null&&d(t,["bidiGenerateContentSetup"],NV(n,m));const y=f(e,["lockAdditionalFields"]);return t!==void 0&&y!=null&&d(t,["fieldMask"],y),s}function SV(n,e){const t={},s=f(e,["config"]);return s!=null&&d(t,["config"],EV(n,s,t)),t}function AV(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&d(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function CV(n){const e={},t=f(n,["id"]);t!=null&&d(e,["id"],t);const s=f(n,["args"]);s!=null&&d(e,["args"],s);const r=f(n,["name"]);if(r!=null&&d(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function RV(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&d(e,["enableWidget"],t),e}function IV(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&d(e,["timeRangeFilter"],t),e}function wV(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig"],s);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const m=f(n,["topK"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","topK"],m);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","maxOutputTokens"],y);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","mediaResolution"],p);const T=f(n,["seed"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","seed"],T);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","speechConfig"],ip(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&d(e,["setup","generationConfig","thinkingConfig"],S);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],w);const G=f(n,["systemInstruction"]);e!==void 0&&G!=null&&d(e,["setup","systemInstruction"],vV(tn(G)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let fe=aa(B);Array.isArray(fe)&&(fe=fe.map(x=>DV(ra(x)))),d(e,["setup","tools"],fe)}const K=f(n,["sessionResumption"]);e!==void 0&&K!=null&&d(e,["setup","sessionResumption"],xV(K));const W=f(n,["inputAudioTranscription"]);e!==void 0&&W!=null&&d(e,["setup","inputAudioTranscription"],W);const ie=f(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&d(e,["setup","outputAudioTranscription"],ie);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&d(e,["setup","realtimeInputConfig"],j);const ue=f(n,["contextWindowCompression"]);e!==void 0&&ue!=null&&d(e,["setup","contextWindowCompression"],ue);const he=f(n,["proactivity"]);return e!==void 0&&he!=null&&d(e,["setup","proactivity"],he),t}function NV(n,e){const t={},s=f(e,["model"]);s!=null&&d(t,["setup","model"],Je(n,s));const r=f(e,["config"]);return r!=null&&d(t,["config"],wV(r,t)),t}function MV(n){const e={},t=f(n,["mediaResolution"]);t!=null&&d(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&d(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&d(e,["fileData"],AV(l));const c=f(n,["functionCall"]);c!=null&&d(e,["functionCall"],CV(c));const m=f(n,["functionResponse"]);m!=null&&d(e,["functionResponse"],m);const y=f(n,["inlineData"]);y!=null&&d(e,["inlineData"],TV(y));const p=f(n,["text"]);p!=null&&d(e,["text"],p);const T=f(n,["thought"]);T!=null&&d(e,["thought"],T);const E=f(n,["thoughtSignature"]);E!=null&&d(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function xV(n){const e={},t=f(n,["handle"]);if(t!=null&&d(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function DV(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(E=>E)),d(e,["functionDeclarations"],T)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&d(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&d(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&d(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const m=f(n,["googleMaps"]);m!=null&&d(e,["googleMaps"],RV(m));const y=f(n,["googleSearch"]);y!=null&&d(e,["googleSearch"],IV(y));const p=f(n,["urlContext"]);return p!=null&&d(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bV(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function VV(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=bV(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let m=[];r.length>0&&(m=r.map(p=>c.includes(p)?`generationConfig.${p}`:p));const y=[];l&&y.push(l),m.length>0&&y.push(...m),y.length>0?n.fieldMask=y.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class PV extends rs{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const m=SV(this.apiClient,e);l=de("auth_tokens",m._url),c=m._query,delete m.config,delete m._url,delete m._query;const y=VV(m,e.config);return r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UV(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&d(e,["_query","force"],s),t}function LV(n){const e={},t=f(n,["name"]);t!=null&&d(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&UV(s,e),e}function kV(n){const e={},t=f(n,["name"]);return t!=null&&d(e,["_url","name"],t),e}function qV(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),t}function OV(n){const e={},t=f(n,["parent"]);t!=null&&d(e,["_url","parent"],t);const s=f(n,["config"]);return s!=null&&qV(s,e),e}function GV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=f(n,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BV extends rs{constructor(e){super(),this.apiClient=e,this.list=async t=>new zo(os.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=kV(e);return l=de("{name}",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var t,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=LV(e);r=de("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=OV(e);return l=de("{parent}/documents",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const p=GV(y),T=new vM;return Object.assign(T,p),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FV extends rs{constructor(e,t=new BV(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new zo(os.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=b2(e);return l=de("fileSearchStores",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async get(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=U2(e);return l=de("{name}",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var t,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=P2(e);r=de("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=B2(e);return l=de("fileSearchStores",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const p=F2(y),T=new EM;return Object.assign(T,p),T})}}async uploadToFileSearchStoreInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=H2(e);return l=de("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const p=z2(y),T=new SM;return Object.assign(T,p),T})}}async importFile(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=q2(e);return l=de("{file_search_store_name}:importFile",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const p=k2(y),T=new Wm;return Object.assign(T,p),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HV(n,e){const t={},s=f(n,["name"]);return s!=null&&d(t,["_url","name"],s),t}function zV(n,e){const t={},s=f(n,["name"]);return s!=null&&d(t,["_url","name"],s),t}function YV(n,e){const t={},s=f(n,["sdkHttpResponse"]);return s!=null&&d(t,["sdkHttpResponse"],s),t}function JV(n,e){const t={},s=f(n,["sdkHttpResponse"]);return s!=null&&d(t,["sdkHttpResponse"],s),t}function KV(n,e,t){const s={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&d(e,["displayName"],r),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&d(e,["tuningTask","hyperparameters","epochCount"],l);const c=f(n,["learningRateMultiplier"]);if(c!=null&&d(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const m=f(n,["batchSize"]);e!==void 0&&m!=null&&d(e,["tuningTask","hyperparameters","batchSize"],m);const y=f(n,["learningRate"]);if(e!==void 0&&y!=null&&d(e,["tuningTask","hyperparameters","learningRate"],y),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function QV(n,e,t){const s={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const w=f(n,["validationDataset"]);e!==void 0&&w!=null&&d(e,["supervisedTuningSpec"],gE(w))}else if(r==="PREFERENCE_TUNING"){const w=f(n,["validationDataset"]);e!==void 0&&w!=null&&d(e,["preferenceOptimizationSpec"],gE(w))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&d(e,["tunedModelDisplayName"],l);const c=f(n,["description"]);e!==void 0&&c!=null&&d(e,["description"],c);let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const w=f(n,["epochCount"]);e!==void 0&&w!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(m==="PREFERENCE_TUNING"){const w=f(n,["epochCount"]);e!==void 0&&w!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let y=f(t,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const w=f(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(y==="PREFERENCE_TUNING"){const w=f(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const w=f(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(p==="PREFERENCE_TUNING"){const w=f(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let T=f(t,["config","method"]);if(T===void 0&&(T="SUPERVISED_FINE_TUNING"),T==="SUPERVISED_FINE_TUNING"){const w=f(n,["adapterSize"]);e!==void 0&&w!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(T==="PREFERENCE_TUNING"){const w=f(n,["adapterSize"]);e!==void 0&&w!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=f(n,["labels"]);e!==void 0&&E!=null&&d(e,["labels"],E);const S=f(n,["beta"]);return e!==void 0&&S!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),s}function XV(n,e){const t={},s=f(n,["baseModel"]);s!=null&&d(t,["baseModel"],s);const r=f(n,["preTunedModel"]);r!=null&&d(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&rP(l);const c=f(n,["config"]);return c!=null&&KV(c,t),t}function $V(n,e){const t={},s=f(n,["baseModel"]);s!=null&&d(t,["baseModel"],s);const r=f(n,["preTunedModel"]);r!=null&&d(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&aP(l,t,e);const c=f(n,["config"]);return c!=null&&QV(c,t,e),t}function ZV(n,e){const t={},s=f(n,["name"]);return s!=null&&d(t,["_url","name"],s),t}function WV(n,e){const t={},s=f(n,["name"]);return s!=null&&d(t,["_url","name"],s),t}function jV(n,e,t){const s={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&d(e,["_query","pageToken"],l);const c=f(n,["filter"]);return e!==void 0&&c!=null&&d(e,["_query","filter"],c),s}function eP(n,e,t){const s={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&d(e,["_query","pageToken"],l);const c=f(n,["filter"]);return e!==void 0&&c!=null&&d(e,["_query","filter"],c),s}function tP(n,e){const t={},s=f(n,["config"]);return s!=null&&jV(s,t),t}function nP(n,e){const t={},s=f(n,["config"]);return s!=null&&eP(s,t),t}function iP(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&d(t,["sdkHttpResponse"],s);const r=f(n,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const l=f(n,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(m=>BS(m))),d(t,["tuningJobs"],c)}return t}function sP(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&d(t,["sdkHttpResponse"],s);const r=f(n,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const l=f(n,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(m=>um(m))),d(t,["tuningJobs"],c)}return t}function oP(n,e){const t={},s=f(n,["name"]);s!=null&&d(t,["model"],s);const r=f(n,["name"]);return r!=null&&d(t,["endpoint"],r),t}function rP(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=f(n,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),d(t,["examples","examples"],r)}return t}function aP(n,e,t){const s={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=f(n,["gcsUri"]);e!==void 0&&c!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=f(n,["gcsUri"]);e!==void 0&&c!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=f(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=f(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function BS(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&d(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&d(t,["name"],r);const l=f(n,["state"]);l!=null&&d(t,["state"],ES(l));const c=f(n,["createTime"]);c!=null&&d(t,["createTime"],c);const m=f(n,["tuningTask","startTime"]);m!=null&&d(t,["startTime"],m);const y=f(n,["tuningTask","completeTime"]);y!=null&&d(t,["endTime"],y);const p=f(n,["updateTime"]);p!=null&&d(t,["updateTime"],p);const T=f(n,["description"]);T!=null&&d(t,["description"],T);const E=f(n,["baseModel"]);E!=null&&d(t,["baseModel"],E);const S=f(n,["_self"]);return S!=null&&d(t,["tunedModel"],oP(S)),t}function um(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&d(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&d(t,["name"],r);const l=f(n,["state"]);l!=null&&d(t,["state"],ES(l));const c=f(n,["createTime"]);c!=null&&d(t,["createTime"],c);const m=f(n,["startTime"]);m!=null&&d(t,["startTime"],m);const y=f(n,["endTime"]);y!=null&&d(t,["endTime"],y);const p=f(n,["updateTime"]);p!=null&&d(t,["updateTime"],p);const T=f(n,["error"]);T!=null&&d(t,["error"],T);const E=f(n,["description"]);E!=null&&d(t,["description"],E);const S=f(n,["baseModel"]);S!=null&&d(t,["baseModel"],S);const w=f(n,["tunedModel"]);w!=null&&d(t,["tunedModel"],w);const G=f(n,["preTunedModel"]);G!=null&&d(t,["preTunedModel"],G);const B=f(n,["supervisedTuningSpec"]);B!=null&&d(t,["supervisedTuningSpec"],B);const K=f(n,["preferenceOptimizationSpec"]);K!=null&&d(t,["preferenceOptimizationSpec"],K);const W=f(n,["tuningDataStats"]);W!=null&&d(t,["tuningDataStats"],W);const ie=f(n,["encryptionSpec"]);ie!=null&&d(t,["encryptionSpec"],ie);const j=f(n,["partnerModelTuningSpec"]);j!=null&&d(t,["partnerModelTuningSpec"],j);const ue=f(n,["customBaseModel"]);ue!=null&&d(t,["customBaseModel"],ue);const he=f(n,["experiment"]);he!=null&&d(t,["experiment"],he);const fe=f(n,["labels"]);fe!=null&&d(t,["labels"],fe);const x=f(n,["outputUri"]);x!=null&&d(t,["outputUri"],x);const M=f(n,["pipelineJob"]);M!=null&&d(t,["pipelineJob"],M);const N=f(n,["serviceAccount"]);N!=null&&d(t,["serviceAccount"],N);const U=f(n,["tunedModelDisplayName"]);U!=null&&d(t,["tunedModelDisplayName"],U);const P=f(n,["veoTuningSpec"]);return P!=null&&d(t,["veoTuningSpec"],P),t}function lP(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&d(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&d(t,["name"],r);const l=f(n,["metadata"]);l!=null&&d(t,["metadata"],l);const c=f(n,["done"]);c!=null&&d(t,["done"],c);const m=f(n,["error"]);return m!=null&&d(t,["error"],m),t}function gE(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&d(t,["validationDatasetUri"],s);const r=f(n,["vertexDatasetResource"]);return r!=null&&d(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uP extends rs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new zo(os.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),l=await this.tuneMldevInternal(r);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:nm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=WV(e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>um(T))}else{const p=ZV(e);return m=de("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>BS(T))}}async listInternal(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=nP(e);return m=de("tuningJobs",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=sP(T),S=new Qv;return Object.assign(S,E),S})}else{const p=tP(e);return m=de("tunedModels",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=iP(T),S=new Qv;return Object.assign(S,E),S})}}async cancel(e){var t,s,r,l;let c,m="",y={};if(this.apiClient.isVertexAI()){const p=zV(e);return m=de("{name}:cancel",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=JV(T),S=new Xv;return Object.assign(S,E),S})}else{const p=HV(e);return m=de("{name}:cancel",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:T.headers},S})),c.then(T=>{const E=YV(T),S=new Xv;return Object.assign(S,E),S})}}async tuneInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const m=$V(e,e);return l=de("tuningJobs",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),r.then(y=>um(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=XV(e);return l=de("tunedModels",m._url),c=m._query,delete m._url,delete m._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),r.then(y=>lP(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cP{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const fP=1024*1024*8,dP=3,hP=1e3,mP=2,Zc="x-goog-upload-status";async function pP(n,e,t){var s;const r=await FS(n,e,t),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[Zc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function gP(n,e,t){var s;const r=await FS(n,e,t),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[Zc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=pS(l),m=new jm;return Object.assign(m,c),m}async function FS(n,e,t){var s,r;let l=0,c=0,m=new im(new Response),y="upload";for(l=n.size;c<l;){const p=Math.min(fP,l-c),T=n.slice(c,c+p);c+p>=l&&(y+=", finalize");let E=0,S=hP;for(;E<dP&&(m=await t.request({path:"",body:T,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":String(c),"Content-Length":String(p)}}}),!(!((s=m==null?void 0:m.headers)===null||s===void 0)&&s[Zc]));)E++,await _P(S),S=S*mP;if(c+=p,((r=m==null?void 0:m.headers)===null||r===void 0?void 0:r[Zc])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return m}async function yP(n){return{size:n.size,type:n.type}}function _P(n){return new Promise(e=>setTimeout(e,n))}class TP{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await pP(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await gP(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await yP(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vP{create(e,t,s){return new EP(e,t,s)}}class EP{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yE="x-goog-api-key";class SP{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(yE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(yE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AP="gl-node/";class _E{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=j1(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new SP(this.apiKey);this.apiClient=new W2({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:AP+"web",uploader:new TP,downloader:new cP}),this.models=new yV(this.apiClient),this.live=new fV(this.apiClient,r,new vP),this.batches=new Nx(this.apiClient),this.chats=new uD(this.models,this.apiClient),this.caches=new rD(this.apiClient),this.files=new TD(this.apiClient),this.operations=new _V(this.apiClient),this.authTokens=new PV(this.apiClient),this.tunings=new uP(this.apiClient),this.fileSearchStores=new FV(this.apiClient)}}const CP=["","","","","",""," "],RP=({user:n,onLogout:e,onUpdateUser:t})=>{const[s,r]=ke.useState(U_()),[l,c]=ke.useState(Bn().toLocaleTimeString("ar-EG")),[m,y]=ke.useState(""),[p,T]=ke.useState(!1),[E,S]=ke.useState(!1),[w,G]=ke.useState(!1),[B,K]=ke.useState(""),[W,ie]=ke.useState(""),[j,ue]=ke.useState(!1),[he,fe]=ke.useState(""),[x,M]=ke.useState(""),[N,U]=ke.useState(""),[P,k]=ke.useState(!1),b=Bn(),re=n.lastCheckIn&&Jr(new Date(n.lastCheckIn),b),Se=re&&n.attendanceLog?n.attendanceLog.find(ae=>Jr(new Date(ae.date),b)):null;ke.useEffect(()=>{const ae=setInterval(()=>{r(U_()),c(Bn().toLocaleTimeString("ar-EG"))},1e4);return Y(),()=>clearInterval(ae)},[]);const Y=async()=>{if(!m){T(!0);try{const Re=await new _E({apiKey:"PLACEHOLDER_API_KEY"}).models.generateContent({model:"gemini-2.5-flash",contents:`         ${n.fullName.split(" ")[0]}    .    20 .`});y(Re.text)}catch(ae){console.error("AI error",ae)}finally{T(!1)}}},oe=()=>{if(re){alert("     .  .");return}G(!0)},Te=async()=>{if(!B){alert("     ");return}if(!W.trim()){alert("   ");return}S(!0);const ae=await H1(n.id,B,W);ae.success&&ae.user?(alert(ae.message),t(ae.user),G(!1),K(""),ie(""),new _E({apiKey:"PLACEHOLDER_API_KEY"}).models.generateContent({model:"gemini-2.5-flash",contents:`  ${n.fullName}       ${B}    30 .`}).then(Pe=>y(Pe.text))):(alert(ae.message),G(!1)),S(!1)},Ge=async()=>{if(!confirm("     "))return;S(!0);const ae=await z1(n.id);ae?(t(ae),alert("!    .   .")):alert("   "),S(!1)},Ke=async ae=>{if(ae.preventDefault(),!N.trim())return;k(!0);const Re=await J1(n.id,N);Re?(t(Re),U(""),alert("     ")):alert(" "),k(!1)},q=async ae=>{if(ae.preventDefault(),he.length<4){alert("     4   ");return}if(he!==x){alert("   ");return}S(!0),await G1(n.id,he)?(alert("    "),ue(!1),fe(""),M("")):alert("     "),S(!1)},ce=440-440*Math.min(n.streak/30*100,100)/100,pe=n.messages?[...n.messages].reverse():[];return D.jsxs("div",{className:"max-w-4xl mx-auto p-4 space-y-6",children:[D.jsxs("header",{className:"flex justify-between items-center bg-white p-4 rounded-lg shadow-md border-b-4 border-islamic-gold",children:[D.jsxs("div",{children:[D.jsxs("h2",{className:"text-xl font-bold text-islamic-dark",children:["  ",n.fullName]}),D.jsx("p",{className:"text-sm text-gray-500",children:"  "})]}),D.jsxs("div",{className:"flex items-center gap-3",children:[D.jsxs("button",{onClick:()=>ue(!0),className:"text-gray-500 hover:text-islamic-dark font-semibold text-sm flex items-center gap-1",children:[D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:D.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),""]}),D.jsx("button",{onClick:e,className:"text-red-500 hover:text-red-700 font-semibold text-sm",children:""})]})]}),D.jsxs("div",{className:"bg-gradient-to-r from-islamic-dark to-teal-900 text-white p-6 rounded-xl shadow-lg text-center relative overflow-hidden",children:[D.jsxs("div",{className:"relative z-10",children:[D.jsx("p",{className:"text-lg opacity-90",children:bC()}),D.jsx("p",{className:"text-3xl font-bold font-serif my-2",children:l}),D.jsx("p",{className:"text-sm opacity-80",children:VC()}),D.jsx("p",{className:"mt-4 text-islamic-gold font-bold bg-black bg-opacity-20 inline-block px-4 py-1 rounded-full",children:" "})]}),D.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-white opacity-5 rounded-full blur-2xl"})]}),m&&D.jsx("div",{className:"bg-indigo-50 border-r-4 border-indigo-400 p-4 rounded shadow-sm",children:D.jsxs("p",{className:"text-indigo-800 italic text-center text-lg font-serif",children:['"',m,'"']})}),D.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[D.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md flex flex-col items-center justify-center",children:[D.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-4",children:" "}),D.jsxs("div",{className:"relative w-40 h-40",children:[D.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[D.jsx("circle",{cx:"80",cy:"80",r:"70",stroke:"#e5e7eb",strokeWidth:"10",fill:"transparent"}),D.jsx("circle",{cx:"80",cy:"80",r:"70",stroke:"#d4af37",strokeWidth:"10",fill:"transparent",strokeDasharray:"440",strokeDashoffset:ce,className:"transition-all duration-1000"})]}),D.jsxs("div",{className:"absolute top-0 left-0 w-full h-full flex flex-col items-center justify-center",children:[D.jsx("span",{className:"text-4xl font-bold text-islamic-dark",children:n.streak}),D.jsx("span",{className:"text-xs text-gray-500",children:" 30 "})]})]}),n.streak>=30?D.jsxs("div",{className:"mt-6 text-center",children:[D.jsx("p",{className:"text-green-600 font-bold mb-2",children:" 30 !   "}),n.claimedReward?D.jsx("div",{className:"bg-yellow-50 text-yellow-800 px-4 py-2 rounded-lg border border-yellow-200",children:"  "}):D.jsx("button",{onClick:Ge,disabled:E,className:"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white px-6 py-2 rounded-full shadow hover:scale-105 transition animate-pulse font-bold disabled:opacity-50",children:E?" ...":" "})]}):D.jsx("p",{className:"mt-4 text-center text-gray-600 text-sm",children:"        !"})]}),D.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md flex flex-col items-center justify-between",children:[D.jsxs("div",{className:"text-center w-full",children:[D.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-2",children:" "}),re?D.jsxs("div",{className:"bg-green-50 border border-green-200 p-4 rounded-lg mb-4",children:[D.jsx("div",{className:"flex items-center justify-center text-green-600 mb-2",children:D.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),D.jsx("p",{className:"text-green-800 font-bold",children:"   "}),Se&&D.jsxs("div",{className:"text-sm text-gray-600 mt-2 space-y-1",children:[D.jsxs("p",{children:[": ",D.jsx("span",{className:"font-semibold text-islamic-dark",children:Se.mosque})]}),D.jsxs("p",{children:[": ",D.jsx("span",{className:"font-semibold text-islamic-dark",children:Se.imam})]})]})]}):D.jsxs(D.Fragment,{children:[D.jsxs("div",{className:"bg-gray-100 p-3 rounded mb-4",children:[D.jsx("p",{className:"text-gray-600 text-sm",children:"  "}),D.jsx("p",{className:"text-2xl font-serif text-islamic-dark",children:s.fajrTime})]}),D.jsx("p",{className:`text-sm mb-6 p-2 rounded ${s.isOpen?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:s.message}),!s.isOpen&&s.nextFajrCountdown&&D.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:["  : ",s.nextFajrCountdown]})]})]}),D.jsx("button",{onClick:oe,disabled:!s.isOpen||!!re,className:`w-full py-4 rounded-xl text-xl font-bold transition shadow-lg flex items-center justify-center gap-2
                    ${re?"bg-gray-400 text-white cursor-not-allowed":s.isOpen?"bg-islamic-accent text-white hover:bg-emerald-600 hover:-translate-y-1":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:re?D.jsxs(D.Fragment,{children:[D.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})," "]}):D.jsxs(D.Fragment,{children:[D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",viewBox:"0 0 20 20",fill:"currentColor",children:D.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})," "]})})]})]}),pe.length>0&&D.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border-t-4 border-blue-500",children:[D.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:D.jsx("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})})," "]}),D.jsx("div",{className:"max-h-60 overflow-y-auto space-y-3 pr-1",children:pe.map(ae=>D.jsxs("div",{className:`p-3 rounded-lg border text-sm ${ae.content.includes("")?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"}`,children:[D.jsxs("div",{className:"flex justify-between items-center mb-1",children:[D.jsx("span",{className:"font-bold text-gray-700",children:ae.content.includes("")?" ":""}),D.jsx("span",{className:"text-xs text-gray-500",children:new Date(ae.date).toLocaleDateString("ar-EG")})]}),D.jsx("p",{className:"text-gray-800 whitespace-pre-wrap",children:ae.content})]},ae.id))})]}),D.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[D.jsxs("h3",{className:"text-lg font-bold text-islamic-dark mb-2 flex items-center gap-2",children:[D.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[D.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),D.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}),"  "]}),D.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"        ."}),D.jsxs("form",{onSubmit:Ke,className:"space-y-3",children:[D.jsx("textarea",{value:N,onChange:ae=>U(ae.target.value),placeholder:"  ...",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-islamic-accent outline-none bg-gray-50 h-24 text-sm"}),D.jsx("button",{type:"submit",disabled:P||!N.trim(),className:`bg-islamic-dark text-white px-4 py-2 rounded shadow text-sm font-semibold transition ${P?"opacity-50":"hover:bg-teal-900"}`,children:P?" ...":" "})]})]}),w&&D.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:D.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md shadow-2xl transform transition-all scale-100",children:[D.jsx("h3",{className:"text-xl font-bold text-islamic-dark mb-4 text-center border-b pb-2",children:"  "}),D.jsxs("div",{className:"mb-4",children:[D.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-sm",children:"   "}),D.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-y-auto pr-1",children:CP.map(ae=>D.jsx("button",{onClick:()=>K(ae),className:`p-2 rounded border text-sm transition text-center ${B===ae?"bg-islamic-dark text-white border-islamic-dark shadow-md":"bg-gray-50 border-gray-200 hover:bg-gray-100 text-gray-700"}`,children:ae},ae))})]}),D.jsxs("div",{className:"mb-4",children:[D.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-sm",children:"    "}),D.jsx("input",{type:"text",value:W,onChange:ae=>ie(ae.target.value),placeholder:"   ...",className:"w-full border border-gray-300 px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-islamic-accent bg-gray-50"})]}),D.jsxs("div",{className:"bg-red-50 border-r-4 border-red-500 p-3 mb-6 rounded text-right",children:[D.jsx("p",{className:"font-bold text-red-700 text-sm",children:"  :"}),D.jsxs("p",{className:"text-xs text-red-600 mt-1 leading-relaxed",children:["    .       ",D.jsx("span",{className:"font-bold underline",children:"   "}),"   ."]})]}),D.jsxs("div",{className:"flex gap-3 mt-4",children:[D.jsx("button",{onClick:Te,disabled:E,className:`flex-1 bg-islamic-accent text-white py-2 rounded-lg font-bold transition shadow ${E?"opacity-50":"hover:bg-emerald-600"}`,children:E?" ...":" "}),D.jsx("button",{onClick:()=>G(!1),className:"flex-1 bg-gray-200 text-gray-800 py-2 rounded-lg font-bold hover:bg-gray-300 transition",children:""})]})]})}),j&&D.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:D.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm shadow-2xl",children:[D.jsx("h3",{className:"text-xl font-bold text-islamic-dark mb-4 text-center",children:"  "}),D.jsxs("form",{onSubmit:q,children:[D.jsxs("div",{className:"mb-4",children:[D.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-sm",children:"  "}),D.jsx("input",{type:"password",value:he,onChange:ae=>fe(ae.target.value),className:"w-full border p-2 rounded focus:ring-2 focus:ring-islamic-accent",placeholder:"******"})]}),D.jsxs("div",{className:"mb-6",children:[D.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-sm",children:"  "}),D.jsx("input",{type:"password",value:x,onChange:ae=>M(ae.target.value),className:"w-full border p-2 rounded focus:ring-2 focus:ring-islamic-accent",placeholder:"******"})]}),D.jsxs("div",{className:"flex gap-2",children:[D.jsx("button",{type:"submit",disabled:E,className:"flex-1 bg-islamic-dark text-white py-2 rounded hover:bg-opacity-90 transition font-bold disabled:opacity-50",children:E?"...":""}),D.jsx("button",{type:"button",onClick:()=>ue(!1),className:"flex-1 bg-gray-200 text-gray-800 py-2 rounded hover:bg-gray-300",children:""})]})]})]})})]})},IP=({onBack:n})=>{const[e,t]=ke.useState(!1),[s,r]=ke.useState(""),[l,c]=ke.useState([]),[m,y]=ke.useState("USERS"),[p,T]=ke.useState(!1),[E,S]=ke.useState(""),[w,G]=ke.useState(""),[B,K]=ke.useState(null),[W,ie]=ke.useState("");ke.useEffect(()=>{e&&j()},[e,m]);const j=async()=>{T(!0);const re=await Bo();c(re),T(!1)},ue=async re=>{re.preventDefault(),T(!0),await B1(s)?(t(!0),await j()):alert("   "),T(!1)},he=async(re,Se,Y)=>{if(re.preventDefault(),!window.confirm(`       "${Y}"  `))return;const oe=window.prompt("      (  ):","     ");if(oe&&oe.trim().length>0){T(!0);const Te=await Y1(Se,oe);c(Te),T(!1),alert(`    ${Y}    .`)}else oe!==null&&alert(" :    .")},fe=async(re,Se,Y)=>{if(re.preventDefault(),window.confirm("    ")){T(!0);const oe=await Q1(Se,Y);c(oe),T(!1)}},x=async re=>{if(re.preventDefault(),E.length<4){alert("   ");return}if(E!==w){alert("   ");return}T(!0),await F1(E),alert("     ."),S(""),G(""),T(!1)},M=async(re,Se)=>{if(!W.trim()){alert("  ");return}T(!0);const Y=await K1(re,W);c(Y),K(null),ie(""),T(!1),alert("   ")},N=Bn(),U=()=>{const re=[];for(const Se of l)Se.attendanceLog&&Se.attendanceLog.length>0&&Se.attendanceLog.forEach(Y=>{try{const oe=new Date(Y.date);Jr(oe,N)&&re.push({user:Se,record:Y})}catch(oe){console.error("Error parsing date:",Y.date,oe)}});return re},P=()=>{const re=[];return l.forEach(Se=>{Se.messages&&Se.messages.length>0&&Se.messages.forEach(Y=>{re.push({user:Se,content:Y.content,date:Y.date,id:Y.id})})}),re.sort((Se,Y)=>new Date(Y.date).getTime()-new Date(Se.date).getTime())},k=U(),b=P();return e?D.jsxs("div",{className:"p-4 md:p-8",children:[D.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[D.jsx("h2",{className:"text-3xl font-bold text-islamic-dark font-serif",children:" "}),D.jsxs("div",{className:"flex gap-2 flex-wrap justify-center",children:[D.jsx("button",{onClick:()=>y("USERS"),className:`px-4 py-2 rounded ${m==="USERS"?"bg-islamic-dark text-white":"bg-white text-gray-700"}`,children:""}),D.jsxs("button",{onClick:()=>y("TODAY_LOGS"),className:`px-4 py-2 rounded ${m==="TODAY_LOGS"?"bg-islamic-dark text-white":"bg-white text-gray-700"}`,children:["  (",k.length,")"]}),D.jsxs("button",{onClick:()=>y("MESSAGES"),className:`px-4 py-2 rounded ${m==="MESSAGES"?"bg-islamic-dark text-white":"bg-white text-gray-700"}`,children:[" (",b.length,")"]}),D.jsx("button",{onClick:()=>y("SETTINGS"),className:`px-4 py-2 rounded ${m==="SETTINGS"?"bg-islamic-dark text-white":"bg-white text-gray-700"}`,children:""}),D.jsx("button",{onClick:n,className:"bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300",children:""})]})]}),p&&D.jsx("div",{className:"text-center py-2 text-islamic-accent",children:"  ..."}),D.jsxs("div",{className:"overflow-x-auto bg-white rounded-lg shadow min-h-[400px]",children:[m==="USERS"&&D.jsxs("table",{className:"min-w-full leading-normal",children:[D.jsx("thead",{children:D.jsxs("tr",{children:[D.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:""}),D.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:""}),D.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider",children:" "}),D.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider",children:" "}),D.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider",children:""})]})}),D.jsx("tbody",{children:l.length===0&&!p?D.jsx("tr",{children:D.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"    "})}):l.map(re=>D.jsxs("tr",{children:[D.jsxs("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:[D.jsx("p",{className:"text-gray-900 whitespace-no-wrap font-bold",children:re.fullName}),D.jsxs("p",{className:"text-xs text-gray-400",children:[" : ",re.password]})]}),D.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:D.jsx("p",{className:"text-gray-900 whitespace-no-wrap",dir:"ltr",children:re.phoneNumber})}),D.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm text-center",children:D.jsxs("span",{className:`relative inline-block px-3 py-1 font-semibold leading-tight ${re.streak>=30?"text-green-900":"text-gray-900"}`,children:[D.jsx("span",{"aria-hidden":!0,className:`absolute inset-0 opacity-50 rounded-full ${re.streak>=30?"bg-green-200":"bg-gray-200"}`}),D.jsxs("span",{className:"relative",children:[re.streak," / 30"]})]})}),D.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm text-center",children:re.claimedReward?D.jsx("div",{className:"flex flex-col items-center",children:D.jsx("span",{className:"inline-flex items-center gap-1 bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-bold border border-yellow-300",children:"  "})}):D.jsx("span",{className:"text-gray-400 text-xs",children:"-"})}),D.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm text-center",children:D.jsx("button",{onClick:Se=>he(Se,re.id,re.fullName),className:"bg-red-50 text-red-600 border border-red-200 px-3 py-1 rounded hover:bg-red-100 text-xs font-bold transition shadow-sm",children:" "})})]},re.id))})]}),m==="TODAY_LOGS"&&D.jsxs("table",{className:"min-w-full leading-normal",children:[D.jsx("thead",{children:D.jsxs("tr",{children:[D.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-islamic-light text-right text-xs font-semibold text-islamic-dark uppercase tracking-wider",children:""}),D.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-islamic-light text-right text-xs font-semibold text-islamic-dark uppercase tracking-wider",children:" "}),D.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-islamic-light text-right text-xs font-semibold text-islamic-dark uppercase tracking-wider",children:""}),D.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-islamic-light text-right text-xs font-semibold text-islamic-dark uppercase tracking-wider",children:""})]})}),D.jsx("tbody",{children:k.length===0?D.jsx("tr",{children:D.jsx("td",{colSpan:4,className:"text-center py-4",children:"      "})}):k.map((re,Se)=>D.jsxs("tr",{children:[D.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm font-bold",children:re.user.fullName}),D.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm dir-ltr text-right",children:new Date(re.record.date).toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"})}),D.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:re.record.mosque}),D.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:re.record.imam})]},Se))})]}),m==="MESSAGES"&&D.jsx("div",{className:"p-4",children:b.length===0?D.jsx("p",{className:"text-center text-gray-500",children:"   "}):D.jsx("div",{className:"space-y-4",children:b.map(re=>D.jsxs("div",{className:"border border-gray-200 rounded p-4 bg-gray-50 shadow-sm relative",children:[D.jsx("button",{onClick:Se=>fe(Se,re.user.id,re.id),className:"absolute top-2 left-2 text-red-400 hover:text-red-600",title:" ",children:D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:D.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),D.jsxs("div",{className:"flex justify-between items-start mb-2",children:[D.jsx("h4",{className:"font-bold text-islamic-dark",children:re.user.fullName}),D.jsx("span",{className:"text-xs text-gray-500",children:new Date(re.date).toLocaleString("ar-EG")})]}),D.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:re.content}),D.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[" : ",re.user.phoneNumber]}),!re.content.includes("")&&D.jsx("div",{className:"mt-4 pt-3 border-t border-gray-300",children:B===re.id?D.jsxs("div",{className:"space-y-2",children:[D.jsx("textarea",{value:W,onChange:Se=>ie(Se.target.value),placeholder:"  ...",className:"w-full p-2 border rounded bg-white text-sm h-20 focus:ring-2 focus:ring-islamic-accent outline-none"}),D.jsxs("div",{className:"flex gap-2",children:[D.jsx("button",{onClick:()=>M(re.user.id,re.id),disabled:p,className:"bg-islamic-dark text-white px-4 py-1 rounded text-sm font-bold hover:bg-opacity-90 disabled:opacity-50",children:" "}),D.jsx("button",{onClick:()=>{K(null),ie("")},className:"bg-gray-300 text-gray-700 px-4 py-1 rounded text-sm font-bold hover:bg-gray-400",children:""})]})]}):D.jsx("button",{onClick:()=>K(re.id),className:"bg-blue-50 text-blue-600 border border-blue-200 px-3 py-1 rounded text-xs font-bold hover:bg-blue-100 transition",children:"   "})})]},re.id))})}),m==="SETTINGS"&&D.jsxs("div",{className:"p-8 max-w-xl mx-auto",children:[D.jsx("h3",{className:"text-xl font-bold mb-6 text-islamic-dark border-b pb-2",children:"  "}),D.jsxs("form",{onSubmit:x,className:"bg-gray-50 p-6 rounded-lg border shadow-sm",children:[D.jsx("h4",{className:"font-bold text-gray-700 mb-4",children:"   "}),D.jsxs("div",{className:"mb-4",children:[D.jsx("label",{className:"block text-gray-600 mb-2 text-sm",children:"  "}),D.jsx("input",{type:"password",value:E,onChange:re=>S(re.target.value),className:"w-full border p-2 rounded focus:ring-2 focus:ring-islamic-accent outline-none",placeholder:"   "})]}),D.jsxs("div",{className:"mb-6",children:[D.jsx("label",{className:"block text-gray-600 mb-2 text-sm",children:"  "}),D.jsx("input",{type:"password",value:w,onChange:re=>G(re.target.value),className:"w-full border p-2 rounded focus:ring-2 focus:ring-islamic-accent outline-none",placeholder:"   "})]}),D.jsx("button",{type:"submit",disabled:p,className:"w-full bg-islamic-dark text-white py-2 rounded hover:bg-opacity-90 transition font-bold disabled:opacity-50",children:p?" ...":" "})]})]})]})]}):D.jsx("div",{className:"flex flex-col items-center justify-center min-h-[50vh] p-4",children:D.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full border-t-4 border-islamic-dark",children:[D.jsx("h2",{className:"text-2xl font-bold mb-4 text-center text-islamic-dark font-serif",children:"  "}),D.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[D.jsxs("div",{children:[D.jsx("label",{className:"block text-gray-700 mb-1",children:" "}),D.jsx("input",{type:"password",value:s,onChange:re=>r(re.target.value),className:"w-full border p-2 rounded focus:ring-2 focus:ring-islamic-accent outline-none"})]}),D.jsx("button",{type:"submit",disabled:p,className:"w-full bg-islamic-dark text-white p-2 rounded hover:bg-opacity-90 transition disabled:opacity-50",children:p?" ...":""}),D.jsx("button",{type:"button",onClick:n,className:"w-full text-gray-500 text-sm hover:underline",children:" "})]})]})})},wP=()=>{const[n,e]=ke.useState(Wi.LOGIN),[t,s]=ke.useState(null),[r,l]=ke.useState(!0);ke.useEffect(()=>{(async()=>{const E=await q1();E&&(s(E),e(Wi.DASHBOARD)),l(!1)})()},[]);const c=T=>{s(T),e(Wi.DASHBOARD)},m=()=>{O1(),s(null),e(Wi.LOGIN)},y=()=>{e(Wi.ADMIN)},p=()=>{switch(n){case Wi.ADMIN:return D.jsx(IP,{onBack:()=>e(Wi.LOGIN)});case Wi.DASHBOARD:return t?D.jsx(RP,{user:t,onLogout:m,onUpdateUser:s}):D.jsx("div",{className:"text-center p-10",children:"  ..."});default:return D.jsx(X1,{onLoginSuccess:c,onAdminClick:y})}};return r?D.jsx("div",{className:"min-h-screen flex items-center justify-center bg-islamic-light",children:D.jsx("div",{className:"text-xl font-serif text-islamic-dark animate-pulse",children:"    ..."})}):D.jsxs("div",{className:"min-h-screen bg-gray-50 text-gray-800 font-sans pb-10",children:[D.jsxs("div",{className:"bg-islamic-dark h-24 w-full relative overflow-hidden shadow-lg",children:[D.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/arabesque.png')] opacity-10"}),D.jsx("div",{className:"absolute top-4 left-4 z-30 group",title:" ",children:D.jsx("img",{src:"https://flagcdn.com/w160/eg.png",alt:" ",className:"w-[60px] h-[40px] object-cover shadow-md rounded-[4px] transform group-hover:scale-110 transition-transform duration-300 ring-1 ring-white/30"})}),D.jsx("div",{className:"container mx-auto h-full flex items-center justify-center px-4 relative z-10",children:D.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-white font-thuluth drop-shadow-md tracking-wide pt-2",children:"  "})})]}),D.jsx("div",{className:"container mx-auto px-4 -mt-6 relative z-20 mb-8",children:D.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 text-center border-t-4 border-islamic-gold max-w-3xl mx-auto",children:[D.jsx("p",{className:"text-xl md:text-2xl font-serif text-gray-800 leading-relaxed",children:'"        ..."'}),D.jsx("p",{className:"text-sm text-gray-500 mt-2 font-semibold",children:" "})]})}),D.jsx("main",{className:"container mx-auto px-4",children:p()}),D.jsx("footer",{className:"mt-12 text-center text-gray-400 text-sm",children:D.jsx("p",{children:"    "})})]})},HS=document.getElementById("root");if(!HS)throw new Error("Could not find root element to mount to");const NP=DC.createRoot(HS);NP.render(D.jsx(AC.StrictMode,{children:D.jsx(wP,{})}));
